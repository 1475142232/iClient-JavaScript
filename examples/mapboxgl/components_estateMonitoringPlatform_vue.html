<!--********************************************************************
* Copyright© 2000 - 2019 SuperMap Software Co.Ltd. All rights reserved.
*********************************************************************-->
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title data-i18n="resources.title_componentsEstateMonitoringPlatform_Vue"></title>
    <script type="text/javascript" include="vue" src="../js/include-web.js"></script>
    <script include="echarts-vue,iclient9-mapboxgl-vue,ant-design-vue"
        src="../../dist/mapboxgl/include-mapboxgl.js"></script>
    <script type="text/javascript" src="../data/estateMonitoringPlatformData.js"></script>
    <style>
        #main {
            margin: 0 auto;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            box-sizing: border-box;
            background: #000;
            position: relative;
        }

        @media screen and (max-width: 992px) {
            #main {
                overflow: auto;
            }
        }

        @media screen and (max-height: 640px) {
            #main {
                overflow: auto;
            }
        }
    </style>
</head>

<body style="margin: 0;background: #fff;">
    <div id="main">
        <a-row id="map-row">
            <a-col :md="6">
                <sm-time-text timeType="date" :font-style="{fontSize: '0.73vw'}" background="transparent"
                    text-color="#f2f2f2">
                </sm-time-text>
                <div class="year-plan-wrap">
                    <sm-text
                        :font-style="{fontSize: '0.94vw', lineHeight: '1.67vw', textAlign: 'center', fontWeight: 'bolder'}"
                        background="transparent" text-color="#fff" title="年度计划"></sm-text>
                    <div class="progress-holder">
                        <div class="progress-item">
                            <sm-progress type="circle" stroke-color="#15D1F2" text-color="#fff" :percent="55"
                                :stroke-width="8">
                            </sm-progress>
                            <sm-text
                                :font-style="{fontSize: '0.9375vw', lineHeight: '0.9375vw', textAlign: 'center', fontWeight: 'bolder'}"
                                background="transparent" text-color="#fff" title="销售金额"></sm-text>
                        </div>
                        <div class="progress-item">
                            <sm-progress type="circle" :stroke-width="8" stroke-color="#15D1F2" text-color="#fff"
                                :percent="35">
                            </sm-progress>
                            <sm-text
                                :font-style="{fontSize: '0.9375vw', lineHeight: '0.9375vw', textAlign: 'center', fontWeight: 'bolder'}"
                                text-color="#fff" background="transparent" title="销售回款"></sm-text>
                        </div>
                        <div class="progress-item">
                            <sm-progress type="circle" :stroke-width="8" stroke-color="#15D1F2" text-color="#fff"
                                :percent="60">
                            </sm-progress>
                            <sm-text
                                :font-style="{fontSize: '0.9375vw', lineHeight: '0.9375vw', textAlign: 'center', fontWeight: 'bolder'}"
                                text-color="#fff" background="transparent" title="营业收入"></sm-text>
                        </div>
                        <div class="progress-item">
                            <sm-progress type="circle" :stroke-width="8" stroke-color="#15D1F2" text-color="#fff"
                                :percent="40"></sm-progress>
                            <sm-text
                                :font-style="{fontSize: '0.9375vw', lineHeight: '0.9375vw', textAlign: 'center', fontWeight: 'bolder'}"
                                text-color="#fff" background="transparent" title="净利润"></sm-text>
                        </div>
                    </div>
                </div>
            </a-col>
            <a-col :md="12">
                <sm-text
                    :font-style="{fontSize: '1.82vw', lineHeight: '2.6vw', textAlign: 'center', fontWeight: 'bolder'}"
                    background="transparent" text-color="#fff" title="房产项目可视化监控平台"></sm-text>
                <div class="indicator-holder">
                    <sm-indicator title="土地出让金" unit="亿元" num="12320000" text-color="#fff" background="transparent">
                    </sm-indicator>
                    <sm-indicator title="回款金额" unit="元" num="12320000" text-color="#fff" background="transparent">
                    </sm-indicator>
                    <sm-indicator title="净利润" unit="元" num="12320000" text-color="#fff" background="transparent">
                    </sm-indicator>
                </div>
            </a-col>
            <a-col :md="6">
                <sm-text
                    :font-style="{fontSize: '0.94vw', lineHeight: '1.35vw', textAlign: 'center', fontWeight: 'bolder'}"
                    background="transparent" text-color="#fff" title="常规项目指标"></sm-text>
                <div class="normal-index-progress-holder">
                    <div class="progress-item">
                        <sm-progress type="circle" stroke-color="#15D1F2" text-color="#fff" :percent="20"
                            :stroke-width="10">
                        </sm-progress>
                        <sm-text
                            :font-style="{fontSize: '0.9375vw', lineHeight: '0.9375vw', textAlign: 'center', fontWeight: 'bolder'}"
                            background="transparent" text-color="#fff" title="施工类型"></sm-text>
                    </div>
                    <div class="progress-item">
                        <sm-progress type="circle" stroke-color="#15D1F2" text-color="#fff" :percent="60"
                            :stroke-width="10"> </sm-progress>
                        <sm-text
                            :font-style="{fontSize: '0.9375vw', lineHeight: '0.9375vw', textAlign: 'center', fontWeight: 'bolder'}"
                            background="transparent" text-color="#fff" title="施工总进度"></sm-text>
                    </div>
                </div>
            </a-col>
        </a-row>
        <a-row>
            <a-col :md="6">
                <div class="chart-item">
                    <sm-text
                        :font-style="{fontSize: '0.9vw', lineHeight: '1.35vw', textAlign: 'center', fontWeight: 'bolder'}"
                        background="transparent" text-color="#fff" title="销售金额统计"></sm-text>
                    <sm-chart icon-class="" :options="saleAmountOption" :color-group="colorGroup">
                    </sm-chart>
                </div>
                <div class="chart-item">
                    <sm-text
                        :font-style="{fontSize: '0.9vw', lineHeight: '1.35vw', textAlign: 'center', fontWeight: 'bolder'}"
                        background="transparent" text-color="#fff" title="销售回款趋势"></sm-text>
                    <sm-chart icon-class="" :options="saleReturnOption" :color-group="colorGroup">
                    </sm-chart>
                </div>
            </a-col>
            <a-col :md="12" id="map-col">
                <div class="map-holder">
                    <sm-web-map :map-options="mapOptions">
                        <sm-raster-layer v-bind="rasteLayerOptions"></sm-raster-layer>
                        <sm-geojson-layer :data="data" :layer-style="layerStyle"></sm-geojson-layer>
                    </sm-web-map>
                </div>
            </a-col>
            <a-col :md="6">
                <div class="chart-item">
                    <sm-text
                        :font-style="{fontSize: '0.9vw', lineHeight: '1.35vw', textAlign: 'center', fontWeight: 'bolder'}"
                        background="transparent" text-color="#fff" title="库存指标"></sm-text>
                    <sm-chart icon-class="" :options="stockIndexOption" :color-group="colorGroup">
                    </sm-chart>
                </div>
                <div class="chart-item">
                    <sm-text
                        :font-style="{fontSize: '0.9vw', lineHeight: '1.35vw', textAlign: 'center', fontWeight: 'bolder'}"
                        background="transparent" text-color="#fff" title="项目价值指标"></sm-text>
                    <sm-progress type="circle" stroke-color="#20DFCB" text-color="#fff" :percent="80"
                        :stroke-width="10">
                    </sm-progress>
                </div>
            </a-col>
        </a-row>
        <a-row>
            <a-col :md="6">
                <div class="chart-item">
                    <sm-text
                        :font-style="{fontSize: '0.9vw', lineHeight: '1.35vw', textAlign: 'center', fontWeight: 'bolder'}"
                        background="transparent" text-color="#fff" title="项目成本表"></sm-text>
                    <sm-chart icon-class="" :options="projectCostOption" :color-group="colorGroup">
                    </sm-chart>
                </div>
            </a-col>
            <a-col :md="12">
                <div class="chart-holder">
                    <div class="chart-item">
                        <sm-text
                            :font-style="{fontSize: '0.9vw', lineHeight: '1.35vw', textAlign: 'center', fontWeight: 'bolder'}"
                            background="transparent" text-color="#fff" title="营业收入情况"></sm-text>
                        <sm-chart icon-class="" :options="revenueOption" :color-group="colorGroup">
                        </sm-chart>
                    </div>
                    <div class="chart-item">
                        <sm-text
                            :font-style="{fontSize: '0.9vw', lineHeight: '1.35vw', textAlign: 'center', fontWeight: 'bolder'}"
                            background="transparent" text-color="#fff" title="投资盈利情况"></sm-text>
                        <sm-chart icon-class="" :options="investProfitOption" :color-group="colorGroup">
                        </sm-chart>
                    </div>

                </div>
            </a-col>
            <a-col :md="6">
                <div class="chart-item">
                    <sm-text
                        :font-style="{fontSize: '0.9vw', lineHeight: '1.35vw', textAlign: 'center', fontWeight: 'bolder'}"
                        background="transparent" text-color="#fff" title="库存情况"></sm-text>
                    <sm-chart icon-class="" :options="stockSituationOption" :color-group="colorGroup">
                    </sm-chart>
                </div>
            </a-col>
        </a-row>
        <a-button @click="changeTheme" class="theme-btn">切换主题</a-button>
    </div>

    <script>
        //本示例数据纯属虚构
        var host = window.isLocal ? window.server : "http://support.supermap.com.cn:8090";
        var attribution =
            "<a href='https://www.mapbox.com/about/maps/' target='_blank'> Mapbox </a>" +
            " with <span> <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a> | </span>" +
            " Map Data <span> <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> ";
        new Vue({
            el: "#main",
            data() {
                return {
                    theme: 'custom',
                    mapOptions: {
                        pitch: 60,
                        container: "map", // container id
                        style: {
                            version: 8,
                            sources: {},
                            layers: []
                        },
                        center: [116.47, 39.92], // starting position
                        zoom: 16 // starting zoom
                    },
                    rasteLayerOptions: {
                        mapUrl: host + '/iserver/services/map-china400/rest/maps/ChinaDark/zxyTileImage.png?z={z}&x={x}&y={y}',
                    },
                    data: '../data/buildings.json',
                    layerStyle: {
                        paint: {
                            "fill-extrusion-color": [
                                "case",
                                ["<", ["get", "height"], 2],
                                "#fbb03b",
                                ["<", ["get", "height"], 4],
                                "#223b53",
                                ["<", ["get", "height"], 8],
                                "#15D1F2",
                                ["<", ["get", "height"], 16],
                                "#15D1F2",
                                "#3bb2d0"
                            ],
                            "fill-extrusion-height": ["*", ["get", "height"], 5],
                            "fill-extrusion-opacity": 0.6
                        }
                    },
                    colorGroup: ["#15D1F2", "#499BFF", "#2C61FF", "#243BCC", "#67A9FF"],
                    ...estatePlatformDatas
                };
            },
            methods: {
                changeTheme() {
                    if (this.theme === 'dark') {
                        SuperMap.Components.setTheme({
                            background: 'transparent',
                            textColor: '#fff',
                            colorGroup: this.colorGroup
                        });
                        this.theme = 'custom';
                        this.layerStyle.paint['fill-extrusion-color'] = [
                            "case",
                            ["<", ["get", "height"], 2],
                            "#fbb03b",
                            ["<", ["get", "height"], 4],
                            "#223b53",
                            ["<", ["get", "height"], 8],
                            "#15D1F2",
                            ["<", ["get", "height"], 16],
                            "#15D1F2",
                            "#3bb2d0"
                        ];
                        return;
                    }
                    this.theme = 'dark';
                    this.layerStyle.paint['fill-extrusion-color'] = [
                        "case",
                        ["<", ["get", "height"], 2],
                        "#fbb03b",
                        ["<", ["get", "height"], 4],
                        "#223b53",
                        ["<", ["get", "height"], 8],
                        "#dd6b66",
                        ["<", ["get", "height"], 16],
                        "#dd6b66",
                        "#3bb2d0"
                    ];
                    SuperMap.Components.setTheme('dark');
                }
            }
        });
    </script>
    <style>
        #main .sm-component-text {
            display: block;
        }

        .ant-row .sm-component-time-text {
            display: block;
        }

        .progress-holder .progress-item {
            padding: 0 0.26vw;
            width: 23%;
            display: inline-block;
            vertical-align: top;
        }

        .progress-holder .progress-item .sm-component-text,
        .normal-index-progress-holder .progress-item .sm-component-text {
            margin-top: 1.07vh;
        }

        .progress-holder .progress-item .sm-component-progress {
            padding: 0 0.26vw;
            height: 11.34vh;
        }

        .indicator-holder {
            padding: 0 1.2vw;
            margin-top: 5.35vh;
            display: flex;
            justify-content: space-around;
        }

        .indicator-holder .sm-component-indicator {
            margin-right: 1.56vw;
        }

        .indicator-holder .sm-component-indicator .sm-component-indicator__title {
            font-size: 0.83vw;
            line-height: 1.56vw;
        }

        .indicator-holder .sm-component-indicator .sm-component-indicator__num {
            font-size: 1.15vw;
            text-indent: 0.26vw;
        }

        .indicator-holder .sm-component-indicator .sm-component-indicator__unit {
            font-size: 1.15vw;
            font-size: 0.83vw;
        }

        .normal-index-progress-holder {
            /* width: 85%; */
            margin: 1.07vh auto 0;
        }

        .normal-index-progress-holder .progress-item {
            width: 48%;
            padding: 0 1.56vw;
            display: inline-block;
        }

        .normal-index-progress-holder .progress-item .sm-component-progress,
        .chart-item .sm-component-progress {
            height: 13.9vh;
        }

        .chart-item .sm-component-text {
            margin-bottom: 1.07vh;
        }

        .ant-row .chart-item .sm-component-chart {
            height: 20.86vh;
        }

        .ant-row .chart-item .sm-component-card__content {
            width: 100%;
            height: 100%;
        }

        .map-holder {
            height: 50vh;
            padding: 0 0.78vw;
        }

        .chart-holder .chart-item {
            width: 49%;
            display: inline-block;
        }

        .theme-btn {
            position: absolute;
            left: 15px;
            bottom: 15px;
        }
    </style>
</body>

</html>
