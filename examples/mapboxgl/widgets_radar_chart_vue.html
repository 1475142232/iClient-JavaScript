<!--********************************************************************
* Copyright© 2000 - 2019 SuperMap Software Co.Ltd. All rights reserved.
*********************************************************************-->
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title data-i18n='resources.title_widgetsChart_Vue(radar)'></title>
    <script type="text/javascript" include="vue" src="../js/include-web.js"></script>
    <script include="echarts-vue,iclient9-mapboxgl-widgets-vue" src="../../dist/mapboxgl/include-mapboxgl.js"></script>
    <style>
        #main {
            margin: 0 auto;
            width: 100%;
            height: 100%;
        }

    </style>
</head>

<body style=" margin: 0;overflow: hidden;background: #fff;width: 100%;height:100%;position: absolute;top: 0;">
    <div id="main">
        <sm-web-map :web-map-options="{server: 'http://support.supermap.com.cn:8092/'}" map-id="1649097980">
        </sm-web-map>
        <sm-chart :style="chartStyle" icon-class="" :options="echartOption" ref="smChart"></sm-chart>
    </div>


    <script>
        new Vue({
            el: '#main',
            data() {

                return {
                    chartStyle: {
                        width: "400px",
                        height: "300px",
                        position: "absolute",
                        bottom: "10px",
                        right: "10px"
                    },
                    // 和echarts一样的配置
                    echartOption: {}
                };
            },
            mounted() {
                let datasets = {
                        type: "iPortal", //iServer iPortal
                        url: "http://support.supermap.com.cn:8092/web/datas/1920557079",
                        queryInfo: {
                            maxFeatures: 20
                        }
                    },
                    dataOptions = [{
                        seriesType: "radar", //图表类型
                        isStastic: true, //是否统计, 默认不统计
                        xField: "机场", //x坐标轴数据字段
                        yField: "同比增速%" //统计的数据，legned默认名字
                    }],
                    otherOption = {
                        tooltip: {
                            formatter: "{b0}: {c0}"
                        },
                    }
                    let EchartsDataService = SuperMap.Widgets.utils.EchartsDataService;
                    this.echartsDataService = new EchartsDataService();
                    this.echartsDataService.getDataOption(datasets, dataOptions).then(data => {
                        this.echartOption = Object.assign(data, otherOption);
                    }
                );
            }
        })

    </script>
</body>

</html>
