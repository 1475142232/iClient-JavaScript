<!--********************************************************************
* Copyright© 2000 - 2019 SuperMap Software Co.Ltd. All rights reserved.
*********************************************************************-->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title data-i18n="resources.title_componentsFireLayer_Vue"></title>
        <script type="text/javascript" include="vue,jquery" src="../js/include-web.js"></script>
        <script
            type="text/javascript"
            include="three,mapbox-gl-enhance,iclient9-mapboxgl-vue"
            src="../../dist/mapboxgl/include-mapboxgl.js"
        ></script>
        <style>
            #main {
                margin: 0 auto;
                width: 100%;
                height: 100%;
            }
        </style>
    </head>

    <body style=" margin: 0;overflow: hidden;background: #fff;width: 100%;height:100%;position: absolute;top: 0;">
        <div id="main">
            <sm-web-map :map-options="mapOptions" style="background:black">
                <sm-fire-layer :features="features" :model-scale='5.41843220338983e-6'></sm-fire-layer>
            </sm-web-map>
        </div>
        <script>
            var host = window.isLocal ? window.server : "http://support.supermap.com.cn:8090";
            var url = host + "/iserver/services/data-jingjin/rest/data";
            var sqlParam = new SuperMap.GetFeaturesBySQLParameters({
                queryParameter: {
                    attributeFilter: "SmID>0"
                },
                datasetNames: ["Jingjin:Town_P"],
                fromIndex: 0,
                toIndex: 5
            });

            new mapboxgl.supermap.FeatureService(url).getFeaturesBySQL(sqlParam, function(serviceResult) {
                var features = serviceResult.result.features;
                new Vue({
                    el: "#main",
                    data() {
                        var mapUrl = host + "/iserver/services/map-china400/rest/maps/ChinaDark";
                        var attribution =
                            "<a href='https://www.mapbox.com/about/maps/' target='_blank'>© Mapbox </a>" +
                            " with <span>© <a href='http://iclient.supermap.io' target='_blank'>SuperMap iClient</a> | </span>" +
                            " Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' target='_blank'>SuperMap iServer</a></span> ";
                        return {
                            mapOptions: {
                                container: "map",
                                style: {
                                    version: 8,
                                    sources: {
                                        "raster-tiles": {
                                            attribution: attribution,
                                            type: "raster",
                                            tiles: [mapUrl + "/zxyTileImage.png?z={z}&x={x}&y={y}"],
                                            tileSize: 256
                                        }
                                    },
                                    layers: [
                                        {
                                            id: "simple-tiles",
                                            type: "raster",
                                            source: "raster-tiles",
                                            minzoom: 0,
                                            maxzoom: 22
                                        }
                                    ]
                                },
                                center: [116.3850255890805, 39.90519670197787],
                                zoom: 13,
                                bearing: 0.8568,
                                pitch: 60
                            },
                            features: features
                        };
                    }
                });
            });
        </script>
    </body>
</html>
