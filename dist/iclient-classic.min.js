/*!
 * 
 *     iclient-classic.(http://iclient.supermapol.com)
 *     CopyrightÂ© 2000-2017 SuperMap Software Co. Ltd
 *     license: Apache-2.0
 *     version: v9.0.0
 * 
 */
!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=40)}([function(e,t,r){"use strict";var n=window.SuperMap=window.SuperMap||{};e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryType=t.StatisticAnalystMode=t.AnalystSizeUnit=t.AnalystAreaUnit=t.ClipAnalystMode=t.ChartType=t.ClientType=t.ServerType=t.Exponent=t.VariogramMode=t.InterpolationAlgorithmType=t.SearchMode=t.PixelFormat=t.StatisticMode=t.LayerType=t.ColorSpaceType=t.GridType=t.TransferPreference=t.TransferTactic=t.EditType=t.DataReturnMode=t.SurfaceAnalystMethod=t.SmoothMethod=t.OverlayOperationType=t.BufferEndType=t.TurnType=t.SupplyCenterType=t.SideType=t.DirectionType=t.LabelOverLengthMode=t.LabelBackShape=t.AlongLineDirection=t.FillGradientMode=t.TextAlignment=t.ColorGradientType=t.ThemeType=t.RangeMode=t.GraduatedMode=t.GraphAxesTextDisplayMode=t.ThemeGraphType=t.ThemeGraphTextFormat=t.EngineType=t.Unit=t.MeasureMode=t.SpatialRelationType=t.SpatialQueryMode=t.JoinType=t.QueryOption=t.GeometryType=t.DataFormat=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0));t.DataFormat=n.default.DataFormat={GEOJSON:"GEOJSON",ISERVER:"ISERVER"},t.GeometryType=n.default.GeometryType={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",UNKNOWN:"UNKNOWN"},t.QueryOption=n.default.QueryOption={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},t.JoinType=n.default.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},t.SpatialQueryMode=n.default.SpatialQueryMode={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},t.SpatialRelationType=n.default.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},t.MeasureMode=n.default.MeasureMode={DISTANCE:"DISTANCE",AREA:"AREA"},t.Unit=n.default.Unit={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},t.EngineType=n.default.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},t.ThemeGraphTextFormat=n.default.ThemeGraphTextFormat={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},t.ThemeGraphType=n.default.ThemeGraphType={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},t.GraphAxesTextDisplayMode=n.default.GraphAxesTextDisplayMode={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},t.GraduatedMode=n.default.GraduatedMode={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},t.RangeMode=n.default.RangeMode={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},t.ThemeType=n.default.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},t.ColorGradientType=n.default.ColorGradientType={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},t.TextAlignment=n.default.TextAlignment={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},t.FillGradientMode=n.default.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},t.AlongLineDirection=n.default.AlongLineDirection={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},t.LabelBackShape=n.default.LabelBackShape={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},t.LabelOverLengthMode=n.default.LabelOverLengthMode={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},t.DirectionType=n.default.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},t.SideType=n.default.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},t.SupplyCenterType=n.default.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},t.TurnType=n.default.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},t.BufferEndType=n.default.BufferEndType={FLAT:"FLAT",ROUND:"ROUND"},t.OverlayOperationType=n.default.OverlayOperationType={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},t.SmoothMethod=n.default.SmoothMethod={BSPLINE:"BSPLINE",POLISH:"POLISH"},t.SurfaceAnalystMethod=n.default.SurfaceAnalystMethod={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},t.DataReturnMode=n.default.DataReturnMode={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},t.EditType=n.default.EditType={ADD:"add",UPDATE:"update",DELETE:"delete"},t.TransferTactic=n.default.TransferTactic={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},t.TransferPreference=n.default.TransferPreference={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},t.GridType=n.default.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},t.ColorSpaceType=n.default.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},t.LayerType=n.default.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},t.StatisticMode=n.default.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},t.PixelFormat=n.default.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},t.SearchMode=n.default.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},t.InterpolationAlgorithmType=n.default.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},t.VariogramMode=n.default.VariogramMode={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},t.Exponent=n.default.Exponent={EXP1:"EXP1",EXP2:"EXP2"},t.ServerType=n.default.ServerType={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},t.ClientType=n.default.ClientType={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},t.ChartType=n.default.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},t.ClipAnalystMode=n.default.ClipAnalystMode={CLIP:"clip",INTERSECT:"intersect"},t.AnalystAreaUnit=n.default.AnalystAreaUnit={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},t.AnalystSizeUnit=n.default.AnalystSizeUnit={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},t.StatisticAnalystMode=n.default.StatisticAnalystMode={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},t.SummaryType=n.default.SummaryType={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=n(r(0)),p=n(r(4)),c=r(5),f=function(e){function t(e,r){i(this,t),(r=r||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"];var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.CLASS_NAME="SuperMap.ProcessingServiceBase",n}return a(t,p.default),u(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;c.FetchRequest.get(e).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,r,n){var i=this,o=null;t&&t instanceof r&&(o=new Object,r.toObject(t,o));var a={headers:{"Content-Type":"application/x-www-form-urlencoded"}};c.FetchRequest.post(i._processUrl(e),JSON.stringify(o),a).then(function(e){return e.json()}).then(function(e){e.succeed?i.serviceProcessCompleted(e,n):i.serviceProcessFailed(e)}).catch(function(e){i.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=l.default.Util.transformResult(e),t=t||1e3;var r=this;if(e)var n=setInterval(function(){c.FetchRequest.get(e.newResourceLocation).then(function(e){return e.json()}).then(function(e){r.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"===e.state.runState&&(clearInterval(n),r.events.triggerEvent("processFailed",{error:e.state.errorMsg})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(n),r.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(n),r.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serviceProcessFailed",this).call(this,e)}},{key:"_processUrl",value:function(e){return-1===e.indexOf(".json")&&(e+=".json"),l.default.SecurityManager.getToken(e)&&(e+="?token="+l.default.SecurityManager.getToken(e)),e}}]),t}();t.default=f,l.default.ProcessingServiceBase=f},function(e,t,r){"use strict";var n=window.SuperMap=window.SuperMap||{};n.REST=n.REST||{},e.exports=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(5);r(18),r(16),r(35);var u=function(){function e(t,r){n(this,e),this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.serverType=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.CLASS_NAME="SuperMap.CommonServiceBase";var i=this;o.default.Util.isArray(t)?(i.urls=t,i.length=t.length,i.totalTimes=i.length,1===i.length?i.url=t[0]:(i.index=parseInt(Math.random()*i.length),i.url=t[i.index])):(i.totalTimes=1,i.url=t),o.default.Util.isArray(t)&&!i.isServiceSupportPolling()&&(i.url=t[0],i.totalTimes=1),i.serverType=i.serverType||o.default.ServerType.ISERVER,(r=r||{})&&o.default.Util.extend(this,r),i.isInTheSameDomain=o.default.Util.isInTheSameDomain(i.url),i.events=new o.default.Events(i,null,i.EVENT_TYPES,!0),i.eventListeners instanceof Object&&i.events.on(i.eventListeners)}return i(e,[{key:"destroy",value:function(){var e=this;o.default.Util.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=this;e.url=e.url||t.url,e.isInTheSameDomain=t.isInTheSameDomain;var r=this.getCredential(e.url);if(r){var n=e.url.substring(e.url.length-1,e.url.length);e.url.indexOf("?")>-1&&"?"===n?e.url+=r.getUrlParameters():e.url.indexOf("?")>-1&&"?"!==n?e.url+="&"+r.getUrlParameters():e.url+="?"+r.getUrlParameters()}t.calculatePollingTimes(),t._processSuccess=e.success,t._processFailed=e.failure,e.scope=t,e.success=t.getUrlCompleted,e.failure=t.getUrlFailed,t.options=e,t._commit(t.options)}},{key:"getCredential",value:function(e){var t=e,r=void 0,n=void 0;switch(this.serverType){case o.default.ServerType.ISERVER:r=(n=o.default.SecurityManager.getToken(t))?new o.default.Credential(n,"token"):null;break;case o.default.ServerType.IPORTAL:(r=(n=o.default.SecurityManager.getToken(t))?new o.default.Credential(n,"token"):null)||(r=(n=o.default.SecurityManager.getKey(t))?new o.default.Credential(n,"key"):null);break;case o.default.ServerType.ONLINE:r=(n=o.default.SecurityManager.getKey(t))?new o.default.Credential(n,"key"):null;break;default:r=(n=o.default.SecurityManager.getToken(t))?new o.default.Credential(n,"token"):null}return r}},{key:"getUrlCompleted",value:function(e){this._processSuccess(e)}},{key:"getUrlFailed",value:function(e){var t=this;t.totalTimes>0?(t.totalTimes--,t.ajaxPolling()):t._processFailed(e)}},{key:"ajaxPolling",value:function(){var e=this,t=e.options.url,r=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(r,r.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=o.default.Util.isInTheSameDomain(t),e._commit(e.options)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){var e=this;return!("SuperMap.REST.ThemeService"===e.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===e.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e){e=o.default.Util.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function(e){var t=(e=o.default.Util.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t})}},{key:"_commit",value:function(e){"POST"!==e.method&&"PUT"!==e.method||(e.params&&(e.url=o.default.Util.urlAppend(e.url,o.default.Util.getParameterString(e.params||{}))),e.params=e.data),a.FetchRequest.commit(e.method,e.url,e.params,{headers:e.headers,withCredentials:e.withCredentials,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text()}).then(function(t){var r=(new o.default.Format.JSON).read(t);r||(r={error:t}),r.error?(e.scope?o.default.Function.bind(e.failure,e.scope):e.failure)(r.error):(r.succeed=void 0==r.succeed||r.succeed,(e.scope?o.default.Function.bind(e.success,e.scope):e.success)(r))})}}]),e}();t.default=u,o.default.CommonServiceBase=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FetchRequest=t.Support=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(r(14)),a=n(r(13)),u=n(r(0)),s=t.Support=u.default.Support=u.default.Support||{cors:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest};t.FetchRequest=u.default.FetchRequest={commit:function(e,t,r,n){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,r,n);case"POST":return this.post(t,r,n);case"PUT":return this.put(t,r,n);case"DELETE":return this.delete(t,r,n);default:return this.get(t,r,n)}},get:function(e,t,r){if(e=this._processUrl(e,r),e=u.default.Util.urlAppend(e,this._getParameterString(t||{})),!this.urlIsLong(e)){if(u.default.Util.isInTheSameDomain(e)||s.cors||r.proxy)return this._fetch(e,t,r,"GET");if(!u.default.Util.isInTheSameDomain(e))return e=e.replace(".json",".jsonp"),this._fetchJsonp(e,r)}return this._postSimulatie("GET",e.substring(0,e.indexOf("?")-1),t,r)},delete:function(e,t,r){return e=this._processUrl(e,r),e=u.default.Util.urlAppend(e,this._getParameterString(t||{})),!this.urlIsLong(e)&&s.cors?this._fetch(e,t,r,"DELETE"):this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")-1),t,r)},post:function(e,t,r){return this._fetch(this._processUrl(e,r),t,r,"POST")},put:function(e,t,r){return this._fetch(this._processUrl(e,r),t,r,"PUT")},urlIsLong:function(e){for(var t=0,r=null,n=0,i=e.length;n<i;n++)(r=e.charCodeAt(n))<127?t++:128<=r&&r<=2047?t+=2:2048<=r&&r<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,r,n){return t+=(t.indexOf("?")>-1?"&":"?")+"_method= "+e,this.post(t,r,n)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json"))if(e.indexOf("?")<0)e+=".json";else{var r=e.split("?");2===r.length&&(e=r[0]+".json?"+r[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,r,n){return r=r||{},r.headers=r.headers||{},r.headers["Content-Type"]||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,(0,o.default)(e,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?t:void 0,credentials:r.withCredentials?"include":"omit",mode:"cors"}).then(function(e){return e})):(0,o.default)(e,{method:n,body:"PUT"===n||"POST"===n?t:void 0,headers:r.headers,credentials:r.withCredentials?"include":"omit",mode:"cors"}).then(function(e){return e})},_fetchJsonp:function(e,t){return t=t||{},(0,a.default)(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},e),t.then(r,n)})},_getParameterString:function(e){var t=[];for(var r in e){var n=e[r];if(null!=n&&"function"!=typeof n){var o;if("object"===(void 0===n?"undefined":i(n))&&n.constructor===Array){for(var a,u=[],s=0,l=n.length;s<l;s++)a=n[s],u.push(encodeURIComponent(null===a||void 0===a?"":a));o="["+u.join(",")+"]"}else o=encodeURIComponent(n);t.push(encodeURIComponent(r)+"="+o)}}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayExt=t.FunctionExt=t.NumberExt=t.StringExt=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(r(0));i.default.inherit=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r;var n,o,a;for(n=2,o=arguments.length;n<o;n++)"function"==typeof(a=arguments[n])&&(a=a.prototype),i.default.Util.extend(e.prototype,a)},i.default.mixin=function(){function e(e,t){var r=!0,n=!1,i=void 0;try{for(var o,a=Reflect.ownKeys(t)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;if("constructor"!==u&&"prototype"!==u&&"name"!==u){var s=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(e,u,s)}}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}}for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=function t(i){n(this,t);var o=!0,a=!1,u=void 0;try{for(var s,l=r[Symbol.iterator]();!(o=(s=l.next()).done);o=!0)e(this,new(0,s.value)(i))}catch(e){a=!0,u=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw u}}},a=!0,u=!1,s=void 0;try{for(var l,p=r[Symbol.iterator]();!(a=(l=p.next()).done);a=!0){var c=l.value;e(o,c),e(o.prototype,c.prototype),e(o.prototype,new c)}}catch(e){u=!0,s=e}finally{try{!a&&p.return&&p.return()}finally{if(u)throw s}}return o};t.StringExt=i.default.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),r=t[0],n=1,i=t.length;n<i;n++){var o=t[n];r+=o.charAt(0).toUpperCase()+o.substring(1)}return r},format:function(e,t,r){t||(t=window);return e.replace(i.default.String.tokenRegEx,function(e,n){for(var i,o=n.split(/\.+/),a=0;a<o.length;a++)0==a&&(i=t),i=i[o[a]];return"function"==typeof i&&(i=r?i.apply(null,r):i()),void 0===i?"undefined":i})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return i.default.String.numberRegEx.test(e)},numericIf:function(e){return i.default.String.isNumeric(e)?parseFloat(e):e}};var o=t.NumberExt=i.default.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var r=0;return t>0&&(r=parseFloat(e.toPrecision(t))),r},format:function(e,t,r,n){t=void 0!==t?t:0,r=void 0!==r?r:i.default.Number.thousandsSeparator,n=void 0!==n?n:i.default.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var o=e.toString().split(".");1===o.length&&null==t&&(t=0);var a=o[0];if(r)for(var u=/(-?[0-9]+)([0-9]{3})/;u.test(a);)a=a.replace(u,"$1"+r+"$2");var s;if(0==t)s=a;else{var l=o.length>1?o[1]:"0";null!=t&&(l+=new Array(t-l.length+1).join("0")),s=a+n+l}return s}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return o.limitSigDigs(this,e)});t.FunctionExt=i.default.Function={bind:function(e,t){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,n)}},bindAsEventListener:function(e,t){return function(r){return e.call(t,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},t.ArrayExt=i.default.Array={filter:function(e,t,r){var n=[];if(Array.prototype.filter)n=e.filter(t,r);else{var i=e.length;if("function"!=typeof t)throw new TypeError;for(var o=0;o<i;o++)if(o in e){var a=e[o];t.call(r,a,o,e)&&n.push(a)}}return n}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Util=void 0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_SuperMap=__webpack_require__(0),_SuperMap2=_interopRequireDefault(_SuperMap);__webpack_require__(6);var Util=exports.Util=_SuperMap2.default.Util=_SuperMap2.default.Util||{};_SuperMap2.default.Util.extend=function(e,t){if(e=e||{},t){for(var r in t){var n=t[r];void 0!==n&&(e[r]=n)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},_SuperMap2.default.Util.copy=function(e,t){e=e||{};var r;if(t)for(var n in e)void 0!==(r=t[n])&&(e[n]=r)},_SuperMap2.default.Util.reset=function(e){e=e||{};for(var t in e)if(e.hasOwnProperty(t)){if("object"===_typeof(e[t])&&e[t]instanceof Array){for(var r in e[t])e[t][r].destroy&&e[t][r].destroy();e[t].length=0}else"object"===_typeof(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},_SuperMap2.default.Util.getElement=function(){for(var e=[],t=0,r=arguments.length;t<r;t++){var n=arguments[t];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;e.push(n)}return e},_SuperMap2.default.Util.isElement=function(e){return!(!e||1!==e.nodeType)},_SuperMap2.default.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},_SuperMap2.default.Util.removeItem=function(e,t){for(var r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1);return e},_SuperMap2.default.Util.indexOf=function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},_SuperMap2.default.Util.modifyDOMElement=function(e,t,r,n,i,o,a,u){t&&(e.id=t),r&&(e.style.left=r.x+"px",e.style.top=r.y+"px"),n&&(e.style.width=n.w+"px",e.style.height=n.h+"px"),i&&(e.style.position=i),o&&(e.style.border=o),a&&(e.style.overflow=a),parseFloat(u)>=0&&parseFloat(u)<1?(e.style.filter="alpha(opacity="+100*u+")",e.style.opacity=u):1===parseFloat(u)&&(e.style.filter="",e.style.opacity="")},_SuperMap2.default.Util.createDiv=function(e,t,r,n,i,o,a,u){var s=document.createElement("div");return n&&(s.style.backgroundImage="url("+n+")"),e||(e=_SuperMap2.default.Util.createUniqueID("SuperMapDiv")),i||(i="absolute"),_SuperMap2.default.Util.modifyDOMElement(s,e,t,r,i,o,a,u),s},_SuperMap2.default.Util.createImage=function(e,t,r,n,i,o,a,u){var s=document.createElement("img");return e||(e=_SuperMap2.default.Util.createUniqueID("SuperMapDiv")),i||(i="relative"),_SuperMap2.default.Util.modifyDOMElement(s,e,t,r,i,o,null,a),u&&(s.style.display="none",_SuperMap2.default.Event.observe(s,"load",_SuperMap2.default.Function.bind(_SuperMap2.default.Util.onImageLoad,s)),_SuperMap2.default.Event.observe(s,"error",_SuperMap2.default.Function.bind(_SuperMap2.default.Util.onImageLoadError,s))),s.style.alt=e,s.galleryImg="no",n&&(s.src=n),s},_SuperMap2.default.Util.onImageLoad=function(){(!this.viewRequestID||this.map&&this.viewRequestID===this.map.viewRequestID)&&(this.style.display=""),_SuperMap2.default.Element.removeClass(this,"smImageLoadError")},_SuperMap2.default.IMAGE_RELOAD_ATTEMPTS=0,_SuperMap2.default.Util.onImageLoadError=function(){if(this._attempts=this._attempts?this._attempts+1:1,this._attempts<=_SuperMap2.default.IMAGE_RELOAD_ATTEMPTS){var e=this.urls;if(e&&_SuperMap2.default.Util.isArray(e)&&e.length>1){var t,r,n=this.src.toString();for(r=0;(t=e[r])&&-1===n.indexOf(t);r++);var i=Math.floor(e.length*Math.random()),o=e[i];for(r=0;o===t&&r++<4;)o=e[i=Math.floor(e.length*Math.random())];this.src=n.replace(t,o)}else this.src=this.src}else _SuperMap2.default.Element.addClass(this,"smImageLoadError");this.style.display=""},_SuperMap2.default.Util.alphaHackNeeded=null,_SuperMap2.default.Util.alphaHack=function(){if(null==_SuperMap2.default.Util.alphaHackNeeded){var e=navigator.appVersion.split("MSIE"),t=parseFloat(e[1]),r=!1;try{r=!!document.body.filters}catch(e){}_SuperMap2.default.Util.alphaHackNeeded=r&&t>=5.5&&t<7}return _SuperMap2.default.Util.alphaHackNeeded},_SuperMap2.default.Util.modifyAlphaImageDiv=function(e,t,r,n,i,o,a,u,s,l){_SuperMap2.default.Util.modifyDOMElement(e,t,r,n,o,null,null,s);var p=e.childNodes[0];i&&(p.src=i),l&&(p.style.display=l),_SuperMap2.default.Util.modifyDOMElement(p,e.id+"_innerImage",null,n,o,a),_SuperMap2.default.Util.alphaHack()&&("none"!==e.style.display&&(e.style.display="inline-block"),null==u&&(u="scale"),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+p.src+"', sizingMethod='"+u+"')",parseFloat(e.style.opacity)>=0&&parseFloat(e.style.opacity)<1&&(e.style.filter+=" alpha(opacity="+100*e.style.opacity+")"),p.style.filter="alpha(opacity=0)")},_SuperMap2.default.Util.createAlphaImageDiv=function(e,t,r,n,i,o,a,u,s){var l=_SuperMap2.default.Util.createDiv(),p=_SuperMap2.default.Util.createImage(null,null,null,null,i,null,null,s);return p.className="olAlphaImg",l.appendChild(p),_SuperMap2.default.Util.modifyAlphaImageDiv(l,e,t,r,n,i,o,a,u,"block"),l},_SuperMap2.default.Util.upperCaseObject=function(e){var t={};for(var r in e)t[r.toUpperCase()]=e[r];return t},_SuperMap2.default.Util.applyDefaults=function(e,t){e=e||{};var r="function"==typeof window.Event&&t instanceof window.Event;for(var n in t)(void 0===e[n]||!r&&t.hasOwnProperty&&t.hasOwnProperty(n)&&!e.hasOwnProperty(n))&&(e[n]=t[n]);return!r&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},_SuperMap2.default.Util.getParameterString=function(e){var t=[];for(var r in e){var n=e[r];if(null!=n&&"function"!=typeof n){var i;if("object"===(void 0===n?"undefined":_typeof(n))&&n.constructor===Array){for(var o,a=[],u=0,s=n.length;u<s;u++)o=n[u],a.push(encodeURIComponent(null===o||void 0===o?"":o));i=a.join(",")}else i=encodeURIComponent(n);t.push(encodeURIComponent(r)+"="+i)}}return t.join("&")},_SuperMap2.default.Util.urlAppend=function(e,t){var r=e;if(t){var n=(e+" ").split(/[?&]/);r+=" "===n.pop()?t:n.length?"&"+t:"?"+t}return r},_SuperMap2.default.ImgPath="",_SuperMap2.default.Util.getImagesLocation=function(){return _SuperMap2.default.ImgPath||_SuperMap2.default._getScriptLocation()+"../theme/images/"},_SuperMap2.default.Util.Try=function(){for(var e=null,t=0,r=arguments.length;t<r;t++){var n=arguments[t];try{e=n();break}catch(e){}}return e},_SuperMap2.default.Util.getXmlNodeValue=function(e){var t=null;return _SuperMap2.default.Util.Try(function(){(t=e.text)||(t=e.textContent),t||(t=e.firstChild.nodeValue)},function(){t=e.textContent}),t},_SuperMap2.default.Util.mouseLeft=function(e,t){for(var r=e.relatedTarget?e.relatedTarget:e.toElement;r!==t&&null!=r;)r=r.parentNode;return r!==t},_SuperMap2.default.Util.DEFAULT_PRECISION=14,_SuperMap2.default.Util.toFloat=function(e,t){return null==t&&(t=_SuperMap2.default.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},_SuperMap2.default.Util.rad=function(e){return e*Math.PI/180},_SuperMap2.default.Util.deg=function(e){return 180*e/Math.PI},_SuperMap2.default.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563},_SuperMap2.default.Util.distVincenty=function(e,t){for(var r=_SuperMap2.default.Util.VincentyConstants,n=r.a,i=r.b,o=r.f,a=_SuperMap2.default.Util.rad(t.lon-e.lon),u=Math.atan((1-o)*Math.tan(_SuperMap2.default.Util.rad(e.lat))),s=Math.atan((1-o)*Math.tan(_SuperMap2.default.Util.rad(t.lat))),l=Math.sin(u),p=Math.cos(u),c=Math.sin(s),f=Math.cos(s),d=a,h=2*Math.PI,y=20;Math.abs(d-h)>1e-12&&--y>0;){var v=Math.sin(d),m=Math.cos(d),_=Math.sqrt(f*v*(f*v)+(p*c-l*f*m)*(p*c-l*f*m));if(0==_)return 0;var E=l*c+p*f*m,S=Math.atan2(_,E),T=Math.asin(p*f*v/_),g=Math.cos(T)*Math.cos(T),M=E-2*l*c/g,b=o/16*g*(4+o*(4-3*g));h=d,d=a+(1-b)*o*Math.sin(T)*(S+b*_*(M+b*E*(2*M*M-1)))}if(0==y)return NaN;var O=g*(n*n-i*i)/(i*i),I=O/1024*(256+O*(O*(74-47*O)-128));return(i*(1+O/16384*(4096+O*(O*(320-175*O)-768)))*(S-I*_*(M+I/4*(E*(2*M*M-1)-I/6*M*(4*_*_-3)*(4*M*M-3))))).toFixed(3)/1e3},_SuperMap2.default.Util.destinationVincenty=function(e,t,r){for(var n=_SuperMap2.default.Util,i=n.VincentyConstants,o=i.a,a=i.b,u=i.f,s=e.lon,l=e.lat,p=r,c=n.rad(t),f=Math.sin(c),d=Math.cos(c),h=(1-u)*Math.tan(n.rad(l)),y=1/Math.sqrt(1+h*h),v=h*y,m=Math.atan2(h,d),_=y*f,E=1-_*_,S=E*(o*o-a*a)/(a*a),T=1+S/16384*(4096+S*(S*(320-175*S)-768)),g=S/1024*(256+S*(S*(74-47*S)-128)),M=p/(a*T),b=2*Math.PI;Math.abs(M-b)>1e-12;){var O=Math.cos(2*m+M),I=Math.sin(M),R=Math.cos(M);b=M,M=p/(a*T)+g*I*(O+g/4*(R*(2*O*O-1)-g/6*O*(4*I*I-3)*(4*O*O-3)))}var N=v*I-y*R*d,P=Math.atan2(v*R+y*I*d,(1-u)*Math.sqrt(_*_+N*N)),C=u/16*E*(4+u*(4-3*E)),w=Math.atan2(I*f,y*R-v*I*d)-(1-C)*u*_*(M+C*I*(O+C*R*(2*O*O-1)));Math.atan2(_,-N);return new _SuperMap2.default.LonLat(s+n.deg(w),n.deg(P))},_SuperMap2.default.Util.getParameters=function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(_SuperMap2.default.String.contains(e,"?")){var r=e.indexOf("?")+1,n=_SuperMap2.default.String.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(r,n)}for(var i={},o=t.split(/[&;]/),a=0,u=o.length;a<u;++a){var s=o[a].split("=");if(s[0]){var l=s[0];try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}var p=(s[1]||"").replace(/\+/g," ");try{p=decodeURIComponent(p)}catch(e){p=unescape(p)}1==(p=p.split(",")).length&&(p=p[0]),i[l]=p}}return i},_SuperMap2.default.Util.lastSeqID=0,_SuperMap2.default.Util.createUniqueID=function(e){return null==e&&(e="id_"),_SuperMap2.default.Util.lastSeqID+=1,e+_SuperMap2.default.Util.lastSeqID},_SuperMap2.default.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},_SuperMap2.default.INCHES_PER_UNIT.in=_SuperMap2.default.INCHES_PER_UNIT.inches,_SuperMap2.default.INCHES_PER_UNIT.degrees=_SuperMap2.default.INCHES_PER_UNIT.dd,_SuperMap2.default.INCHES_PER_UNIT.nmi=1852*_SuperMap2.default.INCHES_PER_UNIT.m,_SuperMap2.default.METERS_PER_INCH=.0254000508001016,_SuperMap2.default.Util.extend(_SuperMap2.default.INCHES_PER_UNIT,{Inch:_SuperMap2.default.INCHES_PER_UNIT.inches,Meter:1/_SuperMap2.default.METERS_PER_INCH,Foot:.3048006096012192/_SuperMap2.default.METERS_PER_INCH,IFoot:.3048/_SuperMap2.default.METERS_PER_INCH,ClarkeFoot:.3047972651151/_SuperMap2.default.METERS_PER_INCH,SearsFoot:.30479947153867626/_SuperMap2.default.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/_SuperMap2.default.METERS_PER_INCH,IInch:.0254/_SuperMap2.default.METERS_PER_INCH,MicroInch:254e-7/_SuperMap2.default.METERS_PER_INCH,Mil:2.54e-8/_SuperMap2.default.METERS_PER_INCH,Centimeter:.01/_SuperMap2.default.METERS_PER_INCH,Kilometer:1e3/_SuperMap2.default.METERS_PER_INCH,Yard:.9144018288036576/_SuperMap2.default.METERS_PER_INCH,SearsYard:.914398414616029/_SuperMap2.default.METERS_PER_INCH,IndianYard:.9143985307444408/_SuperMap2.default.METERS_PER_INCH,IndianYd37:.91439523/_SuperMap2.default.METERS_PER_INCH,IndianYd62:.9143988/_SuperMap2.default.METERS_PER_INCH,IndianYd75:.9143985/_SuperMap2.default.METERS_PER_INCH,IndianFoot:.30479951/_SuperMap2.default.METERS_PER_INCH,IndianFt37:.30479841/_SuperMap2.default.METERS_PER_INCH,IndianFt62:.3047996/_SuperMap2.default.METERS_PER_INCH,IndianFt75:.3047995/_SuperMap2.default.METERS_PER_INCH,Mile:1609.3472186944373/_SuperMap2.default.METERS_PER_INCH,IYard:.9144/_SuperMap2.default.METERS_PER_INCH,IMile:1609.344/_SuperMap2.default.METERS_PER_INCH,NautM:1852/_SuperMap2.default.METERS_PER_INCH,"Lat-66":110943.31648893273/_SuperMap2.default.METERS_PER_INCH,"Lat-83":110946.25736872235/_SuperMap2.default.METERS_PER_INCH,Decimeter:.1/_SuperMap2.default.METERS_PER_INCH,Millimeter:.001/_SuperMap2.default.METERS_PER_INCH,Dekameter:10/_SuperMap2.default.METERS_PER_INCH,Decameter:10/_SuperMap2.default.METERS_PER_INCH,Hectometer:100/_SuperMap2.default.METERS_PER_INCH,GermanMeter:1.0000135965/_SuperMap2.default.METERS_PER_INCH,CaGrid:.999738/_SuperMap2.default.METERS_PER_INCH,ClarkeChain:20.1166194976/_SuperMap2.default.METERS_PER_INCH,GunterChain:20.11684023368047/_SuperMap2.default.METERS_PER_INCH,BenoitChain:20.116782494375872/_SuperMap2.default.METERS_PER_INCH,SearsChain:20.11676512155/_SuperMap2.default.METERS_PER_INCH,ClarkeLink:.201166194976/_SuperMap2.default.METERS_PER_INCH,GunterLink:.2011684023368047/_SuperMap2.default.METERS_PER_INCH,BenoitLink:.20116782494375873/_SuperMap2.default.METERS_PER_INCH,SearsLink:.2011676512155/_SuperMap2.default.METERS_PER_INCH,Rod:5.02921005842012/_SuperMap2.default.METERS_PER_INCH,IntnlChain:20.1168/_SuperMap2.default.METERS_PER_INCH,IntnlLink:.201168/_SuperMap2.default.METERS_PER_INCH,Perch:5.02921005842012/_SuperMap2.default.METERS_PER_INCH,Pole:5.02921005842012/_SuperMap2.default.METERS_PER_INCH,Furlong:201.1684023368046/_SuperMap2.default.METERS_PER_INCH,Rood:3.778266898/_SuperMap2.default.METERS_PER_INCH,CapeFoot:.3047972615/_SuperMap2.default.METERS_PER_INCH,Brealey:375/_SuperMap2.default.METERS_PER_INCH,ModAmFt:.304812252984506/_SuperMap2.default.METERS_PER_INCH,Fathom:1.8288/_SuperMap2.default.METERS_PER_INCH,"NautM-UK":1853.184/_SuperMap2.default.METERS_PER_INCH,"50kilometers":5e4/_SuperMap2.default.METERS_PER_INCH,"150kilometers":15e4/_SuperMap2.default.METERS_PER_INCH}),_SuperMap2.default.Util.extend(_SuperMap2.default.INCHES_PER_UNIT,{mm:_SuperMap2.default.INCHES_PER_UNIT.Meter/1e3,cm:_SuperMap2.default.INCHES_PER_UNIT.Meter/100,dm:100*_SuperMap2.default.INCHES_PER_UNIT.Meter,km:1e3*_SuperMap2.default.INCHES_PER_UNIT.Meter,kmi:_SuperMap2.default.INCHES_PER_UNIT.nmi,fath:_SuperMap2.default.INCHES_PER_UNIT.Fathom,ch:_SuperMap2.default.INCHES_PER_UNIT.IntnlChain,link:_SuperMap2.default.INCHES_PER_UNIT.IntnlLink,"us-in":_SuperMap2.default.INCHES_PER_UNIT.inches,"us-ft":_SuperMap2.default.INCHES_PER_UNIT.Foot,"us-yd":_SuperMap2.default.INCHES_PER_UNIT.Yard,"us-ch":_SuperMap2.default.INCHES_PER_UNIT.GunterChain,"us-mi":_SuperMap2.default.INCHES_PER_UNIT.Mile,"ind-yd":_SuperMap2.default.INCHES_PER_UNIT.IndianYd37,"ind-ft":_SuperMap2.default.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/_SuperMap2.default.METERS_PER_INCH}),_SuperMap2.default.DOTS_PER_INCH=96,_SuperMap2.default.Util.normalizeScale=function(e){return e>1?1/e:e},_SuperMap2.default.Util.getResolutionFromScale=function(e,t){var r;return e&&(null==t&&(t="degrees"),r=1/(_SuperMap2.default.Util.normalizeScale(e)*_SuperMap2.default.INCHES_PER_UNIT[t]*_SuperMap2.default.DOTS_PER_INCH)),r},_SuperMap2.default.Util.getScaleFromResolution=function(e,t){return null==t&&(t="degrees"),e*_SuperMap2.default.INCHES_PER_UNIT[t]*_SuperMap2.default.DOTS_PER_INCH},_SuperMap2.default.Util.isEquivalentUrl=function(e,t,r){r=r||{},_SuperMap2.default.Util.applyDefaults(r,{ignoreCase:!0,ignorePort80:!0,ignoreHash:!0});var n=_SuperMap2.default.Util.createUrlObject(e,r),i=_SuperMap2.default.Util.createUrlObject(t,r);for(var o in n)if("args"!==o&&n[o]!==i[o])return!1;for(var o in n.args){if(n.args[o]!==i.args[o])return!1;delete i.args[o]}for(var o in i.args)return!1;return!0},_SuperMap2.default.Util.createUrlObject=function(e,t){if(t=t||{},!/^\w+:\/\//.test(e)){var r=window.location,n=r.port?":"+r.port:"",i=r.protocol+"//"+r.host.split(":").shift()+n;if(0===e.indexOf("/"))e=i+e;else{var o=r.pathname.split("/");o.pop(),e=i+o.join("/")+"/"+e}}t.ignoreCase&&(e=e.toLowerCase());var a=document.createElement("a");a.href=e;var u={};u.host=a.host.split(":").shift(),u.protocol=a.protocol,t.ignorePort80?u.port="80"===a.port||"0"==a.port?"":a.port:u.port=""==a.port||"0"==a.port?"80":a.port,u.hash=t.ignoreHash||"#"===a.hash?"":a.hash;var s=a.search;if(!s){var l=e.indexOf("?");s=-1!==l?e.substr(l):""}return u.args=_SuperMap2.default.Util.getParameters(s),u.pathname="/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname,u},_SuperMap2.default.Util.removeTail=function(e){var t=e.indexOf("?"),r=e.indexOf("#");return-1==t?-1!==r?e.substr(0,r):e:-1!==r?e.substr(0,Math.min(t,r)):e.substr(0,t)},_SuperMap2.default.IS_GECKO=function(){var e=navigator.userAgent.toLowerCase();return-1===e.indexOf("webkit")&&-1!==e.indexOf("gecko")}(),_SuperMap2.default.Browser=function(){var e,t="",r="",n="pc",i=navigator.userAgent.toLowerCase();return i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1?(t="msie",e=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)):i.indexOf("chrome")>-1?(t="chrome",e=i.match(/chrome\/([\d.]+)/)):i.indexOf("firefox")>-1?(t="firefox",e=i.match(/firefox\/([\d.]+)/)):i.indexOf("opera")>-1?(t="opera",e=i.match(/version\/([\d.]+)/)):i.indexOf("safari")>-1&&(t="safari",e=i.match(/version\/([\d.]+)/)),r=e?e[1]:"",i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1?n="apple":i.indexOf("android")>-1&&(r=(e=i.match(/version\/([\d.]+)/))?e[1]:"",n="android"),{name:t,version:r,device:n}}(),_SuperMap2.default.Util.getBrowser=function(){return _SuperMap2.default.Browser},_SuperMap2.default.Util.isSupportCanvas=function(){var e=!0,t=_SuperMap2.default.Util.getBrowser();return document.createElement("canvas").getContext?("firefox"===t.name&&parseFloat(t.version)<5&&(e=!1),"safari"===t.name&&parseFloat(t.version)<4&&(e=!1),"opera"===t.name&&parseFloat(t.version)<10&&(e=!1),"msie"===t.name&&parseFloat(t.version)<9&&(e=!1)):e=!1,e}(),_SuperMap2.default.Util.supportCanvas=function(){return _SuperMap2.default.Util.isSupportCanvas},_SuperMap2.default.Util.getRenderedDimensions=function(e,t,r){var n,i,o=document.createElement("div");o.style.visibility="hidden";for(var a=r&&r.containerElement?r.containerElement:document.body,u=!1,s=a;s&&"body"!==s.tagName.toLowerCase();){var l=_SuperMap2.default.Element.getStyle(s,"position");if("absolute"===l){u=!0;break}if(l&&"static"!==l)break;s=s.parentNode}u||(o.style.position="absolute"),t&&(t.w?(n=t.w,o.style.width=n+"px"):t.h&&(i=t.h,o.style.height=i+"px")),r&&r.displayClass&&(o.className=r.displayClass);var p=document.createElement("div");if(p.innerHTML=e,p.style.overflow="visible",p.childNodes)for(var c=0,f=p.childNodes.length;c<f;c++)p.childNodes[c].style&&(p.childNodes[c].style.overflow="visible");return o.appendChild(p),a.appendChild(o),a.appendChild(o),n||(n=parseInt(p.scrollWidth),o.style.width=n+"px"),i||(i=parseInt(p.scrollHeight)),o.removeChild(p),a.removeChild(o),new _SuperMap2.default.Size(n,i)},_SuperMap2.default.Util.getScrollbarWidth=function(){var e=_SuperMap2.default.Util._scrollbarWidth;if(null==e){var t=null,r=null,n=0,i=0;(t=document.createElement("div")).style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.width="100px",t.style.height="50px",t.style.overflow="hidden",(r=document.createElement("div")).style.width="100%",r.style.height="200px",t.appendChild(r),document.body.appendChild(t),n=r.offsetWidth,t.style.overflow="scroll",i=r.offsetWidth,document.body.removeChild(document.body.lastChild),_SuperMap2.default.Util._scrollbarWidth=n-i,e=_SuperMap2.default.Util._scrollbarWidth}return e},_SuperMap2.default.Util.getFormattedLonLat=function(e,t,r){r||(r="dms"),e=(e+540)%360-180;var n=Math.abs(e),i=Math.floor(n),o=(n-i)/(1/60),a=(o-(o=Math.floor(o)))/(1/60);a=Math.round(10*a),(a/=10)>=60&&(a-=60,(o+=1)>=60&&(o-=60,i+=1)),i<10&&(i="0"+i);var u=i+"Â°";return r.indexOf("dm")>=0&&(o<10&&(o="0"+o),u+=o+"'",r.indexOf("dms")>=0&&(a<10&&(a="0"+a),u+=a+'"')),u+="lon"===t?e<0?_SuperMap2.default.i18n("W"):_SuperMap2.default.i18n("E"):e<0?_SuperMap2.default.i18n("S"):_SuperMap2.default.i18n("N")},_SuperMap2.default.INCHES_PER_UNIT.degree=_SuperMap2.default.INCHES_PER_UNIT.dd,_SuperMap2.default.INCHES_PER_UNIT.meter=_SuperMap2.default.INCHES_PER_UNIT.m,_SuperMap2.default.INCHES_PER_UNIT.foot=_SuperMap2.default.INCHES_PER_UNIT.ft,_SuperMap2.default.INCHES_PER_UNIT.inch=_SuperMap2.default.INCHES_PER_UNIT.inches,_SuperMap2.default.INCHES_PER_UNIT.mile=_SuperMap2.default.INCHES_PER_UNIT.mi,_SuperMap2.default.INCHES_PER_UNIT.kilometer=_SuperMap2.default.INCHES_PER_UNIT.km,_SuperMap2.default.INCHES_PER_UNIT.yard=_SuperMap2.default.INCHES_PER_UNIT.yd,_SuperMap2.default.Util.isInTheSameDomain=function(e){if(!e)return!0;var t=e.indexOf("//"),r=document.location.toString(),n=r.indexOf("//");if(-1===t)return!0;var i,o=i=e.substring(0,t),a=r.substring(n+2);n=a.indexOf("/");var u=a.indexOf(":"),s=a.substring(0,n),l=document.location.protocol;if(-1!==u?+a.substring(u,n):s+=":"+("http:"===l.toLowerCase()?80:443),l.toLowerCase()!==o.toLowerCase())return!1;var p=(o=e.substring(t+2)).indexOf(":");t=o.indexOf("/");var c,f=o.substring(0,t);return-1!==p?c=o.substring(0,p):(c=o.substring(0,t),f+=":"+("http:"===i.toLowerCase()?80:443)),c===document.domain&&f===s},_SuperMap2.default.Util.calculateDpi=function(e,t,r,n,i){if(e&&t&&r){var o=e.getWidth(),a=e.getHeight(),u=t.w,s=t.h;if(i=i||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var l=o/u,p=a/s;return f=254/(c=l>p?l:p)/r/(2*Math.PI*i/360)/1e4}var c=o/u,f=254/c/r/1e4;return f}},_SuperMap2.default.Util.toJSON=function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t='"'+t.replace(/(["\\])/g,"\\$1")+'"',t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t=t.replace("<","&lt;"),t=t.replace(">","&gt;"),t=t.replace(/%/g,"%25"),t=t.replace(/&/g,"%26");case Array:for(var r=[],n=0,i=t.length;n<i;n++)r.push(_SuperMap2.default.Util.toJSON(t[n]));return"["+r.join(",")+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===(void 0===t?"undefined":_typeof(t))){if(t.length){for(var r=[],n=0,i=t.length;n<i;n++)r.push(_SuperMap2.default.Util.toJSON(t[n]));return"["+r.join(",")+"]"}r=[];for(var o in t)"function"!=typeof t[o]&&"CLASS_NAME"!==o&&"parent"!==o&&r.push("'"+o+"':"+_SuperMap2.default.Util.toJSON(t[o]));return r.length>0?"{"+r.join(",")+"}":"{}"}return t.toString()}},_SuperMap2.default.Util.getResolutionFromScaleDpi=function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?(e=_SuperMap2.default.Util.normalizeScale(e),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4):-1},_SuperMap2.default.Util.getScaleFromResolutionDpi=function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4:-1},_SuperMap2.default.Util.urlIsLong=function(e){for(var t=0,r=null,n=0,i=e.length;n<i;n++)(r=e.charCodeAt(n))<127?t++:128<=r&&r<=2047?t+=2:2048<=r&&r<=65535&&(t+=3);return!(t<2e3)},_SuperMap2.default.Util.committer=function(e){if(e){var t=e.url,r=t.indexOf("?")>-1?"&":"?";t.substr(t.length-1,1);if("undefined"==typeof Windows)if(e.url=window.encodeURI(e.url),e.isInTheSameDomain=e.isInTheSameDomain||_SuperMap2.default.Util.isInTheSameDomain(e.url),e.isInTheSameDomain){if("GET"===e.method&&e.params){var n=e.params,i=_SuperMap2.default.Util.getParameterString(n);if(_SuperMap2.default.Util.urlIsLong(i)){var o=e.data;e.method="POST",e.url+=r+"_method=GET",o="{";for(var a in n)o+="'"+a+"':"+encodeURIComponent(n[a])+",";o+="}",e.data=o}else i.length>0&&(t+=r+i),e.url=t;delete e.params}var u=e.headers||{};switch(e.headers=u,e.method){case"GET":_SuperMap2.default.Request.GET(e);break;case"POST":u["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",_SuperMap2.default.Request.POST(e);break;case"PUT":u["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",_SuperMap2.default.Request.PUT(e);break;case"DELETE":u["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",_SuperMap2.default.Request.DELETE(e)}}else switch(e.method){case"GET":_SuperMap2.default.Util.RequestJSONP.GET(e);break;case"POST":e.url+=r+"_method=POST",_SuperMap2.default.Util.RequestJSONP.POST(e);break;case"PUT":e.url+=r+"_method=PUT",_SuperMap2.default.Util.RequestJSONP.PUT(e);break;case"DELETE":e.url+=r+"_method=DELETE",_SuperMap2.default.Util.RequestJSONP.DELETE(e)}else{var s="",l=!0;if(e.params&&"GET"===e.method)for(var a in e.params)l?(l=!1,s+=a+"="+e.params[a]):s+="&"+a+"="+e.params[a];e.url=e.url.replace(/jsonp/,"json"),s&&(e.url+=r+s),e.proxy?e.url=e.proxy+encodeURIComponent(e.url):e.url=window.encodeURI(e.url),WinJS.xhr({url:e.url,type:e.method,data:e.data,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(t){(e.scope?_SuperMap2.default.Function.bind(e.success,e.scope):e.success)(t)},function(t){(e.scope?_SuperMap2.default.Function.bind(e.failure,e.scope):e.failure)(t)})}}},_SuperMap2.default.Util.RequestJSONP={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){var t=this;for(var r in e){t.queryKeys.push(r),"string"!=typeof e[r]&&(e[r]=_SuperMap2.default.Util.toJSON(e[r]));var n=encodeURIComponent(e[r]);t.queryValues.push(n)}},issue:function(e){var t=this,r=t.getUid(),n=e.url,i=null,o=null,a=[];e.success&&(i=e.scope?_SuperMap2.default.Function.bind(e.success,e.scope):e.success),e.failure&&(o=e.scope?_SuperMap2.default.Function.bind(e.failure,e.scope):e.failure),t.supermap_callbacks[r]=function(e){var n=_SuperMap2.default.Util.transformResult(e);n.succeed=void 0==n.succeed||n.succeed,n.succeed&&i?i(e):o&&o(e),delete t.supermap_callbacks[r]},t.addQueryStrings({callback:"SuperMap.Util.RequestJSONP.supermap_callbacks["+r+"]"});t.queryKeys;for(var u=n,s=0,l=t.queryKeys?t.queryKeys.length:0,p=0;p<l;p++)if(u.length+t.queryKeys[p].length+2>=t.limitLength){if(0==s)return!1;null==a&&(a=new Array),a.push(u),u=n,s=0,p--}else if(u.length+t.queryKeys[p].length+2+t.queryValues[p].length>t.limitLength)for(var c=t.queryValues[p];c.length>0;){var f=t.limitLength-u.length-t.queryKeys[p].length-2;u.indexOf("?")>-1?u+="&":u+="?","%"===(d=c.substring(0,f)).substring(f-1,f)?(f-=1,d=c.substring(0,f)):"%"===d.substring(f-2,f-1)&&(f-=2,d=c.substring(0,f)),u+=t.queryKeys[p]+"="+d,c=c.substring(f),d.length>0&&(null==a&&(a=new Array),a.push(u),u=n,s=0)}else{s++,u.indexOf("?")>-1?u+="&":u+="?";var d=t.queryValues[p];u+=t.queryKeys[p]+"="+d}null==a&&(a=new Array),u!==n&&a.push(u),t.send(a,e&&e.proxy)},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t){var r=e.length;if(r>0)for(var n=(new Date).getTime(),i=0;i<r;i++){var o=document.createElement("script"),a=e[i];a.indexOf("?")>-1?a+="&":a+="?",a+="sectionCount="+r,a+="&sectionIndex="+i,a+="&jsonpUserID="+n,t&&(a=decodeURIComponent(a),a=t+encodeURIComponent(a)),o.setAttribute("src",a),o.setAttribute("type","text/javascript"),navigator.userAgent.indexOf("IE")>=0?o.onreadystatechange=function(){if(this&&("loaded"===this.readyState||"complete"===this.readyState)){this.onreadystatechange=null;try{document.body.removeChild(this)}catch(e){this.parentNode&&this.parentNode.removeChild(this)}}}:o.onload=function(){this.onload=null,document.body.removeChild(this)},document.body.appendChild(o)}},GET:function(e){var t=this;t.queryKeys.length=0,t.queryValues.length=0,t.addQueryStrings(e.params),t.issue(e)},POST:function(e){var t=this;t.queryKeys.length=0,t.queryValues.length=0,t.addQueryStrings({requestEntity:e.data}),t.issue(e)},PUT:function(e){var t=this;t.queryKeys.length=0,t.queryValues.length=0,t.addQueryStrings({requestEntity:e.data}),t.issue(e)},DELETE:function(e){var t=this;t.queryKeys.length=0,t.queryValues.length=0,t.addQueryStrings({requestEntity:e.data}),t.issue(e)}},_SuperMap2.default.Util.transformResult=function(result){return result.responseText&&"string"==typeof result.responseText&&(result="undefined"!=typeof JSON&&JSON.parse?JSON.parse(result.responseText):eval("("+result.responseText+")")),result},_SuperMap2.default.Util.copyAttributes=function(e,t){if(e=e||{},t)for(var r in t){var n=t[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(e[r]=n)}return e},_SuperMap2.default.Util.copyAttributesWithClip=function(e,t,r){if(e=e||{},t)for(var n in t){var i=!1;if(r&&r.length)for(var o=0,a=r.length;o<a;o++)if(n===r[o]){i=!0;break}if(!0!==i){var u=t[n];void 0!==u&&"CLASS_NAME"!==n&&"function"!=typeof u&&(e[n]=u)}}return e},_SuperMap2.default.Util.JSONClone=function(e,t){if(e=e||{},t)if(t instanceof Array){e=[];for(var r=0,n=t.length;r<n;r++){var i=t[r];e.push(_SuperMap2.default.Util.JSONClone({},i))}}else for(var o in t){var a=t[o];if("object"===(void 0===a?"undefined":_typeof(a))){var u={};e[o]=_SuperMap2.default.Util.JSONClone(u,a)}e[o]=a}return e},_SuperMap2.default.Util.setApp=function(e){_SuperMap2.default.isApp=!!e},_SuperMap2.default.Util.cloneObject=function(e){if(null===e||"object"!==(void 0===e?"undefined":_typeof(e)))return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array)return t=e.slice(0);if(e instanceof Object){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=_SuperMap2.default.Util.cloneObject(e[r]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")},_SuperMap2.default.Util.lineIntersection=function(e,t,r,n){var i,o,a=null,u=(n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x),s=(t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x),l=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y);if(0!=l)o=s/l,a=(i=u/l)>=0&&o<=1&&i<=1&&o>=0?new _SuperMap2.default.Geometry.Point(e.x+i*(t.x-e.x),e.y+i*(t.y-e.y)):"No Intersection";else if(0==u&&0==s){var p=Math.max(e.y,t.y),c=Math.min(e.y,t.y),f=Math.max(e.x,t.x),d=Math.min(e.x,t.x);a=(r.y>=c&&r.y<=p||n.y>=c&&n.y<=p)&&r.x>=d&&r.x<=f||n.x>=d&&n.x<=f?"Coincident":"Parallel"}else a="Parallel";return a},_SuperMap2.default.Util.clipLineRect=function(e,t,r){var n=[],i=new _SuperMap2.default.Geometry.Point(r.left,r.bottom),o=new _SuperMap2.default.Geometry.Point(r.right,r.top),a=new _SuperMap2.default.Geometry.Point(r.right,r.bottom),u=new _SuperMap2.default.Geometry.Point(r.left,r.top),s=[];s.push(_SuperMap2.default.Util.lineIntersection(i,a,e,t)),s.push(_SuperMap2.default.Util.lineIntersection(a,o,e,t)),s.push(_SuperMap2.default.Util.lineIntersection(o,u,e,t)),s.push(_SuperMap2.default.Util.lineIntersection(u,i,e,t));for(var l=0;l<s.length;)"SuperMap.Geometry.Point"===s[l].CLASS_NAME&&n.push(s[l]),l++;return n},_SuperMap2.default.Util.clipLineStringRect=function(e,t,r,n){if(r=void 0==r||r,n=void 0!=n&&n,!t.intersectsBounds(e.getBounds()))return null;if(t.containsBounds(e.getBounds()))return[e];for(var i=e.components,o=[],a=0;a<i.length-1;a++){var u,s=new _SuperMap2.default.Geometry.Point(i[a].x,i[a].y),l=new _SuperMap2.default.Geometry.Point(i[a+1].x,i[a+1].y),p=_SuperMap2.default.Util.clipLineRect(s,l,t);if(2===p.length){if((p[0].x-s.x)*(p[0].x-s.x)+(p[0].y-s.y)*(p[0].y-s.y)>(p[1].x-s.x)*(p[1].x-s.x)+(p[1].y-s.y)*(p[1].y-s.y)){var c=p[0];p[0]=p[1],p[1]=c}r?(u=new _SuperMap2.default.Geometry.LineString(p),o.push(u)):o.push(p[0],p[1])}else 1===p.length?t.contains(s.x,s.y,!1)?r?(u=new _SuperMap2.default.Geometry.LineString([s,p[0]]),o.push(u)):o.push(s,p[0]):t.contains(l.x,l.y,!1)&&(r?(u=new _SuperMap2.default.Geometry.LineString([p[0],l]),o.push(u)):o.push(p[0],l)):0==p.length&&t.contains(s.x,s.y)&&t.contains(l.x,l.y)&&(r?(u=new _SuperMap2.default.Geometry.LineString([s,l]),o.push(u)):o.push(s,l))}if(o.length>0){if(!r){var f=new _SuperMap2.default.Geometry.LineString(o);return n&&(f.id=e.id),f}if(n&&(o[0].id=e.id,o.length>1))for(a=1;a<o.length;a++)o[a].id=e.id+"_clip_"+a;return o}},_SuperMap2.default.Util.clipMultiLineStringRect=function(e,t,r,n){if(r=void 0==r||r,n=void 0!=n&&n,!t.intersectsBounds(e.getBounds()))return null;if(t.containsBounds(e.getBounds()))return e;for(var i=e.components,o=[],a=0;a<i.length;a++){var u=_SuperMap2.default.Util.clipLineStringRect(i[a],t,r,n);u&&(u instanceof Array?o=o.concat(u):o.push(u))}if(o.length>0){var s=new _SuperMap2.default.Geometry.MultiLineString(o);return n?(s.id=e.id,s):s}},_SuperMap2.default.Util.getIntersectLineArray=function(e,t){var r=new _SuperMap2.default.Geometry.Point(e.left,e.bottom<t.bottom?e.bottom:t.bottom),n=new _SuperMap2.default.Geometry.Point(e.left,e.top>t.top?e.top:t.top),i=new _SuperMap2.default.Geometry.LineString([r,n]),o=new _SuperMap2.default.Geometry.Point(e.left<t.left?e.left:t.left,e.top),a=new _SuperMap2.default.Geometry.Point(e.right>t.right?e.right:t.right,e.top),u=new _SuperMap2.default.Geometry.LineString([o,a]),s=new _SuperMap2.default.Geometry.Point(e.right,e.top>t.top?e.top:t.top),l=new _SuperMap2.default.Geometry.Point(e.right,e.bottom<t.bottom?e.bottom:t.bottom),p=new _SuperMap2.default.Geometry.LineString([s,l]),c=new _SuperMap2.default.Geometry.Point(e.right>t.right?e.right:t.right,e.bottom),f=new _SuperMap2.default.Geometry.Point(e.left<t.left?e.left:t.left,e.bottom);return[i,u,p,new _SuperMap2.default.Geometry.LineString([c,f])]},_SuperMap2.default.Util.isInside=function(e,t,r){return 0==r&&e.x>=t.left||(1===r&&e.y<=t.top||(2===r&&e.x<=t.right||3===r&&e.y>=t.bottom))},_SuperMap2.default.Util.clipPolygonRect=function(e,t,r){if(!t.intersectsBounds(e.getBounds()))return null;if(t.containsBounds(e.getBounds()))return e;r=void 0!=r&&r;for(var n=[],i=e.components,o=0;o<i.length;o++)if(t.containsBounds(i[o].getBounds()))n.push(i[o]);else{for(var a=_SuperMap2.default.Util.getIntersectLineArray(t,i[o].getBounds()),u=i[o].components,s=[],l=[],p=[],c=u.length,f=u[c-1],d=0;d<c;d++)l.push(u[d]);for(var h,d=0;d<4;d++){h=!_SuperMap2.default.Util.isInside(f,t,d);for(var y=l.length,v=0;v<y;v++)_SuperMap2.default.Util.isInside(l[v],t,d)?(h&&(h=!1,s.push(_SuperMap2.default.Util.lineIntersection(f,l[v],a[d].components[0],a[d].components[1]))),s.push(l[v])):h||(h=!0,s.push(_SuperMap2.default.Util.lineIntersection(f,l[v],a[d].components[0],a[d].components[1]))),f=l[v];var m=s.length;l.length=0;for(var _=0;_<m;_++)l.push(s[_]);s.length=0}for(d=0;d<l.length;d++)p.push(l[d]);if(p.length>2){var E=new _SuperMap2.default.Geometry.LinearRing(p);r&&(E.id=i[o].id),n.push(E)}}if(n.length>0){var S=new _SuperMap2.default.Geometry.Polygon(n);return r?(S.id=e.id,S):S}},_SuperMap2.default.Util.clipMultiPolygonRect=function(e,t,r){if(!t.intersectsBounds(e.getBounds()))return null;if(t.containsBounds(e.getBounds()))return e;r=void 0!=r&&r;for(var n=[],i=0;i<e.components.length;i++){var o=_SuperMap2.default.Util.clipPolygonRect(e.components[i],t,r);o&&n.push(o)}if(n.length>0){var a=new _SuperMap2.default.Geometry.MultiPolygon(n);return r&&(a.id=e.id),a}},_SuperMap2.default.Util.clipGeometryRect=function(e,t,r,n){if(e){if(r=void 0==r||r,n=void 0!=n&&n,"SuperMap.Geometry.LineString"!==e.CLASS_NAME&&"SuperMap.Geometry.LinearRing"!==e.CLASS_NAME||!(e.components.length>1))return"SuperMap.Geometry.MultiLineString"===e.CLASS_NAME&&e.components.length>0&&e.components[0].components.length>1?_SuperMap2.default.Util.clipMultiLineStringRect(e,t,r,n):"SuperMap.Geometry.Polygon"===e.CLASS_NAME&&e.components.length>0&&e.components[0].components.length>2?_SuperMap2.default.Util.clipPolygonRect(e,t,n):"SuperMap.Geometry.MultiPolygon"===e.CLASS_NAME&&e.components.length>0?_SuperMap2.default.Util.clipMultiPolygonRect(e,t,!0):e;var i=_SuperMap2.default.Util.clipLineStringRect(e,t,r,n);if(i)return 1===i.length?i[0]:new _SuperMap2.default.Geometry.MultiLineString(i)}},_SuperMap2.default.Util.getTextBounds=function(e,t,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",e.fontSize&&(r.style.fontSize=e.fontSize),e.fontFamily&&(r.style.fontFamily=e.fontFamily),e.fontWeight&&(r.style.fontWeight=e.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=t;var n=r.clientWidth,i=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:i}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MapVLayer=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=n(r(3)),p=n(r(15)),c=t.MapVLayer=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(n.dataSet=null,n.options=null,n.supported=!1,n.canvas=null,n.canvasContext=null,n.CLASS_NAME="SuperMap.Layer.MapVLayer",r&&l.default.Util.extend(n,r),n.canvas=document.createElement("canvas"),!n.canvas.getContext)return o(n);n.supported=!0,n.canvas.style.position="absolute",n.canvas.style.top="0px",n.canvas.style.left="0px",n.div.appendChild(n.canvas);var a=n.options&&n.options.context||"2d";return n.canvasContext=n.canvas.getContext(a),n.attribution="Â© 2017 ç¾åº¦ <a href='http://mapv.baidu.com' target='_blank'>MapV</a> with <span>Â© <a target='_blank' href='http://iclient.supermapol.com' style='color: #08c;text-decoration: none;'>SuperMap iClient</a></span>",n}return a(t,l.default.Layer),u(t,[{key:"destroy",value:function(){this.dataSet=null,this.options=null,this.renderer=null,this.supported=null,this.canvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"addData",value:function(e,t){this.renderer&&this.renderer.addData(e,t)}},{key:"setData",value:function(e,t){this.renderer&&this.renderer.setData(e,t)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.renderer&&this.renderer.removeData(e)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"setMap",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setMap",this).call(this,e),this.renderer=new p.default(e,this,this.dataSet,this.options),this.supported?this.redraw():this.map.removeLayer(this)}},{key:"moveTo",value:function(e,r,n){if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveTo",this).call(this,e,r,n),this.supported){if(this.zoomChanged=r,!n){this.div.style.visibility="hidden",this.div.style.left=-parseInt(this.map.layerContainerDiv.style.left)+"px",this.div.style.top=-parseInt(this.map.layerContainerDiv.style.top)+"px";var i=this.map.getSize();this.div.style.width=parseInt(i.w)+"px",this.div.style.height=parseInt(i.h)+"px",this.canvas.width=parseInt(i.w),this.canvas.height=parseInt(i.h),this.canvas.style.width=this.div.style.width,this.canvas.style.height=this.div.style.height,this.maxWidth=i.w,this.maxHeight=i.h,this.div.style.visibility="",r||this.renderer&&this.renderer.render()}r&&this.renderer&&this.renderer.render()}}},{key:"transferToMapLatLng",value:function(e){var t="EPSG:4326",r=this.map.getUnits();return["m","meter"].indexOf(r.toLowerCase())>-1&&(t="EPSG:3857"),new l.default.LonLat(e.lon,e.lat).transform("EPSG:4326",t)}}]),t}();l.default.Layer.MapVLayer=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AddressMatchService=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=n(r(3)),l=n(r(4)),p=n(r(21)),c=t.AddressMatchService=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.CLASS_NAME="SuperMap.REST.AddressMatchService",n}return a(t,l.default),u(t,[{key:"code",value:function(e,t){var r=this;return new p.default(r.url,{serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).code(r.url+"/geocoding",e),r}},{key:"decode",value:function(e,t){var r=this;return new p.default(r.url,{serverType:r.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).decode(r.url+"/geodecoding",e),r}}]),t}();s.default.REST.AddressMatchService=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessingService=void 0;var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=n(r(3)),l=r(1),p=n(r(4)),c=n(r(25)),f=n(r(27)),d=n(r(29)),h=n(r(31)),y=n(r(33)),v=t.ProcessingService=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.kernelDensityJobs={},n.summaryMeshJobs={},n.queryJobs={},n.summaryRegionJobs={},n.vectorClipJobs={},n}return a(t,p.default),u(t,[{key:"getKernelDensityJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new c.default(r.url,{serverType:r.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getKernelDensityJobs(),r}},{key:"getKernelDensityJob",value:function(e,t,r){var n=this,i=n._processFormat(r);return new c.default(n.url,{serverType:n.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:i}).getKernelDensityJob(e),n}},{key:"addKernelDensityJob",value:function(e,t,r,n){var i=this,o=i._processFormat(n);return new c.default(i.url,{eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.kernelDensityJobs[e.id]=e.state}},format:o}).addKernelDensityJob(e,r),i}},{key:"getKernelDensityJobState",value:function(e){return this.kernelDensityJobs[e]}},{key:"getSummaryMeshJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new d.default(r.url,{serverType:r.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryMeshJobs(),r}},{key:"getSummaryMeshJob",value:function(e,t,r){var n=this,i=n._processFormat(r);return new d.default(n.url,{serverType:n.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:i}).getSummaryMeshJob(e),n}},{key:"addSummaryMeshJob",value:function(e,t,r,n){var i=this,o=i._processFormat(n);return new d.default(i.url,{eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryMeshJobs[e.id]=e.state}},format:o}).addSummaryMeshJob(e,r),i}},{key:"getSummaryMeshJobState",value:function(e){return this.summaryMeshJobs[e]}},{key:"getQueryJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new f.default(r.url,{serverType:r.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getQueryJobs(),r}},{key:"getQueryJob",value:function(e,t,r){var n=this,i=n._processFormat(r);return new f.default(n.url,{serverType:n.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:i}).getQueryJob(e),n}},{key:"addQueryJob",value:function(e,t,r,n){var i=this,o=i._processFormat(n);return new f.default(i.url,{eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.queryJobs[e.id]=e.state}},format:o}).addQueryJob(e,r),i}},{key:"getQueryJobState",value:function(e){return this.queryJobs[e]}},{key:"getSummaryRegionJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new h.default(r.url,{serverType:r.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryRegionJobs(),r}},{key:"getSummaryRegionJob",value:function(e,t,r){var n=this,i=n._processFormat(r);return new h.default(n.url,{serverType:n.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:i}).getSummaryRegionJob(e),n}},{key:"addSummaryRegionJob",value:function(e,t,r,n){var i=this,o=i._processFormat(n);return new h.default(i.url,{eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryRegionJobs[e.id]=e.state}},format:o}).addSummaryRegionJob(e,r),i}},{key:"getSummaryRegionJobState",value:function(e){return this.summaryRegionJobs[e]}},{key:"getVectorClipJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new y.default(r.url,{serverType:r.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getVectorClipJobs(),r}},{key:"getVectorClipJob",value:function(e,t,r){var n=this,i=n._processFormat(r);return new y.default(n.url,{serverType:n.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:i}).getVectorClipJob(e),n}},{key:"addVectorClipJob",value:function(e,t,r,n){var i=this,o=i._processFormat(n);return new y.default(i.url,{serverType:i.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.vectorClipJobs[e.id]=e.state}},format:o}).addVectorClipJob(e,r),i}},{key:"getVectorClipJobState",value:function(e){return this.vectorClipJobs[e]}},{key:"_processFormat",value:function(e){return e||l.DataFormat.GEOJSON}}]),t}();s.default.REST.ProcessingService=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=n(r(0)),p=n(r(20)),c=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));n.callback=null,n.CLASS_NAME="SuperMap.TimeFlowControl";var a=n;return Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,i.prototype=new n,i}),a.update=a.update.bind(a),a.oldTime=a.currentTime,a.callback=e,n}return a(t,p.default),u(t,[{key:"updateOptions",value:function(e){e=e||{},s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId)}},{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this);var e=this;e.oldTime=null,e.callback=null}},{key:"tick",value:function(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.intervalId=window.setInterval(e.update,e.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}]),t}();t.default=c,l.default.TimeFlowControl=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=n(r(0)),u=n(r(38)),s=function(){function e(t,r){i(this,e),this.url=null,this.client=null,this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=null,this.eventListeners=null,r=r||{};var n=this;n.url=t,n.client=new u.default.Client({host:n.url}),n.change=r.change,n.geoFence=r.geoFence,n.openGeoFence=r.openGeoFence,n.outOfGeoFence=r.outOfGeoFence,n.events=new a.default.Events(n,null,n.EVENT_TYPES),n.eventListeners=r.eventListeners,n.eventListeners instanceof Object&&n.events.on(n.eventListeners)}return o(e,[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,t)}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,t)}},{key:"count",value:function(e,t){return this.client.count(e,t)}},{key:"create",value:function(e,t){return this.client.create(e,t)}},{key:"delete",value:function(e,t){return this.client.delete(e,t)}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,t)}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,t)}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,t)}},{key:"exists",value:function(e,t){return this.client.exists(e,t)}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,t)}},{key:"explain",value:function(e,t){return this.client.explain(e,t)}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,t)}},{key:"get",value:function(e,t){return this.client.get(e,t)}},{key:"getScript",value:function(e,t){return this.client.getScript(e,t)}},{key:"getSource",value:function(e,t){return this.client.getSource(e,t)}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,t)}},{key:"index",value:function(e,t){return this.client.index(e,t)}},{key:"info",value:function(e,t){return this.client.info(e,t)}},{key:"mget",value:function(e,t){return this.client.mget(e,t)}},{key:"msearch",value:function(e,t){var r=this;return r.openGeoFence?r.client.msearch(e,t).then(function(e){r._update(e.responses)},function(e){r.events.triggerEvent("error",{error:e})}):r.client.msearch(e,t)}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,t)}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,t)}},{key:"ping",value:function(e,t){return this.client.ping(e,t)}},{key:"putScript",value:function(e,t){return this.client.putScript(e,t)}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,t)}},{key:"reindex",value:function(e,t){return this.client.reindex(e,t)}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,t)}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,t)}},{key:"scroll",value:function(e,t){return this.client.scroll(e,t)}},{key:"search",value:function(e,t){var r=this;return r.openGeoFence?r.client.search(e,t).then(function(e){r._update(e.responses)},function(e){r.events.triggerEvent("error",{error:e})}):r.client.search(e,t)}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,t)}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,t)}},{key:"suggest",value:function(e,t){return this.client.suggest(e,t)}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,t)}},{key:"update",value:function(e,t){return this.client.update(e,t)}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,t)}},{key:"_update",value:function(e){var t=this;e&&(t.data=e,t.geoFence&&t._validateDatas(e),t.events.triggerEvent("change",{data:t.data}),t.change&&t.change(e))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,r=e.length;for(t=0;t<r;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(r){var n=r._source,i=t._getMeterPerMapUnit(t.geoFence.unit),o=t.geoFence.center[0]*i,a=t.geoFence.center[1]*i,u=n.x*i,s=n.y*i;t._distance(u,s,o,a)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e}))})}},{key:"_distance",value:function(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))}},{key:"_getMeterPerMapUnit",value:function(e){var t=void 0;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}]),e}();t.default=s,a.default.ElasticSearch=s},function(e,t,r){"use strict";var n,i,o;!function(r,a){i=[t,e],void 0!==(o="function"==typeof(n=a)?n.apply(t,i):n)&&(e.exports=o)}(0,function(e,t){function r(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function i(e){var t=document.getElementById(e);document.getElementsByTagName("head")[0].removeChild(t)}var o={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=e,u=t.timeout||o.timeout,s=t.jsonpCallback||o.jsonpCallback,l=void 0;return new Promise(function(o,p){var c=t.jsonpCallbackFunction||r(),f=s+"_"+c;window[c]=function(e){o({ok:!0,json:function(){return Promise.resolve(e)}}),l&&clearTimeout(l),i(f),n(c)},a+=-1===a.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+a+s+"="+c),d.id=f,document.getElementsByTagName("head")[0].appendChild(d),l=setTimeout(function(){p(new Error("JSONP request to "+e+" timed out")),n(c),i(f)},u)})}})},function(e,t,r){"use strict";var n=function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function u(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function s(e){var t=new FileReader;return t.readAsText(e),a(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob?(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(u)},this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=o(this);return e||Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function c(e,t){var r=(t=t||{}).body;if(c.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,r||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function d(e){var t=new i;return(e.getAllResponseHeaders()||"").trim().split("\n").forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),i=r.join(":").trim();t.append(n,i)}),t}function h(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof i?t.headers:new i(t.headers),this.url=t.url||"",this._initBody(e)}var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};i.prototype.append=function(e,n){e=t(e),n=r(n);var i=this.map[e];i||(i=[],this.map[e]=i),i.push(n)},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){var r=this.map[t(e)];return r?r[0]:null},i.prototype.getAll=function(e){return this.map[t(e)]||[]},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,n){this.map[t(e)]=[r(n)]},i.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},l.call(c.prototype),l.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var m=[301,302,303,307,308];h.redirect=function(e,t){if(-1===m.indexOf(t))throw new RangeError("Invalid status code");return new h(null,{status:t,headers:{location:e}})};return function(e,t){return t=t||{timeout:3e4},new Promise(function(r,n){function i(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var o;o=c.prototype.isPrototypeOf(e)&&!t?e:new c(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:d(a),url:i()},t="response"in a?a.response:a.responseText;r(new h(t,e))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed due to timeout"))},a.open(o.method,o.url,!0),a.timeout=t.timeout||3e4,"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&y.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})}}("undefined"!=typeof self?self:void 0);e.exports=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},s=function(e){return e&&e.__esModule?e:{default:e}}(r(3)),l=r(39),p=l.baiduMapLayer?l.baiduMapLayer.__proto__:Function,c=function(e){function t(e,r,o,a){if(n(this,t),!p)return i(u);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o,a)),s=u;return a=a||{},s.init(a),s.argCheck(a),u.canvasLayer=r,s.transferToMercator(),u.clickEvent=u.clickEvent.bind(u),u.mousemoveEvent=u.mousemoveEvent.bind(u),u.bindEvent(),u}return o(t,p),a(t,[{key:"clickEvent",value:function(e){var r=e.layerPoint;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"clickEvent",this).call(this,r,e)}},{key:"mousemoveEvent",value:function(e){var r=e.layerPoint;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mousemoveEvent",this).call(this,r,e)}},{key:"bindEvent",value:function(e){var t=this.map;this.options.methods&&(this.options.methods.click&&t.events.on({click:this.clickEvent}),this.options.methods.mousemove&&t.events.on({mousemove:this.mousemoveEvent}))}},{key:"unbindEvent",value:function(e){var t=this.map;this.options.methods&&(this.options.methods.click&&t.events.un({click:this.clickEvent}),this.options.methods.mousemove&&t.events.un({mousemove:this.mousemoveEvent}))}},{key:"getContext",value:function(){return this.canvasLayer&&this.canvasLayer.canvasContext}},{key:"addData",value:function(e,t){var r=e;e&&e.get&&(r=e.get()),this.dataSet.add(r),this.update({options:t})}},{key:"setData",value:function(e,t){var r=e;e&&e.get&&(r=e.get()),this.dataSet=this.dataSet||new mapv.DataSet,this.dataSet.set(r),this.update({options:t})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get(e);this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"render",value:function(e){this._canvasUpdate(e)}},{key:"transferToMercator",value:function(){if(this.options.coordType&&["bd09mc","coordinates_mercator"].indexOf(this.options.coordType)>-1){var e=this.dataSet.get();e=this.dataSet.transferCoordinate(e,function(e){var t=s.default.Projection.transform({x:e[0],y:e[1]},"EPSG:3857","EPSG:4326");return[t.x,t.y]},"coordinates","coordinates"),this.dataSet._set(e)}}},{key:"_canvasUpdate",value:function(e){if(this.canvasLayer){var t=this,r=t.options.animation,n=this.getContext(),i=this.map;if(t.isEnabledTime()){if(void 0===e)return void this.clear(n);"2d"===this.context&&(n.save(),n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0, 0, 0, .1)",n.fillRect(0,0,n.canvas.width,n.canvas.height),n.restore())}else this.clear(n);if("2d"===this.context)for(var o in t.options)n[o]=t.options[o];else n.clear(n.COLOR_BUFFER_BIT);if(!(t.options.minZoom&&i.getZoom()<t.options.minZoom||t.options.maxZoom&&i.getZoom()>t.options.maxZoom)){var a=t.canvasLayer,u={fromColumn:"coordinates",transferCoordinate:function(e){var t=a.transferToMapLatLng({lon:e[0],lat:e[1]}),r=i.getViewPortPxFromLonLat(t);return[r.x,r.y]}};void 0!==e&&(u.filter=function(t){var n=r.trails||10;return e&&t.time>e-n&&t.time<e});var s=t.dataSet.get(u);this.processData(s),t.options._size=t.options.size;var l=i.getViewPortPxFromLonLat(a.transferToMapLatLng({lon:0,lat:0})),p=Math.pow(2,14-i.getZoom());"m"==t.options.unit?(t.options.size&&(t.options._size=t.options.size/p),t.options.width&&(t.options._width=t.options.width/p),t.options.height&&(t.options._height=t.options.height/p)):(t.options._size=t.options.size,t.options._height=t.options.height,t.options._width=t.options.width),this.drawContext(n,new mapv.DataSet(s),t.options,l),t.options.updateCallback&&t.options.updateCallback(e)}}}},{key:"init",value:function(e){var t=this;t.options=e,this.initDataRange(e),this.context=t.options.context||"2d",t.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(t.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.events.on({movestart:this.animatorMovestartEvent.bind(this)}),this.map.events.on({moveend:this.animatorMoveendEvent.bind(this)})}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"show",value:function(){this.map.addLayer(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeLayer(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer.redraw()}}]),t}();t.default=c},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=function(){function e(t,r){n(this,e),this.value="",this.name="token",this.CLASS_NAME="SuperMap.Credential",this.value=t||this.value,this.name=r||this.name}return i(e,[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}]),e}();t.default=a,o.default.Credential=a,o.default.Credential.CREDENTIAL=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),i=r(7);t.default=Event=n.default.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var r=n.default.Event.element(e);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=t.toUpperCase());)r=r.parentNode;return r},observe:function(e,t,r,n){var o=i.Util.getElement(e);if(n=n||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var a="eventCacheID_";o.id&&(a=o.id+"_"+a),o._eventCacheID=i.Util.createUniqueID(a)}var u=o._eventCacheID;this.observers[u]||(this.observers[u]=[]),this.observers[u].push({element:o,name:t,observer:r,useCapture:n}),o.addEventListener?o.addEventListener(t,r,n):o.attachEvent&&o.attachEvent("on"+t,r)},stopObservingElement:function(e){var t=i.Util.getElement(e)._eventCacheID;this._removeElementObservers(n.default.Event.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var r=e[t],i=new Array(r.element,r.name,r.observer,r.useCapture);n.default.Event.stopObserving.apply(this,i)}},stopObserving:function(e,t,r,o){o=o||!1;var a=i.Util.getElement(e),u=a._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.detachEvent)&&(t="keydown");var s=!1,l=n.default.Event.observers[u];if(l)for(var p=0;!s&&p<l.length;){var c=l[p];if(c.name===t&&c.observer===r&&c.useCapture===o){l.splice(p,1),0==l.length&&delete n.default.Event.observers[u],s=!0;break}p++}return s&&(a.removeEventListener?a.removeEventListener(t,r,o):a&&a.detachEvent&&a.detachEvent("on"+t,r)),s},unloadCache:function(){if(n.default.Event&&n.default.Event.observers){for(var e in n.default.Event.observers){var t=n.default.Event.observers[e];n.default.Event._removeElementObservers.apply(this,[t])}n.default.Event.observers=!1}},CLASS_NAME:"SuperMap.Event"},n.default.Event=Event,n.default.Event.observe(window,"unload",n.default.Event.unloadCache,!1)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=n(r(0)),s=n(r(19)),l=n(r(17)),p=r(6),c=r(7),f=function(){function e(t,r,n,o,a){if(i(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners=null,this.object=null,this.element=null,this.eventTypes=null,this.eventHandler=null,this.fallThrough=null,this.includeXY=!1,this.extensions=null,this.extensionCount=null,this.clearMouseListener=null,this.CLASS_NAME="SuperMap.Events",c.Util.extend(this,a),this.object=t,this.fallThrough=o,this.listeners={},this.extensions={},this.extensionCount={},this.eventTypes=[],null!=n)for(var u=0,s=n.length;u<s;u++)this.addEventType(n[u]);null!=r&&this.attachToElement(r)}return a(e,[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(l.default.stopObservingElement(this.element),this.element.hasScrollEvent&&l.default.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?l.default.stopObservingElement(this.element):(this.eventHandler=p.FunctionExt.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=p.FunctionExt.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,r=this.BROWSER_EVENTS.length;t<r;t++){var n=this.BROWSER_EVENTS[t];this.addEventType(n),l.default.observe(e,n,this.eventHandler)}l.default.observe(e,"dragstart",l.default.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,r,n,i){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=n&&-1!==c.Util.indexOf(this.eventTypes,t)){null==r&&(r=this.object);var a=this.listeners[t];a||(a=[],this.listeners[t]=a,this.extensionCount[t]=0);var u={obj:r,func:n};i?(a.splice(this.extensionCount[t],0,u),"object"===(void 0===i?"undefined":o(i))&&i.extension&&this.extensionCount[t]++):a.push(u)}}},{key:"registerPriority",value:function(e,t,r){this.register(e,t,r,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,r){null==t&&(t=this.object);var n=this.listeners[e];if(null!=n)for(var i=0,o=n.length;i<o;i++)if(n[i].obj===t&&n[i].func===r){n.splice(i,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var r=this.listeners[e];if(r&&0!=r.length){null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var n,i=0,o=(r=r.slice()).length;i<o;i++){var a=r[i];if(void 0!=(n=a.func.apply(a.obj,[t]))&&0==n)break}return this.fallThrough||l.default.stop(t,!0),n}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,r=this.listeners[t];if(r&&0!=r.length){var n=e.touches;if(n&&n[0]){for(var i,o=0,a=0,u=n.length,s=0;s<u;++s)o+=(i=n[s]).clientX,a+=i.clientY;e.clientX=o/u,e.clientY=a/u}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(l.default.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=c.Util.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=c.Util.pagePosition(this.element)),new s.default(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}]),e}();t.default=f,u.default.Events=f,u.default.Events.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"]},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=function(){function e(t,r,i){n(this,e),this.x=0,this.y=0,this.mode=null,this.CLASS_NAME="SuperMap.Pixel",this.x=t?parseFloat(t):this.x,this.y=r?parseFloat(r):this.y,this.mode=i}return i(e,[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+r)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}]),e}();a.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"},t.default=a,o.default.Pixel=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=function(){function e(t){n(this,e),this.speed=1,this.frequency=1e3,this.startTime=null,this.endTime=null,this.repeat=!0,this.currentTime=null,this.oldTime=null,this.running=!1,this.reverse=!1,this.EVENT_TYPES=["start","pause","stop"],this.events=null,this.CLASS_NAME="SuperMap.TimeControlBase";var r=this;t=t||{},r.speed=t.speed&&t.speed>=0?t.speed:r.speed,r.frequency=t.speed&&t.frequency>=0?t.frequency:r.frequency,r.startTime=t.startTime&&null!=t.startTime?t.startTime:0,r.endTime=t.endTime&&null!=t.endTime&&t.endTime>=r.startTime?t.endTime:+new Date,r.repeat=void 0!=t.repeat?t.repeat:r.repeat,r.reverse=void 0!=t.reverse?t.reverse:r.reverse,r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.events=new o.default.Events(this,null,this.EVENT_TYPES),r.startTime=Date.parse(new Date(this.startTime)),r.endTime=Date.parse(new Date(this.endTime)),r.running=!1,r.currentTime=r.startTime}return i(e,[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime))}},{key:"pause",value:function(){var e=this;e.running=!1,e.events.triggerEvent("pause",e.currentTime)}},{key:"stop",value:function(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime)}},{key:"toggle",value:function(){var e=this;e.running?e.pause():e.start()}},{key:"setSpeed",value:function(e){var t=this;return e>=0&&(t.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){var t=this;return e>=0&&(t.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null}},{key:"tick",value:function(){}}]),e}();t.default=a,o.default.TimeControlBase=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=n(r(0)),p=n(r(4)),c=r(5),f=(n(r(22)),n(r(23)),function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.CLASS_NAME="SuperMap.AddressMatchService",n}return a(t,p.default),u(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t){this.processAsync(e,t)}},{key:"decode",value:function(e,t){this.processAsync(e,t)}},{key:"processAsync",value:function(e,t){var r=this;c.FetchRequest.get(e,t).then(function(e){return e.json()}).then(function(e){e?r.serviceProcessCompleted(e):r.serviceProcessFailed(e)}).catch(function(e){r.eventListeners.processFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serviceProcessCompleted",this).call(this,e)}},{key:"serviceProcessFailed",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"serviceProcessFailed",this).call(this,e)}}]),t}());t.default=f,l.default.AddressMatchService=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=function(){function e(t){if(n(this,e),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,t){if(t.filters){var r=[];t.filters.split(",").map(function(e){r.push('"'+e+'"')}),t.filters=r}o.default.Util.extend(this,t)}}return i(e,[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}]),e}();t.default=a,o.default.GeoCodingParameter=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=function(){function e(t){if(n(this,e),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,t){if(t.filters){var r=[];t.filters.split(",").map(function(e){r.push('"'+e+'"')}),t.filters=r}o.default.Util.extend(this,t)}}return i(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}]),e}();t.default=a,o.default.GeoDecodingParameter=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(1),u=function(){function e(t){n(this,e),this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=a.AnalystSizeUnit.METER,this.radiusUnit=a.AnalystSizeUnit.METER,this.areaUnit=a.AnalystAreaUnit.SQUAREMILE,t&&o.default.Util.extend(this,t)}return i(e,[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?(t.analyst=t.analyst||{},t.analyst[r]="query"===r?e[r].toBBOX():e[r]):(t.input=t.input||{},t.input[r]=e[r])}}]),e}();t.default=u,o.default.KernelDensityJobParameter=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=n(r(0)),p=n(r(2)),c=n(r(24)),f=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.CLASS_NAME="SuperMap.KernelDensityJobsService",n.url+="/spatialanalyst/density",n}return a(t,p.default),u(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addKernelDensityJob",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,c.default,r)}}]),t}();t.default=f,l.default.KernelDensityJobsService=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(1),u=function(){function e(t){n(this,e),this.datasetName="",this.datasetQuery="",this.mode=a.SpatialQueryMode.CONTAIN,t&&o.default.Util.extend(this,t)}return i(e,[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.mode=null}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}]),e}();t.default=u,o.default.SingleObjectQueryJobsParameter=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=n(r(0)),p=n(r(2)),c=n(r(26)),f=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",n.url+="/spatialanalyst/query",n}return a(t,p.default),u(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addQueryJob",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,c.default,r)}}]),t}();t.default=f,l.default.SingleObjectQueryJobsService=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(1),u=function(){function e(t){n(this,e),this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes="",this.fields="",this.type=a.SummaryType.SUMMARYMESH,t&&o.default.Util.extend(this,t)}return i(e,[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r?("SUMMARYMESH"===e.type&&"regionDataset"!==r||"SUMMARYREGION"===e.type&&!function(e,t){for(var r=e.length;r--;)if(e[r]===t)return!0;return!1}(["meshType","resolution","query"],r))&&(t.analyst=t.analyst||{},t.analyst[r]="query"===r?e[r].toBBOX():e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r])}}]),e}();t.default=u,o.default.SummaryMeshJobParameter=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=n(r(0)),p=n(r(2)),c=n(r(28)),f=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.CLASS_NAME="SuperMap.SummaryMeshJobsService",n.url+="/spatialanalyst/aggregatepoints",n}return a(t,p.default),u(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryMeshJob",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,c.default,r)}}]),t}();t.default=f,l.default.SummaryMeshJobsService=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(1),u=function(){function e(t){n(this,e),this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=a.AnalystSizeUnit.METER,this.type=a.SummaryType.SUMMARYMESH,t&&o.default.Util.extend(this,t)}return i(e,[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==r)&&(t.analyst=t.analyst||{},t.analyst[r]="query"===r?e[r].toBBOX():e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r])}}]),e}();t.default=u,o.default.SummaryRegionJobParameter=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=n(r(0)),p=n(r(2)),c=n(r(30)),f=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.CLASS_NAME="SuperMap.SummaryRegionJobsService",n.url+="/spatialanalyst/summaryregion",n}return a(t,p.default),u(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryRegionJob",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,c.default,r)}}]),t}();t.default=f,l.default.SummaryRegionJobsService=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(1),u=function(){function e(t){n(this,e),this.datasetName="",this.datasetOverlay="",this.mode=a.ClipAnalystMode.CLIP,this.CLASS_NAME="SuperMap.VectorClipJobsParameter",(t=t||{}).mode&&"string"==typeof t.mode&&(t.mode=t.mode.toLowerCase()),o.default.Util.extend(this,t)}return i(e,[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null}}],[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}]),e}();t.default=u,o.default.VectorClipJobsParameter=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=n(r(0)),p=n(r(2)),c=n(r(32)),f=function(e){function t(e,r){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.CLASS_NAME="SuperMap.VectorClipJobsService",n.url+="/spatialanalyst/vectorclip",n}return a(t,p.default),u(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addVectorClipJob",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addJob",this).call(this,this.url,e,c.default,r)}}]),t}();t.default=f,l.default.VectorClipJobsService=f},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(1),u=function(){function e(t){n(this,e),this.name=null,this.serviceIds=null,this.clientType=a.ClientType.SERVER,this.limitation=null,this.CLASS_NAME="SuperMap.KeyServiceParameter",o.default.Util.extend(this,t)}return i(e,[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}]),e}();t.default=u,o.default.KeyServiceParameter=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=n(r(0)),o=(n(r(36)),n(r(37)),n(r(34)),r(5));i.default.SecurityManager={INNER_WINDOW_WIDTH:600,INNER_WINDOW_HEIGHT:600,generateToken:function(e,t){var r=this.servers[e];if(r)return o.FetchRequest.post(r.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})},registerServers:function(e){this.servers=this.servers||{},i.default.Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var r=e[t];this.servers[r.server]=r}},registerToken:function(e,t){if(this.tokens=this.tokens||{},e&&t){var r=this._getTokenStorageKey(e);this.tokens[r]=t}},registerKey:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=i.default.Util.isArray(e)?e:[e];for(var r=0;r<e.length;r++){var n=this._getUrlRestString(e[0])||e[0];this.keys[n]=t}}},getServerInfo:function(e){return this.servers=this.servers||{},this.servers[e]},getToken:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}},getKey:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]},loginOnline:function(e,t){var r=i.default.SecurityManager.SSO+"/login?service="+e;this._open(r,t)},loginPortal:function(e,t){e+="/"===e.substr(e.length-1,1)?"web/login":"/web/login",this._open(e,t)},loginManager:function(e,t,r){if(i.default.Util.isInTheSameDomain(e)){var n="/"===e.substr(e.length-1,1)?e+"icloud/security/tokens.json":e+"/icloud/security/tokens.json",a=t||{},u={username:a.userName&&a.userName.toString(),password:a.password&&a.password.toString()};u=JSON.stringify(u);var s={headers:{Accept:"*/*","Content-Type":"application/json"}},l=this;return o.FetchRequest.post(n,u,s).then(function(e){e.text().then(function(e){return l.imanagerToken=e,e})})}var p=!r||r.isNewTab;this._open(e,p)},destroyAllCredentials:function(){this.keys=null,this.tokens=null,this.servers=null},destroyToken:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}},destroyKey:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}},_open:function(e,t){t=null==t||t;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,i="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",i)},_getTokenStorageKey:function(e){var t=/(.*?):\/\/([^\/]+)/i,r=e.match(t);return r?r[0]:e},_getUrlRestString:function(e){if(!e)return e;var t=/http:\/\/(.*\/rest)/i,r=e.match(t);return r?r[0]:e}},i.default.SecurityManager.SSO="https://sso.supermap.com",i.default.SecurityManager.ONLINE="http://www.supermapol.com"},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),o=r(1),a=function e(t,r){n(this,e),this.type=null,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,this.CLASS_NAME="SuperMap.ServerInfo",this.type=t||o.ServerType.ISERVER,i.default.Util.extend(this,r),this.server||console.error("server url require is not  undefined");var a=/http:\/\/([^\/]+)/i;this.server=this.server.match(a)[0];var u="/services/security/tokens.json";this.type===o.ServerType.ISERVER&&this.server.indexOf("iserver")<0&&(u="/iserver"+u),this.tokenServiceUrl||(this.tokenServiceUrl=this.server+u),this.keyServiceUrl||(this.type===o.ServerType.IPORTAL?this.keyServiceUrl=this.server+"/web/mycontent/keys/register.json":this.type===o.ServerType.ONLINE&&(this.keyServiceUrl=this.server+"/web/mycontent/keys.json"))};t.default=a,i.default.ServerInfo=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(r(0)),a=r(1),u=function(){function e(t){n(this,e),this.userName=null,this.password=null,this.clientType=a.ClientType.NONE,this.ip=null,this.referer=null,this.expiration=60,this.CLASS_NAME="SuperMap.TokenServiceParameter",o.default.Util.extend(this,t)}return i(e,[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}]),e}();t.default=u,o.default.TokenServiceParameter=u},function(e,t){e.exports=function(){try{return elasticsearch}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t,r){r(10),r(9),r(11),r(12),e.exports=r(8)}]);