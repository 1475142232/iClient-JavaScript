/*!
 * 
 *     vue-iclient-widgets.(http://iclient.supermap.io)
 *     CopyrightÂ© 2000 - 2019 SuperMap Software Co.Ltd
 *     license: Apache-2.0
 *     version: v9.1.2
 *    
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("vue"),require("./static/libs/mapboxgl/mapbox-gl-enhance.js"),require("./static/libs/iclient-mapboxgl/iclient9-mapboxgl.min.js"),require("VueECharts"),require("@mapbox/mapbox-gl-draw"),require("echarts"),require("echarts-liquidfill"),require("mapv"),require("./static/libs/deckgl/deck.gl.min.js"),require("./static/libs/echarts-layer/EchartsLayer.js"),require("xlsx"),require("shapefile")):"function"==typeof define&&define.amd?define(["vue","./static/libs/mapboxgl/mapbox-gl-enhance.js","./static/libs/iclient-mapboxgl/iclient9-mapboxgl.min.js","VueECharts","@mapbox/mapbox-gl-draw","echarts","echarts-liquidfill","mapv","./static/libs/deckgl/deck.gl.min.js","./static/libs/echarts-layer/EchartsLayer.js","xlsx","shapefile"],e):"object"==typeof exports?exports.Widgets=e(require("vue"),require("./static/libs/mapboxgl/mapbox-gl-enhance.js"),require("./static/libs/iclient-mapboxgl/iclient9-mapboxgl.min.js"),require("VueECharts"),require("@mapbox/mapbox-gl-draw"),require("echarts"),require("echarts-liquidfill"),require("mapv"),require("./static/libs/deckgl/deck.gl.min.js"),require("./static/libs/echarts-layer/EchartsLayer.js"),require("xlsx"),require("shapefile")):(t.SuperMap=t.SuperMap||{},t.SuperMap.Widgets=e(t.Vue,t.mapboxgl,t.SuperMap,t.VueECharts,t.MapboxDraw,t.echarts,t["echarts-liquidfill"],t.mapv,t.DeckGL,t.EchartsLayer,t.XLSX,t.shapefile))}(window,function(r,n,o,a,s,l,u,c,h,p,f,d){return function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}({"+qE3":function(t,e,i){"use strict";var r,n="object"==typeof Reflect?Reflect:null,c=n&&"function"==typeof n.apply?n.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}((t.exports=a).EventEmitter=a).prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function l(t,e,i,r){var n,o,a,s;if("function"!=typeof i)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),a=o[e]),void 0===a)a=o[e]=i,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),0<(n=u(t))&&a.length>n&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return t}function h(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,c(this.listener,this.target,t))}.bind(r);return n.listener=i,r.wrapFn=n}function p(t,e,i){var r=t._events;if(void 0===r)return[];var n=r[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):d(n,n.length)}function f(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function d(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var o;if(0<e.length&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=n[t];if(void 0===s)return!1;if("function"==typeof s)c(s,this,e);else{var l=s.length,u=d(s,l);for(i=0;i<l;++i)c(u[i],this,e)}return!0},a.prototype.on=a.prototype.addListener=function(t,e){return l(this,t,e,!1)},a.prototype.prependListener=function(t,e){return l(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,h(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,h(this,t,e)),this},a.prototype.off=a.prototype.removeListener=function(t,e){var i,r,n,o,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(i=r[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,o=i.length-1;0<=o;o--)if(i[o]===e||i[o].listener===e){a=i[o].listener,n=o;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},a.prototype.removeAllListeners=function(t){var e,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,o=Object.keys(i);for(r=0;r<o.length;++r)"removeListener"!==(n=o[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;0<=r;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},"/rf6":function(t,o,e){"use strict";function s(t,e,i){void 0===i&&(i={});var r={type:"Feature"};return(0===i.id||i.id)&&(r.id=i.id),i.bbox&&(r.bbox=i.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,i){return void 0===i&&(i={}),s({type:"Point",coordinates:t},e,i)}function n(t,e,i){void 0===i&&(i={});for(var r=0,n=t;r<n.length;r++){var o=n[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,i)}function a(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,i)}function l(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function u(t,e,i){return void 0===i&&(i={}),s({type:"MultiLineString",coordinates:t},e,i)}function c(t,e,i){return void 0===i&&(i={}),s({type:"MultiPoint",coordinates:t},e,i)}function h(t,e,i){return void 0===i&&(i={}),s({type:"MultiPolygon",coordinates:t},e,i)}function p(t,e){void 0===e&&(e="kilometers");var i=o.factors[e];if(!i)throw new Error(e+" units is invalid");return t*i}function f(t,e){void 0===e&&(e="kilometers");var i=o.factors[e];if(!i)throw new Error(e+" units is invalid");return t/i}function i(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:o.earthRadius/1.0936},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1/1.0936},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=s,o.geometry=function(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return r(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return n(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return h(e).geometry;default:throw new Error(t+" is invalid")}},o.point=r,o.points=function(t,e,i){return void 0===i&&(i={}),l(t.map(function(t){return r(t,e)}),i)},o.polygon=n,o.polygons=function(t,e,i){return void 0===i&&(i={}),l(t.map(function(t){return n(t,e)}),i)},o.lineString=a,o.lineStrings=function(t,e,i){return void 0===i&&(i={}),l(t.map(function(t){return a(t,e)}),i)},o.featureCollection=l,o.multiLineString=u,o.multiPoint=c,o.multiPolygon=h,o.geometryCollection=function(t,e,i){return void 0===i&&(i={}),s({type:"GeometryCollection",geometries:t},e,i)},o.round=function(t,e){if(void 0===e&&(e=0),e&&!(0<=e))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i},o.radiansToLength=p,o.lengthToRadians=f,o.lengthToDegrees=function(t,e){return i(f(t,e))},o.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},o.radiansToDegrees=i,o.degreesToRadians=function(t){return t%360*Math.PI/180},o.convertLength=function(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(0<=t))throw new Error("length must be a positive number");return p(f(t,e),i)},o.convertArea=function(t,e,i){if(void 0===e&&(e="meters"),void 0===i&&(i="kilometers"),!(0<=t))throw new Error("area must be a positive number");var r=o.areaFactors[e];if(!r)throw new Error("invalid original units");var n=o.areaFactors[i];if(!n)throw new Error("invalid final units");return t/r*n},o.isNumber=d,o.isObject=function(t){return!!t&&t.constructor===Object},o.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!d(t))throw new Error("bbox must only contain numbers")})},o.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},o.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},o.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},o.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},o.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},o.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},o.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},o.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},0:function(t,e,i){t.exports=i("tjUo")},"05c+":function(t,e,i){"use strict";e.__esModule=!0,e.isDef=function(t){return null!=t},e.isKorean=function(t){return/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(t)}},"0BDH":function(t,e,i){"use strict";e.__esModule=!0,e.default={methods:{dispatch:function(t,e,i){for(var r=this.$parent||this.$root,n=r.$options.componentName;r&&(!n||n!==t);)(r=r.$parent)&&(n=r.$options.componentName);r&&r.$emit.apply(r,[e].concat(i))},broadcast:function(t,e,i){(function e(i,r,n){this.$children.forEach(function(t){t.$options.componentName===i?t.$emit.apply(t,[r].concat(n)):e.apply(t,[i,r].concat([n]))})}).call(this,t,e,i)}}}},"0XuU":function(t,e,i){t.exports=i("43KI").Transform},"0YDX":function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=101)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},101:function(t,e,i){"use strict";i.r(e);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-collapse-item",class:{"is-active":e.isActive}},[i("div",{attrs:{role:"tab","aria-expanded":e.isActive,"aria-controls":"el-collapse-content-"+e.id,"aria-describedby":"el-collapse-content-"+e.id}},[i("div",{staticClass:"el-collapse-item__header",class:{focusing:e.focusing,"is-active":e.isActive},attrs:{role:"button",id:"el-collapse-head-"+e.id,tabindex:"0"},on:{click:e.handleHeaderClick,keyup:function(t){return"button"in t||!e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.stopPropagation(),e.handleEnterClick(t)):null},focus:e.handleFocus,blur:function(t){e.focusing=!1}}},[e._t("title",[e._v(e._s(e.title))]),i("i",{staticClass:"el-collapse-item__arrow el-icon-arrow-right",class:{"is-active":e.isActive}})],2)]),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":"el-collapse-head-"+e.id,id:"el-collapse-content-"+e.id}},[i("div",{staticClass:"el-collapse-item__content"},[e._t("default")],2)])])],1)};r._withStripped=!0;var n=i(23),o=i.n(n),a=i(3),s=i.n(a),l=i(4),u={name:"ElCollapseItem",componentName:"ElCollapseItem",mixins:[s.a],components:{ElCollapseTransition:o.a},data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}}},computed:{isActive:function(){return-1<this.collapse.activeNames.indexOf(this.name)},id:function(){return Object(l.generateId)()}},methods:{handleFocus:function(){var t=this;setTimeout(function(){t.isClick?t.isClick=!1:t.focusing=!0},50)},handleHeaderClick:function(){this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)}}},c=i(0),h=Object(c.a)(u,r,[],!1,null,null,null);h.options.__file="packages/collapse/src/collapse-item.vue";var p=h.exports;p.install=function(t){t.component(p.name,p)};e.default=p},23:function(t,e){t.exports=i("VIiR")},3:function(t,e){t.exports=i("0BDH")},4:function(t,e){t.exports=i("gSIQ")}})},1:function(t,e){},"1IWx":function(t,e,i){t.exports=r;var c=i("+qE3").EventEmitter;function r(){c.call(this)}i("P7XM")(r,c),r.Readable=i("43KI"),r.Writable=i("LGOv"),r.Duplex=i("CWBI"),r.Transform=i("0XuU"),r.PassThrough=i("wq4j"),(r.Stream=r).prototype.pipe=function(e,t){var i=this;function r(t){e.writable&&!1===e.write(t)&&i.pause&&i.pause()}function n(){i.readable&&i.resume&&i.resume()}i.on("data",r),e.on("drain",n),e._isStdio||t&&!1===t.end||(i.on("end",a),i.on("close",s));var o=!1;function a(){o||(o=!0,e.end())}function s(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(t){if(u(),0===c.listenerCount(this,"error"))throw t}function u(){i.removeListener("data",r),e.removeListener("drain",n),i.removeListener("end",a),i.removeListener("close",s),i.removeListener("error",l),e.removeListener("error",l),i.removeListener("end",u),i.removeListener("close",u),e.removeListener("close",u)}return i.on("error",l),e.on("error",l),i.on("end",u),i.on("close",u),e.on("close",u),e.emit("pipe",i),e}},"1K8p":function(t,e,i){"use strict";var r=i("jrfk"),n=i("ez49");function o(t){var e=0,i=0,r=0,n=0;return"detail"in t&&(i=t.detail),"wheelDelta"in t&&(i=-t.wheelDelta/120),"wheelDeltaY"in t&&(i=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=i,i=0),r=10*e,n=10*i,"deltaY"in t&&(n=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||n)&&t.deltaMode&&(1==t.deltaMode?(r*=40,n*=40):(r*=800,n*=800)),r&&!e&&(e=r<1?-1:1),n&&!i&&(i=n<1?-1:1),{spinX:e,spinY:i,pixelX:r,pixelY:n}}o.getEventType=function(){return r.firefox()?"DOMMouseScroll":n("wheel")?"wheel":"mousewheel"},t.exports=o},"1PTm":function(t,e,i){var o=i("Q9o/"),c="&&",h="||",n="and",a="or",r="=",s="~",l="!"+r,u="!"+s,p=">",f=">=",d="<",m="<=",y="*",g=",",v=".",_="(",b=")",x="where",w={pathway:[],groups:{}},S={},C={},E=console.log;function T(t){var e=P(t,x),i=e[0],r=e[1];w.pathway=P(i,g);for(var n=0,o=w.pathway.length;n<o;n++)w.pathway[n]=P(w.pathway[n],v),w.pathway[n][0]==y&&w.pathway[n].shift(),0===w.pathway[n].length&&w.pathway.splice(n,1);for(var a=-1,s=-1,l=0;l<r.length;){if(r[l]===_)a=l;else if(r[l]===b&&a<(s=l)&&-1!==a){var u="gr_"+(new Date).getTime();w.groups[u]=r.substring(a+1,s),r=r.replace(_+w.groups[u]+b,u),l=-1}l+=1}!function t(e,i){var r=M(i,c),n=M(i,h);if(r!==Number.MAX_VALUE||n!==Number.MAX_VALUE)if(r<n){e.and=e.and||[];var o=P(i,c);e.and.push(o[0]),t(e.and,o[1])}else{e.or=e.or||[];var o=P(i,h);e.or.push(o[0]),t(e.or,o[1])}else w.groups[i]?(i=w.groups[i],t(e,i)):(Array.isArray(e)?e.push(i):e.or=[i],k(S.or?S.or:S.and))}(S,r)}function k(t){for(var e in t)if(t.hasOwnProperty(e))if(Array.isArray(t[e]))k(t[e]);else if("string"==typeof t[e])if(A(t[e],l)){var i=P(t[e],l);t[e]={ne:[i[0],i[1]]}}else if(A(t[e],u)){i=P(t[e],u);t[e]={nreq:[i[0],i[1]]}}else if(A(t[e],s)){i=P(t[e],s);t[e]={req:[i[0],i[1]]}}else if(A(t[e],f)){i=P(t[e],f);t[e]={ge:[i[0],i[1]]}}else if(A(t[e],p)){i=P(t[e],p);t[e]={gt:[i[0],i[1]]}}else if(A(t[e],m)){i=P(t[e],m);t[e]={le:[i[0],i[1]]}}else if(A(t[e],d)){i=P(t[e],d);t[e]={lt:[i[0],i[1]]}}else if(A(t[e],r)){i=P(t[e],r);t[e]={eq:[i[0],i[1]]}}}function M(t,e){var i=t.indexOf(e);return-1===i?Number.MAX_VALUE:i}function P(t,e){return t.split(e).map(function(t){return t.trim()})}function A(t,e){return-1<t.indexOf(e)}function L(t,e){var i=P(e,v),r=t;for(var n in i){if(!r.hasOwnProperty(i[n]))return"";r=r[i[n]]}return r=o.isDate(r)?r.valueOf():o.isDateString(r)?o.parseDateFromString(r):r.toString()}function I(t,e){var i=!1;for(var r in t){if(i=i||(r===n?O:r===a?I:D)(t[r],e),C.trace&&E(w.step,"======((( or",t[r],i),i)return i}return i}function O(t,e){var i=!0;for(var r in t){if(i=i&&(r===n?O:r===a?I:D)(t[r],e),C.trace&&E(w.step,"======((( and",t[r],i),!i)return i}return i}function D(t,e){if(w.step+=1,t.or){var i=I(t.or,e);return C.trace&&E(w.step,"OR",t,i),i}if(t.and){i=O(t.and,e);return C.trace&&E(w.step,"AND",t,i),i}if("object"==typeof t)return t.eq?L(e,t.eq[0])===t.eq[1]:t.ne?L(e,t.ne[0])!==t.ne[1]:t.req?A(L(e,t.req[0]),t.req[1]):t.nreq?!A(L(e,t.nreq[0]),t.nreq[1]):t.gt?L(e,t.gt[0])>t.gt[1]:t.ge?L(e,t.ge[0])>=t.ge[1]:t.lt?L(e,t.lt[0])<t.lt[1]:t.le?L(e,t.le[0])<=t.le[1]:D(t,e)}function z(t,e,i){return w={pathway:[],groups:{},step:0},S={},C=i=i||{trace:!1},T(e),(r=function(t){var e=[];for(var i in t)D(S,t[i])&&e.push(t[i]);return e}(t))&&0<w.pathway.length?r.map(function(t){for(var e={},i=0,r=w.pathway.length;i<r;i++){var n=w.pathway[i].join(v);e[n]=L(t,n)}return e}):r;var r}void 0!==t.exports&&(t.exports=z),"undefined"!=typeof window&&(window.Query=z)},2:function(t,e){},"26Y8":function(t){t.exports={textColor:"#333",background:"rgba(255, 255, 255,0.6)",colorGroup:["#3fb1e3","#6be6c1","#626c91","#a0a7e6","#c4ebad","#96dee8"]}},"3BRs":function(w,t,S){"use strict";(function(t,e){var g=S("lm0R");function h(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;t.entry=null;for(;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}w.exports=u;var s,p=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?setImmediate:g.nextTick;u.WritableState=l;var i=S("Onz0");i.inherits=S("P7XM");var r={deprecate:S("t9FE")},n=S("QpuX"),v=S("hwdV").Buffer,_=e.Uint8Array||function(){};var o,a=S("RoFp");function b(){}function l(t,e){s=s||S("sZro"),t=t||{};var i=e instanceof s;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,n=t.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(n||0===n)?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,r=i.sync,n=i.writecb;if(h=i,h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0,e)a=t,s=i,l=r,u=e,c=n,--s.pendingcb,l?(g.nextTick(c,u),g.nextTick(y,a,s),a._writableState.errorEmitted=!0,a.emit("error",u)):(c(u),a._writableState.errorEmitted=!0,a.emit("error",u),y(a,s));else{var o=m(i);o||i.corked||i.bufferProcessing||!i.bufferedRequest||d(t,i),r?p(f,t,i,o,n):f(t,i,o,n)}var a,s,l,u,c;var h}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new h(this)}function u(t){if(s=s||S("sZro"),!(o.call(u,this)||this instanceof s))return new u(t);this._writableState=new l(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),n.call(this)}function x(t,e,i,r,n,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,i?t._writev(n,e.onwrite):t._write(n,o,e.onwrite),e.sync=!1}function f(t,e,i,r){var n,o;i||(n=t,0===(o=e).length&&o.needDrain&&(o.needDrain=!1,n.emit("drain"))),e.pendingcb--,r(),y(t,e)}function d(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),o=e.corkedRequestsFree;o.entry=i;for(var a=0,s=!0;i;)(n[a]=i).isBuf||(s=!1),i=i.next,a+=1;n.allBuffers=s,x(t,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new h(e),e.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,u=i.encoding,c=i.callback;if(x(t,e,!1,e.objectMode?1:l.length,l,u,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function m(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function c(e,i){e._final(function(t){i.pendingcb--,t&&e.emit("error",t),i.prefinished=!0,e.emit("prefinish"),y(e,i)})}function y(t,e){var i,r,n=m(e);return n&&(i=t,(r=e).prefinished||r.finalCalled||("function"==typeof i._final?(r.pendingcb++,r.finalCalled=!0,g.nextTick(c,i,r)):(r.prefinished=!0,i.emit("prefinish"))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}i.inherits(u,n),l.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(l.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===u&&(t&&t._writableState instanceof l)}})):o=function(t){return t instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(t,e,i){var r,n,o,a,s,l,u,c,h,p,f,d=this._writableState,m=!1,y=!d.objectMode&&(r=t,v.isBuffer(r)||r instanceof _);return y&&!v.isBuffer(t)&&(n=t,t=v.from(n)),"function"==typeof e&&(i=e,e=null),y?e="buffer":e||(e=d.defaultEncoding),"function"!=typeof i&&(i=b),d.ended?(h=this,p=i,f=new Error("write after end"),h.emit("error",f),g.nextTick(p,f)):(y||(o=this,a=d,l=i,c=!(u=!0),null===(s=t)?c=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c&&(o.emit("error",c),g.nextTick(l,c),u=!1),u))&&(d.pendingcb++,m=function(t,e,i,r,n,o){if(!i){var a=function(t,e,i){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=v.from(e,i));return e}(e,r,n);r!==a&&(i=!0,n="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else x(t,e,!1,s,r,n,o);return l}(this,d,y,t,e,i)),m},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||d(this,t))},u.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),u.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(t,e,i){var r=this._writableState;"function"==typeof t?(i=t,e=t=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,i){e.ending=!0,y(t,e),i&&(e.finished?g.nextTick(i):t.once("finish",i));e.ended=!0,t.writable=!1}(this,r,i)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),u.prototype.destroy=a.destroy,u.prototype._undestroy=a.undestroy,u.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,S("8oxB"),S("yLpj"))},"3Nwd":function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=77)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},3:function(t,e){t.exports=i("0BDH")},77:function(t,e,i){"use strict";i.r(e);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("label",{staticClass:"el-checkbox",class:[a.border&&a.checkboxSize?"el-checkbox--"+a.checkboxSize:"",{"is-disabled":a.isDisabled},{"is-bordered":a.border},{"is-checked":a.isChecked}],attrs:{role:"checkbox","aria-checked":a.indeterminate?"mixed":a.isChecked,"aria-disabled":a.isDisabled,id:a.id}},[e("span",{staticClass:"el-checkbox__input",class:{"is-disabled":a.isDisabled,"is-checked":a.isChecked,"is-indeterminate":a.indeterminate,"is-focus":a.focus},attrs:{"aria-checked":"mixed"}},[e("span",{staticClass:"el-checkbox__inner"}),a.trueLabel||a.falseLabel?e("input",{directives:[{name:"model",rawName:"v-model",value:a.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":"true",name:a.name,disabled:a.isDisabled,"true-value":a.trueLabel,"false-value":a.falseLabel},domProps:{checked:Array.isArray(a.model)?-1<a._i(a.model,null):a._q(a.model,a.trueLabel)},on:{change:[function(t){var e=a.model,i=t.target,r=i.checked?a.trueLabel:a.falseLabel;if(Array.isArray(e)){var n=a._i(e,null);i.checked?n<0&&(a.model=e.concat([null])):-1<n&&(a.model=e.slice(0,n).concat(e.slice(n+1)))}else a.model=r},a.handleChange],focus:function(t){a.focus=!0},blur:function(t){a.focus=!1}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:a.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":"true",disabled:a.isDisabled,name:a.name},domProps:{value:a.label,checked:Array.isArray(a.model)?-1<a._i(a.model,a.label):a.model},on:{change:[function(t){var e=a.model,i=t.target,r=!!i.checked;if(Array.isArray(e)){var n=a.label,o=a._i(e,n);i.checked?o<0&&(a.model=e.concat([n])):-1<o&&(a.model=e.slice(0,o).concat(e.slice(o+1)))}else a.model=r},a.handleChange],focus:function(t){a.focus=!0},blur:function(t){a.focus=!1}}})]),a.$slots.default||a.label?e("span",{staticClass:"el-checkbox__label"},[a._t("default"),a.$slots.default?a._e():[a._v(a._s(a.label))]],2):a._e()])};r._withStripped=!0;var n=i(3),o={name:"ElCheckbox",mixins:[i.n(n).a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(t){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&t.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&t.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[t])):(this.$emit("input",t),this.selfModel=t)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?-1<this.model.indexOf(this.label):null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){for(var t=this.$parent;t;){if("ElCheckboxGroup"===t.$options.componentName)return this._checkboxGroup=t,!0;t=t.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var t=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||t}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(t){var e=this;if(!this.isLimitExceeded){var i=void 0;i=t.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",i,t),this.$nextTick(function(){e.isGroup&&e.dispatch("ElCheckboxGroup","change",[e._checkboxGroup.value])})}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(t){this.dispatch("ElFormItem","el.form.change",t)}}},a=i(0),s=Object(a.a)(o,r,[],!1,null,null,null);s.options.__file="packages/checkbox/src/checkbox.vue";var l=s.exports;l.install=function(t){t.component(l.name,l)};e.default=l}})},"43KI":function(t,e,i){(((e=t.exports=i("rXFu")).Stream=e).Readable=e).Writable=i("3BRs"),e.Duplex=i("sZro"),e.Transform=i("J78i"),e.PassThrough=i("eA/Y")},"49sm":function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},"4ZJM":function(t,e,i){t.exports=function n(o,a,s){function l(i,t){if(!a[i]){if(!o[i]){if(u)return u(i,!0);var e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}var r=a[i]={exports:{}};o[i][0].call(r.exports,function(t){var e=o[i][1][t];return l(e||t)},r,r.exports,n,o,a,s)}return a[i].exports}for(var u=!1,t=0;t<s.length;t++)l(s[t]);return l}({1:[function(t,e,i){function n(t){var e=0;if(t&&0<t.length){e+=Math.abs(r(t[0]));for(var i=1;i<t.length;i++)e-=Math.abs(r(t[i]))}return e}function r(t){var e,i,r,n,o,a,s,l=0,u=t.length;if(2<u){for(s=0;s<u;s++)a=s===u-2?(n=u-2,o=u-1,0):s===u-1?(n=u-1,o=0,1):(o=(n=s)+1,s+2),e=t[n],i=t[o],r=t[a],l+=(c(r[0])-c(e[0]))*Math.sin(c(i[1]));l=l*h.RADIUS*h.RADIUS/2}return l}function c(t){return t*Math.PI/180}var h=t("wgs84");e.exports.geometry=function t(e){var i,r=0;switch(e.type){case"Polygon":return n(e.coordinates);case"MultiPolygon":for(i=0;i<e.coordinates.length;i++)r+=n(e.coordinates[i]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(i=0;i<e.geometries.length;i++)r+=t(e.geometries[i]);return r}},e.exports.ring=r},{wgs84:37}],2:[function(t,e,i){var r,n;r=this,n=function(){"use strict";var t,e;return(e=new Float32Array(3))[0]=0,e[1]=0,e[2]=0,(t=new Float32Array(4))[0]=0,t[1]=0,t[2]=0,t[3]=0,{vec3:{transformMat3:function(t,e,i){var r=e[0],n=e[1],o=e[2];return t[0]=r*i[0]+n*i[3]+o*i[6],t[1]=r*i[1]+n*i[4]+o*i[7],t[2]=r*i[2]+n*i[5]+o*i[8],t}},vec4:{transformMat4:function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,t[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,t[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,t[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,t}},mat2:{create:function(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},rotate:function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=Math.sin(i),l=Math.cos(i);return t[0]=r*l+o*s,t[1]=n*l+a*s,t[2]=r*-s+o*l,t[3]=n*-s+a*l,t},scale:function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=i[0],l=i[1];return t[0]=r*s,t[1]=n*s,t[2]=o*l,t[3]=a*l,t}},mat3:{create:function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromRotation:function(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},mat4:{create:function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},translate:function(t,e,i){var r,n,o,a,s,l,u,c,h,p,f,d,m=i[0],y=i[1],g=i[2];return t[15]=e===t?(t[12]=e[0]*m+e[4]*y+e[8]*g+e[12],t[13]=e[1]*m+e[5]*y+e[9]*g+e[13],t[14]=e[2]*m+e[6]*y+e[10]*g+e[14],e[3]*m+e[7]*y+e[11]*g+e[15]):(r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=r,t[1]=n,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=r*m+s*y+h*g+e[12],t[13]=n*m+l*y+p*g+e[13],t[14]=o*m+u*y+f*g+e[14],a*m+c*y+d*g+e[15]),t},scale:function(t,e,i){var r=i[0],n=i[1],o=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},multiply:function(t,e,i){var r=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],m=e[12],y=e[13],g=e[14],v=e[15],_=i[0],b=i[1],x=i[2],w=i[3];return t[0]=_*r+b*s+x*h+w*m,t[1]=_*n+b*l+x*p+w*y,t[2]=_*o+b*u+x*f+w*g,t[3]=_*a+b*c+x*d+w*v,_=i[4],b=i[5],x=i[6],w=i[7],t[4]=_*r+b*s+x*h+w*m,t[5]=_*n+b*l+x*p+w*y,t[6]=_*o+b*u+x*f+w*g,t[7]=_*a+b*c+x*d+w*v,_=i[8],b=i[9],x=i[10],w=i[11],t[8]=_*r+b*s+x*h+w*m,t[9]=_*n+b*l+x*p+w*y,t[10]=_*o+b*u+x*f+w*g,t[11]=_*a+b*c+x*d+w*v,_=i[12],b=i[13],x=i[14],w=i[15],t[12]=_*r+b*s+x*h+w*m,t[13]=_*n+b*l+x*p+w*y,t[14]=_*o+b*u+x*f+w*g,t[15]=_*a+b*c+x*d+w*v,t},perspective:function(t,e,i,r,n){var o=1/Math.tan(e/2),a=1/(r-n);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*r*a,t[15]=0,t},rotateX:function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+u*r,t[5]=a*n+c*r,t[6]=s*n+h*r,t[7]=l*n+p*r,t[8]=u*n-o*r,t[9]=c*n-a*r,t[10]=h*n-s*r,t[11]=p*n-l*r,t},rotateZ:function(t,e,i){var r=Math.sin(i),n=Math.cos(i),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+u*r,t[1]=a*n+c*r,t[2]=s*n+h*r,t[3]=l*n+p*r,t[4]=u*n-o*r,t[5]=c*n-a*r,t[6]=h*n-s*r,t[7]=p*n-l*r,t},invert:function(t,e){var i=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],m=e[13],y=e[14],g=e[15],v=i*s-r*a,_=i*l-n*a,b=i*u-o*a,x=r*l-n*s,w=r*u-o*s,S=n*u-o*l,C=c*m-h*d,E=c*y-p*d,T=c*g-f*d,k=h*y-p*m,M=h*g-f*m,P=p*g-f*y,A=v*P-_*M+b*k+x*T-w*E+S*C;return A?(A=1/A,t[0]=(s*P-l*M+u*k)*A,t[1]=(n*M-r*P-o*k)*A,t[2]=(m*S-y*w+g*x)*A,t[3]=(p*w-h*S-f*x)*A,t[4]=(l*T-a*P-u*E)*A,t[5]=(i*P-n*T+o*E)*A,t[6]=(y*b-d*S-g*_)*A,t[7]=(c*S-p*b+f*_)*A,t[8]=(a*M-s*T+u*C)*A,t[9]=(r*T-i*M-o*C)*A,t[10]=(d*w-m*b+g*v)*A,t[11]=(h*b-c*w-f*v)*A,t[12]=(s*E-a*k-l*C)*A,t[13]=(i*k-r*E+n*C)*A,t[14]=(m*_-d*x-y*v)*A,t[15]=(c*x-h*_+p*v)*A,t):null},ortho:function(t,e,i,r,n,o,a){var s=1/(e-i),l=1/(r-n),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*s,t[13]=(n+r)*l,t[14]=(a+o)*u,t[15]=1,t}}}},"object"==typeof i&&void 0!==e?e.exports=n():r.glMatrix=n()},{}],3:[function(t,e,i){"use strict";function o(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&(e=t&&t.failIfMajorPerformanceCaveat,void 0===a[e]&&(a[e]=(i=e,r=document.createElement("canvas"),(n=Object.create(o.webGLContextAttributes)).failIfMajorPerformanceCaveat=i,r.probablySupportsContext?r.probablySupportsContext("webgl",n)||r.probablySupportsContext("experimental-webgl",n):r.supportsContext?r.supportsContext("webgl",n)||r.supportsContext("experimental-webgl",n):r.getContext("webgl",n)||r.getContext("experimental-webgl",n))),a[e]));var e,i,r,n}void 0!==e&&e.exports?e.exports=o:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=o);var a={};o.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],4:[function(t,e,i){"use strict";function r(t,e){this.x=t,this.y=e}(e.exports=r).prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),r=e*this.x-i*this.y,n=i*this.x+e*this.y;return this.x=r,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),r=Math.sin(t),n=e.x+i*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+i*(this.y-e.y);return this.x=n,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},{}],5:[function(t,e,i){var r,n;r=this,n=function(){function t(t,e,i){i=i||{},this.w=t||64,this.h=e||64,this.autoResize=!!i.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function f(t,e,i){this.x=0,this.y=t,this.w=this.free=e,this.h=i}function n(t,e,i,r,n,o,a){this.id=t,this.x=e,this.y=i,this.w=r,this.h=n,this.maxw=o||r,this.maxh=a||n,this.refcount=0}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var i,r,n,o,a=[],s=0;s<t.length;s++)if(i=t[s].w||t[s].width,r=t[s].h||t[s].height,n=t[s].id,i&&r){if(!(o=this.packOne(i,r,n)))continue;e.inPlace&&(t[s].x=o.x,t[s].y=o.y,t[s].id=o.id),a.push(o)}return this.shrink(),a},t.prototype.packOne=function(t,e,i){var r,n,o,a,s,l,u,c,h={freebin:-1,shelf:-1,waste:1/0},p=0;if("string"==typeof i||"number"==typeof i){if(r=this.getBin(i))return this.ref(r),r;"number"==typeof i&&(this.maxId=Math.max(i,this.maxId))}else i=++this.maxId;for(a=0;a<this.freebins.length;a++){if(r=this.freebins[a],e===r.maxh&&t===r.maxw)return this.allocFreebin(a,t,e,i);e>r.maxh||t>r.maxw||e<=r.maxh&&t<=r.maxw&&(o=r.maxw*r.maxh-t*e)<h.waste&&(h.waste=o,h.freebin=a)}for(a=0;a<this.shelves.length;a++)if(n=this.shelves[a],p+=n.h,!(t>n.free)){if(e===n.h)return this.allocShelf(a,t,e,i);e>n.h||e<n.h&&(o=(n.h-e)*t)<h.waste&&(h.freebin=-1,h.waste=o,h.shelf=a)}return-1!==h.freebin?this.allocFreebin(h.freebin,t,e,i):-1!==h.shelf?this.allocShelf(h.shelf,t,e,i):e<=this.h-p&&t<=this.w?(n=new f(p,this.w,e),this.allocShelf(this.shelves.push(n)-1,t,e,i)):this.autoResize?(s=l=this.h,((u=c=this.w)<=s||u<t)&&(c=2*Math.max(t,u)),(s<u||s<e)&&(l=2*Math.max(e,s)),this.resize(c,l),this.packOne(t,e,i)):null},t.prototype.allocFreebin=function(t,e,i,r){var n=this.freebins.splice(t,1)[0];return n.id=r,n.w=e,n.h=i,n.refcount=0,this.bins[r]=n,this.ref(n),n},t.prototype.allocShelf=function(t,e,i,r){var n=this.shelves[t],o=n.alloc(e,i,r);return this.bins[r]=o,this.ref(o),o},t.prototype.shrink=function(){if(0<this.shelves.length){for(var t=0,e=0,i=0;i<this.shelves.length;i++){var r=this.shelves[i];e+=r.h,t=Math.max(r.w-r.free,t)}this.resize(t,e)}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var i=0;i<this.shelves.length;i++)this.shelves[i].resize(t);return!0},f.prototype.alloc=function(t,e,i){if(t>this.free||e>this.h)return null;var r=this.x;return this.x+=t,this.free-=t,new n(i,r,this.y,t,e,t,this.h)},f.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t},"object"==typeof i&&void 0!==e?e.exports=n():r.ShelfPack=n()},{}],6:[function(t,e,i){"use strict";function r(t,e,i,r,n,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=n||"sans-serif",this.fontWeight=o||"normal",this.radius=i||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function a(t,e,i,r,n,o,a){for(var s=0;s<e;s++){for(var l=0;l<i;l++)r[l]=t[l*e+s];for(u(r,n,o,a,i),l=0;l<i;l++)t[l*e+s]=n[l]}for(l=0;l<i;l++){for(s=0;s<e;s++)r[s]=t[l*e+s];for(u(r,n,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(n[s])}}function u(t,e,i,r,n){i[0]=0,r[0]=-l,r[1]=+l;for(var o=1,a=0;o<n;o++){for(var s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[i[a]]+i[a]*i[a]))/(2*o-2*i[a]);i[++a]=o,r[a]=s,r[a+1]=+l}for(a=o=0;o<n;o++){for(;r[a+1]<o;)a++;e[o]=(o-i[a])*(o-i[a])+t[i[a]]}}e.exports=r;var l=1e20;r.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var n=e.data[4*r+3]/255;this.gridOuter[r]=1===n?0:0===n?l:Math.pow(Math.max(0,.5-n),2),this.gridInner[r]=1===n?l:0===n?0:Math.pow(Math.max(0,n-.5),2)}for(a(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),a(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var o=this.gridOuter[r]-this.gridInner[r];i[r]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return i}},{}],7:[function(t,e,i){function r(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}(e.exports=r).prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var i,r,n,o,a;for(void 0===e&&(e=1e-6),n=t,a=0;a<8;a++){if(o=this.sampleCurveX(n)-t,Math.abs(o)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=o/s}if(r=1,(n=t)<(i=0))return i;if(r<n)return r;for(;i<r;){if(o=this.sampleCurveX(n),Math.abs(o-t)<e)return n;o<t?i=n:r=n,n=.5*(r-i)+i}return n},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],8:[function(t,e,i){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":9,"./lib/vectortilefeature.js":10,"./lib/vectortilelayer.js":11}],9:[function(t,e,i){"use strict";function r(t,e,i){if(3===t){var r=new n(i,i.readVarint()+i.pos);r.length&&(e[r.name]=r)}}var n=t("./vectortilelayer");e.exports=function(t,e){this.layers=t.readFields(r,{},e)}},{"./vectortilelayer":11}],10:[function(t,e,i){"use strict";function f(t,e,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=n,t.readFields(o,this,e)}function o(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function d(t){for(var e,i,r=0,n=0,o=t.length,a=o-1;n<o;a=n++)e=t[n],i=t[a],r+=(i.x-e.x)*(e.y+i.y);return r}var u=t("@mapbox/point-geometry");(e.exports=f).types=["Unknown","Point","LineString","Polygon"],f.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,r=1,n=0,o=0,a=0,s=[];t.pos<i;){if(!n){var l=t.readVarint();r=7&l,n=l>>3}if(n--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new u(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},f.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,r=0,n=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(!r){var c=t.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)n+=t.readSVarint(),o+=t.readSVarint(),n<a&&(a=n),s<n&&(s=n),o<l&&(l=o),u<o&&(u=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,l,s,u]},f.prototype.toGeoJSON=function(t,e,i){function r(t){for(var e=0;e<t.length;e++){var i=t[e],r=180-360*(i.y+l)/a;t[e]=[360*(i.x+s)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var n,o,a=this.extent*Math.pow(2,i),s=this.extent*t,l=this.extent*e,u=this.loadGeometry(),c=f.types[this.type];switch(this.type){case 1:var h=[];for(n=0;n<u.length;n++)h[n]=u[n][0];r(u=h);break;case 2:for(n=0;n<u.length;n++)r(u[n]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var i,r,n=[],o=0;o<e;o++){var a=d(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(i&&n.push(i),i=[t[o]]):i.push(t[o]))}return i&&n.push(i),n}(u),n=0;n<u.length;n++)for(o=0;o<u[n].length;o++)r(u[n][o])}1===u.length?u=u[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(p.id=this.id),p}},{"@mapbox/point-geometry":4}],11:[function(t,e,i){"use strict";function r(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(n,this,e),this.length=this._features.length}function n(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(i))}var o=t("./vectortilefeature.js");(e.exports=r).prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new o(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":10}],12:[function(t,e,i){var r;r=this,function(t){function a(t,e,i){e=Math.pow(2,i)-e-1;var r=o(256*t,256*e,i),n=o(256*(t+1),256*(e+1),i);return r[0]+","+r[1]+","+n[0]+","+n[1]}function o(t,e,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}t.getURL=function(t,e,i,r,n,o){return o=o||{},t+"?"+["bbox="+a(i,r,n),"format="+(o.format||"image/png"),"service="+(o.service||"WMS"),"version="+(o.version||"1.1.1"),"request="+(o.request||"GetMap"),"srs="+(o.srs||"EPSG:3857"),"width="+(o.width||256),"height="+(o.height||256),"layers="+e].join("&")},t.getTileBBox=a,t.getMercCoords=o,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof i&&void 0!==e?i:r.WhooTS=r.WhooTS||{})},{}],13:[function(t,e,i){function f(t){return(t=Math.round(t))<0?0:255<t?255:t}function d(t){return f("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function m(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:1<e?1:e;var e}function y(t,e,i){return i<0?i+=1:1<i&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}var g={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{i.parseCSSColor=function(t){var e=t.replace(/ /g,"").toLowerCase();if(e in g)return g[e].slice();if("#"===e[0]){if(4===e.length){var i=parseInt(e.substr(1),16);return 0<=i&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null}if(7!==e.length)return null;var i=parseInt(e.substr(1),16);return 0<=i&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null}var r=e.indexOf("("),n=e.indexOf(")");if(-1!==r&&n+1===e.length){var o=e.substr(0,r),a=e.substr(r+1,n-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=m(a.pop());case"rgb":return 3!==a.length?null:[d(a[0]),d(a[1]),d(a[2]),s];case"hsla":if(4!==a.length)return null;s=m(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=m(a[1]),c=m(a[2]),h=c<=.5?c*(u+1):c+u-c*u,p=2*c-h;return[f(255*y(p,h,l+1/3)),f(255*y(p,h,l)),f(255*y(p,h,l-1/3)),s];default:return null}}return null}}catch(t){}},{}],14:[function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,n,o,a,s,l,u,c=e&&e.length,h=c?e[0]*i:t.length,p=m(t,0,h,i,!0),f=[];if(!p)return f;if(c&&(p=function(t,e,i,r){var n,o,a,s,l,u=[];for(n=0,o=e.length;n<o;n++)a=e[n]*r,s=n<o-1?e[n+1]*r:t.length,(l=m(t,a,s,r,!1))===l.next&&(l.steiner=!0),u.push(x(l));for(u.sort(v),n=0;n<u.length;n++)_(u[n],i),i=y(i,i.next);return i}(t,e,p,i)),t.length>80*i){r=o=t[0],n=a=t[1];for(var d=i;d<h;d+=i)s=t[d],l=t[d+1],s<r&&(r=s),l<n&&(n=l),o<s&&(o=s),a<l&&(a=l);u=0!==(u=Math.max(o-r,a-n))?1/u:0}return g(p,f,i,r,n,u),f}function m(t,e,i,r,n){var o,a;if(n===0<k(t,e,i,r))for(o=e;o<i;o+=r)a=l(o,t[o],t[o+1],a);else for(o=i-r;e<=o;o-=r)a=l(o,t[o],t[o+1],a);return a&&s(a,a.next)&&(T(a),a=a.next),a}function y(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!s(r,r.next)&&0!==S(r.prev,r,r.next))r=r.next;else{if(T(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function g(t,e,i,r,n,o,a){if(t){!a&&o&&function(t,e,i,r){for(var n=t;null===n.z&&(n.z=b(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,(n=n.next)!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,a,s,l,u=1;do{for(i=t,o=t=null,a=0;i;){for(a++,r=i,e=s=0;e<u&&(s++,r=r.nextZ);e++);for(l=u;0<s||0<l&&r;)0!==s&&(0===l||!r||i.z<=r.z)?(i=(n=i).nextZ,s--):(r=(n=r).nextZ,l--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,u*=2}while(1<a)}(n)}(t,r,n,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?h(t,r,n,o):c(t))e.push(s.i/i),e.push(t.i/i),e.push(l.i/i),T(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?g(t=p(t,e,i),e,i,r,n,o,2):2===a&&f(t,e,i,r,n,o):g(y(t),e,i,r,n,o,1);break}}}function c(t){var e=t.prev,i=t,r=t.next;if(0<=S(e,i,r))return!1;for(var n=t.next.next;n!==t.prev;){if(w(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=S(n.prev,n,n.next))return!1;n=n.next}return!0}function h(t,e,i,r){var n=t.prev,o=t,a=t.next;if(0<=S(n,o,a))return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,l=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,u=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,c=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,h=b(s,l,e,i,r),p=b(u,c,e,i,r),f=t.prevZ,d=t.nextZ;f&&f.z>=h&&d&&d.z<=p;){if(f!==t.prev&&f!==t.next&&w(n.x,n.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=S(f.prev,f,f.next))return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&w(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=S(d.prev,d,d.next))return!1;d=d.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&w(n.x,n.y,o.x,o.y,a.x,a.y,f.x,f.y)&&0<=S(f.prev,f,f.next))return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&w(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=S(d.prev,d,d.next))return!1;d=d.nextZ}return!0}function p(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!s(n,o)&&d(n,r,r.next,o)&&C(n,o)&&C(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),T(r),T(r.next),r=t=o),r=r.next}while(r!==t);return r}function f(t,e,i,r,n,o){var a,s,l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&(s=u,(a=l).next.i!==s.i&&a.prev.i!==s.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&d(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(a,s)&&C(a,s)&&C(s,a)&&function(t,e){for(var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),(i=i.next)!==t;);return r}(a,s))){var c=E(l,u);return l=y(l,l.next),c=y(c,c.next),g(l,e,i,r,n,o),void g(c,e,i,r,n,o)}u=u.next}l=l.next}while(l!==t)}function v(t,e){return t.x-e.x}function _(t,e){if(e=function(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&a<s){if((a=s)===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===a)return i.prev;var l,u=i,c=i.x,h=i.y,p=1/0;for(r=i.next;r!==u;)n>=r.x&&r.x>=c&&n!==r.x&&w(o<h?n:a,o,c,h,o<h?a:n,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(n-r.x))<p||l===p&&r.x>i.x)&&C(r,t)&&(i=r,p=l),r=r.next;return i}(t,e)){var i=E(e,t);y(i,i.next)}}function b(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function x(t){for(var e=t,i=t;e.x<i.x&&(i=e),(e=e.next)!==t;);return i}function w(t,e,i,r,n,o,a,s){return 0<=(n-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(r-s)-(i-a)*(e-s)&&0<=(i-a)*(o-s)-(n-a)*(r-s)}function S(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function s(t,e){return t.x===e.x&&t.y===e.y}function d(t,e,i,r){return!!(s(t,e)&&s(i,r)||s(t,r)&&s(i,e))||0<S(t,e,i)!=0<S(t,e,r)&&0<S(i,r,t)!=0<S(i,r,e)}function C(t,e){return S(t.prev,t,t.next)<0?0<=S(t,e,t.next)&&0<=S(t,t.prev,e):S(t,e,t.prev)<0||S(t,t.next,e)<0}function E(t,e){var i=new a(t.i,t.x,t.y),r=new a(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(o.next=r).prev=o,r}function l(t,e,i,r){var n=new a(t,e,i);return r?(n.next=r.next,(n.prev=r).next.prev=n,r.next=n):(n.prev=n).next=n,n}function T(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function a(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}e.exports=r,(e.exports.default=r).deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,a=Math.abs(k(t,0,o,i));if(n)for(var s=0,l=e.length;s<l;s++){var u=e[s]*i,c=s<l-1?e[s+1]*i:t.length;a-=Math.abs(k(t,u,c,i))}var h=0;for(s=0;s<r.length;s+=3){var p=r[s]*i,f=r[s+1]*i,d=r[s+2]*i;h+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);0<n&&(r+=t[n-1].length,i.holes.push(r))}return i}},{}],15:[function(t,e,i){function o(e,i){return function(t){return e(t,i)}}function a(t,e){e=!!e,t[0]=r(t[0],e);for(var i=1;i<t.length;i++)t[i]=r(t[i],!e);return t}function r(t,e){return i=t,0<=n.ring(i)===e?t:t.reverse();var i}var n=t("@mapbox/geojson-area");e.exports=function t(e,i){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(o(t,i)),e;case"Feature":return e.geometry=t(e.geometry,i),e;case"Polygon":case"MultiPolygon":return n=i,"Polygon"===(r=e).type?r.coordinates=a(r.coordinates,n):"MultiPolygon"===r.type&&(r.coordinates=r.coordinates.map(o(a,n))),r;default:return e}var r,n}},{"@mapbox/geojson-area":1}],16:[function(t,e,i){"use strict";function g(t,e,i,r,n){for(var o=0;o<t.length;o+=3){var a=t[o+n];i<=a&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function v(t,e,i,r,n,o){for(var a=[],s=0===n?x:w,l=0;l<t.length-3;l+=3){var u=t[l],c=t[l+1],h=t[l+2],p=t[l+3],f=t[l+4],d=0===n?u:c,m=0===n?p:f,y=!1;d<i?i<=m&&s(a,u,c,p,f,i):r<d?m<=r&&s(a,u,c,p,f,r):b(a,u,c,h),m<i&&i<=d&&(s(a,u,c,p,f,i),y=!0),r<m&&d<=r&&(s(a,u,c,p,f,r),y=!0),!o&&y&&(a.size=t.size,e.push(a),a=[])}var g=t.length-3;u=t[g],c=t[g+1],h=t[g+2],i<=(d=0===n?u:c)&&d<=r&&b(a,u,c,h),g=a.length-3,o&&3<=g&&(a[g]!==a[0]||a[g+1]!==a[1])&&b(a,a[0],a[1],a[2]),a.length&&(a.size=t.size,e.push(a))}function _(t,e,i,r,n,o){for(var a=0;a<t.length;a++)v(t[a],e,i,r,n,o)}function b(t,e,i,r){t.push(e),t.push(i),t.push(r)}function x(t,e,i,r,n,o){t.push(o),t.push(i+(o-e)*(n-i)/(r-e)),t.push(1)}function w(t,e,i,r,n,o){t.push(e+(o-i)*(r-e)/(n-i)),t.push(o),t.push(1)}e.exports=function(t,e,i,r,n,o,a){if(r/=e,o>=(i/=e)&&a<=r)return t;if(r<o||a<i)return null;for(var s=[],l=0;l<t.length;l++){var u=t[l],c=u.geometry,h=u.type,p=0===n?u.minX:u.minY,f=0===n?u.maxX:u.maxY;if(i<=p&&f<=r)s.push(u);else if(!(r<p||f<i)){var d=[];if("Point"===h||"MultiPoint"===h)g(c,d,i,r,n);else if("LineString"===h)v(c,d,i,r,n,!1);else if("MultiLineString"===h)_(c,d,i,r,n,!1);else if("Polygon"===h)_(c,d,i,r,n,!0);else if("MultiPolygon"===h)for(var m=0;m<c.length;m++){var y=[];_(c[m],y,i,r,n,!0),y.length&&d.push(y)}d.length&&("LineString"!==h&&"MultiLineString"!==h||(1===d.length?(h="LineString",d=d[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===d.length?"Point":"MultiPoint"),s.push(S(u.id,h,d,u.tags)))}}return s.length?s:null};var S=t("./feature")},{"./feature":18}],17:[function(t,e,i){"use strict";function u(t,e,i){if(e.geometry){var r=e.geometry.coordinates,n=e.geometry.type,o=i*i,a=[];if("Point"===n)c(r,a);else if("MultiPoint"===n)for(var s=0;s<r.length;s++)c(r[s],a);else if("LineString"===n)h(r,a,o,!1);else if("MultiLineString"===n)p(r,a,o,!1);else if("Polygon"===n)p(r,a,o,!0);else{if("MultiPolygon"!==n){if("GeometryCollection"!==n)throw new Error("Input data is not a valid GeoJSON object.");for(s=0;s<e.geometry.geometries.length;s++)u(t,{geometry:e.geometry.geometries[s],properties:e.properties},i);return}for(s=0;s<r.length;s++){var l=[];p(r[s],l,o,!0),a.push(l)}}t.push(y(e.id,n,a,e.properties))}}function c(t,e){e.push(f(t[0])),e.push(d(t[1])),e.push(0)}function h(t,e,i,r){for(var n,o,a=0,s=0;s<t.length;s++){var l=f(t[s][0]),u=d(t[s][1]);e.push(l),e.push(u),e.push(0),0<s&&(a+=r?(n*u-l*o)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(u-o,2))),n=l,o=u}var c=e.length-3;e[2]=1,m(e,0,c,i),e[c+2]=1,e.size=Math.abs(a)}function p(t,e,i,r){for(var n=0;n<t.length;n++){var o=[];h(t[n],o,i,r),e.push(o)}}function f(t){return t/360+.5}function d(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:1<i?1:i}e.exports=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)u(i,t.features[r],e);else"Feature"===t.type?u(i,t,e):u(i,{geometry:t},e);return i};var m=t("./simplify"),y=t("./feature")},{"./feature":18,"./simplify":20}],18:[function(t,e,i){"use strict";function o(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)a(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<e.length;r++)a(t,e[r]);else if("MultiPolygon"===i)for(r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)a(t,e[r][n])}function a(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}e.exports=function(t,e,i,r){var n={id:t||null,type:e,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return o(n),n}},{}],19:[function(t,e,i){"use strict";function r(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");var r=1<<e.maxZoom,n=o(t,e.tolerance/(r*e.extent));this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=a(n,e.buffer/e.extent)).length&&this.splitTile(n,0,0,0),i&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function T(t,e,i){return 32*((1<<t)*i+e)+t}e.exports=function(t,e){return new r(t,e)};var o=t("./convert"),p=t("./transform"),k=t("./clip"),a=t("./wrap"),M=t("./tile");r.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,debug:0},r.prototype.splitTile=function(t,e,i,r,n,o,a){for(var s=[t,e,i,r],l=this.options,u=l.debug;s.length;){r=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=T(e,i,r),p=this.tiles[h],f=e===l.maxZoom?0:l.tolerance/(c*l.extent);if(!p&&(1<u&&console.time("creation"),p=this.tiles[h]=M(t,c,i,r,f,e===l.maxZoom),this.tileCoords.push({z:e,x:i,y:r}),u)){1<u&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=t,n){if(e===l.maxZoom||e===n)continue;var m=1<<n-e;if(i!==Math.floor(o/m)||r!==Math.floor(a/m))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){1<u&&console.time("clipping");var y,g,v,_,b,x,w=.5*l.buffer/l.extent,S=.5-w,C=.5+w,E=1+w;y=g=v=_=null,b=k(t,c,i-w,i+C,0,p.minX,p.maxX),x=k(t,c,i+S,i+E,0,p.minX,p.maxX),t=null,b&&(y=k(b,c,r-w,r+C,1,p.minY,p.maxY),g=k(b,c,r+S,r+E,1,p.minY,p.maxY),b=null),x&&(v=k(x,c,r-w,r+C,1,p.minY,p.maxY),_=k(x,c,r+S,r+E,1,p.minY,p.maxY),x=null),1<u&&console.timeEnd("clipping"),s.push(y||[],e+1,2*i,2*r),s.push(g||[],e+1,2*i,2*r+1),s.push(v||[],e+1,2*i+1,2*r),s.push(_||[],e+1,2*i+1,2*r+1)}}},r.prototype.getTile=function(t,e,i){var r=this.options,n=r.extent,o=r.debug;if(t<0||24<t)return null;var a=1<<t,s=T(t,e=(e%a+a)%a,i);if(this.tiles[s])return p.tile(this.tiles[s],n);1<o&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,u=t,c=e,h=i;!l&&0<u;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[T(u,c,h)];return l&&l.source?(1<o&&console.log("found parent tile z%d-%d-%d",u,c,h),1<o&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,i),1<o&&console.timeEnd("drilling down"),this.tiles[s]?p.tile(this.tiles[s],n):null):null}},{"./clip":16,"./convert":17,"./tile":21,"./transform":22,"./wrap":23}],20:[function(t,e,i){"use strict";function f(t,e,i,r,n,o){var a=n-i,s=o-r;if(0!==a||0!==s){var l=((t-i)*a+(e-r)*s)/(a*a+s*s);1<l?(i=n,r=o):0<l&&(i+=a*l,r+=s*l)}return(a=t-i)*a+(s=e-r)*s}e.exports=function t(e,i,r,n){for(var o,a=n,s=e[i],l=e[i+1],u=e[r],c=e[r+1],h=i+3;h<r;h+=3){var p=f(e[h],e[h+1],s,l,u,c);a<p&&(o=h,a=p)}n<a&&(3<o-i&&t(e,i,o,n),e[o+2]=a,3<r-o&&t(e,o,r,n))}},{}],21:[function(t,e,i){"use strict";function p(t,e,i,r){var n=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<n.length;s+=3)a.push(n[s]),a.push(n[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)h(a,n,t,i,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<n.length;s++)h(a,n[s],t,i,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<n.length;l++){var u=n[l];for(s=0;s<u.length;s++)h(a,u[s],t,i,r,!0,0===s)}if(a.length){var c={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:e.tags||null};null!==e.id&&(c.id=e.id),t.features.push(c)}}function h(t,e,i,r,n,o,a){var s=r*r;if(!n&&e.size<(o?s:r))i.numPoints+=e.length/3;else{for(var l=[],u=0;u<e.length;u+=3)(n||e[u+2]>s)&&(i.numSimplified++,l.push(e[u]),l.push(e[u+1])),i.numPoints++;o&&function(t,e){for(var i=0,r=0,n=t.length,o=n-2;r<n;o=r,r+=2)i+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(0<i===e)for(r=0,n=t.length;r<n/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[n-2-r],t[r+1]=t[n-1-r],t[n-2-r]=a,t[n-1-r]=s}}(l,a),t.push(l)}}e.exports=function(t,e,i,r,n,o){for(var a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z2:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,p(a,t[s],n,o);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}},{}],22:[function(t,e,i){"use strict";function p(t,e,i,r,n,o){return[Math.round(i*(t*r-n)),Math.round(i*(e*r-o))]}i.tile=function(t,e){if(t.transformed)return t;var i,r,n,o=t.z2,a=t.x,s=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(p(u[r],u[r+1],e,o,a,s));else for(r=0;r<u.length;r++){var h=[];for(n=0;n<u[r].length;n+=2)h.push(p(u[r][n],u[r][n+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t},i.point=p},{}],23:[function(t,e,i){"use strict";function o(t,e){for(var i=[],r=0;r<t.length;r++){var n,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=c(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){n=[];for(var s=0;s<o.geometry.length;s++)n.push(c(o.geometry[s],e))}else if("MultiPolygon"===a)for(n=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(c(o.geometry[s][u],e));n.push(l)}i.push(h(o.id,a,n,o.tags))}return i}function c(t,e){var i=[];i.size=t.size;for(var r=0;r<t.length;r+=3)i.push(t[r]+e,t[r+1],t[r+2]);return i}var a=t("./clip"),h=t("./feature");e.exports=function(t,e){var i=t,r=a(t,1,-1-e,e,0,-1,2),n=a(t,1,1-e,2+e,0,-1,2);return(r||n)&&(i=a(t,1,-e,1+e,0,-1,2)||[],r&&(i=o(r,1).concat(i)),n&&(i=i.concat(o(n,-1)))),i}},{"./clip":16,"./feature":18}],24:[function(t,e,i){"use strict";function r(t,e,i){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var n=new Int32Array(this.arrayBuffer);t=n[0],e=n[1],i=n[2],this.d=e+2*i;for(var o=0;o<this.d*this.d;o++){var a=n[p+o],s=n[p+o+1];r.push(a===s?null:n.subarray(a,s))}var l=n[p+r.length],u=n[p+r.length+1];this.keys=n.subarray(l,u),this.bboxes=n.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var h=i/e*t;this.min=-h,this.max=t+h}e.exports=r;var p=3;r.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(t,e,i,r,n,o){this.cells[n].push(o)},r.prototype.query=function(t,e,i,r){var n=this.min,o=this.max;if(t<=n&&e<=n&&o<=i&&o<=r)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,i,r,this._queryCell,a,{}),a},r.prototype._queryCell=function(t,e,i,r,n,o,a){var s=this.cells[n];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var h=s[c];if(void 0===a[h]){var p=4*h;t<=u[p+2]&&e<=u[p+3]&&i>=u[p+0]&&r>=u[p+1]?(a[h]=!0,o.push(l[h])):a[h]=!1}}},r.prototype._forEachCell=function(t,e,i,r,n,o,a){for(var s=this._convertToCellCoord(t),l=this._convertToCellCoord(e),u=this._convertToCellCoord(i),c=this._convertToCellCoord(r),h=s;h<=u;h++)for(var p=l;p<=c;p++){var f=this.d*p+h;if(n.call(this,t,e,i,r,f,o,a))return}},r.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=p+this.cells.length+1+1,i=0,r=0;r<this.cells.length;r++)i+=this.cells[r].length;var n=new Int32Array(e+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];n[p+a]=o,n.set(s,o),o+=s.length}return n[p+t.length]=o,n.set(this.keys,o),o+=this.keys.length,n[p+t.length+1]=o,n.set(this.bboxes,o),o+=this.bboxes.length,n.buffer}},{}],25:[function(t,e,i){i.read=function(t,e,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=i?n-1:0,p=i?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},i.write=function(t,e,i,r,n,o){var a,s,l,u=8*o-n-1,c=(1<<u)-1,h=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?p/l:p*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,n),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));8<=n;t[i+f]=255&s,f+=d,s/=256,n-=8);for(a=a<<n|s,u+=n;0<u;t[i+f]=255&a,f+=d,a/=256,u-=8);t[i+f-d]|=128*m}},{}],26:[function(t,e,i){"use strict";function o(t,e,i,r,n){e=e||a,i=i||s,n=n||Array,this.nodeSize=r||64,this.points=t,this.ids=new n(t.length),this.coords=new n(2*t.length);for(var o=0;o<t.length;o++)this.ids[o]=o,this.coords[2*o]=e(t[o]),this.coords[2*o+1]=i(t[o]);l(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function a(t){return t[0]}function s(t){return t[1]}var l=t("./sort"),n=t("./range"),r=t("./within");e.exports=function(t,e,i,r,n){return new o(t,e,i,r,n)},o.prototype={range:function(t,e,i,r){return n(this.ids,this.coords,t,e,i,r,this.nodeSize)},within:function(t,e,i){return r(this.ids,this.coords,t,e,i,this.nodeSize)}}},{"./range":27,"./sort":28,"./within":29}],27:[function(t,e,i){"use strict";e.exports=function(t,e,i,r,n,o,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),p=u.pop(),f=u.pop();if(p-f<=a)for(var d=f;d<=p;d++)s=e[2*d],l=e[2*d+1],i<=s&&s<=n&&r<=l&&l<=o&&c.push(t[d]);else{var m=Math.floor((f+p)/2);s=e[2*m],l=e[2*m+1],i<=s&&s<=n&&r<=l&&l<=o&&c.push(t[m]);var y=(h+1)%2;(0===h?i<=s:r<=l)&&(u.push(f),u.push(m-1),u.push(y)),(0===h?s<=n:l<=o)&&(u.push(m+1),u.push(p),u.push(y))}}return c}},{}],28:[function(t,e,i){"use strict";function d(t,e,i,r,n,o){for(;r<n;){if(600<n-r){var a=n-r+1,s=i-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);d(t,e,i,Math.max(r,Math.floor(i-s*u/a+c)),Math.min(n,Math.floor(i+(a-s)*u/a+c)),o)}var h=e[2*i+o],p=r,f=n;for(m(t,e,r,i),e[2*n+o]>h&&m(t,e,r,n);p<f;){for(m(t,e,p,f),p++,f--;e[2*p+o]<h;)p++;for(;e[2*f+o]>h;)f--}e[2*r+o]===h?m(t,e,r,f):m(t,e,++f,n),f<=i&&(r=f+1),i<=f&&(n=f-1)}}function m(t,e,i,r){n(t,i,r),n(e,2*i,2*r),n(e,2*i+1,2*r+1)}function n(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}e.exports=function t(e,i,r,n,o,a){if(!(o-n<=r)){var s=Math.floor((n+o)/2);d(e,i,s,n,o,a%2),t(e,i,r,n,s-1,a+1),t(e,i,r,s+1,o,a+1)}}},{}],29:[function(t,e,i){"use strict";function g(t,e,i,r){var n=t-i,o=e-r;return n*n+o*o}e.exports=function(t,e,i,r,n,o){for(var a=[0,t.length-1,0],s=[],l=n*n;a.length;){var u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var p=h;p<=c;p++)g(e[2*p],e[2*p+1],i,r)<=l&&s.push(t[p]);else{var f=Math.floor((h+c)/2),d=e[2*f],m=e[2*f+1];g(d,m,i,r)<=l&&s.push(t[f]);var y=(u+1)%2;(0===u?i-n<=d:r-n<=m)&&(a.push(h),a.push(f-1),a.push(y)),(0===u?d<=i+n:m<=r+n)&&(a.push(f+1),a.push(c),a.push(y))}}return s}},{}],30:[function(t,e,i){"use strict";function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function n(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function o(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;t<=n;n--)i.buf[n+r]=i.buf[n]}function s(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function l(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function h(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function m(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function g(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}e.exports=r;var _=t("ieee754");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var b=4294967296,x=1/b;r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+y(this.buf,this.pos+4)*b;return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+v(this.buf,this.pos+4)*b;return this.pos+=8,t},readFloat:function(){var t=_.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=_.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return i=r[this.pos++],e=127&i,i<128?e:(i=r[this.pos++],e|=(127&i)<<7,i<128?e:(i=r[this.pos++],e|=(127&i)<<14,i<128?e:(i=r[this.pos++],e|=(127&i)<<21,i<128?e:(i=r[this.pos],function(t,e,i){var r,n,o=i.buf;if(n=o[i.pos++],r=(112&n)>>4,n<128)return a(t,r,e);if(n=o[i.pos++],r|=(127&n)<<3,n<128)return a(t,r,e);if(n=o[i.pos++],r|=(127&n)<<10,n<128)return a(t,r,e);if(n=o[i.pos++],r|=(127&n)<<17,n<128)return a(t,r,e);if(n=o[i.pos++],r|=(127&n)<<24,n<128)return a(t,r,e);if(n=o[i.pos++],r|=(1&n)<<31,n<128)return a(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&i)<<28,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,i){for(var r="",n=e;n<i;){var o,a,s,l=t[n],u=null,c=239<l?4:223<l?3:191<l?2:1;if(i<n+c)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[n+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[n+1],a=t[n+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(o=t[n+1],a=t[n+2],s=t[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),n+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=n(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;127<this.buf[this.pos++];);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*x),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*x),this.pos+4),this.pos+=8},writeVarint:function(t){268435455<(t=+t||0)||t<0?function(t,e){var i,r,n,o,a,s,l;if(0<=t?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:r=r+1|(i=0)),0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),s=i,(l=e).buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos++]=127&s|128,s>>>=7,l.buf[l.pos]=127&s,a=(7&(n=r))<<4,(o=e).buf[o.pos++]|=a|((n>>>=3)?128:0),n&&(o.buf[o.pos++]=127&n|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=127&n|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=127&n|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=127&n|((n>>>=7)?128:0),n&&(o.buf[o.pos++]=127&n)))))}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!n){56319<r||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);t[i++]=r<128?r:(t[i++]=r<2048?r>>6|192:(t[i++]=r<65536?r>>12|224:(t[i++]=r>>18|240,r>>12&63|128),r>>6&63|128),63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;128<=i&&o(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),_.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),_.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;128<=r&&o(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,r.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,s,e)},writePackedSVarint:function(t,e){this.writeMessage(t,l,e)},writePackedBoolean:function(t,e){this.writeMessage(t,h,e)},writePackedFloat:function(t,e){this.writeMessage(t,u,e)},writePackedDouble:function(t,e){this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},{ieee754:25}],31:[function(t,e,i){"use strict";function d(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function m(t,e){return t<e?-1:e<t?1:0}e.exports=function t(e,i,r,n,o){for(r=r||0,n=n||e.length-1,o=o||m;r<n;){if(600<n-r){var a=n-r+1,s=i-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,i,Math.max(r,Math.floor(i-s*u/a+c)),Math.min(n,Math.floor(i+(a-s)*u/a+c)),o)}var h=e[i],p=r,f=n;for(d(e,r,i),0<o(e[n],h)&&d(e,r,n);p<f;){for(d(e,p,f),p++,f--;o(e[p],h)<0;)p++;for(;0<o(e[f],h);)f--}0===o(e[r],h)?d(e,r,f):d(e,++f,n),f<=i&&(r=f+1),i<=f&&(n=f-1)}}},{}],32:[function(t,e,i){"use strict";function r(t){this.options=n(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function a(t,e){var i=t.geometry.coordinates;return{x:s(i[0]),y:c(i[1]),zoom:1/0,id:e,parentId:-1}}function l(t){return{type:"Feature",properties:u(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,i=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(i))/Math.PI-90)]}};var e,i,r}function u(t){var e=t.numPoints,i=1e4<=e?Math.round(e/1e3)+"k":1e3<=e?Math.round(e/100)/10+"k":e;return n(n({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function s(t){return t/360+.5}function c(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:1<i?1:i}function n(t,e){for(var i in e)t[i]=e[i];return t}function h(t){return t.x}function p(t){return t.y}var f=t("kdbush");e.exports=function(t){return new r(t)},r.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var i="prepare "+t.length+" points";e&&console.time(i);var r=(this.points=t).map(a);e&&console.timeEnd(i);for(var n=this.options.maxZoom;n>=this.options.minZoom;n--){var o=+Date.now();this.trees[n+1]=f(r,h,p,this.options.nodeSize,Float32Array),r=this._cluster(r,n),e&&console.log("z%d: %d clusters in %dms",n,r.length,+Date.now()-o)}return this.trees[this.options.minZoom]=f(r,h,p,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var i=this.trees[this._limitZoom(e)],r=i.range(s(t[0]),c(t[3]),s(t[2]),c(t[1])),n=[],o=0;o<r.length;o++){var a=i.points[r[o]];n.push(a.numPoints?l(a):this.points[a.id])}return n},getChildren:function(t,e){for(var i=this.trees[e+1].points[t],r=this.options.radius/(this.options.extent*Math.pow(2,e)),n=this.trees[e+1].within(i.x,i.y,r),o=[],a=0;a<n.length;a++){var s=this.trees[e+1].points[n[a]];s.parentId===t&&o.push(s.numPoints?l(s):this.points[s.id])}return o},getLeaves:function(t,e,i,r){i=i||10,r=r||0;var n=[];return this._appendLeaves(n,t,e,i,r,0),n},getTile:function(t,e,i){var r=this.trees[this._limitZoom(t)],n=Math.pow(2,t),o=this.options.extent,a=this.options.radius,s=a/o,l=(i-s)/n,u=(i+1+s)/n,c={features:[]};return this._addTileFeatures(r.range((e-s)/n,l,(e+1+s)/n,u),r.points,e,i,n,c),0===e&&this._addTileFeatures(r.range(1-s/n,l,1,u),r.points,n,i,n,c),e===n-1&&this._addTileFeatures(r.range(0,l,s/n,u),r.points,-1,i,n,c),c.features.length?c:null},getClusterExpansionZoom:function(t,e){for(;e<this.options.maxZoom;){var i=this.getChildren(t,e);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e},_appendLeaves:function(t,e,i,r,n,o){for(var a=this.getChildren(e,i),s=0;s<a.length;s++){var l=a[s].properties;if(l.cluster?o+l.point_count<=n?o+=l.point_count:o=this._appendLeaves(t,l.cluster_id,i+1,r,n,o):o<n?o++:t.push(a[s]),t.length===r)break}return o},_addTileFeatures:function(t,e,i,r,n,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*n-i)),Math.round(this.options.extent*(s.y*n-r))]],tags:s.numPoints?u(s):this.points[s.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var i=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),n=0;n<t.length;n++){var o=t[n];if(!(o.zoom<=e)){o.zoom=e;var a=this.trees[e+1],s=a.within(o.x,o.y,r),l=o.numPoints||1,u=o.x*l,c=o.y*l,h=null;this.options.reduce&&(h=this.options.initial(),this._accumulate(h,o));for(var p=0;p<s.length;p++){var f=a.points[s[p]];if(e<f.zoom){var d=f.numPoints||1;f.zoom=e,u+=f.x*d,c+=f.y*d,l+=d,f.parentId=n,this.options.reduce&&this._accumulate(h,f)}}1===l?i.push(o):(o.parentId=n,i.push({x:u/l,y:c/l,zoom:1/0,id:n,properties:h,parentId:-1,numPoints:l}))}}return i},_accumulate:function(t,e){var i=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,i)}}},{kdbush:26}],33:[function(t,e,i){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||n,0<this.length)for(var i=this.length>>1;0<=i;i--)this._down(i)}function n(t,e){return t<e?-1:e<t?1:0}(e.exports=r).prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,i=this.compare,r=e[t];0<t;){var n=t-1>>1,o=e[n];if(0<=i(r,o))break;e[t]=o,t=n}e[t]=r},_down:function(t){for(var e=this.data,i=this.compare,r=this.length,n=r>>1,o=e[t];t<n;){var a=1+(t<<1),s=a+1,l=e[a];if(s<r&&i(e[s],l)<0&&(l=e[a=s]),0<=i(l,o))break;e[t]=l,t=a}e[t]=o}}},{}],34:[function(t,e,i){function r(t){var e=new u;return function(t,e){for(var i in t.layers)e.writeMessage(3,n,t.layers[i])}(t,e),e.finish()}function n(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i,r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)r.feature=t.feature(i),e.writeMessage(2,a,r);var n=r.keys;for(i=0;i<n.length;i++)e.writeStringField(3,n[i]);var o=r.values;for(i=0;i<o.length;i++)e.writeMessage(4,l,o[i])}function a(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,o,t),e.writeVarintField(3,i.type),e.writeMessage(4,s,i)}function o(t,e){var i=t.feature,r=t.keys,n=t.values,o=t.keycache,a=t.valuecache;for(var s in i.properties){var l=o[s];void 0===l&&(r.push(s),l=r.length-1,o[s]=l),e.writeVarint(l);var u=i.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var h=c+":"+u,p=a[h];void 0===p&&(n.push(u),p=n.length-1,a[h]=p),e.writeVarint(p)}}function f(t,e){return(e<<3)+(7&t)}function d(t){return t<<1^t>>31}function s(t,e){for(var i=t.loadGeometry(),r=t.type,n=0,o=0,a=i.length,s=0;s<a;s++){var l=i[s],u=1;1===r&&(u=l.length),e.writeVarint(f(1,u));for(var c=0;c<l.length;c++){1===c&&1!==r&&e.writeVarint(f(2,l.length-1));var h=l[c].x-n,p=l[c].y-o;e.writeVarint(d(h)),e.writeVarint(d(p)),n+=h,o+=p}}}function l(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}var u=t("pbf"),c=t("./lib/geojson_wrapper");e.exports=r,e.exports.fromVectorTileJs=r,e.exports.fromGeojsonVt=function(t){var e={};for(var i in t)e[i]=new c(t[i].features),e[i].name=i;return r({layers:e})},e.exports.GeoJSONWrapper=c},{"./lib/geojson_wrapper":35,pbf:30}],35:[function(t,e,i){"use strict";function r(t){this.features=t,this.length=t.length}function n(t){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var o=t("@mapbox/point-geometry"),a=t("@mapbox/vector-tile").VectorTileFeature;(e.exports=r).prototype.feature=function(t){return new n(this.features[t])},n.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],r=[],n=0;n<i.length;n++)r.push(new o(i[n][0],i[n][1]));this.geometry.push(r)}return this.geometry},n.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,r=1/0,n=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.y)}return[e,r,i,n]},n.prototype.toGeoJSON=a.prototype.toGeoJSON},{"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],36:[function(t,e,i){var g=arguments[3],v=arguments[4],_=arguments[5],b=JSON.stringify;e.exports=function(t,e){for(var i,r=Object.keys(_),n=0,o=r.length;n<o;n++){var a=r[n],s=_[a].exports;if(s===t||s&&s.default===t){i=a;break}}if(!i){i=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var l={},n=0,o=r.length;n<o;n++){var a=r[n];l[a]=a}v[i]=["function(require,module,exports){"+t+"(self); }",l]}var u=Math.floor(Math.pow(16,8)*Math.random()).toString(16),c={};c[i]=i,v[u]=["function(require,module,exports){var f = require("+b(i)+");(f.default ? f.default : f)(self);}",c];var h={};!function t(e){for(var i in h[e]=!0,v[e][1]){var r=v[e][1][i];h[r]||t(r)}}(u);var p="("+g+")({"+Object.keys(h).map(function(t){return b(t)+":["+v[t][0]+","+b(v[t][1])+"]"}).join(",")+"},{},["+b(u)+"])",f=window.URL||window.webkitURL||window.mozURL||window.msURL,d=new Blob([p],{type:"text/javascript"});if(e&&e.bare)return d;var m=f.createObjectURL(d),y=new Worker(m);return y.objectURL=m,y}},{}],37:[function(t,e,i){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],38:[function(t,e,i){e.exports={version:"0.44.2"}},{}],39:[function(t,e,i){"use strict";var r=t("../util/struct_array"),n=r.StructArray,o=t("../util/struct_array"),a=o.Struct,s=t("../util/web_worker_transfer"),l=s.register,u=t("@mapbox/point-geometry"),c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;this.resize(i+1);var r=2*i;return this.int16[r+0]=t,this.int16[r+1]=e,i},e}(n);c.prototype.bytesPerElement=4,l("StructArrayLayout2i4",c);var h=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;this.resize(n+1);var o=4*n;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=i,this.int16[o+3]=r,n},e}(n);h.prototype.bytesPerElement=8,l("StructArrayLayout4i8",h);var p=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=n,this.int16[s+5]=o,a},e}(n);p.prototype.bytesPerElement=12,l("StructArrayLayout2i4i12",p);var f=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s){var l=this.length;this.resize(l+1);var u=6*l,c=12*l;return this.int16[u+0]=t,this.int16[u+1]=e,this.int16[u+2]=i,this.int16[u+3]=r,this.uint8[c+8]=n,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,l},e}(n);f.prototype.bytesPerElement=12,l("StructArrayLayout4i4ub12",f);var d=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s){var l=this.length;this.resize(l+1);var u=8*l;return this.int16[u+0]=t,this.int16[u+1]=e,this.int16[u+2]=i,this.int16[u+3]=r,this.uint16[u+4]=n,this.uint16[u+5]=o,this.uint16[u+6]=a,this.uint16[u+7]=s,l},e}(n);d.prototype.bytesPerElement=16,l("StructArrayLayout4i4ui16",d);var m=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;this.resize(r+1);var n=3*r;return this.float32[n+0]=t,this.float32[n+1]=e,this.float32[n+2]=i,r},e}(n);m.prototype.bytesPerElement=12,l("StructArrayLayout3f12",m);var y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var i=1*e;return this.uint32[i+0]=t,e},e}(n);y.prototype.bytesPerElement=4,l("StructArrayLayout1ul4",y);var g=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,l,u,c){var h=this.length;this.resize(h+1);var p=12*h,f=6*h;return this.int16[p+0]=t,this.int16[p+1]=e,this.int16[p+2]=i,this.int16[p+3]=r,this.int16[p+4]=n,this.int16[p+5]=o,this.uint32[f+3]=a,this.uint16[p+8]=s,this.uint16[p+9]=l,this.int16[p+10]=u,this.int16[p+11]=c,h},e}(n);g.prototype.bytesPerElement=24,l("StructArrayLayout6i1ul2ui2i24",g);var v=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=n,this.int16[s+5]=o,a},e}(n);v.prototype.bytesPerElement=12,l("StructArrayLayout2i2i2i12",v);var _=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;this.resize(i+1);var r=4*i;return this.uint8[r+0]=t,this.uint8[r+1]=e,i},e}(n);_.prototype.bytesPerElement=4,l("StructArrayLayout2ub4",_);var b=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r,n,o,a,s,l,u,c,h,p,f){var d=this.length;this.resize(d+1);var m=20*d,y=10*d,g=40*d;return this.int16[m+0]=t,this.int16[m+1]=e,this.uint16[m+2]=i,this.uint16[m+3]=r,this.uint32[y+2]=n,this.uint32[y+3]=o,this.uint32[y+4]=a,this.uint16[m+10]=s,this.uint16[m+11]=l,this.uint16[m+12]=u,this.float32[y+7]=c,this.float32[y+8]=h,this.uint8[g+36]=p,this.uint8[g+37]=f,d},e}(n);b.prototype.bytesPerElement=40,l("StructArrayLayout2i2ui3ul3ui2f2ub40",b);var x=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var i=1*e;return this.float32[i+0]=t,e},e}(n);x.prototype.bytesPerElement=4,l("StructArrayLayout1f4",x);var w=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;this.resize(r+1);var n=3*r;return this.int16[n+0]=t,this.int16[n+1]=e,this.int16[n+2]=i,r},e}(n);w.prototype.bytesPerElement=6,l("StructArrayLayout3i6",w);var S=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;this.resize(r+1);var n=2*r,o=4*r;return this.uint32[n+0]=t,this.uint16[o+2]=e,this.uint16[o+3]=i,r},e}(n);S.prototype.bytesPerElement=8,l("StructArrayLayout1ul2ui8",S);var C=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var r=this.length;this.resize(r+1);var n=3*r;return this.uint16[n+0]=t,this.uint16[n+1]=e,this.uint16[n+2]=i,r},e}(n);C.prototype.bytesPerElement=6,l("StructArrayLayout3ui6",C);var E=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;this.resize(i+1);var r=2*i;return this.uint16[r+0]=t,this.uint16[r+1]=e,i},e}(n);E.prototype.bytesPerElement=4,l("StructArrayLayout2ui4",E);var T=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;this.resize(i+1);var r=2*i;return this.float32[r+0]=t,this.float32[r+1]=e,i},e}(n);T.prototype.bytesPerElement=8,l("StructArrayLayout2f8",T);var k=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,r){var n=this.length;this.resize(n+1);var o=4*n;return this.float32[o+0]=t,this.float32[o+1]=e,this.float32[o+2]=i,this.float32[o+3]=r,n},e}(n);k.prototype.bytesPerElement=16,l("StructArrayLayout4f16",k);var M=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{},anchorPointY:{},x1:{},y1:{},x2:{},y2:{},featureIndex:{},sourceLayerIndex:{},bucketIndex:{},radius:{},signedDistanceFromAnchor:{},anchorPoint:{}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},i.radius.get=function(){return this._structArray.int16[this._pos2+10]},i.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},i.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},i.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},i.anchorPoint.get=function(){return new u(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(a);M.prototype.size=24;var P=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return new M(this,t)},e}(g);l("CollisionBoxArray",P);var A=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{},anchorY:{},glyphStartIndex:{},numGlyphs:{},vertexStartIndex:{},lineStartIndex:{},lineLength:{},segment:{},lowerSize:{},upperSize:{},lineOffsetX:{},lineOffsetY:{},writingMode:{},hidden:{}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},i.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},i.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,i),e}(a);A.prototype.size=40;var L=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return new A(this,t)},e}(b);l("PlacedSymbolArray",L);var I=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={offsetX:{}};return i.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},i.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,i),e}(a);I.prototype.size=4;var O=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new I(this,t)},e}(x);l("GlyphOffsetArray",O);var D=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={x:{},y:{},tileUnitDistanceFromAnchor:{}};return i.x.get=function(){return this._structArray.int16[this._pos2+0]},i.x.set=function(t){this._structArray.int16[this._pos2+0]=t},i.y.get=function(){return this._structArray.int16[this._pos2+1]},i.y.set=function(t){this._structArray.int16[this._pos2+1]=t},i.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},i.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,i),e}(a);D.prototype.size=6;var z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new D(this,t)},e}(w);l("SymbolLineVertexArray",z);var F=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{},sourceLayerIndex:{},bucketIndex:{}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},i.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,i),e}(a);F.prototype.size=8;var R=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.get=function(t){return new F(this,t)},e}(S);l("FeatureIndexArray",R),e.exports={StructArrayLayout2i4:c,StructArrayLayout4i8:h,StructArrayLayout2i4i12:p,StructArrayLayout4i4ub12:f,StructArrayLayout4i4ui16:d,StructArrayLayout3f12:m,StructArrayLayout1ul4:y,StructArrayLayout6i1ul2ui2i24:g,StructArrayLayout2i2i2i12:v,StructArrayLayout2ub4:_,StructArrayLayout2i2ui3ul3ui2f2ub40:b,StructArrayLayout1f4:x,StructArrayLayout3i6:w,StructArrayLayout1ul2ui8:S,StructArrayLayout3ui6:C,StructArrayLayout2ui4:E,StructArrayLayout2f8:T,StructArrayLayout4f16:k,PosArray:c,RasterBoundsArray:h,CircleLayoutArray:c,FillLayoutArray:c,FillExtrusionLayoutArray:p,HeatmapLayoutArray:c,LineLayoutArray:f,SymbolLayoutArray:d,SymbolDynamicLayoutArray:m,SymbolOpacityArray:y,CollisionBoxLayoutArray:v,CollisionCircleLayoutArray:v,CollisionVertexArray:_,TriangleIndexArray:C,LineIndexArray:E,CollisionBoxArray:P,PlacedSymbolArray:L,GlyphOffsetArray:O,SymbolLineVertexArray:z,FeatureIndexArray:R}},{"../util/struct_array":271,"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],40:[function(t,e,i){"use strict";e.exports={deserialize:function(t,e){var i={};if(!e)return i;for(var r=0,n=t;r<n.length;r+=1){var o=n[r],a=o.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length){o.layers=a;for(var s=0,l=a;s<l.length;s+=1)i[l[s].id]=o}}return i}}},{}],41:[function(t,e,i){"use strict";var r=t("../../util/struct_array"),n=r.createLayout;e.exports=n([{name:"a_pos",components:2,type:"Int16"}],4)},{"../../util/struct_array":271}],42:[function(t,e,i){"use strict";function f(t,e,i,r,n){t.emplaceBack(2*e+(r+1)/2,2*i+(n+1)/2)}var r=t("../array_types"),n=r.CircleLayoutArray,o=t("./circle_attributes").members,a=t("../segment"),s=a.SegmentVector,l=t("../program_configuration"),u=l.ProgramConfigurationSet,c=t("../index_array_type"),h=c.TriangleIndexArray,p=t("../load_geometry"),d=t("../extent"),m=t("../../util/web_worker_transfer"),y=m.register,g=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new n,this.indexArray=new h,this.segments=new s,this.programConfigurations=new u(o,t.layers,t.zoom)};g.prototype.populate=function(t,e){for(var i=0,r=t;i<r.length;i+=1){var n=r[i],o=n.feature,a=n.index,s=n.sourceLayerIndex;if(this.layers[0]._featureFilter({zoom:this.zoom},o)){var l=p(o);this.addFeature(o,l),e.featureIndex.insert(o,l,a,s,this.index)}}},g.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},g.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},g.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},g.prototype.addFeature=function(t,e){for(var i=this,r=0,n=e;r<n.length;r+=1)for(var o=n[r],a=0,s=o;a<s.length;a+=1){var l=s[a],u=l.x,c=l.y;if(!(u<0||d<=u||c<0||d<=c)){var h=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),p=h.vertexLength;f(i.layoutVertexArray,u,c,-1,-1),f(i.layoutVertexArray,u,c,1,-1),f(i.layoutVertexArray,u,c,1,1),f(i.layoutVertexArray,u,c,-1,1),i.indexArray.emplaceBack(p,p+1,p+2),i.indexArray.emplaceBack(p,p+3,p+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},y("CircleBucket",g,{omit:["layers"]}),e.exports=g},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./circle_attributes":41}],43:[function(t,e,i){arguments[4][41][0].apply(i,arguments)},{"../../util/struct_array":271,dup:41}],44:[function(t,e,i){"use strict";var r=t("../array_types"),n=r.FillLayoutArray,o=t("./fill_attributes").members,a=t("../segment"),s=a.SegmentVector,l=t("../program_configuration"),u=l.ProgramConfigurationSet,c=t("../index_array_type"),h=c.LineIndexArray,p=c.TriangleIndexArray,f=t("../load_geometry"),x=t("earcut"),w=t("../../util/classify_rings"),d=t("../../util/web_worker_transfer"),m=d.register,y=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new n,this.indexArray=new p,this.indexArray2=new h,this.programConfigurations=new u(o,t.layers,t.zoom),this.segments=new s,this.segments2=new s};y.prototype.populate=function(t,e){for(var i=0,r=t;i<r.length;i+=1){var n=r[i],o=n.feature,a=n.index,s=n.sourceLayerIndex;if(this.layers[0]._featureFilter({zoom:this.zoom},o)){var l=f(o);this.addFeature(o,l),e.featureIndex.insert(o,l,a,s,this.index)}}},y.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},y.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2),this.programConfigurations.upload(t)},y.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},y.prototype.addFeature=function(t,e){for(var i=this,r=0,n=w(e,500);r<n.length;r+=1){for(var o=n[r],a=0,s=0,l=o;s<l.length;s+=1)a+=l[s].length;for(var u=i.segments.prepareSegment(a,i.layoutVertexArray,i.indexArray),c=u.vertexLength,h=[],p=[],f=0,d=o;f<d.length;f+=1){var m=d[f];if(0!==m.length){m!==o[0]&&p.push(h.length/2);var y=i.segments2.prepareSegment(m.length,i.layoutVertexArray,i.indexArray2),g=y.vertexLength;i.layoutVertexArray.emplaceBack(m[0].x,m[0].y),i.indexArray2.emplaceBack(g+m.length-1,g),h.push(m[0].x),h.push(m[0].y);for(var v=1;v<m.length;v++)i.layoutVertexArray.emplaceBack(m[v].x,m[v].y),i.indexArray2.emplaceBack(g+v-1,g+v),h.push(m[v].x),h.push(m[v].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var _=x(h,p),b=0;b<_.length;b+=3)i.indexArray.emplaceBack(c+_[b],c+_[b+1],c+_[b+2]);u.vertexLength+=a,u.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},m("FillBucket",y,{omit:["layers"]}),e.exports=y},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_attributes":43,earcut:14}],45:[function(t,e,i){"use strict";var r=t("../../util/struct_array"),n=r.createLayout;e.exports=n([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4)},{"../../util/struct_array":271}],46:[function(t,e,i){"use strict";function O(t,e,i,r,n,o,a,s){t.emplaceBack(e,i,2*Math.floor(r*m)+a,n*m*2,o*m*2,Math.round(s))}var r=t("../array_types"),n=r.FillExtrusionLayoutArray,o=t("./fill_extrusion_attributes").members,a=t("../segment"),s=a.SegmentVector,D=a.MAX_VERTEX_ARRAY_LENGTH,l=t("../program_configuration"),u=l.ProgramConfigurationSet,c=t("../index_array_type"),h=c.TriangleIndexArray,p=t("../load_geometry"),z=t("../extent"),F=t("earcut"),R=t("../../util/classify_rings"),f=t("../../util/web_worker_transfer"),d=f.register,m=Math.pow(2,13),y=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new n,this.indexArray=new h,this.programConfigurations=new u(o,t.layers,t.zoom),this.segments=new s};y.prototype.populate=function(t,e){for(var i=0,r=t;i<r.length;i+=1){var n=r[i],o=n.feature,a=n.index,s=n.sourceLayerIndex;if(this.layers[0]._featureFilter({zoom:this.zoom},o)){var l=p(o);this.addFeature(o,l),e.featureIndex.insert(o,l,a,s,this.index)}}},y.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},y.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},y.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},y.prototype.addFeature=function(t,e){for(var i=this,r=0,n=R(e,500);r<n.length;r+=1){for(var o=n[r],a=0,s=0,l=o;s<l.length;s+=1)a+=l[s].length;for(var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),c=0,h=o;c<h.length;c+=1){var p=h[c];if(0!==p.length&&!((I=p).every(function(t){return t.x<0})||I.every(function(t){return t.x>z})||I.every(function(t){return t.y<0})||I.every(function(t){return t.y>z})))for(var f=0,d=0;d<p.length;d++){var m=p[d];if(1<=d){var y=p[d-1];if(L=y,!((A=m).x===L.x&&(A.x<0||A.x>z)||A.y===L.y&&(A.y<0||A.y>z))){u.vertexLength+4>D&&(u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray));var g=m.sub(y)._perp()._unit(),v=y.dist(m);32768<f+v&&(f=0),O(i.layoutVertexArray,m.x,m.y,g.x,g.y,0,0,f),O(i.layoutVertexArray,m.x,m.y,g.x,g.y,0,1,f),f+=v,O(i.layoutVertexArray,y.x,y.y,g.x,g.y,0,0,f),O(i.layoutVertexArray,y.x,y.y,g.x,g.y,0,1,f);var _=u.vertexLength;i.indexArray.emplaceBack(_,_+1,_+2),i.indexArray.emplaceBack(_+1,_+2,_+3),u.vertexLength+=4,u.primitiveLength+=2}}}}u.vertexLength+a>D&&(u=i.segments.prepareSegment(a,i.layoutVertexArray,i.indexArray));for(var b=[],x=[],w=u.vertexLength,S=0,C=o;S<C.length;S+=1){var E=C[S];if(0!==E.length){E!==o[0]&&x.push(b.length/2);for(var T=0;T<E.length;T++){var k=E[T];O(i.layoutVertexArray,k.x,k.y,0,0,1,1,0),b.push(k.x),b.push(k.y)}}}for(var M=F(b,x),P=0;P<M.length;P+=3)i.indexArray.emplaceBack(w+M[P],w+M[P+1],w+M[P+2]);u.primitiveLength+=M.length/3,u.vertexLength+=a}var A,L,I;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)},d("FillExtrusionBucket",y,{omit:["layers"]}),e.exports=y},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_extrusion_attributes":45,earcut:14}],47:[function(t,e,i){"use strict";var r=t("./circle_bucket"),n=t("../../util/web_worker_transfer"),o=n.register,a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(r);o("HeatmapBucket",a,{omit:["layers"]}),e.exports=a},{"../../util/web_worker_transfer":278,"./circle_bucket":42}],48:[function(t,e,i){"use strict";var r=t("../../util/struct_array"),n=r.createLayout;e.exports=n([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4)},{"../../util/struct_array":271}],49:[function(t,e,i){"use strict";function c(t,e,i,r,n,o,a){t.emplaceBack(e.x,e.y,r?1:0,n?1:-1,Math.round(63*i.x)+128,Math.round(63*i.y)+128,1+(0===o?0:o<0?-1:1)|(.5*a&63)<<2,.5*a>>6)}var r=t("../array_types"),n=r.LineLayoutArray,o=t("./line_attributes").members,a=t("../segment"),s=a.SegmentVector,l=t("../program_configuration"),u=l.ProgramConfigurationSet,h=t("../index_array_type"),p=h.TriangleIndexArray,f=t("../load_geometry"),U=t("../extent"),$=t("@mapbox/vector-tile").VectorTileFeature.types,d=t("../../util/web_worker_transfer"),m=d.register,q=Math.cos(Math.PI/180*37.5),y=Math.pow(2,14)/.5,g=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new n,this.indexArray=new p,this.programConfigurations=new u(o,t.layers,t.zoom),this.segments=new s};g.prototype.populate=function(t,e){for(var i=0,r=t;i<r.length;i+=1){var n=r[i],o=n.feature,a=n.index,s=n.sourceLayerIndex;if(this.layers[0]._featureFilter({zoom:this.zoom},o)){var l=f(o);this.addFeature(o,l),e.featureIndex.insert(o,l,a,s,this.index)}}},g.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},g.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.programConfigurations.upload(t)},g.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},g.prototype.addFeature=function(t,e){for(var i=this.layers[0].layout,r=i.get("line-join").evaluate(t),n=i.get("line-cap"),o=i.get("line-miter-limit"),a=i.get("line-round-limit"),s=0,l=e;s<l.length;s+=1){var u=l[s];this.addLine(u,t,r,n,o,a)}},g.prototype.addLine=function(t,e,i,r,n,o){for(var a=this,s="Polygon"===$[e.type],l=t.length;2<=l&&t[l-1].equals(t[l-2]);)l--;for(var u=0;u<l-1&&t[u].equals(t[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===i&&(n=1.05);var c=U/(512*this.overscaling)*15,h=t[u],p=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.distance=0;var f,d,m,y=r,g=s?"butt":r,v=!0,_=void 0,b=void 0,x=void 0,w=void 0;this.e1=this.e2=this.e3=-1,s&&(f=t[l-2],w=h.sub(f)._unit()._perp());for(var S=u;S<l;S++)if(!(b=s&&S===l-1?t[u+1]:t[S+1])||!t[S].equals(b)){w&&(x=w),f&&(_=f),f=t[S],w=b?b.sub(f)._unit()._perp():x;var C=(x=x||w).add(w);0===C.x&&0===C.y||C._unit();var E=C.x*w.x+C.y*w.y,T=0!==E?1/E:1/0,k=E<q&&_&&b;if(k&&u<S){var M=f.dist(_);if(2*c<M){var P=f.sub(f.sub(_)._mult(c/M)._round());a.distance+=P.dist(_),a.addCurrentVertex(P,a.distance,x.mult(1),0,0,!1,p),_=P}}var A=_&&b,L=A?i:b?y:g;if(A&&"round"===L&&(T<o?L="miter":T<=2&&(L="fakeround")),"miter"===L&&n<T&&(L="bevel"),"bevel"===L&&(2<T&&(L="flipbevel"),T<n&&(L="miter")),_&&(a.distance+=f.dist(_)),"miter"===L)C._mult(T),a.addCurrentVertex(f,a.distance,C,0,0,!1,p);else if("flipbevel"===L){if(100<T)C=w.clone().mult(-1);else{var I=0<x.x*w.y-x.y*w.x?-1:1,O=T*x.add(w).mag()/x.sub(w).mag();C._perp()._mult(O*I)}a.addCurrentVertex(f,a.distance,C,0,0,!1,p),a.addCurrentVertex(f,a.distance,C.mult(-1),0,0,!1,p)}else if("bevel"===L||"fakeround"===L){var D=0<x.x*w.y-x.y*w.x,z=-Math.sqrt(T*T-1);if(D?(m=0,d=z):(d=0,m=z),v||a.addCurrentVertex(f,a.distance,x,d,m,!1,p),"fakeround"===L){for(var F=Math.floor(8*(.5-(E-.5))),R=void 0,B=0;B<F;B++)R=w.mult((B+1)/(F+1))._add(x)._unit(),a.addPieSliceVertex(f,a.distance,R,D,p);a.addPieSliceVertex(f,a.distance,C,D,p);for(var N=F-1;0<=N;N--)R=x.mult((N+1)/(F+1))._add(w)._unit(),a.addPieSliceVertex(f,a.distance,R,D,p)}b&&a.addCurrentVertex(f,a.distance,w,-d,-m,!1,p)}else"butt"===L?(v||a.addCurrentVertex(f,a.distance,x,0,0,!1,p),b&&a.addCurrentVertex(f,a.distance,w,0,0,!1,p)):"square"===L?(v||(a.addCurrentVertex(f,a.distance,x,1,1,!1,p),a.e1=a.e2=-1),b&&a.addCurrentVertex(f,a.distance,w,-1,-1,!1,p)):"round"===L&&(v||(a.addCurrentVertex(f,a.distance,x,0,0,!1,p),a.addCurrentVertex(f,a.distance,x,1,1,!0,p),a.e1=a.e2=-1),b&&(a.addCurrentVertex(f,a.distance,w,-1,-1,!0,p),a.addCurrentVertex(f,a.distance,w,0,0,!1,p)));if(k&&S<l-1){var j=f.dist(b);if(2*c<j){var V=f.add(b.sub(f)._mult(c/j)._round());a.distance+=V.dist(f),a.addCurrentVertex(V,a.distance,w.mult(1),0,0,!1,p),f=V}}v=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)}},g.prototype.addCurrentVertex=function(t,e,i,r,n,o,a){var s,l=this.layoutVertexArray,u=this.indexArray;s=i.clone(),r&&s._sub(i.perp()._mult(r)),c(l,t,s,o,!1,r,e),this.e3=a.vertexLength++,0<=this.e1&&0<=this.e2&&(u.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,s=i.mult(-1),n&&s._sub(i.perp()._mult(n)),c(l,t,s,o,!0,-n,e),this.e3=a.vertexLength++,0<=this.e1&&0<=this.e2&&(u.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,y/2<e&&(this.distance=0,this.addCurrentVertex(t,this.distance,i,r,n,o,a))},g.prototype.addPieSliceVertex=function(t,e,i,r,n){i=i.mult(r?-1:1);var o=this.layoutVertexArray,a=this.indexArray;c(o,t,i,!1,r,0,e),this.e3=n.vertexLength++,0<=this.e1&&0<=this.e2&&(a.emplaceBack(this.e1,this.e2,this.e3),n.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},m("LineBucket",g,{omit:["layers"]}),e.exports=g},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./line_attributes":48,"@mapbox/vector-tile":8}],50:[function(t,e,i){"use strict";var r=t("../../util/struct_array"),n=r.createLayout,o=n([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),a=n([{name:"a_projected_pos",components:3,type:"Float32"}],4),s=n([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),l=n([{name:"a_placed",components:2,type:"Uint8"}],4),u={symbolLayoutAttributes:o,dynamicLayoutAttributes:a,placementOpacityAttributes:s,collisionVertexAttributes:l,collisionBox:n([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),collisionBoxLayout:n([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),collisionCircleLayout:n([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),placement:n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),glyphOffset:n([{type:"Float32",name:"offsetX"}]),lineVertex:n([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}])};e.exports=u},{"../../util/struct_array":271}],51:[function(t,e,i){"use strict";function T(t,e,i,r,n,o,a,s){t.emplaceBack(e,i,Math.round(64*r),Math.round(64*n),o,a,s?s[0]:0,s?s[1]:0)}function k(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}var r=t("./symbol_attributes"),n=r.symbolLayoutAttributes,o=r.collisionVertexAttributes,a=r.collisionBoxLayout,s=r.collisionCircleLayout,l=r.dynamicLayoutAttributes,u=t("../array_types"),c=u.SymbolLayoutArray,h=u.SymbolDynamicLayoutArray,p=u.SymbolOpacityArray,f=u.CollisionBoxLayoutArray,d=u.CollisionCircleLayoutArray,m=u.CollisionVertexArray,y=u.PlacedSymbolArray,g=u.GlyphOffsetArray,v=u.SymbolLineVertexArray,_=t("@mapbox/point-geometry"),b=t("../segment"),x=b.SegmentVector,w=t("../program_configuration"),S=w.ProgramConfigurationSet,C=t("../index_array_type"),E=C.TriangleIndexArray,M=C.LineIndexArray,P=t("../../symbol/transform_text"),A=t("../../symbol/mergelines"),L=t("../../util/script_detection"),I=t("../load_geometry"),O=t("@mapbox/vector-tile").VectorTileFeature.types,D=t("../../util/verticalize_punctuation"),z=(t("../../symbol/anchor"),t("../../symbol/symbol_size")),F=z.getSizeData,R=t("../../util/web_worker_transfer"),B=R.register,N=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],j=function(t){this.layoutVertexArray=new c,this.indexArray=new E,this.programConfigurations=t,this.segments=new x,this.dynamicLayoutVertexArray=new h,this.opacityVertexArray=new p,this.placedSymbolArray=new y};j.prototype.upload=function(t,e){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,n.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.programConfigurations.upload(t),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,l.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,N,!0),this.opacityVertexBuffer.itemSize=1},j.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},B("SymbolBuffers",j);var V=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new x,this.collisionVertexArray=new m};V.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,o.members,!0)},V.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},B("CollisionBuffers",V);var U=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio;var e=this.layers[0],i=e._unevaluatedLayout._values;this.textSizeData=F(this.zoom,i["text-size"]),this.iconSizeData=F(this.zoom,i["icon-size"]);var r=this.layers[0].layout;this.sortFeaturesByY=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")};U.prototype.createArrays=function(){this.text=new j(new S(n.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new j(new S(n.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new V(f,a.members,M),this.collisionCircle=new V(d,s.members,E),this.glyphOffsetArray=new g,this.lineVertexArray=new v},U.prototype.populate=function(t,e){var i=this.layers[0],r=i.layout,n=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||0<o.value.value.length)&&("constant"!==n.value.kind||0<n.value.value.length),l="constant"!==a.value.kind||a.value.value&&0<a.value.value.length;if(this.features=[],s||l){for(var u=e.iconDependencies,c=e.glyphDependencies,h={zoom:this.zoom},p=0,f=t;p<f.length;p+=1){var d=f[p],m=d.feature,y=d.index,g=d.sourceLayerIndex;if(i._featureFilter(h,m)){var v=void 0;s&&(v=i.getValueAndResolveTokens("text-field",m),v=P(v,i,m));var _=void 0;if(l&&(_=i.getValueAndResolveTokens("icon-image",m)),v||_){var b={text:v,icon:_,index:y,sourceLayerIndex:g,geometry:I(m),properties:m.properties,type:O[m.type]};if(void 0!==m.id&&(b.id=m.id),this.features.push(b),_&&(u[_]=!0),v)for(var x=n.evaluate(m).join(","),w=c[x]=c[x]||{},S="map"===r.get("text-rotation-alignment")&&"line"===r.get("symbol-placement"),C=L.allowsVerticalWritingMode(v),E=0;E<v.length;E++)if(w[v.charCodeAt(E)]=!0,S&&C){var T=D.lookup[v.charAt(E)];T&&(w[T.charCodeAt(0)]=!0)}}}}"line"===r.get("symbol-placement")&&(this.features=A(this.features))}},U.prototype.isEmpty=function(){return 0===this.symbolInstances.length},U.prototype.upload=function(t){this.text.upload(t,this.sortFeaturesByY),this.icon.upload(t,this.sortFeaturesByY),this.collisionBox.upload(t),this.collisionCircle.upload(t)},U.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},U.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;0<=s;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:n},0<s&&(n+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},U.prototype.addSymbols=function(t,e,i,r,n,o,a,s,l,u){for(var c=t.indexArray,h=t.layoutVertexArray,p=t.dynamicLayoutVertexArray,f=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),d=this.glyphOffsetArray.length,m=f.vertexLength,y=0,g=e;y<g.length;y+=1){var v=g[y],_=v.tl,b=v.tr,x=v.bl,w=v.br,S=v.tex,C=f.vertexLength,E=v.glyphOffset[1];T(h,s.x,s.y,_.x,E+_.y,S.x,S.y,i),T(h,s.x,s.y,b.x,E+b.y,S.x+S.w,S.y,i),T(h,s.x,s.y,x.x,E+x.y,S.x,S.y+S.h,i),T(h,s.x,s.y,w.x,E+w.y,S.x+S.w,S.y+S.h,i),k(p,s,0),c.emplaceBack(C,C+1,C+2),c.emplaceBack(C+1,C+2,C+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(v.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,m,l,u,s.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],a,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o)},U.prototype._addCollisionDebugVertex=function(t,e,i,r,n){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,r.x,r.y,Math.round(n.x),Math.round(n.y))},U.prototype.addCollisionDebugVertices=function(t,e,i,r,n,o,a,s){var l=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),u=l.vertexLength,c=n.layoutVertexArray,h=n.collisionVertexArray;if(this._addCollisionDebugVertex(c,h,o,a.anchor,new _(t,e)),this._addCollisionDebugVertex(c,h,o,a.anchor,new _(i,e)),this._addCollisionDebugVertex(c,h,o,a.anchor,new _(i,r)),this._addCollisionDebugVertex(c,h,o,a.anchor,new _(t,r)),l.vertexLength+=4,s){var p=n.indexArray;p.emplaceBack(u,u+1,u+2),p.emplaceBack(u,u+2,u+3),l.primitiveLength+=2}else{var f=n.indexArray;f.emplaceBack(u,u+1),f.emplaceBack(u+1,u+2),f.emplaceBack(u+2,u+3),f.emplaceBack(u+3,u),l.primitiveLength+=4}},U.prototype.generateCollisionDebugBuffers=function(){for(var t=this,e=0,i=t.symbolInstances;e<i.length;e+=1){var r=i[e];r.textCollisionFeature={boxStartIndex:r.textBoxStartIndex,boxEndIndex:r.textBoxEndIndex},r.iconCollisionFeature={boxStartIndex:r.iconBoxStartIndex,boxEndIndex:r.iconBoxEndIndex};for(var n=0;n<2;n++){var o=r[0===n?"textCollisionFeature":"iconCollisionFeature"];if(o)for(var a=o.boxStartIndex;a<o.boxEndIndex;a++){var s=t.collisionBoxArray.get(a),l=s.x1,u=s.y1,c=s.x2,h=s.y2,p=0<s.radius;t.addCollisionDebugVertices(l,u,c,h,p?t.collisionCircle:t.collisionBox,s.anchorPoint,r,p)}}}},U.prototype.deserializeCollisionBoxes=function(t,e,i,r,n){for(var o={},a=e;a<i;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY};break}o.textCircles||(o.textCircles=[]),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=r;l<n;l++){var u=t.get(l);if(0===u.radius){o.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY};break}}return o},U.prototype.hasTextData=function(){return 0<this.text.segments.get().length},U.prototype.hasIconData=function(){return 0<this.icon.segments.get().length},U.prototype.hasCollisionBoxData=function(){return 0<this.collisionBox.segments.get().length},U.prototype.hasCollisionCircleData=function(){return 0<this.collisionCircle.segments.get().length},U.prototype.sortFeatures=function(t){var n=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(1<this.text.segments.get().length||1<this.icon.segments.get().length))){for(var e=[],i=0;i<this.symbolInstances.length;i++)e.push(i);var o=Math.sin(t),a=Math.cos(t);e.sort(function(t,e){var i=n.symbolInstances[t],r=n.symbolInstances[e];return(o*i.anchor.x+a*i.anchor.y|0)-(o*r.anchor.x+a*r.anchor.y|0)||r.featureIndex-i.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear();for(var r=0,s=e;r<s.length;r+=1){for(var l=s[r],u=n.symbolInstances[l],c=0,h=u.placedTextSymbolIndices;c<h.length;c+=1)for(var p=h[c],f=n.text.placedSymbolArray.get(p),d=f.vertexStartIndex+4*f.numGlyphs,m=f.vertexStartIndex;m<d;m+=4)n.text.indexArray.emplaceBack(m,m+1,m+2),n.text.indexArray.emplaceBack(m+1,m+2,m+3);var y=n.icon.placedSymbolArray.get(l);if(y.numGlyphs){var g=y.vertexStartIndex;n.icon.indexArray.emplaceBack(g,g+1,g+2),n.icon.indexArray.emplaceBack(g+1,g+2,g+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},B("SymbolBucket",U,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),U.MAX_GLYPHS=65535,U.addDynamicAttributes=k,e.exports=U},{"../../symbol/anchor":213,"../../symbol/mergelines":221,"../../symbol/symbol_size":228,"../../symbol/transform_text":229,"../../util/script_detection":269,"../../util/verticalize_punctuation":277,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./symbol_attributes":50,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],52:[function(t,e,i){"use strict";var r=t("../util/image"),n=r.RGBAImage,g=t("../util/util"),o=t("../util/web_worker_transfer"),a=o.register,l=function(t,e,i){if(t<=0)throw new RangeError("Level must have positive dimension");this.dim=t,this.border=e,this.stride=this.dim+2*this.border,this.data=i||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};l.prototype.set=function(t,e,i){this.data[this._idx(t,e)]=i+65536},l.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},l.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},a("Level",l);var s=function(t,e,i){this.uid=t,this.scale=e||1,this.level=i||new l(256,512),this.loaded=!!i};s.prototype.loadFromImage=function(t){if(t.height!==t.width)throw new RangeError("DEM tiles must be square");for(var e=this.level=new l(t.width,t.width/2),i=t.data,r=0;r<e.dim;r++)for(var n=0;n<e.dim;n++){var o=r*e.dim+n,a=4*o;e.set(n,r,this.scale*((256*i[a]*256+256*i[a+1]+i[a+2])/10-1e4))}for(var s=0;s<e.dim;s++)e.set(-1,s,e.get(0,s)),e.set(e.dim,s,e.get(e.dim-1,s)),e.set(s,-1,e.get(s,0)),e.set(s,e.dim,e.get(s,e.dim-1));e.set(-1,-1,e.get(0,0)),e.set(e.dim,-1,e.get(e.dim-1,0)),e.set(-1,e.dim,e.get(0,e.dim-1)),e.set(e.dim,e.dim,e.get(e.dim-1,e.dim-1)),this.loaded=!0},s.prototype.getPixels=function(){return new n({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},s.prototype.backfillBorder=function(t,e,i){var r=this.level,n=t.level;if(r.dim!==n.dim)throw new Error("level mismatch (dem dimension)");var o=e*r.dim,a=e*r.dim+r.dim,s=i*r.dim,l=i*r.dim+r.dim;switch(e){case-1:o=a-1;break;case 1:a=o+1}switch(i){case-1:s=l-1;break;case 1:l=s+1}for(var u=g.clamp(o,-r.border,r.dim+r.border),c=g.clamp(a,-r.border,r.dim+r.border),h=g.clamp(s,-r.border,r.dim+r.border),p=g.clamp(l,-r.border,r.dim+r.border),f=-e*r.dim,d=-i*r.dim,m=h;m<p;m++)for(var y=u;y<c;y++)r.set(y,m,n.get(y+f,m+d))},a("DEMData",s),e.exports={DEMData:s,Level:l}},{"../util/image":263,"../util/util":275,"../util/web_worker_transfer":278}],53:[function(t,e,i){"use strict";e.exports=8192},{}],54:[function(t,e,i){"use strict";function v(t,e){return e-t}t("@mapbox/point-geometry");var S=t("./load_geometry"),_=t("./extent"),b=t("../style-spec/feature_filter"),n=t("grid-index"),x=t("../util/dictionary_coder"),w=t("@mapbox/vector-tile"),C=t("pbf"),E=t("../util/vectortile_to_geojson"),T=t("../util/util").arraysIntersect,r=t("../source/tile_id"),o=(r.OverscaledTileID,t("../util/web_worker_transfer")),a=o.register,s=t("./array_types"),l=s.FeatureIndexArray,u=function(t,e,i,r){this.tileID=t,this.overscaling=e,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=i||new n(_,16,0),this.featureIndexArray=r||new l};u.prototype.insert=function(t,e,i,r,n){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);for(var a=0;a<e.length;a++){for(var s=e[a],l=[1/0,1/0,-1/0,-1/0],u=0;u<s.length;u++){var c=s[u];l[0]=Math.min(l[0],c.x),l[1]=Math.min(l[1],c.y),l[2]=Math.max(l[2],c.x),l[3]=Math.max(l[3],c.y)}this.grid.insert(o,l[0],l[1],l[2],l[3])}},u.prototype.query=function(t,e){this.vtLayers||(this.vtLayers=new w.VectorTile(new C(this.rawTileData)).layers,this.sourceLayerCoder=new x(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));for(var i={},r=t.params||{},n=_/t.tileSize/t.scale,o=b(r.filter),a=t.queryGeometry,s=t.additionalRadius*n,l=1/0,u=1/0,c=-1/0,h=-1/0,p=0;p<a.length;p++)for(var f=a[p],d=0;d<f.length;d++){var m=f[d];l=Math.min(l,m.x),u=Math.min(u,m.y),c=Math.max(c,m.x),h=Math.max(h,m.y)}var y=this.grid.query(l-s,u-s,c+s,h+s);y.sort(v),this.filterMatching(i,y,this.featureIndexArray,a,o,r.layers,e,t.bearing,n);var g=t.collisionIndex?t.collisionIndex.queryRenderedSymbols(a,this.tileID,_/t.tileSize,t.collisionBoxArray,t.sourceID,t.bucketInstanceIds):[];return g.sort(),this.filterMatching(i,g,t.collisionBoxArray,a,o,r.layers,e,t.bearing,n),i},u.prototype.filterMatching=function(t,e,i,r,n,o,a,s,l){for(var u,c=0;c<e.length;c++){var h=e[c];if(h!==u){u=h;var p=i.get(h),f=this.bucketLayerIDs[p.bucketIndex];if(!o||T(o,f)){var d=this.sourceLayerCoder.decode(p.sourceLayerIndex),m=this.vtLayers[d],y=m.feature(p.featureIndex);if(n({zoom:this.tileID.overscaledZ},y))for(var g=null,v=0;v<f.length;v++){var _=f[v];if(!(o&&o.indexOf(_)<0)){var b=a[_];if(b&&("symbol"===b.type||(g||(g=S(y)),b.queryIntersectsFeature(r,y,g,this.z,s,l)))){var x=new E(y,this.z,this.x,this.y);x.layer=b.serialize();var w=t[_];void 0===w&&(w=t[_]=[]),w.push({featureIndex:h,feature:x})}}}}}}},u.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var r=i[e],n=0,o=r;n<o.length;n+=1){var a=o[n];if(t===a)return!0}return!1},a("FeatureIndex",u,{omit:["rawTileData","sourceLayerCoder"]}),e.exports=u},{"../source/tile_id":114,"../style-spec/feature_filter":148,"../util/dictionary_coder":257,"../util/util":275,"../util/vectortile_to_geojson":276,"../util/web_worker_transfer":278,"./array_types":39,"./extent":53,"./load_geometry":56,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,"grid-index":24,pbf:30}],55:[function(t,e,i){"use strict";e.exports={LineIndexArray:t("./array_types").LineIndexArray,TriangleIndexArray:t("./array_types").TriangleIndexArray}},{"./array_types":39}],56:[function(t,e,i){"use strict";var r,s=t("../util/util"),l=t("./extent"),u=(r=16,{min:-1*Math.pow(2,r-1),max:Math.pow(2,r-1)-1});e.exports=function(t){for(var e=l/t.extent,i=t.loadGeometry(),r=0;r<i.length;r++)for(var n=i[r],o=0;o<n.length;o++){var a=n[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<u.min||a.x>u.max||a.y<u.min||a.y>u.max)&&s.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}},{"../util/util":275,"./extent":53}],57:[function(t,e,i){"use strict";var r=t("../util/struct_array"),n=r.createLayout;e.exports=n([{name:"a_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],58:[function(t,e,i){"use strict";function c(t){return[r(255*t.r,255*t.g),r(255*t.b,255*t.a)]}var r=t("../shaders/encode_attribute").packUint8ToFloat,n=(t("../style-spec/util/color"),t("../util/web_worker_transfer")),o=n.register,a=t("../style/properties"),p=a.PossiblyEvaluatedPropertyValue,s=t("./array_types"),l=s.StructArrayLayout1f4,u=s.StructArrayLayout2f8,h=s.StructArrayLayout4f16,f=function(t,e,i){this.value=t,this.name=e,this.type=i,this.statistics={max:-1/0}};f.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},f.prototype.populatePaintArray=function(){},f.prototype.upload=function(){},f.prototype.destroy=function(){},f.prototype.setUniforms=function(t,e,i,r){var n=r.constantOr(this.value),o=t.gl;"color"===this.type?o.uniform4f(e.uniforms["u_"+this.name],n.r,n.g,n.b,n.a):o.uniform1f(e.uniforms["u_"+this.name],n)};var d=function(t,e,i){this.expression=t,this.name=e,this.type=i,this.statistics={max:-1/0};var r="color"===i?u:l;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===i?2:1,offset:0}],this.paintVertexArray=new r};d.prototype.defines=function(){return[]},d.prototype.populatePaintArray=function(t,e){var i=this.paintVertexArray,r=i.length;i.reserve(t);var n=this.expression.evaluate({zoom:0},e);if("color"===this.type)for(var o=c(n),a=r;a<t;a++)i.emplaceBack(o[0],o[1]);else{for(var s=r;s<t;s++)i.emplaceBack(n);this.statistics.max=Math.max(this.statistics.max,n)}},d.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},d.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},d.prototype.setUniforms=function(t,e){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],0)};var m=function(t,e,i,r,n){this.expression=t,this.name=e,this.type=i,this.useIntegerZoom=r,this.zoom=n,this.statistics={max:-1/0};var o="color"===i?h:u;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===i?4:2,offset:0}],this.paintVertexArray=new o};m.prototype.defines=function(){return[]},m.prototype.populatePaintArray=function(t,e){var i=this.paintVertexArray,r=i.length;i.reserve(t);var n=this.expression.evaluate({zoom:this.zoom},e),o=this.expression.evaluate({zoom:this.zoom+1},e);if("color"===this.type)for(var a=c(n),s=c(o),l=r;l<t;l++)i.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var u=r;u<t;u++)i.emplaceBack(n,o);this.statistics.max=Math.max(this.statistics.max,n,o)}},m.prototype.upload=function(t){this.paintVertexArray&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},m.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},m.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},m.prototype.setUniforms=function(t,e,i){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],this.interpolationFactor(i.zoom))};var y=function(){this.binders={},this.cacheKey="",this._buffers=[]};y.createDynamic=function(t,e,i){var r,n,o=new y,a=[];for(var s in t.paint._values)if(i(s)){var l=t.paint.get(s);if(l instanceof p&&l.property.specification["property-function"]){var u=(r=s,n=t.type,{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[r]||r.replace(n+"-","").replace(/-/g,"_")),c=l.property.specification.type,h=l.property.useIntegerZoom;"constant"===l.value.kind?(o.binders[s]=new f(l.value,u,c),a.push("/u_"+u)):"source"===l.value.kind?(o.binders[s]=new d(l.value,u,c),a.push("/a_"+u)):(o.binders[s]=new m(l.value,u,c,h,e),a.push("/z_"+u))}}return o.cacheKey=a.sort().join(""),o},y.prototype.populatePaintArrays=function(t,e){for(var i in this.binders)this.binders[i].populatePaintArray(t,e)},y.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},y.prototype.setUniforms=function(t,e,i,r){for(var n in this.binders)this.binders[n].setUniforms(t,e,r,i.get(n))},y.prototype.getPaintVertexBuffers=function(){return this._buffers},y.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var i=[];for(var r in this.binders){var n=this.binders[r];(n instanceof d||n instanceof m)&&n.paintVertexBuffer&&i.push(n.paintVertexBuffer)}this._buffers=i},y.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var g=function(t,e,i,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var n=0,o=e;n<o.length;n+=1){var a=o[n];this.programConfigurations[a.id]=y.createDynamic(a,i,r),this.programConfigurations[a.id].layoutAttributes=t}};g.prototype.populatePaintArrays=function(t,e){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e)},g.prototype.get=function(t){return this.programConfigurations[t]},g.prototype.upload=function(t){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t)},g.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},o("ConstantBinder",f),o("SourceExpressionBinder",d),o("CompositeExpressionBinder",m),o("ProgramConfiguration",y,{omit:["_buffers"]}),o("ProgramConfigurationSet",g),e.exports={ProgramConfiguration:y,ProgramConfigurationSet:g}},{"../shaders/encode_attribute":96,"../style-spec/util/color":153,"../style/properties":188,"../util/web_worker_transfer":278,"./array_types":39}],59:[function(t,e,i){"use strict";var r=t("../util/struct_array"),n=r.createLayout;e.exports=n([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],60:[function(t,n,e){"use strict";var i=t("../util/util"),o=i.warnOnce,r=t("../util/web_worker_transfer"),a=r.register,s=Math.pow(2,16)-1,l=function(t){void 0===t&&(t=[]),this.segments=t};l.prototype.prepareSegment=function(t,e,i){var r=this.segments[this.segments.length-1];return s<t&&o("Max vertices per segment is "+s+": bucket requested "+t),(!r||r.vertexLength+t>n.exports.MAX_VERTEX_ARRAY_LENGTH)&&(r={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},this.segments.push(r)),r},l.prototype.get=function(){return this.segments},l.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var r in i.vaos)i.vaos[r].destroy()}},a("SegmentVector",l),n.exports={SegmentVector:l,MAX_VERTEX_ARRAY_LENGTH:s}},{"../util/util":275,"../util/web_worker_transfer":278}],61:[function(t,e,i){"use strict";var r=function(t,e,i){this.column=t,this.row=e,this.zoom=i};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},r.prototype.sub=function(t){return this.clone()._sub(t)},r.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},r.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this},e.exports=r},{}],62:[function(r,t,e){"use strict";var i=r("../util/util").wrap,n=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};n.prototype.wrap=function(){return new n(i(this.lng,-180,180),this.lat)},n.prototype.toArray=function(){return[this.lng,this.lat]},n.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},n.prototype.toBounds=function(t){var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new(r("./lng_lat_bounds"))(new n(this.lng-i,this.lat-e),new n(this.lng+i,this.lat+e))},n.convert=function(t){if(t instanceof n)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new n(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new n(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},t.exports=n},{"../util/util":275,"./lng_lat_bounds":63}],63:[function(t,e,i){"use strict";var o=t("./lng_lat"),a=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};a.prototype.setNorthEast=function(t){return this._ne=t instanceof o?new o(t.lng,t.lat):o.convert(t),this},a.prototype.setSouthWest=function(t){return this._sw=t instanceof o?new o(t.lng,t.lat):o.convert(t),this},a.prototype.extend=function(t){var e,i,r=this._sw,n=this._ne;if(t instanceof o)i=e=t;else{if(!(t instanceof a))return Array.isArray(t)?t.every(Array.isArray)?this.extend(a.convert(t)):this.extend(o.convert(t)):this;if(e=t._sw,i=t._ne,!e||!i)return this}return r||n?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new o(e.lng,e.lat),this._ne=new o(i.lng,i.lat)),this},a.prototype.getCenter=function(){return new o((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},a.prototype.getSouthWest=function(){return this._sw},a.prototype.getNorthEast=function(){return this._ne},a.prototype.getNorthWest=function(){return new o(this.getWest(),this.getNorth())},a.prototype.getSouthEast=function(){return new o(this.getEast(),this.getSouth())},a.prototype.getWest=function(){return this._sw.lng},a.prototype.getSouth=function(){return this._sw.lat},a.prototype.getEast=function(){return this._ne.lng},a.prototype.getNorth=function(){return this._ne.lat},a.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},a.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},a.prototype.isEmpty=function(){return!(this._sw&&this._ne)},a.convert=function(t){return!t||t instanceof a?t:new a(t)},e.exports=a},{"./lng_lat":62}],64:[function(t,e,i){"use strict";var r=t("./lng_lat"),g=t("@mapbox/point-geometry"),f=t("./coordinate"),n=t("../util/util"),d=t("../style-spec/util/interpolate").number,a=t("../util/tile_cover"),o=t("../source/tile_id"),s=(o.CanonicalTileID,o.UnwrappedTileID),l=t("../data/extent"),u=t("@mapbox/gl-matrix"),m=u.vec4,y=u.mat4,c=u.mat2,h=function(t,e,i){this.tileSize=512,this._renderWorldCopies=void 0===i||i,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},p={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};h.prototype.clone=function(){var t=new h(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},p.minZoom.get=function(){return this._minZoom},p.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},p.maxZoom.get=function(){return this._maxZoom},p.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},p.renderWorldCopies.get=function(){return this._renderWorldCopies},p.worldSize.get=function(){return this.tileSize*this.scale},p.centerPoint.get=function(){return this.size._div(2)},p.size.get=function(){return new g(this.width,this.height)},p.bearing.get=function(){return-this.angle/Math.PI*180},p.bearing.set=function(t){var e=-n.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=c.create(),c.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},p.pitch.get=function(){return this._pitch/Math.PI*180},p.pitch.set=function(t){var e=n.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},p.fov.get=function(){return this._fov/Math.PI*180},p.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},p.zoom.get=function(){return this._zoom},p.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},p.center.get=function(){return this._center},p.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},h.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},h.prototype.getVisibleUnwrappedCoordinates=function(t){var e=this.pointCoordinate(new g(0,0),0),i=this.pointCoordinate(new g(this.width,0),0),r=Math.floor(e.column),n=Math.floor(i.column),o=[new s(0,t)];if(this._renderWorldCopies)for(var a=r;a<=n;a++)0!==a&&o.push(new s(a,t));return o},h.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),i=e;if(void 0!==t.minzoom&&e<t.minzoom)return[];void 0!==t.maxzoom&&e>t.maxzoom&&(e=t.maxzoom);var r=this.pointCoordinate(this.centerPoint,e),n=new g(r.column-.5,r.row-.5),o=[this.pointCoordinate(new g(0,0),e),this.pointCoordinate(new g(this.width,0),e),this.pointCoordinate(new g(this.width,this.height),e),this.pointCoordinate(new g(0,this.height),e)];return a(e,o,t.reparseOverscaled?i:e,this._renderWorldCopies).sort(function(t,e){return n.dist(t.canonical)-n.dist(e.canonical)})},h.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},p.unmodified.get=function(){return this._unmodified},h.prototype.zoomScale=function(t){return Math.pow(2,t)},h.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},h.prototype.project=function(t){return new g(this.lngX(t.lng),this.latY(t.lat))},h.prototype.unproject=function(t){return new r(this.xLng(t.x),this.yLat(t.y))},p.x.get=function(){return this.lngX(this.center.lng)},p.y.get=function(){return this.latY(this.center.lat)},p.point.get=function(){return new g(this.x,this.y)},h.prototype.lngX=function(t){return(180+t)*this.worldSize/360},h.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},h.prototype.xLng=function(t){return 360*t/this.worldSize-180},h.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},h.prototype.setLocationAtPoint=function(t,e){var i=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(i)),this._renderWorldCopies&&(this.center=this.center.wrap())},h.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},h.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},h.prototype.locationCoordinate=function(t){return new f(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},h.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new r(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},h.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var i=[t.x,t.y,0,1],r=[t.x,t.y,1,1];m.transformMat4(i,i,this.pixelMatrixInverse),m.transformMat4(r,r,this.pixelMatrixInverse);var n=i[3],o=r[3],a=i[0]/n,s=r[0]/o,l=i[1]/n,u=r[1]/o,c=i[2]/n,h=r[2]/o,p=c===h?0:(0-c)/(h-c);return new f(d(a,s,p)/this.tileSize,d(l,u,p)/this.tileSize,this.zoom)._zoomTo(e)},h.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),i=[e.column*this.tileSize,e.row*this.tileSize,0,1];return m.transformMat4(i,i,this.pixelMatrix),new g(i[0]/i[3],i[1]/i[3])},h.prototype.calculatePosMatrix=function(t,e){void 0===e&&(e=!1);var i=t.key,r=e?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];var n=t.canonical,o=this.worldSize/this.zoomScale(n.z),a=n.x+Math.pow(2,n.z)*t.wrap,s=y.identity(new Float64Array(16));return y.translate(s,s,[a*o,n.y*o,0]),y.scale(s,s,[o/l,o/l,1]),y.multiply(s,e?this.alignedProjMatrix:this.projMatrix,s),r[i]=new Float32Array(s),r[i]},h.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,i,r,n=-90,o=90,a=-180,s=180,l=this.size,u=this._unmodified;if(this.latRange){var c=this.latRange;n=this.latY(c[1]),o=this.latY(c[0]),t=o-n<l.y?l.y/(o-n):0}if(this.lngRange){var h=this.lngRange;a=this.lngX(h[0]),s=this.lngX(h[1]),e=s-a<l.x?l.x/(s-a):0}var p=Math.max(e||0,t||0);if(p)return this.center=this.unproject(new g(e?(s+a)/2:this.x,t?(o+n)/2:this.y)),this.zoom+=this.scaleZoom(p),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var f=this.y,d=l.y/2;f-d<n&&(r=n+d),o<f+d&&(r=o-d)}if(this.lngRange){var m=this.x,y=l.x/2;m-y<a&&(i=a+y),s<m+y&&(i=s-y)}void 0===i&&void 0===r||(this.center=this.unproject(new g(void 0!==i?i:this.x,void 0!==r?r:this.y))),this._unmodified=u,this._constraining=!1}},h.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,i=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),r=this.x,n=this.y,o=Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance,a=1.01*o,s=new Float64Array(16);y.perspective(s,this._fov,this.width/this.height,1,a),y.scale(s,s,[1,-1,1]),y.translate(s,s,[0,0,-this.cameraToCenterDistance]),y.rotateX(s,s,this._pitch),y.rotateZ(s,s,this.angle),y.translate(s,s,[-r,-n,0]);var l=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));y.scale(s,s,[1,1,l,1]),this.projMatrix=s;var u=this.width%2/2,c=this.height%2/2,h=Math.cos(this.angle),p=Math.sin(this.angle),f=r-Math.round(r)+h*u+p*c,d=n-Math.round(n)+h*c+p*u,m=new Float64Array(s);if(y.translate(m,m,[.5<f?f-1:f,.5<d?d-1:d,0]),this.alignedProjMatrix=m,s=y.create(),y.scale(s,s,[this.width/2,-this.height/2,1]),y.translate(s,s,[1,-1,0]),this.pixelMatrix=y.multiply(new Float64Array(16),s,this.projMatrix),!(s=y.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Object.defineProperties(h.prototype,p),e.exports=h},{"../data/extent":53,"../source/tile_id":114,"../style-spec/util/interpolate":158,"../util/tile_cover":273,"../util/util":275,"./coordinate":61,"./lng_lat":62,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],65:[function(t,e,i){"use strict";var r=t("../style-spec/util/color"),n=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};n.disabled=new n(n.Replace=[1,0],r.transparent,[!1,!1,!1,!1]),n.unblended=new n(n.Replace,r.transparent,[!0,!0,!0,!0]),n.alphaBlended=new n([1,771],r.transparent,[!0,!0,!0,!0]),e.exports=n},{"../style-spec/util/color":153}],66:[function(t,e,i){"use strict";var r=t("./index_buffer"),n=t("./vertex_buffer"),o=t("./framebuffer"),a=(t("./depth_mode"),t("./stencil_mode"),t("./color_mode")),s=t("../util/util"),l=t("./value"),u=l.ClearColor,c=l.ClearDepth,h=l.ClearStencil,p=l.ColorMask,f=l.DepthMask,d=l.StencilMask,m=l.StencilFunc,y=l.StencilOp,g=l.StencilTest,v=l.DepthRange,_=l.DepthTest,b=l.DepthFunc,x=l.Blend,w=l.BlendFunc,S=l.BlendColor,C=l.Program,E=l.LineWidth,T=l.ActiveTextureUnit,k=l.Viewport,M=l.BindFramebuffer,P=l.BindRenderbuffer,A=l.BindTexture,L=l.BindVertexBuffer,I=l.BindElementBuffer,O=l.BindVertexArrayOES,D=l.PixelStoreUnpack,z=l.PixelStoreUnpackPremultiplyAlpha,F=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.clearColor=new u(this),this.clearDepth=new c(this),this.clearStencil=new h(this),this.colorMask=new p(this),this.depthMask=new f(this),this.stencilMask=new d(this),this.stencilFunc=new m(this),this.stencilOp=new y(this),this.stencilTest=new g(this),this.depthRange=new v(this),this.depthTest=new _(this),this.depthFunc=new b(this),this.blend=new x(this),this.blendFunc=new w(this),this.blendColor=new S(this),this.program=new C(this),this.lineWidth=new E(this),this.activeTexture=new T(this),this.viewport=new k(this),this.bindFramebuffer=new M(this),this.bindRenderbuffer=new P(this),this.bindTexture=new A(this),this.bindVertexBuffer=new L(this),this.bindElementBuffer=new I(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new O(this),this.pixelStoreUnpack=new D(this),this.pixelStoreUnpackPremultiplyAlpha=new z(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};F.prototype.createIndexBuffer=function(t,e){return new r(this,t,e)},F.prototype.createVertexBuffer=function(t,e,i){return new n(this,t,e,i)},F.prototype.createRenderbuffer=function(t,e,i){var r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),n},F.prototype.createFramebuffer=function(t,e){return new o(this,t,e)},F.prototype.clear=function(t){var e=t.color,i=t.depth,r=this.gl,n=0;e&&(n|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(n|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(i),this.depthMask.set(!0)),r.clear(n)},F.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},F.prototype.setStencilMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},F.prototype.setColorMode=function(t){s.deepEqual(t.blendFunction,a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},e.exports=F},{"../util/util":275,"./color_mode":65,"./depth_mode":67,"./framebuffer":68,"./index_buffer":69,"./stencil_mode":70,"./value":71,"./vertex_buffer":72}],67:[function(t,e,i){"use strict";var r=function(t,e,i){this.func=t,this.mask=e,this.range=i};r.ReadOnly=!1,r.ReadWrite=!0,r.disabled=new r(519,r.ReadOnly,[0,1]),e.exports=r},{}],68:[function(t,e,i){"use strict";var r=t("./value"),o=r.ColorAttachment,a=r.DepthAttachment,n=function(t,e,i){this.context=t,this.width=e,this.height=i;var r=t.gl,n=this.framebuffer=r.createFramebuffer();this.colorAttachment=new o(t,n),this.depthAttachment=new a(t,n)};n.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i),t.deleteFramebuffer(this.framebuffer)},e.exports=n},{"./value":71}],69:[function(t,e,i){"use strict";var r=function(t,e,i){var r=(this.context=t).gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};r.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},r.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},r.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},r.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)},e.exports=r},{}],70:[function(t,e,i){"use strict";var r=function(t,e,i,r,n,o){this.test=t,this.ref=e,this.mask=i,this.fail=r,this.depthFail=n,this.pass=o};r.disabled=new r({func:519,mask:0},0,0,7680,7680,7680),e.exports=r},{}],71:[function(t,e,i){"use strict";var r=t("../style-spec/util/color"),n=t("../util/util"),o=function(t){this.context=t,this.current=r.transparent};o.prototype.get=function(){return this.current},o.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)};var a=function(t){this.context=t,this.current=1};a.prototype.get=function(){return this.current},a.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)};var s=function(t){this.context=t,this.current=0};s.prototype.get=function(){return this.current},s.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)};var l=function(t){this.context=t,this.current=[!0,!0,!0,!0]};l.prototype.get=function(){return this.current},l.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)};var u=function(t){this.context=t,this.current=!0};u.prototype.get=function(){return this.current},u.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)};var c=function(t){this.context=t,this.current=255};c.prototype.get=function(){return this.current},c.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)};var h=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}};h.prototype.get=function(){return this.current},h.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)};var p=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP]};p.prototype.get=function(){return this.current},p.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)};var f=function(t){this.context=t,this.current=!1};f.prototype.get=function(){return this.current},f.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t}};var d=function(t){this.context=t,this.current=[0,1]};d.prototype.get=function(){return this.current},d.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)};var m=function(t){this.context=t,this.current=!1};m.prototype.get=function(){return this.current},m.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t}};var y=function(t){this.context=t,this.current=t.gl.LESS};y.prototype.get=function(){return this.current},y.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)};var g=function(t){this.context=t,this.current=!1};g.prototype.get=function(){return this.current},g.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t}};var v=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO]};v.prototype.get=function(){return this.current},v.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)};var _=function(t){this.context=t,this.current=r.transparent};_.prototype.get=function(){return this.current},_.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)};var b=function(t){this.context=t,this.current=null};b.prototype.get=function(){return this.current},b.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)};var x=function(t){this.context=t,this.current=1};x.prototype.get=function(){return this.current},x.prototype.set=function(t){var e=this.context.lineWidthRange,i=n.clamp(t,e[0],e[1]);this.current!==i&&(this.context.gl.lineWidth(i),this.current=t)};var w=function(t){this.context=t,this.current=t.gl.TEXTURE0};w.prototype.get=function(){return this.current},w.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)};var S=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};S.prototype.get=function(){return this.current},S.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)};var C=function(t){this.context=t,this.current=null};C.prototype.get=function(){return this.current},C.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t}};var E=function(t){this.context=t,this.current=null};E.prototype.get=function(){return this.current},E.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t}};var T=function(t){this.context=t,this.current=null};T.prototype.get=function(){return this.current},T.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t}};var k=function(t){this.context=t,this.current=null};k.prototype.get=function(){return this.current},k.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t}};var M=function(t){this.context=t,this.current=null};M.prototype.get=function(){return this.current},M.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t};var P=function(t){this.context=t,this.current=null};P.prototype.get=function(){return this.current},P.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)};var A=function(t){this.context=t,this.current=4};A.prototype.get=function(){return this.current},A.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t}};var L=function(t){this.context=t,this.current=!1};L.prototype.get=function(){return this.current},L.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t}};var I=function(t,e){this.context=t,this.current=null,this.parent=e};I.prototype.get=function(){return this.current};var O=function(i){function t(t,e){i.call(this,t,e),this.dirty=!1}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},t.prototype.setDirty=function(){this.dirty=!0},t}(I),D=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t}},e}(I);e.exports={ClearColor:o,ClearDepth:a,ClearStencil:s,ColorMask:l,DepthMask:u,StencilMask:c,StencilFunc:h,StencilOp:p,StencilTest:f,DepthRange:d,DepthTest:m,DepthFunc:y,Blend:g,BlendFunc:v,BlendColor:_,Program:b,LineWidth:x,ActiveTextureUnit:w,Viewport:S,BindFramebuffer:C,BindRenderbuffer:E,BindTexture:T,BindVertexBuffer:k,BindElementBuffer:M,BindVertexArrayOES:P,PixelStoreUnpack:A,PixelStoreUnpackPremultiplyAlpha:L,ColorAttachment:O,DepthAttachment:D}},{"../style-spec/util/color":153,"../util/util":275}],72:[function(t,e,i){"use strict";var a={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},r=function(t,e,i,r){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=r;var n=(this.context=t).gl;this.buffer=n.createBuffer(),t.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};r.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},r.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},r.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var r=this.attributes[i],n=e.attributes[r.name];void 0!==n&&t.enableVertexAttribArray(n)}},r.prototype.setVertexAttribPointers=function(t,e,i){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],o=e.attributes[n.name];void 0!==o&&t.vertexAttribPointer(o,n.components,t[a[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}},r.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)},e.exports=r},{}],73:[function(t,e,i){"use strict";var r=t("@mapbox/mapbox-gl-supported"),n=t("./util/browser"),o=t("../package.json").version,a=t("./ui/map"),s=t("./ui/control/navigation_control"),l=t("./ui/control/geolocate_control"),u=t("./ui/control/attribution_control"),c=t("./ui/control/scale_control"),h=t("./ui/control/fullscreen_control"),p=t("./ui/popup"),f=t("./ui/marker"),d=t("./style/style"),m=t("./geo/lng_lat"),y=t("./geo/lng_lat_bounds"),g=t("@mapbox/point-geometry"),v=t("./util/evented"),_=t("./util/config"),b=t("./source/rtl_text_plugin");e.exports={version:o,supported:r,workerCount:Math.max(Math.floor(n.hardwareConcurrency/2),1),setRTLTextPlugin:b.setRTLTextPlugin,Map:a,NavigationControl:s,GeolocateControl:l,AttributionControl:u,ScaleControl:c,FullscreenControl:h,Popup:p,Marker:f,Style:d,LngLat:m,LngLatBounds:y,Point:g,Evented:v,config:_,get accessToken(){return _.ACCESS_TOKEN},set accessToken(t){_.ACCESS_TOKEN=t}}},{"../package.json":38,"./geo/lng_lat":62,"./geo/lng_lat_bounds":63,"./source/rtl_text_plugin":109,"./style/style":190,"./ui/control/attribution_control":232,"./ui/control/fullscreen_control":233,"./ui/control/geolocate_control":234,"./ui/control/navigation_control":236,"./ui/control/scale_control":237,"./ui/map":247,"./ui/marker":248,"./ui/popup":249,"./util/browser":252,"./util/config":256,"./util/evented":260,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],74:[function(t,e,i){"use strict";var y=t("./pattern"),g=t("../gl/stencil_mode"),v=t("../gl/depth_mode");e.exports=function(t,e,i){var r=i.paint.get("background-color"),n=i.paint.get("background-opacity");if(0!==n){var o=t.context,a=o.gl,s=t.transform,l=s.tileSize,u=i.paint.get("background-pattern"),c=u||1!==r.a||1!==n?"translucent":"opaque";if(t.renderPass===c){var h;if(o.setStencilMode(g.disabled),o.setDepthMode(t.depthModeForSublayer(0,"opaque"===c?v.ReadWrite:v.ReadOnly)),o.setColorMode(t.colorModeForRenderPass()),u){if(y.isPatternMissing(u,t))return;h=t.useProgram("backgroundPattern"),y.prepare(u,t,h),t.tileExtentPatternVAO.bind(o,h,t.tileExtentBuffer,[])}else h=t.useProgram("background"),a.uniform4fv(h.uniforms.u_color,[r.r,r.g,r.b,r.a]),t.tileExtentVAO.bind(o,h,t.tileExtentBuffer,[]);a.uniform1f(h.uniforms.u_opacity,n);for(var p=s.coveringTiles({tileSize:l}),f=0,d=p;f<d.length;f+=1){var m=d[f];u&&y.setTile({tileID:m,tileSize:l},t,h),a.uniformMatrix4fv(h.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(m.toUnwrapped())),a.drawArrays(a.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"./pattern":91}],75:[function(t,e,i){"use strict";var v=t("../source/pixels_to_tile_units"),_=t("../gl/stencil_mode"),b=t("../gl/depth_mode");e.exports=function(t,e,i,r){if("translucent"===t.renderPass){var n=i.paint.get("circle-opacity"),o=i.paint.get("circle-stroke-width"),a=i.paint.get("circle-stroke-opacity");if(0!==n.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=t.context,l=s.gl;s.setDepthMode(t.depthModeForSublayer(0,b.ReadOnly)),s.setStencilMode(_.disabled),s.setColorMode(t.colorModeForRenderPass());for(var u=!0,c=0;c<r.length;c++){var h=r[c],p=e.getTile(h),f=p.getBucket(i);if(f){var d=t.context.program.get(),m=f.programConfigurations.get(i.id),y=t.useProgram("circle",m);if((u||y.program!==d)&&(m.setUniforms(s,y,i.paint,{zoom:t.transform.zoom}),u=!1),l.uniform1f(y.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),l.uniform1i(y.uniforms.u_scale_with_map,"map"===i.paint.get("circle-pitch-scale")?1:0),"map"===i.paint.get("circle-pitch-alignment")){l.uniform1i(y.uniforms.u_pitch_with_map,1);var g=v(p,1,t.transform.zoom);l.uniform2f(y.uniforms.u_extrude_scale,g,g)}else l.uniform1i(y.uniforms.u_pitch_with_map,0),l.uniform2fv(y.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);l.uniformMatrix4fv(y.uniforms.u_matrix,!1,t.translatePosMatrix(h.posMatrix,p,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor"))),y.draw(s,l.TRIANGLES,i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,m)}}}}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],76:[function(t,e,i){"use strict";function n(t,e,i,r,n){var o=t.context,a=o.gl,s=n?t.useProgram("collisionCircle"):t.useProgram("collisionBox");o.setDepthMode(y.disabled),o.setStencilMode(g.disabled),o.setColorMode(t.colorModeForRenderPass());for(var l=0;l<r.length;l++){var u=r[l],c=e.getTile(u),h=c.getBucket(i);if(h){var p=n?h.collisionCircle:h.collisionBox;if(p){a.uniformMatrix4fv(s.uniforms.u_matrix,!1,u.posMatrix),n||o.lineWidth.set(1),a.uniform1f(s.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance);var f=m(c,1,t.transform.zoom),d=Math.pow(2,t.transform.zoom-c.tileID.overscaledZ);a.uniform1f(s.uniforms.u_pixels_to_tile_units,f),a.uniform2f(s.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits[0]/(f*d),t.transform.pixelsToGLUnits[1]/(f*d)),s.draw(o,n?a.TRIANGLES:a.LINES,i.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,p.collisionVertexBuffer,null)}}}}var m=t("../source/pixels_to_tile_units"),y=t("../gl/depth_mode"),g=t("../gl/stencil_mode");e.exports=function(t,e,i,r){n(t,e,i,r,!1),n(t,e,i,r,!0)}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],77:[function(t,e,i){"use strict";function n(t,e,i){var r=t.context,n=r.gl;r.lineWidth.set(1*y.devicePixelRatio);var o=i.posMatrix,a=t.useProgram("debug");r.setDepthMode(w.disabled),r.setStencilMode(S.disabled),r.setColorMode(t.colorModeForRenderPass()),n.uniformMatrix4fv(a.uniforms.u_matrix,!1,o),n.uniform4f(a.uniforms.u_color,1,0,0,1),t.debugVAO.bind(r,a,t.debugBuffer,[]),n.drawArrays(n.LINE_STRIP,0,t.debugBuffer.length);for(var s=function(t,e,i,r){r=r||1;var n,o,a,s,l,u,c,h,p=[];for(n=0,o=t.length;n<o;n++)if(l=C[t[n]]){for(h=null,a=0,s=l[1].length;a<s;a+=2)h=-1===l[1][a]&&-1===l[1][a+1]?null:(u=e+l[1][a]*r,c=i-l[1][a+1]*r,h&&p.push(h.x,h.y,u,c),{x:u,y:c});e+=l[0]*r}return p}(i.toString(),50,200,5),l=new b,u=0;u<s.length;u+=2)l.emplaceBack(s[u],s[u+1]);var c=r.createVertexBuffer(l,x.members);(new _).bind(r,a,c,[]),n.uniform4f(a.uniforms.u_color,1,1,1,1);for(var h=e.getTile(i).tileSize,p=v/(Math.pow(2,t.transform.zoom-i.overscaledZ)*h),f=[[-1,-1],[-1,1],[1,-1],[1,1]],d=0;d<f.length;d++){var m=f[d];n.uniformMatrix4fv(a.uniforms.u_matrix,!1,g.translate([],o,[p*m[0],p*m[1],0])),n.drawArrays(n.LINES,0,c.length)}n.uniform4f(a.uniforms.u_color,0,0,0,1),n.uniformMatrix4fv(a.uniforms.u_matrix,!1,o),n.drawArrays(n.LINES,0,c.length)}var y=t("../util/browser"),g=t("@mapbox/gl-matrix").mat4,v=t("../data/extent"),_=t("./vertex_array_object"),r=t("../data/array_types"),b=r.PosArray,x=t("../data/pos_attributes"),w=t("../gl/depth_mode"),S=t("../gl/stencil_mode");e.exports=function(t,e,i){for(var r=0;r<i.length;r++)n(t,e,i[r])};var C={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../util/browser":252,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],78:[function(t,e,i){"use strict";function l(t,e,i,r,n){if(!p.isPatternMissing(i.paint.get("fill-pattern"),t))for(var o=!0,a=0,s=r;a<s.length;a+=1){var l=s[a],u=e.getTile(l),c=u.getBucket(i);c&&(t.context.setStencilMode(t.stencilModeForClipping(l)),n(t,e,i,u,l,c,o),o=!1)}}function u(t,e,i,r,n,o,a){var s=t.context.gl,l=o.programConfigurations.get(i.id);h("fill",i.paint.get("fill-pattern"),t,l,i,r,n,a).draw(t.context,s.TRIANGLES,i.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,l)}function c(t,e,i,r,n,o,a){var s=t.context.gl,l=o.programConfigurations.get(i.id),u=i.getPaintProperty("fill-outline-color")?null:i.paint.get("fill-pattern"),c=h("fillOutline",u,t,l,i,r,n,a);s.uniform2f(c.uniforms.u_world,s.drawingBufferWidth,s.drawingBufferHeight),c.draw(t.context,s.LINES,i.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,l)}function h(t,e,i,r,n,o,a,s){var l,u=i.context.program.get();return e?(l=i.useProgram(t+"Pattern",r),(s||l.program!==u)&&(r.setUniforms(i.context,l,n.paint,{zoom:i.transform.zoom}),p.prepare(e,i,l)),p.setTile(o,i,l)):(l=i.useProgram(t,r),(s||l.program!==u)&&r.setUniforms(i.context,l,n.paint,{zoom:i.transform.zoom})),i.context.gl.uniformMatrix4fv(l.uniforms.u_matrix,!1,i.translatePosMatrix(a.posMatrix,o,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"))),l}var p=t("./pattern"),f=t("../style-spec/util/color"),d=t("../gl/depth_mode");e.exports=function(t,e,i,r){var n=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0!==o.constantOr(1)){var a=t.context;a.setColorMode(t.colorModeForRenderPass());var s=i.paint.get("fill-pattern")||1!==n.constantOr(f.transparent).a||1!==o.constantOr(0)?"translucent":"opaque";t.renderPass===s&&(a.setDepthMode(t.depthModeForSublayer(1,"opaque"===t.renderPass?d.ReadWrite:d.ReadOnly)),l(t,e,i,r,u)),"translucent"===t.renderPass&&i.paint.get("fill-antialias")&&(a.lineWidth.set(2),a.setDepthMode(t.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,d.ReadOnly)),l(t,e,i,r,c))}}},{"../gl/depth_mode":67,"../style-spec/util/color":153,"./pattern":91}],79:[function(t,e,i){"use strict";function c(t,e){var i=t.context,r=i.gl,n=e.viewportFrame;if(t.depthRboNeedsClear&&t.setupOffscreenDepthRenderbuffer(),!n){var o=new a(i,{width:t.width,height:t.height,data:null},r.RGBA);o.bind(r.LINEAR,r.CLAMP_TO_EDGE),(n=e.viewportFrame=i.createFramebuffer(t.width,t.height)).colorAttachment.set(o.texture)}i.bindFramebuffer.set(n.framebuffer),n.depthAttachment.set(t.depthRbo),t.depthRboNeedsClear&&(i.clear({depth:1}),t.depthRboNeedsClear=!1),i.clear({color:s.transparent}),i.setStencilMode(y.disabled),i.setDepthMode(new l(r.LEQUAL,l.ReadWrite,[0,1])),i.setColorMode(t.colorModeForRenderPass())}function h(t,e){var i=e.viewportFrame;if(i){var r=t.context,n=r.gl,o=t.useProgram("extrusionTexture");r.setStencilMode(y.disabled),r.setDepthMode(l.disabled),r.setColorMode(t.colorModeForRenderPass()),r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.colorAttachment.get()),n.uniform1f(o.uniforms.u_opacity,e.paint.get("fill-extrusion-opacity")),n.uniform1i(o.uniforms.u_image,0);var a=u.create();u.ortho(a,0,t.width,t.height,0,0,1),n.uniformMatrix4fv(o.uniforms.u_matrix,!1,a),n.uniform2f(o.uniforms.u_world,n.drawingBufferWidth,n.drawingBufferHeight),t.viewportVAO.bind(r,o,t.viewportBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,4)}}function p(t,e,i,r,n,o,a){var s=t.context,l=s.gl,u=i.paint.get("fill-extrusion-pattern"),c=t.context.program.get(),h=o.programConfigurations.get(i.id),p=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",h);if((a||p.program!==c)&&h.setUniforms(s,p,i.paint,{zoom:t.transform.zoom}),u){if(f.isPatternMissing(u,t))return;f.prepare(u,t,p),f.setTile(r,t,p),l.uniform1f(p.uniforms.u_height_factor,-Math.pow(2,n.overscaledZ)/r.tileSize/8)}t.context.gl.uniformMatrix4fv(p.uniforms.u_matrix,!1,t.translatePosMatrix(n.posMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor"))),function(t,e){var i=e.context.gl,r=e.style.light,n=r.properties.get("position"),o=[n.x,n.y,n.z],a=d.create();"viewport"===r.properties.get("anchor")&&d.fromRotation(a,-e.transform.angle),m.transformMat3(o,o,a);var s=r.properties.get("color");i.uniform3fv(t.uniforms.u_lightpos,o),i.uniform1f(t.uniforms.u_lightintensity,r.properties.get("intensity")),i.uniform3f(t.uniforms.u_lightcolor,s.r,s.g,s.b)}(p,t),p.draw(s,l.TRIANGLES,i.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,h)}var r=t("@mapbox/gl-matrix"),f=t("./pattern"),a=t("./texture"),s=t("../style-spec/util/color"),l=t("../gl/depth_mode"),d=r.mat3,u=r.mat4,m=r.vec3,y=t("../gl/stencil_mode");e.exports=function(t,e,i,r){if(0!==i.paint.get("fill-extrusion-opacity"))if("offscreen"===t.renderPass){c(t,i);for(var n=!0,o=0,a=r;o<a.length;o+=1){var s=a[o],l=e.getTile(s),u=l.getBucket(i);u&&(p(t,0,i,l,s,u,n),n=!1)}}else"translucent"===t.renderPass&&h(t,i)}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../style-spec/util/color":153,"./pattern":91,"./texture":93,"@mapbox/gl-matrix":2}],80:[function(t,e,i){"use strict";function y(t,e,i){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),t.bindFramebuffer.set(n.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),a(t,e,o,n)}}function a(t,e,i,r){var n=t.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e.width/4,e.height/4,0,n.RGBA,t.extTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),r.colorAttachment.set(i),t.extTextureHalfFloat&&n.checkFramebufferStatus(n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE&&(t.extTextureHalfFloat=null,r.colorAttachment.setDirty(),a(t,e,i,r))}function g(t,e){var i=t.context,r=i.gl,n=e.heatmapFbo;if(n){i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);var o=e.colorRampTexture;o||(o=e.colorRampTexture=new c(i,e.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),i.setDepthMode(b.disabled);var a=t.useProgram("heatmapTexture"),s=e.paint.get("heatmap-opacity");r.uniform1f(a.uniforms.u_opacity,s),r.uniform1i(a.uniforms.u_image,0),r.uniform1i(a.uniforms.u_color_ramp,1);var l=u.create();u.ortho(l,0,t.width,t.height,0,0,1),r.uniformMatrix4fv(a.uniforms.u_matrix,!1,l),r.uniform2f(a.uniforms.u_world,r.drawingBufferWidth,r.drawingBufferHeight),t.viewportVAO.bind(t.context,a,t.viewportBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}var u=t("@mapbox/gl-matrix").mat4,c=t("./texture"),v=t("../source/pixels_to_tile_units"),_=t("../style-spec/util/color"),b=t("../gl/depth_mode"),x=t("../gl/stencil_mode"),w=t("../gl/color_mode");e.exports=function(t,e,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var n=t.context,o=n.gl;n.setDepthMode(t.depthModeForSublayer(0,b.ReadOnly)),n.setStencilMode(x.disabled),y(n,t,i),n.clear({color:_.transparent}),n.setColorMode(new w([o.ONE,o.ONE],_.transparent,[!0,!0,!0,!0]));for(var a=!0,s=0;s<r.length;s++){var l=r[s];if(!e.hasRenderableParent(l)){var u=e.getTile(l),c=u.getBucket(i);if(c){var h=t.context.program.get(),p=c.programConfigurations.get(i.id),f=t.useProgram("heatmap",p),d=t.transform,m=d.zoom;(a||f.program!==h)&&(p.setUniforms(t.context,f,i.paint,{zoom:m}),a=!1),o.uniform1f(f.uniforms.u_extrude_scale,v(u,1,m)),o.uniform1f(f.uniforms.u_intensity,i.paint.get("heatmap-intensity")),o.uniformMatrix4fv(f.uniforms.u_matrix,!1,l.posMatrix),f.draw(n,o.TRIANGLES,i.id,c.layoutVertexBuffer,c.indexBuffer,c.segments,p)}}}n.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),g(t,i))}},{"../gl/color_mode":65,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style-spec/util/color":153,"./texture":93,"@mapbox/gl-matrix":2}],81:[function(t,e,i){"use strict";function u(t,e,i){var r,n,o,a,s,l,u,c,h=t.context,p=h.gl,f=e.fbo;if(f){var d=t.useProgram("hillshade"),m=t.transform.calculatePosMatrix(e.tileID.toUnwrapped());s=d,l=t,c=(u=i).paint.get("hillshade-illumination-direction")*(Math.PI/180),"viewport"===u.paint.get("hillshade-illumination-anchor")&&(c-=l.transform.angle),l.context.gl.uniform2f(s.uniforms.u_light,u.paint.get("hillshade-exaggeration"),c);var y=(r=t,n=e.tileID,o=n.toCoordinate(),a=new x(o.column,o.row+1,o.zoom),[r.transform.coordinateLocation(o).lat,r.transform.coordinateLocation(a).lat]);h.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,f.colorAttachment.get()),p.uniformMatrix4fv(d.uniforms.u_matrix,!1,m),p.uniform2fv(d.uniforms.u_latrange,y),p.uniform1i(d.uniforms.u_image,0);var g=i.paint.get("hillshade-shadow-color");p.uniform4f(d.uniforms.u_shadow,g.r,g.g,g.b,g.a);var v=i.paint.get("hillshade-highlight-color");p.uniform4f(d.uniforms.u_highlight,v.r,v.g,v.b,v.a);var _=i.paint.get("hillshade-accent-color");if(p.uniform4f(d.uniforms.u_accent,_.r,_.g,_.b,_.a),e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments)d.draw(h,p.TRIANGLES,i.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments);else{var b=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(h,d,b,[]),p.drawArrays(p.TRIANGLE_STRIP,0,b.length)}}}function c(t,e){var i=t.context,r=i.gl;if(e.dem&&e.dem.level){var n=e.dem.level.dim,o=e.dem.getPixels();if(i.activeTexture.set(r.TEXTURE1),i.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||t.getTileTexture(e.tileSize),e.demTexture){var a=e.demTexture;a.update(o,!1),a.bind(r.NEAREST,r.CLAMP_TO_EDGE)}else e.demTexture=new p(i,o,r.RGBA,!1),e.demTexture.bind(r.NEAREST,r.CLAMP_TO_EDGE);i.activeTexture.set(r.TEXTURE0);var s=e.fbo;if(!s){var l=new p(i,{width:n,height:n,data:null},r.RGBA);l.bind(r.LINEAR,r.CLAMP_TO_EDGE),(s=e.fbo=i.createFramebuffer(n,n)).colorAttachment.set(l.texture)}i.bindFramebuffer.set(s.framebuffer),i.viewport.set([0,0,n,n]);var u=d.create();d.ortho(u,0,f,-f,0,0,1),d.translate(u,u,[0,-f,0]);var c=t.useProgram("hillshadePrepare");r.uniformMatrix4fv(c.uniforms.u_matrix,!1,u),r.uniform1f(c.uniforms.u_zoom,e.tileID.overscaledZ),r.uniform2fv(c.uniforms.u_dimension,[2*n,2*n]),r.uniform1i(c.uniforms.u_image,1);var h=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(i,c,h,[]),r.drawArrays(r.TRIANGLE_STRIP,0,h.length),e.needsHillshadePrepare=!1}}var x=t("../geo/coordinate"),p=t("./texture"),f=t("../data/extent"),d=t("@mapbox/gl-matrix").mat4,h=t("../gl/stencil_mode"),m=t("../gl/depth_mode");e.exports=function(t,e,i,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var n=t.context;n.setDepthMode(t.depthModeForSublayer(0,m.ReadOnly)),n.setStencilMode(h.disabled),n.setColorMode(t.colorModeForRenderPass());for(var o=0,a=r;o<a.length;o+=1){var s=a[o],l=e.getTile(s);l.needsHillshadePrepare&&"offscreen"===t.renderPass?c(t,l):"translucent"===t.renderPass&&u(t,l,i)}n.viewport.set([0,0,t.width,t.height])}}},{"../data/extent":53,"../geo/coordinate":61,"../gl/depth_mode":67,"../gl/stencil_mode":70,"./texture":93,"@mapbox/gl-matrix":2}],82:[function(t,e,i){"use strict";function v(t,e,i,r,n,o,a,s,l){var u,c,h,p,f=e.context,d=f.gl,m=n.paint.get("line-dasharray"),y=n.paint.get("line-pattern");if(s||l){var g=1/E(i,1,e.transform.tileZoom);if(m){u=e.lineAtlas.getDash(m.from,"round"===n.layout.get("line-cap")),c=e.lineAtlas.getDash(m.to,"round"===n.layout.get("line-cap"));var v=u.width*m.fromScale,_=c.width*m.toScale;d.uniform2f(t.uniforms.u_patternscale_a,g/v,-u.height/2),d.uniform2f(t.uniforms.u_patternscale_b,g/_,-c.height/2),d.uniform1f(t.uniforms.u_sdfgamma,e.lineAtlas.width/(256*Math.min(v,_)*C.devicePixelRatio)/2)}else if(y){if(h=e.imageManager.getPattern(y.from),p=e.imageManager.getPattern(y.to),!h||!p)return;d.uniform2f(t.uniforms.u_pattern_size_a,h.displaySize[0]*y.fromScale/g,p.displaySize[1]),d.uniform2f(t.uniforms.u_pattern_size_b,p.displaySize[0]*y.toScale/g,p.displaySize[1]);var b=e.imageManager.getPixelSize(),x=b.width,w=b.height;d.uniform2fv(t.uniforms.u_texsize,[x,w])}d.uniform2f(t.uniforms.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}s&&(m?(d.uniform1i(t.uniforms.u_image,0),f.activeTexture.set(d.TEXTURE0),e.lineAtlas.bind(f),d.uniform1f(t.uniforms.u_tex_y_a,u.y),d.uniform1f(t.uniforms.u_tex_y_b,c.y),d.uniform1f(t.uniforms.u_mix,m.t)):y&&(d.uniform1i(t.uniforms.u_image,0),f.activeTexture.set(d.TEXTURE0),e.imageManager.bind(f),d.uniform2fv(t.uniforms.u_pattern_tl_a,h.tl),d.uniform2fv(t.uniforms.u_pattern_br_a,h.br),d.uniform2fv(t.uniforms.u_pattern_tl_b,p.tl),d.uniform2fv(t.uniforms.u_pattern_br_b,p.br),d.uniform1f(t.uniforms.u_fade,y.t))),f.setStencilMode(e.stencilModeForClipping(o));var S=e.translatePosMatrix(o.posMatrix,i,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"));d.uniformMatrix4fv(t.uniforms.u_matrix,!1,S),d.uniform1f(t.uniforms.u_ratio,1/E(i,1,e.transform.zoom)),t.draw(f,d.TRIANGLES,n.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,a)}var C=t("../util/browser"),E=t("../source/pixels_to_tile_units"),_=t("../gl/depth_mode");e.exports=function(t,e,i,r){if("translucent"===t.renderPass&&0!==i.paint.get("line-opacity").constantOr(1)){var n=t.context;n.setDepthMode(t.depthModeForSublayer(0,_.ReadOnly)),n.setColorMode(t.colorModeForRenderPass());for(var o,a=i.paint.get("line-dasharray")?"lineSDF":i.paint.get("line-pattern")?"linePattern":"line",s=!0,l=0,u=r;l<u.length;l+=1){var c=u[l],h=e.getTile(c),p=h.getBucket(i);if(p){var f=p.programConfigurations.get(i.id),d=t.context.program.get(),m=t.useProgram(a,f),y=s||m.program!==d,g=o!==h.tileID.overscaledZ;y&&f.setUniforms(t.context,m,i.paint,{zoom:t.transform.zoom}),v(m,t,h,p,i,c,f,y,g),o=h.tileID.overscaledZ,s=!1}}}}},{"../gl/depth_mode":67,"../source/pixels_to_tile_units":104,"../util/browser":252}],83:[function(t,e,i){"use strict";function S(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}function C(t,e,i,r,n){var o=r.paint.get("raster-fade-duration");if(0<o){var a=d.now(),s=(a-t.timeAdded)/o,l=e?(a-e.timeAdded)/o:-1,u=i.getSource(),c=n.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!e||Math.abs(e.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),p=h&&t.refreshedUponExpiration?1:f.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&1<=s&&(t.refreshedUponExpiration=!1),e?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var f=t("../util/util"),E=t("../source/image_source"),d=t("../util/browser"),T=t("../gl/stencil_mode"),k=t("../gl/depth_mode");e.exports=function(t,e,i,r){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")){var n=t.context,o=n.gl,a=e.getSource(),s=t.useProgram("raster");n.setStencilMode(T.disabled),n.setColorMode(t.colorModeForRenderPass()),o.uniform1f(s.uniforms.u_brightness_low,i.paint.get("raster-brightness-min")),o.uniform1f(s.uniforms.u_brightness_high,i.paint.get("raster-brightness-max")),o.uniform1f(s.uniforms.u_saturation_factor,0<(w=i.paint.get("raster-saturation"))?1-1/(1.001-w):-w),o.uniform1f(s.uniforms.u_contrast_factor,0<(x=i.paint.get("raster-contrast"))?1/(1-x):1+x),o.uniform3fv(s.uniforms.u_spin_weights,S(i.paint.get("raster-hue-rotate"))),o.uniform1f(s.uniforms.u_buffer_scale,1),o.uniform1i(s.uniforms.u_image0,0),o.uniform1i(s.uniforms.u_image1,1);for(var l=r.length&&r[0].overscaledZ,u=0,c=r;u<c.length;u+=1){var h=c[u];n.setDepthMode(t.depthModeForSublayer(h.overscaledZ-l,1===i.paint.get("raster-opacity")?k.ReadWrite:k.ReadOnly,o.LESS));var p=e.getTile(h),f=t.transform.calculatePosMatrix(h.toUnwrapped(),!0);p.registerFadeDuration(i.paint.get("raster-fade-duration")),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,f);var d=e.findLoadedParent(h,0,{}),m=C(p,d,e,i,t.transform),y=void 0,g=void 0;if(n.activeTexture.set(o.TEXTURE0),p.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),d?(d.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),y=Math.pow(2,d.tileID.overscaledZ-p.tileID.overscaledZ),g=[p.tileID.canonical.x*y%1,p.tileID.canonical.y*y%1]):p.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),o.uniform2fv(s.uniforms.u_tl_parent,g||[0,0]),o.uniform1f(s.uniforms.u_scale_parent,y||1),o.uniform1f(s.uniforms.u_fade_t,m.mix),o.uniform1f(s.uniforms.u_opacity,m.opacity*i.paint.get("raster-opacity")),a instanceof E){var v=a.boundsBuffer;a.boundsVAO.bind(n,s,v,[]),o.drawArrays(o.TRIANGLE_STRIP,0,v.length)}else if(p.maskedBoundsBuffer&&p.maskedIndexBuffer&&p.segments)s.draw(n,o.TRIANGLES,i.id,p.maskedBoundsBuffer,p.maskedIndexBuffer,p.segments);else{var _=t.rasterBoundsBuffer,b=t.rasterBoundsVAO;b.bind(n,s,_,[]),o.drawArrays(o.TRIANGLE_STRIP,0,_.length)}}}var x,w}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/image_source":102,"../util/browser":252,"../util/util":275}],84:[function(t,e,i){"use strict";function o(t,e,i,r,n,o,a,s,l,u){var c=t.context,h=c.gl,p=t.transform,f="map"===s,d="map"===l,m=f&&"line"===i.layout.get("symbol-placement"),y=f&&!d&&!m,g=d;c.setDepthMode(g?t.depthModeForSublayer(0,B.ReadOnly):B.disabled);for(var v,_=0,b=r;_<b.length;_+=1){var x=b[_],w=e.getTile(x),S=w.getBucket(i);if(S){var C=n?S.text:S.icon;if(C&&C.segments.get().length){var E=C.programConfigurations.get(i.id),T=n||S.sdfIcons,k=n?S.textSizeData:S.iconSizeData;if(v||(v=t.useProgram(T?"symbolSDF":"symbolIcon",E),E.setUniforms(t.context,v,i.paint,{zoom:t.transform.zoom}),O(v,t,0,n,y,d,k)),c.activeTexture.set(h.TEXTURE0),h.uniform1i(v.uniforms.u_texture,0),n)w.glyphAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.uniform2fv(v.uniforms.u_texsize,w.glyphAtlasTexture.size);else{var M=1!==i.layout.get("icon-size").constantOr(0)||S.iconsNeedLinear,P=d||0!==p.pitch;w.iconAtlasTexture.bind(T||t.options.rotating||t.options.zooming||M||P?h.LINEAR:h.NEAREST,h.CLAMP_TO_EDGE),h.uniform2fv(v.uniforms.u_texsize,w.iconAtlasTexture.size)}h.uniformMatrix4fv(v.uniforms.u_matrix,!1,t.translatePosMatrix(x.posMatrix,w,o,a));var A=z(w,1,t.transform.zoom),L=F.getLabelPlaneMatrix(x.posMatrix,d,f,t.transform,A),I=F.getGlCoordMatrix(x.posMatrix,d,f,t.transform,A);h.uniformMatrix4fv(v.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(I,w,o,a,!0)),m?(h.uniformMatrix4fv(v.uniforms.u_label_plane_matrix,!1,R),F.updateLineLabels(S,x.posMatrix,t,n,L,I,d,u)):h.uniformMatrix4fv(v.uniforms.u_label_plane_matrix,!1,L),h.uniform1f(v.uniforms.u_fade_change,t.options.fadeDuration?t.symbolFadeChange:1),D(v,0,t,i,0,C,n,T,d)}}}}function O(t,e,i,r,n,o,a){var s=e.context.gl,l=e.transform;s.uniform1i(t.uniforms.u_pitch_with_map,o?1:0),s.uniform1f(t.uniforms.u_is_text,r?1:0),s.uniform1f(t.uniforms.u_pitch,l.pitch/360*2*Math.PI);var u="constant"===a.functionType||"source"===a.functionType,c="constant"===a.functionType||"camera"===a.functionType;s.uniform1i(t.uniforms.u_is_size_zoom_constant,u?1:0),s.uniform1i(t.uniforms.u_is_size_feature_constant,c?1:0),s.uniform1f(t.uniforms.u_camera_to_center_distance,l.cameraToCenterDistance);var h=p.evaluateSizeForZoom(a,l.zoom,f.properties[r?"text-size":"icon-size"]);void 0!==h.uSizeT&&s.uniform1f(t.uniforms.u_size_t,h.uSizeT),void 0!==h.uSize&&s.uniform1f(t.uniforms.u_size,h.uSize),s.uniform1f(t.uniforms.u_aspect_ratio,l.width/l.height),s.uniform1i(t.uniforms.u_rotate_symbol,n?1:0)}function D(t,e,i,r,n,o,a,s,l){var u=i.context,c=u.gl,h=i.transform;if(s){var p=0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),f=l?Math.cos(h._pitch)*h.cameraToCenterDistance:1;c.uniform1f(t.uniforms.u_gamma_scale,f),p&&(c.uniform1f(t.uniforms.u_is_halo,1),d(o,r,u,t)),c.uniform1f(t.uniforms.u_is_halo,0)}d(o,r,u,t)}function d(t,e,i,r){r.draw(i,i.gl.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}var a=t("./draw_collision_debug"),z=t("../source/pixels_to_tile_units"),F=t("../symbol/projection"),p=t("../symbol/symbol_size"),r=t("@mapbox/gl-matrix").mat4,R=r.identity(new Float32Array(16)),f=t("../style/style_layer/symbol_style_layer_properties").layout,s=t("../gl/stencil_mode"),B=t("../gl/depth_mode");e.exports=function(t,e,i,r){if("translucent"===t.renderPass){var n=t.context;n.setStencilMode(s.disabled),n.setColorMode(t.colorModeForRenderPass()),0!==i.paint.get("icon-opacity").constantOr(1)&&o(t,e,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright")),0!==i.paint.get("text-opacity").constantOr(1)&&o(t,e,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright")),e.map.showCollisionBoxes&&a(t,e,i,r)}}},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/projection":224,"../symbol/symbol_size":228,"./draw_collision_debug":76,"@mapbox/gl-matrix":2}],85:[function(t,e,i){"use strict";var c=t("@mapbox/shelf-pack"),r=t("../util/image"),h=r.AlphaImage;e.exports={makeGlyphAtlas:function(t){var e=new h({width:0,height:0}),i={},r=new c(0,0,{autoResize:!0});for(var n in t){var o=t[n],a=i[n]={};for(var s in o){var l=o[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u=r.packOne(l.bitmap.width+2,l.bitmap.height+2);e.resize({width:r.w,height:r.h}),h.copy(l.bitmap,e,{x:0,y:0},{x:u.x+1,y:u.y+1},l.bitmap),a[s]={rect:u,metrics:l.metrics}}}}return r.shrink(),e.resize({width:r.w,height:r.h}),{image:e,positions:i}}}},{"../util/image":263,"@mapbox/shelf-pack":5}],86:[function(t,e,i){"use strict";var c=t("../style/load_glyph_range"),a=t("@mapbox/tiny-sdf"),s=t("../util/is_char_in_unicode_block"),r=t("../util/util"),h=r.asyncAll,n=t("../util/image"),l=n.AlphaImage,o=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};o.prototype.setURL=function(t){this.url=t},o.prototype.getGlyphs=function(t,u){var l=this,e=[];for(var i in t)for(var r=0,n=t[i];r<n.length;r+=1){var o=n[r];e.push({stack:i,id:o})}h(e,function(t,i){var r=t.stack,n=t.id,o=l.entries[r];o||(o=l.entries[r]={glyphs:{},requests:{}});var e=o.glyphs[n];if(void 0===e)if(e=l._tinySDF(o,r,n))i(null,{stack:r,id:n,glyph:e});else{var a=Math.floor(n/256);if(65535<256*a)i(new Error("glyphs > 65535 not supported"));else{var s=o.requests[a];s||(s=o.requests[a]=[],c(r,a,l.url,l.requestTransform,function(t,e){if(e)for(var i in e)o.glyphs[+i]=e[+i];for(var r=0,n=s;r<n.length;r+=1)(0,n[r])(t,e);delete o.requests[a]})),s.push(function(t,e){t?i(t):e&&i(null,{stack:r,id:n,glyph:e[n]||null})})}}else i(null,{stack:r,id:n,glyph:e})},function(t,e){if(t)u(t);else if(e){for(var i={},r=0,n=e;r<n.length;r+=1){var o=n[r],a=o.stack,s=o.id,l=o.glyph;(i[a]||(i[a]={}))[s]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}u(null,i)}})},o.prototype._tinySDF=function(t,e,i){var r=this.localIdeographFontFamily;if(r&&(s["CJK Unified Ideographs"](i)||s["Hangul Syllables"](i))){var n=t.tinySDF;if(!n){var o="400";/bold/i.test(e)?o="900":/medium/i.test(e)?o="500":/light/i.test(e)&&(o="200"),n=t.tinySDF=new a(24,3,8,.25,r,o)}return{id:i,bitmap:new l({width:30,height:30},n.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},e.exports=o},{"../style/load_glyph_range":184,"../util/image":263,"../util/is_char_in_unicode_block":265,"../util/util":275,"@mapbox/tiny-sdf":6}],87:[function(t,e,i){"use strict";function s(t,e){var i=e.pixelRatio,r={x:t.x+c,y:t.y+c,w:t.w-2*c,h:t.h-2*c};return{pixelRatio:i,textureRect:r,tl:[r.x,r.y],br:[r.x+r.w,r.y+r.h],displaySize:[r.w/i,r.h/i]}}var l=t("@mapbox/shelf-pack"),r=t("../util/image"),u=r.RGBAImage,c=1;e.exports={imagePosition:s,makeImageAtlas:function(t){var e=new u({width:0,height:0}),i={},r=new l(0,0,{autoResize:!0});for(var n in t){var o=t[n],a=r.packOne(o.data.width+2*c,o.data.height+2*c);e.resize({width:r.w,height:r.h}),u.copy(o.data,e,{x:0,y:0},{x:a.x+c,y:a.y+c},o.data),i[n]=s(a,o)}return r.shrink(),e.resize({width:r.w,height:r.h}),{image:e,positions:i}}}},{"../util/image":263,"@mapbox/shelf-pack":5}],88:[function(t,e,i){"use strict";var r=t("@mapbox/shelf-pack"),n=t("../util/image"),f=n.RGBAImage,o=t("./image_atlas"),d=o.imagePosition,a=t("./texture"),s=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new r(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new f({width:64,height:64}),this.dirty=!0};s.prototype.isLoaded=function(){return this.loaded},s.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var r=i[e],n=r.ids,o=r.callback;this._notify(n,o)}this.requestors=[]}},s.prototype.getImage=function(t){return this.images[t]},s.prototype.addImage=function(t,e){this.images[t]=e},s.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},s.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var r=0,n=t;r<n.length;r+=1){var o=n[r];this.images[o]||(i=!1)}this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},s.prototype._notify=function(t,e){for(var i={},r=0,n=t;r<n.length;r+=1){var o=n[r],a=this.images[o];a&&(i[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,i)},s.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},s.prototype.getPattern=function(t){var e=this.patterns[t];if(e)return e.position;var i=this.getImage(t);if(!i)return null;var r=i.data.width+2,n=i.data.height+2,o=this.shelfPack.packOne(r,n);if(!o)return null;this.atlasImage.resize(this.getPixelSize());var a=i.data,s=this.atlasImage,l=o.x+1,u=o.y+1,c=a.width,h=a.height;f.copy(a,s,{x:0,y:0},{x:l,y:u},{width:c,height:h}),f.copy(a,s,{x:0,y:h-1},{x:l,y:u-1},{width:c,height:1}),f.copy(a,s,{x:0,y:0},{x:l,y:u+h},{width:c,height:1}),f.copy(a,s,{x:c-1,y:0},{x:l-1,y:u},{width:1,height:h}),f.copy(a,s,{x:0,y:0},{x:l+c,y:u},{width:1,height:h}),this.dirty=!0;var p=d(o,i);return this.patterns[t]={bin:o,position:p},p},s.prototype.bind=function(t){var e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},e.exports=s},{"../util/image":263,"./image_atlas":87,"./texture":93,"@mapbox/shelf-pack":5}],89:[function(t,e,i){"use strict";var C=t("../util/util"),r=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};r.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.positions[i]||(this.positions[i]=this.addDash(t,e)),this.positions[i]},r.prototype.addDash=function(t,e){var i=e?7:0,r=2*i+1;if(this.nextRow+r>this.height)return C.warnOnce("LineAtlas out of space"),null;for(var n=0,o=0;o<t.length;o++)n+=t[o];for(var a=this.width/n,s=a/2,l=t.length%2==1,u=-i;u<=i;u++)for(var c=this.nextRow+i+u,h=this.width*c,p=l?-t[t.length-1]:0,f=t[0],d=1,m=0;m<this.width;m++){for(;f<m/a;)p=f,f+=t[d],l&&d===t.length-1&&(f+=t[0]),d++;var y=Math.abs(m-p*a),g=Math.abs(m-f*a),v=Math.min(y,g),_=d%2==1,b=void 0;if(e){var x=i?u/i*(s+1):0;if(_){var w=s-Math.abs(x);b=Math.sqrt(v*v+w*w)}else b=s-Math.sqrt(v*v+x*x)}else b=(_?1:-1)*v;this.data[3+4*(h+m)]=Math.max(0,Math.min(255,b+128))}var S={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:n};return this.nextRow+=r,this.dirty=!0,S},r.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))},e.exports=r},{"../util/util":275}],90:[function(t,e,i){"use strict";var _=t("../util/browser"),c=t("@mapbox/gl-matrix").mat4,r=t("../source/source_cache"),o=t("../data/extent"),h=t("../source/pixels_to_tile_units"),b=t("../util/util"),a=t("./vertex_array_object"),n=t("../data/array_types"),s=n.RasterBoundsArray,l=n.PosArray,u=t("../data/raster_bounds_attributes"),p=t("../data/pos_attributes"),f=t("../data/program_configuration"),d=f.ProgramConfiguration,m=t("../symbol/cross_tile_symbol_index"),y=t("../shaders"),g=t("./program"),v=t("../gl/context"),x=t("../gl/depth_mode"),w=t("../gl/stencil_mode"),S=t("../gl/color_mode"),C=(t("./texture"),t("./tile_mask")),E=t("../style-spec/util/color"),T={symbol:t("./draw_symbol"),circle:t("./draw_circle"),heatmap:t("./draw_heatmap"),line:t("./draw_line"),fill:t("./draw_fill"),"fill-extrusion":t("./draw_fill_extrusion"),hillshade:t("./draw_hillshade"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug")},k=function(t,e){this.context=new v(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=r.maxUnderzooming+r.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new d,this.crossTileSymbolIndex=new m};k.prototype.resize=function(t,e){var i=this.context.gl;if(this.width=t*_.devicePixelRatio,this.height=e*_.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,n=this.style._order;r<n.length;r+=1){var o=n[r];this.style._layers[o].resize()}this.depthRbo&&(i.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},k.prototype.setup=function(){var t=this.context,e=new l;e.emplaceBack(0,0),e.emplaceBack(o,0),e.emplaceBack(0,o),e.emplaceBack(o,o),this.tileExtentBuffer=t.createVertexBuffer(e,p.members),this.tileExtentVAO=new a,this.tileExtentPatternVAO=new a;var i=new l;i.emplaceBack(0,0),i.emplaceBack(o,0),i.emplaceBack(o,o),i.emplaceBack(0,o),i.emplaceBack(0,0),this.debugBuffer=t.createVertexBuffer(i,p.members),this.debugVAO=new a;var r=new s;r.emplaceBack(0,0,0,0),r.emplaceBack(o,0,o,0),r.emplaceBack(0,o,0,o),r.emplaceBack(o,o,o,o),this.rasterBoundsBuffer=t.createVertexBuffer(r,u.members),this.rasterBoundsVAO=new a;var n=new l;n.emplaceBack(0,0),n.emplaceBack(1,0),n.emplaceBack(0,1),n.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(n,p.members),this.viewportVAO=new a},k.prototype.clearStencil=function(){var t=this.context,e=t.gl;t.setColorMode(S.disabled),t.setDepthMode(x.disabled),t.setStencilMode(new w({func:e.ALWAYS,mask:0},0,255,e.ZERO,e.ZERO,e.ZERO));var i=c.create();c.ortho(i,0,this.width,this.height,0,0,1),c.scale(i,i,[e.drawingBufferWidth,e.drawingBufferHeight,0]);var r=this.useProgram("clippingMask");e.uniformMatrix4fv(r.uniforms.u_matrix,!1,i),this.viewportVAO.bind(t,r,this.viewportBuffer,[]),e.drawArrays(e.TRIANGLE_STRIP,0,4)},k.prototype._renderTileClippingMasks=function(t){var e=this.context,i=e.gl;e.setColorMode(S.disabled),e.setDepthMode(x.disabled);var r=1;this._tileClippingMaskIDs={};for(var n=0,o=t;n<o.length;n+=1){var a=o[n],s=this._tileClippingMaskIDs[a.key]=r++;e.setStencilMode(new w({func:i.ALWAYS,mask:0},s,255,i.KEEP,i.KEEP,i.REPLACE));var l=this.useProgram("clippingMask");i.uniformMatrix4fv(l.uniforms.u_matrix,!1,a.posMatrix),this.tileExtentVAO.bind(this.context,l,this.tileExtentBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}},k.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new w({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},k.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new S([t.CONSTANT_COLOR,t.ONE],new E(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?S.unblended:S.alphaBlended},k.prototype.depthModeForSublayer=function(t,e,i){var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,n=r-1+this.depthRange;return new x(i||this.context.gl.LEQUAL,e,[n,r])},k.prototype.render=function(t,e){var n=this;for(var i in this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(_.now()),t.sourceCaches){var r=n.style.sourceCaches[i];r.used&&r.prepare(n.context)}var o=this.style._order,a=b.filterObject(this.style.sourceCaches,function(t){return"raster"===t.getSource().type||"raster-dem"===t.getSource().type});for(var s in a)!function(t){var e=a[t],i=e.getVisibleCoordinates(),r=i.map(function(t){return e.getTile(t)});C(r,n.context)}(s);this.renderPass="offscreen";var l,u=[];this.depthRboNeedsClear=!0;for(var c=0;c<o.length;c++){var h=n.style._layers[o[c]];h.hasOffscreenPass()&&!h.isHidden(n.transform.zoom)&&(h.source!==(l&&l.id)&&(l=n.style.sourceCaches[h.source],u=[],l&&(u=l.getVisibleCoordinates()).reverse()),u.length&&n.renderLayer(n,l,h,u))}this.context.bindFramebuffer.set(null),this.context.clear({color:e.showOverdrawInspector?E.black:E.transparent,depth:1}),this._showOverdrawInspector=e.showOverdrawInspector,this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var p,f=[];for(this.currentLayer=o.length-1,this.currentLayer;0<=this.currentLayer;this.currentLayer--){var d=n.style._layers[o[n.currentLayer]];d.source!==(p&&p.id)&&(p=n.style.sourceCaches[d.source],f=[],p&&(n.clearStencil(),f=p.getVisibleCoordinates(),p.getSource().isTileClipped&&n._renderTileClippingMasks(f))),n.renderLayer(n,p,d,f)}this.renderPass="translucent";var m,y=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<o.length;this.currentLayer++){var g=n.style._layers[o[n.currentLayer]];g.source!==(m&&m.id)&&(m=n.style.sourceCaches[g.source],y=[],m&&(n.clearStencil(),y=m.getVisibleCoordinates(),m.getSource().isTileClipped&&n._renderTileClippingMasks(y)),y.reverse()),n.renderLayer(n,m,g,y)}if(this.options.showTileBoundaries){var v=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];v&&T.debug(this,v,v.getVisibleCoordinates())}},k.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},k.prototype.renderLayer=function(t,e,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||r.length)&&(this.id=i.id,T[i.type](t,e,i,r))},k.prototype.translatePosMatrix=function(t,e,i,r,n){if(!i[0]&&!i[1])return t;var o=n?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){var a=Math.sin(o),s=Math.cos(o);i=[i[0]*s-i[1]*a,i[0]*a+i[1]*s]}var l=[n?i[0]:h(e,i[0],this.transform.zoom),n?i[1]:h(e,i[1],this.transform.zoom),0],u=new Float32Array(16);return c.translate(u,t,l),u},k.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},k.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&0<e.length?e.pop():null},k.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var i=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new g(this.context,y[t],e,this._showOverdrawInspector)),this.cache[i]},k.prototype.useProgram=function(t,e){var i=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.context.program.set(i.program),i},e.exports=k},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../data/program_configuration":58,"../data/raster_bounds_attributes":59,"../gl/color_mode":65,"../gl/context":66,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../shaders":97,"../source/pixels_to_tile_units":104,"../source/source_cache":111,"../style-spec/util/color":153,"../symbol/cross_tile_symbol_index":218,"../util/browser":252,"../util/util":275,"./draw_background":74,"./draw_circle":75,"./draw_debug":77,"./draw_fill":78,"./draw_fill_extrusion":79,"./draw_heatmap":80,"./draw_hillshade":81,"./draw_line":82,"./draw_raster":83,"./draw_symbol":84,"./program":92,"./texture":93,"./tile_mask":94,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],91:[function(t,e,i){"use strict";var l=t("../source/pixels_to_tile_units");i.isPatternMissing=function(t,e){if(!t)return!1;var i=e.imageManager.getPattern(t.from),r=e.imageManager.getPattern(t.to);return!i||!r},i.prepare=function(t,e,i){var r=e.context,n=r.gl,o=e.imageManager.getPattern(t.from),a=e.imageManager.getPattern(t.to);n.uniform1i(i.uniforms.u_image,0),n.uniform2fv(i.uniforms.u_pattern_tl_a,o.tl),n.uniform2fv(i.uniforms.u_pattern_br_a,o.br),n.uniform2fv(i.uniforms.u_pattern_tl_b,a.tl),n.uniform2fv(i.uniforms.u_pattern_br_b,a.br);var s=e.imageManager.getPixelSize(),l=s.width,u=s.height;n.uniform2fv(i.uniforms.u_texsize,[l,u]),n.uniform1f(i.uniforms.u_mix,t.t),n.uniform2fv(i.uniforms.u_pattern_size_a,o.displaySize),n.uniform2fv(i.uniforms.u_pattern_size_b,a.displaySize),n.uniform1f(i.uniforms.u_scale_a,t.fromScale),n.uniform1f(i.uniforms.u_scale_b,t.toScale),r.activeTexture.set(n.TEXTURE0),e.imageManager.bind(e.context)},i.setTile=function(t,e,i){var r=e.context.gl;r.uniform1f(i.uniforms.u_tile_units_to_pixels,1/l(t,1,e.transform.tileZoom));var n=Math.pow(2,t.tileID.overscaledZ),o=t.tileSize*Math.pow(2,e.transform.tileZoom)/n,a=o*(t.tileID.canonical.x+t.tileID.wrap*n),s=o*t.tileID.canonical.y;r.uniform2f(i.uniforms.u_pixel_coord_upper,a>>16,s>>16),r.uniform2f(i.uniforms.u_pixel_coord_lower,65535&a,65535&s)}},{"../source/pixels_to_tile_units":104}],92:[function(t,e,i){"use strict";var g=t("../util/browser"),v=t("../shaders"),r=t("../data/program_configuration"),y=(r.ProgramConfiguration,t("./vertex_array_object")),n=(t("../gl/context"),function(t,e,i,r){var n=t.gl;this.program=n.createProgram();var o=i.defines().concat("#define DEVICE_PIXEL_RATIO "+g.devicePixelRatio.toFixed(1));r&&o.push("#define OVERDRAW_INSPECTOR;");var a=o.concat(v.prelude.fragmentSource,e.fragmentSource).join("\n"),s=o.concat(v.prelude.vertexSource,e.vertexSource).join("\n"),l=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(l,a),n.compileShader(l),n.attachShader(this.program,l);var u=n.createShader(n.VERTEX_SHADER);n.shaderSource(u,s),n.compileShader(u),n.attachShader(this.program,u);for(var c=i.layoutAttributes||[],h=0;h<c.length;h++)n.bindAttribLocation(this.program,h,c[h].name);n.linkProgram(this.program),this.numAttributes=n.getProgramParameter(this.program,n.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var p=0;p<this.numAttributes;p++){var f=n.getActiveAttrib(this.program,p);f&&(this.attributes[f.name]=n.getAttribLocation(this.program,f.name))}for(var d=n.getProgramParameter(this.program,n.ACTIVE_UNIFORMS),m=0;m<d;m++){var y=n.getActiveUniform(this.program,m);y&&(this.uniforms[y.name]=n.getUniformLocation(this.program,y.name))}});n.prototype.draw=function(t,e,i,r,n,o,a,s,l){for(var u,c=t.gl,h=(u={},u[c.LINES]=2,u[c.TRIANGLES]=3,u)[e],p=0,f=o.get();p<f.length;p+=1){var d=f[p],m=d.vaos||(d.vaos={});(m[i]||(m[i]=new y)).bind(t,this,r,a?a.getPaintVertexBuffers():[],n,d.vertexOffset,s,l),c.drawElements(e,d.primitiveLength*h,c.UNSIGNED_SHORT,d.primitiveOffset*h*2)}},e.exports=n},{"../data/program_configuration":58,"../gl/context":66,"../shaders":97,"../util/browser":252,"./vertex_array_object":95}],93:[function(t,e,i){"use strict";var r=t("../util/window"),a=r.HTMLImageElement,s=r.HTMLCanvasElement,l=r.HTMLVideoElement,u=r.ImageData,n=function(t,e,i,r){this.context=t;var n=e.width,o=e.height;this.size=[n,o],this.format=i,this.texture=t.gl.createTexture(),this.update(e,r)};n.prototype.update=function(t,e){var i=t.width,r=t.height;this.size=[i,r];var n=this.context,o=n.gl;o.bindTexture(o.TEXTURE_2D,this.texture),n.pixelStoreUnpack.set(1),this.format===o.RGBA&&!1!==e&&n.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof a||t instanceof s||t instanceof l||t instanceof u?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,this.format,i,r,0,this.format,o.UNSIGNED_BYTE,t.data)},n.prototype.bind=function(t,e,i){var r=this.context,n=r.gl;n.bindTexture(n.TEXTURE_2D,this.texture),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},n.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},e.exports=n},{"../util/window":254}],94:[function(t,e,i){"use strict";function h(t,e,i,r,n){for(var o=0;o<i.length;o++){var a=i[o];if(r.isLessThan(a.tileID))break;if(e.key===a.tileID.key)return;if(a.tileID.isChildOf(e)){for(var s=e.children(1/0),l=0;l<s.length;l++)h(t,s[l],i.slice(o),r,n);return}}var u=e.overscaledZ-t.overscaledZ,c=new p(u,e.canonical.x-(t.canonical.x<<u),e.canonical.y-(t.canonical.y<<u));n[c.key]=n[c.key]||c}var r=t("../source/tile_id"),s=r.OverscaledTileID,p=r.CanonicalTileID;e.exports=function(t,e){for(var i=t.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),r=0;r<i.length;r++){var n={},o=i[r],a=i.slice(r+1);h(o.tileID.wrapped(),o.tileID,a,new s(0,o.tileID.wrap+1,0,0,0),n),o.setMask(n,e)}}},{"../source/tile_id":114}],95:[function(t,e,i){"use strict";var r=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};r.prototype.bind=function(t,e,i,r,n,o,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==r.length,u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==i||l||this.boundIndexBuffer!==n||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,i,r,n,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind())},r.prototype.freshBind=function(t,e,i,r,n,o,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var h=l;h<s;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,f=i;p<f.length;p+=1)f[p].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,n);for(var d=0,m=i;d<m.length;d+=1){var y=m[d];y.bind(),y.setVertexAttribPointers(c,t,n)}o&&(o.bind(),o.setVertexAttribPointers(c,t,n)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,n)),u.currentNumAttributes=l},r.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},e.exports=r},{}],96:[function(t,e,i){"use strict";var r=t("../util/util");i.packUint8ToFloat=function(t,e){return t=r.clamp(Math.floor(t),0,255),e=r.clamp(Math.floor(e),0,255),256*t+e}},{"../util/util":275}],97:[function(t,e,i){"use strict";var r={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - 14) * a) where a is an arbitrary value and 14 is the\n    // maxzoom of the tile source. here we use a=0.3 which works out to the\n    // expression below. see nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - 14.0) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o=function(t){var e=r[t],a={};e.fragmentSource=e.fragmentSource.replace(n,function(t,e,i,r,n){return a[n]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(n,function(t,e,i,r,n){var o="float"===r?"vec2":"vec4";return a[n]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float a_"+n+"_t;\nattribute "+i+" "+o+" a_"+n+";\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = unpack_mix_"+o+"(a_"+n+", a_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float a_"+n+"_t;\nattribute "+i+" "+o+" a_"+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = unpack_mix_"+o+"(a_"+n+", a_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"})};for(var a in r)o(a);e.exports=r},{}],98:[function(t,e,i){"use strict";var r=t("./image_source"),o=t("../util/window"),a=t("../data/raster_bounds_attributes"),s=t("../render/vertex_array_object"),l=t("../render/texture"),n=function(n){function t(t,e,i,r){n.call(this,t,e,i,r),this.options=e,this.animate=void 0===e.animate||e.animate}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.load=function(){this.canvas=this.canvas||o.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero.")):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},t.prototype.onRemove=function(){this.pause()},t.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var e=this.map.painter.context,i=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,a.members)),this.boundsVAO||(this.boundsVAO=new s),this.texture?t?this.texture.update(this.canvas):this._playing&&(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.canvas)):(this.texture=new l(e,this.canvas,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},t.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this._playing},t.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},t}(r);e.exports=n},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/window":254,"./image_source":102}],99:[function(t,e,i){"use strict";var r=t("../util/evented"),a=t("../util/util"),s=t("../util/window"),l=t("../data/extent"),u=t("../util/ajax").ResourceType,c=t("../util/browser"),n=function(o){function t(t,e,i,r){o.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=i,this.setEventedParent(r),this._data=e.data,this._options=a.extend({},e),this._collectResourceTiming=e.collectResourceTiming,this._resourceTiming=[],void 0!==e.maxzoom&&(this.maxzoom=e.maxzoom),e.type&&(this.type=e.type);var n=l/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:e.cluster||!1,geojsonVtOptions:{buffer:(void 0!==e.buffer?e.buffer:128)*n,tolerance:(void 0!==e.tolerance?e.tolerance:.375)*n,extent:l,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==e.clusterMaxZoom?Math.min(e.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l,radius:(e.clusterRadius||50)*n,log:!1}},e.workerOptions)}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.load=function(){var i=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)i.fire("error",{error:t});else{var e={dataType:"source",sourceDataType:"metadata"};i._collectResourceTiming&&i._resourceTiming&&0<i._resourceTiming.length&&(e.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire("data",e)}})},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.setData=function(t){var i=this;return this._data=t,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return i.fire("error",{error:t});var e={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&0<i._resourceTiming.length&&(e.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire("data",e)}),this},t.prototype._updateWorkerData=function(i){var t,e,r=this,n=a.extend({},this.workerOptions),o=this._data;"string"==typeof o?(n.request=this.map._transformRequest((t=o,(e=s.document.createElement("a")).href=t,e.href),u.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(o),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(t,e){r._loaded=!0,e&&e.resourceTiming&&e.resourceTiming[r.id]&&(r._resourceTiming=e.resourceTiming[r.id].slice(0)),i(t)},this.workerID)},t.prototype.loadTile=function(i,r){var n=this,o=void 0===i.workerID||"expired"===i.state?"loadTile":"reloadTile",t={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:c.devicePixelRatio,overscaling:i.tileID.overscaleFactor(),showCollisionBoxes:this.map.showCollisionBoxes};i.workerID=this.dispatcher.send(o,t,function(t,e){return i.unloadVectorData(),i.aborted?r(null):t?r(t):(i.loadVectorData(e,n.map.painter,"reloadTile"===o),r(null))},this.workerID)},t.prototype.abortTile=function(t){t.aborted=!0},t.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},t.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id})},t.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},t.prototype.hasTransition=function(){return!1},t}(r);e.exports=n},{"../data/extent":53,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"../util/window":254}],100:[function(t,e,i){"use strict";function r(t,e){var i=t.source,r=t.tileID.canonical;if(!this._geoJSONIndexes[i])return e(null,null);var n=this._geoJSONIndexes[i].getTile(r.z,r.x,r.y);if(!n)return e(null,null);var o=new u(n.features),a=c(o);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:o,rawData:a.buffer})}var o=t("../util/ajax"),s=t("../util/performance"),l=t("geojson-rewind"),u=t("./geojson_wrapper"),c=t("vt-pbf"),h=t("supercluster"),p=t("geojson-vt"),n=t("./vector_tile_worker_source"),a=function(n){function t(t,e,i){n.call(this,t,e,r),i&&(this.loadGeoJSON=i),this._geoJSONIndexes={}}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.loadData=function(n,o){var a=this;this.loadGeoJSON(n,function(t,e){if(t||!e)return o(t);if("object"!=typeof e)return o(new Error("Input data is not a valid GeoJSON object."));l(e,!0);try{a._geoJSONIndexes[n.source]=n.cluster?h(n.superclusterOptions).load(e.features):p(e,n.geojsonVtOptions)}catch(t){return o(t)}a.loaded[n.source]={};var i={};if(n.request&&n.request.collectResourceTiming){var r=s.getEntriesByName(n.request.url);r&&(i.resourceTiming={},i.resourceTiming[n.source]=JSON.parse(JSON.stringify(r)))}o(null,i)})},t.prototype.reloadTile=function(t,e){var i=this.loaded[t.source],r=t.uid;return i&&i[r]?n.prototype.reloadTile.call(this,t,e):this.loadTile(t,e)},t.prototype.loadGeoJSON=function(t,e){if(t.request)o.getJSON(t.request,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(t,e){this._geoJSONIndexes[t.source]&&delete this._geoJSONIndexes[t.source],e()},t}(n);e.exports=a},{"../util/ajax":251,"../util/performance":268,"./geojson_wrapper":101,"./vector_tile_worker_source":116,"geojson-rewind":15,"geojson-vt":19,supercluster:32,"vt-pbf":34}],101:[function(t,e,i){"use strict";var p=t("@mapbox/point-geometry"),r=t("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,n=t("../data/extent"),o=function(t){this._feature=t,this.extent=n,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};o.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],e=0,i=this._feature.geometry;e<i.length;e+=1){var r=i[e];t.push([new p(r[0],r[1])])}return t}for(var n=[],o=0,a=this._feature.geometry;o<a.length;o+=1){for(var s=a[o],l=[],u=0,c=s;u<c.length;u+=1){var h=c[u];l.push(new p(h[0],h[1]))}n.push(l)}return n},o.prototype.toGeoJSON=function(t,e,i){return r.call(this,t,e,i)};var a=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n,this.length=t.length,this._features=t};a.prototype.feature=function(t){return new o(this._features[t])},e.exports=a},{"../data/extent":53,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],102:[function(t,e,i){"use strict";var o=t("../util/util"),r=t("./tile_id"),a=r.CanonicalTileID,s=t("../geo/lng_lat"),l=t("@mapbox/point-geometry"),n=t("../util/evented"),u=t("../util/ajax"),c=t("../util/browser"),h=t("../data/extent"),p=t("../data/array_types"),f=p.RasterBoundsArray,d=t("../data/raster_bounds_attributes"),m=t("../render/vertex_array_object"),y=t("../render/texture"),g=function(n){function t(t,e,i,r){n.call(this),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(r),this.options=e}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.load=function(){var i=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,u.getImage(this.map._transformRequest(this.url,u.ResourceType.Image),function(t,e){t?i.fire("error",{error:t}):e&&(i.image=c.getImageData(e),i._finishLoading())})},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,i=t.map(function(t){return e.transform.locationCoordinate(s.convert(t)).zoomTo(0)}),r=this.centerCoord=o.getCoordinatesCenter(i);r.column=Math.floor(r.column),r.row=Math.floor(r.row),this.tileID=new a(r.zoom,r.column,r.row),this.minzoom=this.maxzoom=r.zoom;var n=i.map(function(t){var e=t.zoomTo(r.zoom);return new l(Math.round((e.column-r.column)*h),Math.round((e.row-r.row)*h))});return this._boundsArray=new f,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,h,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,h),this._boundsArray.emplaceBack(n[2].x,n[2].y,h,h),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},t.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,e=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,d.members)),this.boundsVAO||(this.boundsVAO=new m),this.texture||(this.texture=new y(t,this.image,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},t.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t).buckets={}:t.state="errored",e(null)},t.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return!1},t}(n);e.exports=g},{"../data/array_types":39,"../data/extent":53,"../data/raster_bounds_attributes":59,"../geo/lng_lat":62,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"./tile_id":114,"@mapbox/point-geometry":4}],103:[function(t,e,i){"use strict";var n=t("../util/util"),o=t("../util/ajax"),a=t("../util/browser"),s=t("../util/mapbox").normalizeSourceURL;e.exports=function(t,e,r){var i=function(t,e){if(t)return r(t);if(e){var i=n.pick(e,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);e.vector_layers&&(i.vectorLayers=e.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),r(null,i)}};t.url?o.getJSON(e(s(t.url),o.ResourceType.Source),i):a.frame(function(){return i(null,t)})}},{"../util/ajax":251,"../util/browser":252,"../util/mapbox":267,"../util/util":275}],104:[function(t,e,i){"use strict";var r=t("../data/extent");e.exports=function(t,e,i){return e*(r/(t.tileSize*Math.pow(2,i-t.tileID.overscaledZ)))}},{"../data/extent":53}],105:[function(t,e,i){"use strict";function p(t,e){var i=t.tileID,r=e.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}i.rendered=function(t,e,i,r,n,o,a){var s=t.tilesIn(i);s.sort(p);for(var l=[],u=0,c=s;u<c.length;u+=1){var h=c[u];l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,h.queryGeometry,h.scale,r,o,t.id,a)})}return function(t){for(var e={},i={},r=0,n=t;r<n.length;r+=1){var o=n[r],a=o.queryResults,s=o.wrappedTileID,l=i[s]=i[s]||{};for(var u in a)for(var c=a[u],h=l[u]=l[u]||{},p=e[u]=e[u]||[],f=0,d=c;f<d.length;f+=1){var m=d[f];h[m.featureIndex]||(h[m.featureIndex]=!0,p.push(m.feature))}}return e}(l)},i.source=function(e,t){for(var i=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],n={},o=0;o<i.length;o++){var a=i[o],s=a.tileID.canonical.key;n[s]||(n[s]=!0,a.querySourceFeatures(r,t))}return r}},{}],106:[function(t,e,i){"use strict";var r=t("../util/ajax"),o=t("../util/util"),s=(t("../util/evented"),t("../util/mapbox").normalizeTileURL),l=t("../util/browser"),n=t("./tile_id"),u=n.OverscaledTileID,a=t("./raster_tile_source"),c=function(n){function t(t,e,i,r){n.call(this,t,e,i,r),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({},e)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds}},t.prototype.loadTile=function(n,o){function a(t,e){t&&(n.state="errored",o(t)),e&&(n.dem=e,n.needsHillshadePrepare=!0,n.state="loaded",o(null))}var t=s(n.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);n.request=r.getImage(this.map._transformRequest(t,r.ResourceType.Tile),function(t,e){if(delete n.request,n.aborted)n.state="unloaded",o(null);else if(t)n.state="errored",o(t);else if(e){this.map._refreshExpiredTiles&&n.setExpiryData(e),delete e.cacheControl,delete e.expires;var i=l.getImageData(e),r={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:i};n.workerID&&"expired"!==n.state||(n.workerID=this.dispatcher.send("loadDEMTile",r,a.bind(this)))}}.bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)},t.prototype._getNeighboringTiles=function(t){var e=t.canonical,i=Math.pow(2,e.z),r=(e.x-1+i)%i,n=0===e.x?t.wrap-1:t.wrap,o=(e.x+1+i)%i,a=e.x+1===i?t.wrap+1:t.wrap,s={};return s[new u(t.overscaledZ,n,e.z,r,e.y).key]={backfilled:!1},s[new u(t.overscaledZ,a,e.z,o,e.y).key]={backfilled:!1},0<e.y&&(s[new u(t.overscaledZ,n,e.z,r,e.y-1).key]={backfilled:!1},s[new u(t.overscaledZ,t.wrap,e.z,e.x,e.y-1).key]={backfilled:!1},s[new u(t.overscaledZ,a,e.z,o,e.y-1).key]={backfilled:!1}),e.y+1<i&&(s[new u(t.overscaledZ,n,e.z,r,e.y+1).key]={backfilled:!1},s[new u(t.overscaledZ,t.wrap,e.z,e.x,e.y+1).key]={backfilled:!1},s[new u(t.overscaledZ,a,e.z,o,e.y+1).key]={backfilled:!1}),s},t.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},t}(a);e.exports=c},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./raster_tile_source":108,"./tile_id":114}],107:[function(t,e,i){"use strict";var r=t("../data/dem_data"),o=r.DEMData,n=function(){this.loading={},this.loaded={}};n.prototype.loadTile=function(t,e){var i=t.source,r=t.uid;this.loading[i]||(this.loading[i]={});var n=new o(r);(this.loading[i][r]=n).loadFromImage(t.rawImageData),delete this.loading[i][r],this.loaded[i]=this.loaded[i]||{},this.loaded[i][r]=n,e(null,n)},n.prototype.removeTile=function(t){var e=this.loaded[t.source],i=t.uid;e&&e[i]&&delete e[i]},e.exports=n},{"../data/dem_data":52}],108:[function(t,e,i){"use strict";var o=t("../util/util"),r=t("../util/ajax"),n=t("../util/evented"),a=t("./load_tilejson"),s=t("../util/mapbox").normalizeTileURL,l=t("./tile_bounds"),u=t("../render/texture"),c=function(n){function t(t,e,i,r){n.call(this),this.id=t,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({},e),o.extend(this,o.pick(e,["url","scheme","tileSize"]))}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.load=function(){var i=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(t,e){t?i.fire("error",t):e&&(o.extend(i,e),e.bounds&&(i.tileBounds=new l(e.bounds,i.minzoom,i.maxzoom)),i.fire("data",{dataType:"source",sourceDataType:"metadata"}),i.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.serialize=function(){return o.extend({},this._options)},t.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},t.prototype.loadTile=function(n,o){var a=this,t=s(n.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);n.request=r.getImage(this.map._transformRequest(t,r.ResourceType.Tile),function(t,e){if(delete n.request,n.aborted)n.state="unloaded",o(null);else if(t)n.state="errored",o(t);else if(e){a.map._refreshExpiredTiles&&n.setExpiryData(e),delete e.cacheControl,delete e.expires;var i=a.map.painter.context,r=i.gl;n.texture=a.map.painter.getTileTexture(e.width),n.texture?(n.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,e)):(n.texture=new u(i,e,r.RGBA),n.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),i.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax)),r.generateMipmap(r.TEXTURE_2D),n.state="loaded",o(null)}})},t.prototype.abortTile=function(t,e){t.request&&(t.request.abort(),delete t.request),e()},t.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},t.prototype.hasTransition=function(){return!1},t}(n);e.exports=c},{"../render/texture":93,"../util/ajax":251,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],109:[function(t,r,e){"use strict";var n=t("../util/ajax"),i=t("../util/evented"),o=t("../util/window"),a=!1,s=null;r.exports.evented=new i,r.exports.registerForPluginAvailability=function(t){return s?t({pluginBlobURL:s,errorCallback:r.exports.errorCallback}):r.exports.evented.once("pluginAvailable",t),t},r.exports.createBlobURL=function(t){return o.URL.createObjectURL(new o.Blob([t.data],{type:"text/javascript"}))},r.exports.clearRTLTextPlugin=function(){a=!1,s=null},r.exports.setRTLTextPlugin=function(t,i){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,r.exports.errorCallback=i,n.getArrayBuffer({url:t},function(t,e){t?i(t):e&&(s=r.exports.createBlobURL(e),r.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:i}))})},r.exports.applyArabicShaping=null,r.exports.processBidirectionalText=null},{"../util/ajax":251,"../util/evented":260,"../util/window":254}],110:[function(t,e,i){"use strict";var o=t("../util/util"),a={vector:t("../source/vector_tile_source"),raster:t("../source/raster_tile_source"),"raster-dem":t("../source/raster_dem_tile_source"),geojson:t("../source/geojson_source"),video:t("../source/video_source"),image:t("../source/image_source"),canvas:t("../source/canvas_source")};i.create=function(t,e,i,r){var n=new a[e.type](t,e,i,r);if(n.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+n.id);return o.bindAll(["load","abort","unload","serialize","prepare"],n),n},i.getType=function(t){return a[t]},i.setType=function(t,e){a[t]=e}},{"../source/canvas_source":98,"../source/geojson_source":99,"../source/image_source":102,"../source/raster_dem_tile_source":106,"../source/raster_tile_source":108,"../source/vector_tile_source":115,"../source/video_source":117,"../util/util":275}],111:[function(t,e,i){"use strict";function y(t,e){var i=e.zoomTo(t.canonical.z);return new s((i.column-(t.canonical.x+t.wrap*Math.pow(2,t.canonical.z)))*x,(i.row-t.canonical.y)*x)}function v(t){return"raster"===t||"image"===t||"video"===t}var o=t("./source").create,r=t("./tile"),n=t("../util/evented"),a=t("../util/lru_cache"),_=t("../geo/coordinate"),b=t("../util/util"),x=t("../data/extent"),s=(t("../gl/context"),t("@mapbox/point-geometry")),w=t("../util/browser"),l=t("./tile_id"),S=l.OverscaledTileID,u=function(n){function g(t,e,i){var r=this;n.call(this),this.id=t,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(r._sourceLoaded=!0),r._sourceLoaded&&!r._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(r.reload(),r.transform&&r.update(r.transform))}),this.on("error",function(){r._sourceErrored=!0}),this._source=o(t,e,i,this),this._tiles={},this._cache=new a(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return n&&(g.__proto__=n),((g.prototype=Object.create(n&&n.prototype)).constructor=g).prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},g.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},g.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},g.prototype.getSource=function(){return this._source},g.prototype.pause=function(){this._paused=!0},g.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},g.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},g.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},g.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},g.prototype.serialize=function(){return this._source.serialize()},g.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._tiles)this._tiles[e].upload(t)},g.prototype.getIds=function(){var a=this;return Object.keys(this._tiles).map(Number).sort(function(t,e){var i=a._tiles[t].tileID,r=a._tiles[e].tileID,n=new s(i.canonical.x,i.canonical.y).rotate(a.transform.angle),o=new s(r.canonical.x,r.canonical.y).rotate(a.transform.angle);return i.overscaledZ-r.overscaledZ||o.y-n.y||o.x-n.x})},g.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},g.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0,{});return!!e&&this._isIdRenderable(e.tileID.key)},g.prototype._isIdRenderable=function(t){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]},g.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._resetCache(),this._tiles)this._reloadTile(t,"reloading")},g.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},g.prototype._tileLoaded=function(t,e,i,r){if(r)return t.state="errored",void(404!==r.status?this._source.fire("error",{tile:t,error:r}):this.update(this.transform));t.timeAdded=w.now(),"expired"===i&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._source.fire("data",{dataType:"source",tile:t,coord:t.tileID}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},g.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,n=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===r||1<Math.abs(r)||(1<Math.abs(i)&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}for(var i=this.getRenderableIds(),r=0;r<i.length;r++){var n=i[r];if(t.neighboringTiles&&t.neighboringTiles[n]){var o=this.getTileByID(n);e(t,o),e(o,t)}}},g.prototype.getTile=function(t){return this.getTileByID(t.key)},g.prototype.getTileByID=function(t){return this._tiles[t]},g.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},g.prototype._findLoadedChildren=function(t,e,i){var r=!1;for(var n in this._tiles){var o=this._tiles[n];if(!(i[n]||!o.hasData()||o.tileID.overscaledZ<=t.overscaledZ||o.tileID.overscaledZ>e)){var a=Math.pow(2,o.tileID.canonical.z-t.canonical.z);if(Math.floor(o.tileID.canonical.x/a)===t.canonical.x&&Math.floor(o.tileID.canonical.y/a)===t.canonical.y)for(i[n]=o.tileID,r=!0;o&&o.tileID.overscaledZ-1>t.overscaledZ;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);if(!s)break;(o=this._tiles[s.key])&&o.hasData()&&(delete i[n],i[s.key]=s)}}}return r},g.prototype.findLoadedParent=function(t,e,i){for(var r=t.overscaledZ-1;e<=r;r--){var n=t.scaledTo(r);if(!n)return;var o=String(n.key),a=this._tiles[o];if(a&&a.hasData())return i[o]=n,a;if(this._cache.has(o))return i[o]=n,this._cache.get(o)}},g.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,r=e*i,n=Math.floor(5*r),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(o)},g.prototype.update=function(t){var e=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(t),this._coveredTiles={},this.used?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(t){return new S(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)}):(i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return e._source.hasTile(t)}))):i=[];var r,n=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),o=Math.max(n-g.maxOverzooming,this._source.minzoom),a=Math.max(n+g.maxUnderzooming,this._source.minzoom),s=this._updateRetainedTiles(i,n),l={};if(v(this._source.type))for(var u=Object.keys(s),c=0;c<u.length;c++){var h=u[c],p=s[h],f=e._tiles[h];if(f&&(void 0===f.fadeEndTime||f.fadeEndTime>=w.now())){e._findLoadedChildren(p,a,s)&&(s[h]=p);var d=e.findLoadedParent(p,o,l);d&&e._addTile(d.tileID)}}for(r in l)s[r]||(e._coveredTiles[r]=!0);for(r in l)s[r]=l[r];for(var m=b.keysDifference(this._tiles,s),y=0;y<m.length;y++)e._removeTile(m[y])}},g.prototype._updateRetainedTiles=function(t,e){for(var i={},r={},n=Math.max(e-g.maxOverzooming,this._source.minzoom),o=Math.max(e+g.maxUnderzooming,this._source.minzoom),a=0;a<t.length;a++){var s=t[a],l=this._addTile(s),u=!1;if(l.hasData())i[s.key]=s;else{u=l.wasRequested(),i[s.key]=s;var c=!0;if(e+1>this._source.maxzoom){var h=s.children(this._source.maxzoom)[0],p=this.getTile(h);p&&p.hasData()?i[h.key]=h:c=!1}else{this._findLoadedChildren(s,o,i);for(var f=s.children(this._source.maxzoom),d=0;d<f.length;d++)if(!i[f[d].key]){c=!1;break}}if(!c)for(var m=s.overscaledZ-1;n<=m;--m){var y=s.scaledTo(m);if(r[y.key])break;if(r[y.key]=!0,!(l=this.getTile(y))&&u&&(l=this._addTile(y)),l&&(i[y.key]=y,u=l.wasRequested(),l.hasData()))break}}}return i},g.prototype._addTile=function(t){var e=this._tiles[t.key];if(e)return e;(e=this._cache.getAndRemove(t.key))&&this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e));var i=Boolean(e);return i||(e=new r(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,i||this._source.fire("dataloading",{tile:e,coord:e.tileID,dataType:"source"}),e):null},g.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){i._reloadTile(t,"expired"),delete i._timers[t]},r))},g.prototype._setCacheInvalidationTimer=function(t,e){var i=this;t in this._cacheTimers&&(clearTimeout(this._cacheTimers[t]),delete this._cacheTimers[t]);var r=e.getExpiryTimeout();r&&(this._cacheTimers[t]=setTimeout(function(){i._cache.remove(t),delete i._cacheTimers[t]},r))},g.prototype._removeTile=function(t){var e=this._tiles[t];if(e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),!(0<e.uses)))if(e.hasData()){e.tileID=e.tileID.wrapped();var i=e.tileID.key;this._cache.add(i,e),this._setCacheInvalidationTimer(i,e)}else e.aborted=!0,this._abortTile(e),this._unloadTile(e)},g.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._resetCache()},g.prototype._resetCache=function(){for(var t in this._cacheTimers)clearTimeout(this._cacheTimers[t]);this._cacheTimers={},this._cache.reset()},g.prototype.tilesIn=function(t){for(var e=[],i=this.getIds(),r=1/0,n=1/0,o=-1/0,a=-1/0,s=t[0].zoom,l=0;l<t.length;l++){var u=t[l];r=Math.min(r,u.column),n=Math.min(n,u.row),o=Math.max(o,u.column),a=Math.max(a,u.row)}for(var c=0;c<i.length;c++){var h=this._tiles[i[c]],p=h.tileID,f=[y(p,new _(r,n,s)),y(p,new _(o,a,s))];if(f[0].x<x&&f[0].y<x&&0<=f[1].x&&0<=f[1].y){for(var d=[],m=0;m<t.length;m++)d.push(y(p,t[m]));e.push({tile:h,tileID:p,queryGeometry:[d],scale:Math.pow(2,this.transform.zoom-h.tileID.overscaledZ)})}}return e},g.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(function(t){return e._tiles[t].tileID}),i=0,r=t;i<r.length;i+=1){var n=r[i];n.posMatrix=e.transform.calculatePosMatrix(n.toUnwrapped())}return t},g.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(v(this._source.type))for(var t in this._tiles){var e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=w.now())return!0}return!1},g}(n);u.maxOverzooming=10,u.maxUnderzooming=3,e.exports=u},{"../data/extent":53,"../geo/coordinate":61,"../gl/context":66,"../util/browser":252,"../util/evented":260,"../util/lru_cache":266,"../util/util":275,"./source":110,"./tile":112,"./tile_id":114,"@mapbox/point-geometry":4}],112:[function(t,e,i){"use strict";var p=t("../util/util"),o=t("../data/bucket").deserialize,u=(t("../data/feature_index"),t("@mapbox/vector-tile")),c=t("pbf"),h=t("../util/vectortile_to_geojson"),f=t("../style-spec/feature_filter"),d=(t("../symbol/collision_index"),t("../data/bucket/symbol_bucket")),r=t("../data/array_types"),m=r.RasterBoundsArray,a=r.CollisionBoxArray,y=t("../data/raster_bounds_attributes"),g=t("../data/extent"),v=t("@mapbox/point-geometry"),n=t("../render/texture"),s=t("../data/segment"),_=s.SegmentVector,l=t("../data/index_array_type"),b=l.TriangleIndexArray,x=t("../util/browser"),w=function(t,e){this.tileID=t,this.uid=p.uniqueId(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};w.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<x.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},w.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},w.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){if(t.rawTileData&&(this.rawTileData=t.rawTileData),this.collisionBoxArray=t.collisionBoxArray,this.featureIndex=t.featureIndex,this.featureIndex.rawTileData=this.rawTileData,this.buckets=o(t.buckets,e.style),i)for(var r in this.buckets){var n=this.buckets[r];n instanceof d&&(n.justReloaded=!0)}t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new a},w.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.featureIndex=null,this.state="unloaded"},w.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},w.prototype.getBucket=function(t){return this.buckets[t.id]},w.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploaded||(i.upload(t),i.uploaded=!0)}var r=t.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new n(t,this.iconAtlasImage,r.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new n(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},w.prototype.queryRenderedFeatures=function(t,e,i,r,n,o,a){if(!this.featureIndex||!this.collisionBoxArray)return{};var s=0,l={};for(var u in t){var c=this.getBucket(t[u]);c&&(s=Math.max(s,t[u].queryRadius(c)),c instanceof d&&void 0!==c.bucketInstanceId&&(l[c.bucketInstanceId]=!0))}return this.featureIndex.query({queryGeometry:e,scale:i,tileSize:this.tileSize,bearing:n,params:r,additionalRadius:s,collisionBoxArray:this.collisionBoxArray,sourceID:o,collisionIndex:a,bucketInstanceIds:l},t)},w.prototype.querySourceFeatures=function(t,e){if(this.rawTileData){this.vtLayers||(this.vtLayers=new u.VectorTile(new c(this.rawTileData)).layers);var i=e?e.sourceLayer:"",r=this.vtLayers._geojsonTileLayer||this.vtLayers[i];if(r)for(var n=f(e&&e.filter),o={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},a=0;a<r.length;a++){var s=r.feature(a);if(n({zoom:this.tileID.overscaledZ},s)){var l=new h(s,o.z,o.x,o.y);l.tile=o,t.push(l)}}}},w.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},w.prototype.setMask=function(t,e){if(!p.deepEqual(this.mask,t)&&(this.mask=t,this.clearMask(),!p.deepEqual(t,{0:!0}))){var i=new m,r=new b;this.segments=new _,this.segments.prepareSegment(0,i,r);for(var n=Object.keys(t),o=0;o<n.length;o++){var a=t[n[o]],s=g>>a.z,l=new v(a.x*s,a.y*s),u=new v(l.x+s,l.y+s),c=this.segments.prepareSegment(4,i,r);i.emplaceBack(l.x,l.y,l.x,l.y),i.emplaceBack(u.x,l.y,u.x,l.y),i.emplaceBack(l.x,u.y,l.x,u.y),i.emplaceBack(u.x,u.y,u.x,u.y);var h=c.vertexLength;r.emplaceBack(h,h+1,h+2),r.emplaceBack(h+1,h+2,h+3),c.vertexLength+=4,c.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(i,y.members),this.maskedIndexBuffer=e.createIndexBuffer(r)}},w.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},w.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=p.parseCacheControl(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),n=!1;if(this.expirationTime>r)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},w.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},e.exports=w},{"../data/array_types":39,"../data/bucket":40,"../data/bucket/symbol_bucket":51,"../data/extent":53,"../data/feature_index":54,"../data/index_array_type":55,"../data/raster_bounds_attributes":59,"../data/segment":60,"../render/texture":93,"../style-spec/feature_filter":148,"../symbol/collision_index":217,"../util/browser":252,"../util/util":275,"../util/vectortile_to_geojson":276,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,pbf:30}],113:[function(t,e,i){"use strict";var r=t("../geo/lng_lat_bounds"),n=t("../util/util").clamp,o=function(t,e,i){this.bounds=r.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=i||24};o.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},o.prototype.contains=function(t){var e={minX:Math.floor(this.lngX(this.bounds.getWest(),t.z)),minY:Math.floor(this.latY(this.bounds.getNorth(),t.z)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),t.z)),maxY:Math.ceil(this.latY(this.bounds.getSouth(),t.z))};return t.x>=e.minX&&t.x<e.maxX&&t.y>=e.minY&&t.y<e.maxY},o.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},o.prototype.latY=function(t,e){var i=n(Math.sin(Math.PI/180*t),-.9999,.9999),r=Math.pow(2,e)/(2*Math.PI);return Math.pow(2,e-1)+.5*Math.log((1+i)/(1-i))*-r},e.exports=o},{"../geo/lng_lat_bounds":63,"../util/util":275}],114:[function(t,e,i){"use strict";function o(t,e,i,r){(t*=2)<0&&(t=-1*t-1);var n=1<<e;return 32*(n*n*t+n*r+i)+e}var n=t("@mapbox/whoots-js"),r=t("../util/web_worker_transfer"),a=r.register,s=t("../geo/coordinate"),l=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=o(0,t,e,i)};l.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},l.prototype.url=function(t,e){var i=n.getTileBBox(this.x,this.y,this.z),r=function(t,e,i){for(var r,n="",o=t;0<o;o--)n+=(e&(r=1<<o-1)?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",i)};var u=function(t,e){this.wrap=t,this.canonical=e,this.key=o(t,e.z,e.x,e.y)},c=function(t,e,i,r,n){this.overscaledZ=t,this.wrap=e,this.canonical=new l(i,+r,+n),this.key=o(e,t,r,n)};c.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new c(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new c(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},c.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},c.prototype.children=function(t){if(this.overscaledZ>=t)return[new c(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new c(e,this.wrap,e,i,r),new c(e,this.wrap,e,i+1,r),new c(e,this.wrap,e,i,r+1),new c(e,this.wrap,e,i+1,r+1)]},c.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},c.prototype.wrapped=function(){return new c(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},c.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},c.prototype.toUnwrapped=function(){return new u(this.wrap,this.canonical)},c.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},c.prototype.toCoordinate=function(){return new s(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},a("CanonicalTileID",l),a("OverscaledTileID",c,{omit:["posMatrix"]}),e.exports={CanonicalTileID:l,OverscaledTileID:c,UnwrappedTileID:u}},{"../geo/coordinate":61,"../util/web_worker_transfer":278,"@mapbox/whoots-js":12}],115:[function(t,e,i){"use strict";var r=t("../util/evented"),o=t("../util/util"),a=t("./load_tilejson"),s=t("../util/mapbox").normalizeTileURL,l=t("./tile_bounds"),u=t("../util/ajax").ResourceType,c=t("../util/browser"),n=function(n){function t(t,e,i,r){if(n.call(this),this.id=t,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,o.extend(this,o.pick(e,["url","scheme","tileSize"])),this._options=o.extend({type:"vector"},e),this._collectResourceTiming=e.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.load=function(){var i=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(t,e){t?i.fire("error",t):e&&(o.extend(i,e),e.bounds&&(i.tileBounds=new l(e.bounds,i.minzoom,i.maxzoom)),i.fire("data",{dataType:"source",sourceDataType:"metadata"}),i.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},t.prototype.onAdd=function(t){this.map=t,this.load()},t.prototype.serialize=function(){return o.extend({},this._options)},t.prototype.loadTile=function(i,r){function t(t,e){return i.aborted?r(null):t?r(t):(e&&e.resourceTiming&&(i.resourceTiming=e.resourceTiming),this.map._refreshExpiredTiles&&i.setExpiryData(e),i.loadVectorData(e,this.map.painter),r(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}var e=i.tileID.overscaleFactor(),n=s(i.tileID.canonical.url(this.tiles,this.scheme),this.url),o={request:this.map._transformRequest(n,u.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*e,type:this.type,source:this.id,pixelRatio:c.devicePixelRatio,overscaling:e,showCollisionBoxes:this.map.showCollisionBoxes};o.request.collectResourceTiming=this._collectResourceTiming,void 0===i.workerID||"expired"===i.state?i.workerID=this.dispatcher.send("loadTile",o,t.bind(this)):"loading"===i.state?i.reloadCallback=r:this.dispatcher.send("reloadTile",o,t.bind(this),i.workerID)},t.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},t.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},t.prototype.hasTransition=function(){return!1},t}(r);e.exports=n},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],116:[function(t,e,i){"use strict";function r(t,i){var e=n.getArrayBuffer(t.request,function(t,e){t?i(t):e&&i(null,{vectorTile:new o.VectorTile(new a(e.data)),rawData:e.data,cacheControl:e.cacheControl,expires:e.expires})});return function(){e.abort(),i()}}var n=t("../util/ajax"),o=t("@mapbox/vector-tile"),a=t("pbf"),p=t("./worker_tile"),f=t("../util/util"),d=t("../util/performance"),s=function(t,e,i){this.actor=t,this.layerIndex=e,this.loadVectorData=i||r,this.loading={},this.loaded={}};s.prototype.loadTile=function(a,s){var l=this,u=a.source,c=a.uid;this.loading[u]||(this.loading[u]={});var h=this.loading[u][c]=new p(a);h.abort=this.loadVectorData(a,function(t,e){if(delete l.loading[u][c],t||!e)return s(t);var i=e.rawData,r={};e.expires&&(r.expires=e.expires),e.cacheControl&&(r.cacheControl=e.cacheControl);var n={};if(a.request&&a.request.collectResourceTiming){var o=d.getEntriesByName(a.request.url);o&&(n.resourceTiming=JSON.parse(JSON.stringify(o)))}h.vectorTile=e.vectorTile,h.parse(e.vectorTile,l.layerIndex,l.actor,function(t,e){if(t||!e)return s(t);s(null,f.extend({rawTileData:i.slice(0)},e,r,n))}),l.loaded[u]=l.loaded[u]||{},l.loaded[u][c]=h})},s.prototype.reloadTile=function(t,r){var e=this.loaded[t.source],i=t.uid,n=this;if(e&&e[i]){var o=e[i];o.showCollisionBoxes=t.showCollisionBoxes,"parsing"===o.status?o.reloadCallback=r:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,function(t,e){if(this.reloadCallback){var i=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,n.layerIndex,n.actor,i)}r(t,e)}.bind(o))}},s.prototype.abortTile=function(t,e){var i=this.loading[t.source],r=t.uid;i&&i[r]&&i[r].abort&&(i[r].abort(),delete i[r]),e()},s.prototype.removeTile=function(t,e){var i=this.loaded[t.source],r=t.uid;i&&i[r]&&delete i[r],e()},e.exports=s},{"../util/ajax":251,"../util/performance":268,"../util/util":275,"./worker_tile":119,"@mapbox/vector-tile":8,pbf:30}],117:[function(t,e,i){"use strict";var r=t("../util/ajax"),n=t("./image_source"),o=t("../data/raster_bounds_attributes"),a=t("../render/vertex_array_object"),s=t("../render/texture"),l=function(n){function t(t,e,i,r){n.call(this,t,e,i,r),this.roundZoom=!0,this.type="video",this.options=e}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.load=function(){var i=this,t=this.options;this.urls=t.urls,r.getVideo(t.urls,function(t,e){t?i.fire("error",{error:t}):e&&(i.video=e,i.video.loop=!0,i.video.addEventListener("playing",function(){i.map._rerender()}),i.map&&i.video.play(),i._finishLoading())})},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,e=t.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,o.members)),this.boundsVAO||(this.boundsVAO=new a),this.texture?this.video.paused||(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,this.video)):(this.texture=new s(t,this.video,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[i];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this.video&&!this.video.paused},t}(n);e.exports=l},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"./image_source":102}],118:[function(t,e,i){"use strict";var r=t("../util/actor"),n=t("../style/style_layer_index"),o=t("./vector_tile_worker_source"),a=t("./raster_dem_tile_worker_source"),s=t("./geojson_worker_source"),l=t("./rtl_text_plugin"),u=function(t){var i=this;this.self=t,this.actor=new r(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:s},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(i.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');i.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(t){if(l.applyArabicShaping||l.processBidirectionalText)throw new Error("RTL text plugin already registered.");l.applyArabicShaping=t.applyArabicShaping,l.processBidirectionalText=t.processBidirectionalText}};u.prototype.setLayers=function(t,e,i){this.getLayerIndex(t).replace(e),i()},u.prototype.updateLayers=function(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()},u.prototype.loadTile=function(t,e,i){this.getWorkerSource(t,e.type).loadTile(e,i)},u.prototype.loadDEMTile=function(t,e,i){this.getDEMWorkerSource(t).loadTile(e,i)},u.prototype.reloadTile=function(t,e,i){this.getWorkerSource(t,e.type).reloadTile(e,i)},u.prototype.abortTile=function(t,e,i){this.getWorkerSource(t,e.type).abortTile(e,i)},u.prototype.removeTile=function(t,e,i){this.getWorkerSource(t,e.type).removeTile(e,i)},u.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t).removeTile(e)},u.prototype.removeSource=function(t,e,i){var r=this.getWorkerSource(t,e.type);void 0!==r.removeSource?r.removeSource(e,i):i()},u.prototype.loadWorkerSource=function(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t)}},u.prototype.loadRTLTextPlugin=function(t,e,i){try{l.applyArabicShaping||l.processBidirectionalText||(this.self.importScripts(e),l.applyArabicShaping&&l.processBidirectionalText||i(new Error("RTL Text Plugin failed to import scripts from "+e)))}catch(t){i(t)}},u.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e},u.prototype.getWorkerSource=function(r,t){var n=this;if(this.workerSources[r]||(this.workerSources[r]={}),!this.workerSources[r][t]){var e={send:function(t,e,i){n.actor.send(t,e,i,r)}};this.workerSources[r][t]=new this.workerSourceTypes[t](e,this.getLayerIndex(r))}return this.workerSources[r][t]},u.prototype.getDEMWorkerSource=function(t){return this.demWorkerSources[t]||(this.demWorkerSources[t]=new a),this.demWorkerSources[t]},e.exports=function(t){return new u(t)}},{"../style/style_layer_index":210,"../util/actor":250,"./geojson_worker_source":100,"./raster_dem_tile_worker_source":107,"./rtl_text_plugin":109,"./vector_tile_worker_source":116}],119:[function(t,e,i){"use strict";function T(t,e){for(var i=new s(e),r=0,n=t;r<n.length;r+=1)n[r].recalculate(i)}var k=t("../data/feature_index"),r=t("../symbol/symbol_layout"),M=r.performSymbolLayout,n=t("../data/array_types"),P=n.CollisionBoxArray,A=t("../util/dictionary_coder"),L=t("../data/bucket/symbol_bucket"),I=t("../util/util"),o=t("../render/image_atlas"),O=o.makeImageAtlas,a=t("../render/glyph_atlas"),D=a.makeGlyphAtlas,s=t("../style/evaluation_parameters"),l=t("./tile_id"),u=l.OverscaledTileID,c=function(t){this.tileID=new u(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming};c.prototype.parse=function(t,e,i,n){function r(){if(x)return n(x);if(w&&S){var t=D(w),e=O(S);for(var i in l){var r=l[i];r instanceof L&&(T(r.layers,this.zoom),M(r,w,t.positions,S,e.positions,this.showCollisionBoxes))}this.status="done",n(null,{buckets:I.values(l).filter(function(t){return!t.isEmpty()}),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,iconAtlasImage:e.image})}}var o=this;this.status="parsing",this.data=t,this.collisionBoxArray=new P;var a=new A(Object.keys(t.layers).sort()),s=new k(this.tileID,this.overscaling);s.bucketLayerIDs=[];var l={},u={featureIndex:s,iconDependencies:{},glyphDependencies:{}},c=e.familiesBySource[this.source];for(var h in c){var p=t.layers[h];if(p){1===p.version&&I.warnOnce('Vector tile source "'+o.source+'" layer "'+h+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var f=a.encode(h),d=[],m=0;m<p.length;m++){var y=p.feature(m);d.push({feature:y,index:m,sourceLayerIndex:f})}for(var g=0,v=c[h];g<v.length;g+=1){var _=v[g],b=_[0];b.minzoom&&o.zoom<Math.floor(b.minzoom)||b.maxzoom&&o.zoom>=b.maxzoom||"none"===b.visibility||(T(_,o.zoom),(l[b.id]=b.createBucket({index:s.bucketLayerIDs.length,layers:_,zoom:o.zoom,pixelRatio:o.pixelRatio,overscaling:o.overscaling,collisionBoxArray:o.collisionBoxArray})).populate(d,u),s.bucketLayerIDs.push(_.map(function(t){return t.id})))}}}var x,w,S,C=I.mapObject(u.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(C).length?i.send("getGlyphs",{uid:this.uid,stacks:C},function(t,e){x||(x=t,w=e,r.call(o))}):w={};var E=Object.keys(u.iconDependencies);E.length?i.send("getImages",{icons:E},function(t,e){x||(x=t,S=e,r.call(o))}):S={},r.call(this)},e.exports=c},{"../data/array_types":39,"../data/bucket/symbol_bucket":51,"../data/feature_index":54,"../render/glyph_atlas":85,"../render/image_atlas":87,"../style/evaluation_parameters":182,"../symbol/symbol_layout":227,"../util/dictionary_coder":257,"../util/util":275,"./tile_id":114}],120:[function(t,e,i){"use strict";function n(t,e){var i={};for(var r in t)"ref"!==r&&(i[r]=t[r]);return o.forEach(function(t){t in e&&(i[t]=e[t])}),i}var o=t("./util/ref_properties");e.exports=function(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=n(t[r],e[t[r].ref]));return t}},{"./util/ref_properties":159}],121:[function(t,e,i){"use strict";function l(t,e,i){i.push({command:b.addSource,args:[t,e[t]]})}function u(t,e,i){e.push({command:b.removeSource,args:[t]}),i[t]=!0}function c(t,e,i){var r;for(r in t[i])if(t[i].hasOwnProperty(r)&&"data"!==r&&!_(t[i][r],e[i][r]))return!1;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!_(t[i][r],e[i][r]))return!1;return!0}function a(t,e,i,r){var n,o,a,s;for(n in e=e||{},t=t||{})t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||u(n,i,r));for(n in e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)?_(t[n],e[n])||("geojson"===t[n].type&&"geojson"===e[n].type&&c(t,e,n)?i.push({command:b.setGeoJSONSourceData,args:[n,e[n].data]}):(a=e,u(o=n,s=i,r),l(o,a,s))):l(n,e,i))}function y(t,e,i,r,n,o){var a;for(a in e=e||{},t=t||{})t.hasOwnProperty(a)&&(_(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(_(t[a],e[a])||i.push({command:o,args:[r,a,e[a],n]}))}function g(t){return t.id}function v(t,e){return t[e.id]=e,t}function s(t,e,i){e=e||[];var r,n,o,a,s,l,u,c=(t=t||[]).map(g),h=e.map(g),p=t.reduce(v,{}),f=e.reduce(v,{}),d=c.slice(),m=Object.create(null);for(n=r=0;r<c.length;r++)o=c[r],f.hasOwnProperty(o)?n++:(i.push({command:b.removeLayer,args:[o]}),d.splice(d.indexOf(o,n),1));for(n=r=0;r<h.length;r++)o=h[h.length-1-r],d[d.length-1-r]!==o&&(p.hasOwnProperty(o)?(i.push({command:b.removeLayer,args:[o]}),d.splice(d.lastIndexOf(o,d.length-n),1)):n++,l=d[d.length-r],i.push({command:b.addLayer,args:[f[o],l]}),d.splice(d.length-r,0,o),m[o]=!0);for(r=0;r<h.length;r++)if(o=h[r],a=p[o],s=f[o],!m[o]&&!_(a,s))if(_(a.source,s.source)&&_(a["source-layer"],s["source-layer"])&&_(a.type,s.type)){for(u in y(a.layout,s.layout,i,o,null,b.setLayoutProperty),y(a.paint,s.paint,i,o,null,b.setPaintProperty),_(a.filter,s.filter)||i.push({command:b.setFilter,args:[o,s.filter]}),_(a.minzoom,s.minzoom)&&_(a.maxzoom,s.maxzoom)||i.push({command:b.setLayerZoomRange,args:[o,s.minzoom,s.maxzoom]}),a)a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?y(a[u],s[u],i,o,u.slice(6),b.setPaintProperty):_(a[u],s[u])||i.push({command:b.setLayerProperty,args:[o,u,s[u]]}));for(u in s)s.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?y(a[u],s[u],i,o,u.slice(6),b.setPaintProperty):_(a[u],s[u])||i.push({command:b.setLayerProperty,args:[o,u,s[u]]}))}else i.push({command:b.removeLayer,args:[o]}),l=d[d.lastIndexOf(o)+1],i.push({command:b.addLayer,args:[s,l]})}var _=t("./util/deep_equal"),b={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};e.exports=function(t,e){if(!t)return[{command:b.setStyle,args:[e]}];var i=[];try{if(!_(t.version,e.version))return[{command:b.setStyle,args:[e]}];_(t.center,e.center)||i.push({command:b.setCenter,args:[e.center]}),_(t.zoom,e.zoom)||i.push({command:b.setZoom,args:[e.zoom]}),_(t.bearing,e.bearing)||i.push({command:b.setBearing,args:[e.bearing]}),_(t.pitch,e.pitch)||i.push({command:b.setPitch,args:[e.pitch]}),_(t.sprite,e.sprite)||i.push({command:b.setSprite,args:[e.sprite]}),_(t.glyphs,e.glyphs)||i.push({command:b.setGlyphs,args:[e.glyphs]}),_(t.transition,e.transition)||i.push({command:b.setTransition,args:[e.transition]}),_(t.light,e.light)||i.push({command:b.setLight,args:[e.light]});var r={},n=[];a(t.sources,e.sources,n,r);var o=[];t.layers&&t.layers.forEach(function(t){r[t.source]?i.push({command:b.removeLayer,args:[t.id]}):o.push(t)}),i=i.concat(n),s(o,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:b.setStyle,args:[e]}]}return i},e.exports.operations=b},{"./util/deep_equal":155}],122:[function(t,e,i){"use strict";e.exports=function(t,e,i){this.message=(t?t+": ":"")+i,null!=e&&e.__line__&&(this.line=e.__line__)}},{}],123:[function(t,e,i){"use strict";var r=t("./types"),E=r.toString,T=t("./parsing_context"),k=(t("./evaluation_context"),function(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r});k.prototype.evaluate=function(t){return this._evaluate(t,this.args)},k.prototype.eachChild=function(t){this.args.forEach(t)},k.prototype.possibleOutputs=function(){return[void 0]},k.parse=function(i,t){var e=i[0],r=k.definitions[e];if(!r)return t.error('Unknown expression "'+e+'". If you wanted a literal array, use ["literal", [...]].',0);for(var n=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(function(t){var e=t[0];return!Array.isArray(e)||e.length===i.length-1}),s=[],l=1;l<i.length;l++){var u=i[l],c=void 0;if(1===a.length){var h=a[0][0];c=Array.isArray(h)?h[l-1]:h.type}var p=t.parse(u,1+s.length,c);if(!p)return null;s.push(p)}for(var f=null,d=0,m=a;d<m.length;d+=1){var y=m[d],g=y[0],v=y[1];if(f=new T(t.registry,t.path,null,t.scope),Array.isArray(g)&&g.length!==s.length)f.error("Expected "+g.length+" arguments, but found "+s.length+" instead.");else{for(var _=0;_<s.length;_++){var b=Array.isArray(g)?g[_]:g.type,x=s[_];f.concat(_+1).checkSubtype(b,x.type)}if(0===f.errors.length)return new k(e,n,v,s)}}if(1===a.length)t.errors.push.apply(t.errors,f.errors);else{var w=a.length?a:o,S=w.map(function(t){return e=t[0],Array.isArray(e)?"("+e.map(E).join(", ")+")":"("+E(e.type)+"...)";var e}).join(" | "),C=s.map(function(t){return E(t.type)}).join(", ");t.error("Expected arguments of type "+S+", but found ("+C+") instead.")}return null},k.register=function(t,e){for(var i in k.definitions=e)t[i]=k},e.exports={CompoundExpression:k,varargs:function(t){return{type:t}}}},{"./evaluation_context":138,"./parsing_context":141,"./types":146}],124:[function(t,e,i){"use strict";var r=t("../types"),n=r.toString,s=r.array,l=r.ValueType,o=r.StringType,a=r.NumberType,u=r.BooleanType,c=r.checkSubtype,h=t("../values"),p=h.typeOf,f=t("../runtime_error"),d={string:o,number:a,boolean:u},m=function(t,e){this.type=t,this.input=e};m.parse=function(t,e){if(t.length<2||4<t.length)return e.error("Expected 1, 2, or 3 arguments, but found "+(t.length-1)+" instead.");var i,r;if(2<t.length){var n=t[1];if("string"!=typeof n||!(n in d))return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=d[n]}else i=l;if(3<t.length){if("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2]))return e.error('The length argument to "array" must be a positive integer literal',2);r=t[2]}var o=s(i,r),a=e.parse(t[t.length-1],t.length-1,l);return a?new m(o,a):null},m.prototype.evaluate=function(t){var e=this.input.evaluate(t);if(c(this.type,p(e)))throw new f("Expected value to be of type "+n(this.type)+", but found "+n(p(e))+" instead.");return e},m.prototype.eachChild=function(t){t(this.input)},m.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},e.exports=m},{"../runtime_error":143,"../types":146,"../values":147}],125:[function(t,e,i){"use strict";var r=t("../types"),n=r.ObjectType,s=r.ValueType,o=r.StringType,a=r.NumberType,l=r.BooleanType,u=t("../runtime_error"),c=t("../types"),h=c.checkSubtype,p=c.toString,f=t("../values"),d=f.typeOf,m={string:o,number:a,boolean:l,object:n},y=function(t,e){this.type=t,this.args=e};y.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var i=t[0],r=m[i],n=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,s);if(!a)return null;n.push(a)}return new y(r,n)},y.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!h(this.type,d(i)))return i;if(e===this.args.length-1)throw new u("Expected value to be of type "+p(this.type)+", but found "+p(d(i))+" instead.")}return null},y.prototype.eachChild=function(t){this.args.forEach(t)},y.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=y},{"../runtime_error":143,"../types":146,"../values":147}],126:[function(t,e,i){"use strict";var r=t("../types"),o=r.array,a=r.ValueType,s=r.NumberType,n=t("../runtime_error"),l=function(t,e,i){this.type=t,this.index=e,this.input=i};l.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,s),r=e.parse(t[2],2,o(e.expectedType||a));if(!i||!r)return null;var n=r.type;return new l(n.itemType,i,r)},l.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0||e>=i.length)throw new n("Array index out of bounds: "+e+" > "+i.length+".");if(e!==Math.floor(e))throw new n("Array index must be an integer, but found "+e+" instead.");return i[e]},l.prototype.eachChild=function(t){t(this.index),t(this.input)},l.prototype.possibleOutputs=function(){return[void 0]},e.exports=l},{"../runtime_error":143,"../types":146}],127:[function(t,e,i){"use strict";var r=t("../types"),l=r.BooleanType,u=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};u.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var r=[],n=1;n<t.length-1;n+=2){var o=e.parse(t[n],n,l);if(!o)return null;var a=e.parse(t[n+1],n+1,i);if(!a)return null;r.push([o,a]),i=i||a.type}var s=e.parse(t[t.length-1],t.length-1,i);return s?new u(i,r,s):null},u.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[0],o=r[1];if(n.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},u.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],n=r[0],o=r[1];t(n),t(o)}t(this.otherwise)},u.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},e.exports=u},{"../types":146}],128:[function(t,e,i){"use strict";var r=t("../types"),u=r.checkSubtype,c=r.ValueType,h=function(t,e){this.type=t,this.args=e};h.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,r=e.expectedType;r&&"value"!==r.kind&&(i=r);for(var n=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],l=e.parse(s,1+n.length,i,void 0,{omitTypeAnnotations:!0});if(!l)return null;i=i||l.type,n.push(l)}return r&&n.some(function(t){return u(r,t.type)})?new h(c,n):new h(i,n)},h.prototype.evaluate=function(t){for(var e=null,i=0,r=this.args;i<r.length&&null===(e=r[i].evaluate(t));i+=1);return e},h.prototype.eachChild=function(t){this.args.forEach(t)},h.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=h},{"../types":146}],129:[function(t,e,i){"use strict";var r=t("../types"),n=r.ColorType,s=r.ValueType,o=r.NumberType,a=t("../values"),c=a.Color,h=a.validateRGBA,p=t("../runtime_error"),l={"to-number":o,"to-color":n},u=function(t,e){this.type=t,this.args=e};u.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var i=t[0],r=l[i],n=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,s);if(!a)return null;n.push(a)}return new u(r,n)},u.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,i,r=0,n=this.args;r<n.length;r+=1)if(e=n[r].evaluate(t),i=null,"string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(i=e.length<3||4<e.length?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":h(e[0],e[1],e[2],e[3])))return new c(e[0]/255,e[1]/255,e[2]/255,e[3]);throw new p(i||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}for(var a=null,s=0,l=this.args;s<l.length;s+=1)if(null!==(a=l[s].evaluate(t))){var u=Number(a);if(!isNaN(u))return u}throw new p("Could not convert "+JSON.stringify(a)+" to number.")},u.prototype.eachChild=function(t){this.args.forEach(t)},u.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},e.exports=u},{"../runtime_error":143,"../types":146,"../values":147}],130:[function(t,e,i){"use strict";function o(t){return"string"===t.kind||"number"===t.kind||"boolean"===t.kind||"null"===t.kind}function r(e){return function(){function n(t,e){this.type=s,this.lhs=t,this.rhs=e}return n.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,a);if(!i)return null;var r=e.parse(t[2],2,a);return r?o(i.type)||o(r.type)?i.type.kind!==r.type.kind&&"value"!==i.type.kind&&"value"!==r.type.kind?e.error("Cannot compare "+u(i.type)+" and "+u(r.type)+"."):new n(i,r):e.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+u(i.type)+", "+u(r.type)+") instead."):null},n.prototype.evaluate=function(t){return e(this.lhs.evaluate(t),this.rhs.evaluate(t))},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs)},n.prototype.possibleOutputs=function(){return[!0,!1]},n}()}var n=t("../types"),a=n.ValueType,s=n.BooleanType,l=t("../types"),u=l.toString;e.exports={Equals:r(function(t,e){return t===e}),NotEquals:r(function(t,e){return t!==e})}},{"../types":146}],131:[function(t,e,i){"use strict";function r(t,e){var i=e[0],r=e[1],n=e[2],o=e[3];i=i.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);var a=o?o.evaluate(t):1,s=C(i,r,n,a);if(s)throw new M(s);return new S(i/255*a,r/255*a,n/255*a,a)}function n(t,e){return t in e}function o(t,e){var i=e[t];return void 0===i?null:i}function a(t,e){return e[0].evaluate(t).length}function s(t,e){var i=e[0],r=e[1];return i.evaluate(t)<r.evaluate(t)}function l(t,e){var i=e[0],r=e[1];return i.evaluate(t)>r.evaluate(t)}function u(t,e){var i=e[0],r=e[1];return i.evaluate(t)<=r.evaluate(t)}function c(t,e){var i=e[0],r=e[1];return i.evaluate(t)>=r.evaluate(t)}var h=t("../types"),p=h.NumberType,f=h.StringType,d=h.BooleanType,m=h.ColorType,y=h.ObjectType,g=h.ValueType,v=h.ErrorType,_=h.array,b=h.toString,x=t("../values"),w=x.typeOf,S=x.Color,C=x.validateRGBA,E=t("../compound_expression"),T=E.CompoundExpression,k=E.varargs,M=t("../runtime_error"),P=t("./let"),A=t("./var"),L=t("./literal"),I=t("./assertion"),O=t("./array"),D=t("./coercion"),z=t("./at"),F=t("./match"),R=t("./case"),B=t("./step"),N=t("./interpolate"),j=t("./coalesce"),V=t("./equals"),U=V.Equals,$=V.NotEquals,q={"==":U,"!=":$,array:O,at:z,boolean:I,case:R,coalesce:j,interpolate:N,let:P,literal:L,match:F,number:I,object:I,step:B,string:I,"to-color":D,"to-number":D,var:A};T.register(q,{error:[v,[f],function(t,e){var i=e[0];throw new M(i.evaluate(t))}],typeof:[f,[g],function(t,e){var i=e[0];return b(w(i.evaluate(t)))}],"to-string":[f,[g],function(t,e){var i=e[0],r=typeof(i=i.evaluate(t));return null===i||"string"===r||"number"===r||"boolean"===r?String(i):i instanceof S?i.toString():JSON.stringify(i)}],"to-boolean":[d,[g],function(t,e){var i=e[0];return Boolean(i.evaluate(t))}],"to-rgba":[_(p,4),[m],function(t,e){var i=e[0],r=i.evaluate(t),n=r.r,o=r.g,a=r.b,s=r.a;return[255*n/s,255*o/s,255*a/s,s]}],rgb:[m,[p,p,p],r],rgba:[m,[p,p,p,p],r],length:{type:p,overloads:[[[f],a],[[_(g)],a]]},has:{type:d,overloads:[[[f],function(t,e){return n(e[0].evaluate(t),t.properties())}],[[f,y],function(t,e){var i=e[0],r=e[1];return n(i.evaluate(t),r.evaluate(t))}]]},get:{type:g,overloads:[[[f],function(t,e){return o(e[0].evaluate(t),t.properties())}],[[f,y],function(t,e){var i=e[0],r=e[1];return o(i.evaluate(t),r.evaluate(t))}]]},properties:[y,[],function(t){return t.properties()}],"geometry-type":[f,[],function(t){return t.geometryType()}],id:[g,[],function(t){return t.id()}],zoom:[p,[],function(t){return t.globals.zoom}],"heatmap-density":[p,[],function(t){return t.globals.heatmapDensity||0}],"+":[p,k(p),function(t,e){for(var i=0,r=0,n=e;r<n.length;r+=1)i+=n[r].evaluate(t);return i}],"*":[p,k(p),function(t,e){for(var i=1,r=0,n=e;r<n.length;r+=1)i*=n[r].evaluate(t);return i}],"-":{type:p,overloads:[[[p,p],function(t,e){var i=e[0],r=e[1];return i.evaluate(t)-r.evaluate(t)}],[[p],function(t,e){return-e[0].evaluate(t)}]]},"/":[p,[p,p],function(t,e){var i=e[0],r=e[1];return i.evaluate(t)/r.evaluate(t)}],"%":[p,[p,p],function(t,e){var i=e[0],r=e[1];return i.evaluate(t)%r.evaluate(t)}],ln2:[p,[],function(){return Math.LN2}],pi:[p,[],function(){return Math.PI}],e:[p,[],function(){return Math.E}],"^":[p,[p,p],function(t,e){var i=e[0],r=e[1];return Math.pow(i.evaluate(t),r.evaluate(t))}],sqrt:[p,[p],function(t,e){var i=e[0];return Math.sqrt(i.evaluate(t))}],log10:[p,[p],function(t,e){var i=e[0];return Math.log10(i.evaluate(t))}],ln:[p,[p],function(t,e){var i=e[0];return Math.log(i.evaluate(t))}],log2:[p,[p],function(t,e){var i=e[0];return Math.log2(i.evaluate(t))}],sin:[p,[p],function(t,e){var i=e[0];return Math.sin(i.evaluate(t))}],cos:[p,[p],function(t,e){var i=e[0];return Math.cos(i.evaluate(t))}],tan:[p,[p],function(t,e){var i=e[0];return Math.tan(i.evaluate(t))}],asin:[p,[p],function(t,e){var i=e[0];return Math.asin(i.evaluate(t))}],acos:[p,[p],function(t,e){var i=e[0];return Math.acos(i.evaluate(t))}],atan:[p,[p],function(t,e){var i=e[0];return Math.atan(i.evaluate(t))}],min:[p,k(p),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[p,k(p),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],"filter-==":[d,[f,g],function(t,e){var i=e[0],r=e[1];return t.properties()[i.value]===r.value}],"filter-id-==":[d,[g],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[d,[f],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[d,[f,g],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<o}],"filter-id-<":[d,[g],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<n}],"filter->":[d,[f,g],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&o<n}],"filter-id->":[d,[g],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&n<r}],"filter-<=":[d,[f,g],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[d,[g],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&r<=n}],"filter->=":[d,[f,g],function(t,e){var i=e[0],r=e[1],n=t.properties()[i.value],o=r.value;return typeof n==typeof o&&o<=n}],"filter-id->=":[d,[g],function(t,e){var i=e[0],r=t.id(),n=i.value;return typeof r==typeof n&&n<=r}],"filter-has":[d,[g],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[d,[],function(t){return null!==t.id()}],"filter-type-in":[d,[_(f)],function(t,e){return 0<=e[0].value.indexOf(t.geometryType())}],"filter-id-in":[d,[_(g)],function(t,e){return 0<=e[0].value.indexOf(t.id())}],"filter-in-small":[d,[f,_(g)],function(t,e){var i=e[0];return 0<=e[1].value.indexOf(t.properties()[i.value])}],"filter-in-large":[d,[f,_(g)],function(t,e){var i=e[0],r=e[1];return function(t,e,i,r){for(;i<=r;){var n=i+r>>1;if(e[n]===t)return!0;e[n]>t?r=n-1:i=n+1}return!1}(t.properties()[i.value],r.value,0,r.value.length-1)}],">":{type:d,overloads:[[[p,p],l],[[f,f],l]]},"<":{type:d,overloads:[[[p,p],s],[[f,f],s]]},">=":{type:d,overloads:[[[p,p],c],[[f,f],c]]},"<=":{type:d,overloads:[[[p,p],u],[[f,f],u]]},all:{type:d,overloads:[[[d,d],function(t,e){var i=e[0],r=e[1];return i.evaluate(t)&&r.evaluate(t)}],[k(d),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(!r[i].evaluate(t))return!1;return!0}]]},any:{type:d,overloads:[[[d,d],function(t,e){var i=e[0],r=e[1];return i.evaluate(t)||r.evaluate(t)}],[k(d),function(t,e){for(var i=0,r=e;i<r.length;i+=1)if(r[i].evaluate(t))return!0;return!1}]]},"!":[d,[d],function(t,e){return!e[0].evaluate(t)}],upcase:[f,[f],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[f,[f],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[f,k(f),function(e,t){return t.map(function(t){return t.evaluate(e)}).join("")}]}),e.exports=q},{"../compound_expression":123,"../runtime_error":143,"../types":146,"../values":147,"./array":124,"./assertion":125,"./at":126,"./case":127,"./coalesce":128,"./coercion":129,"./equals":130,"./interpolate":132,"./let":133,"./literal":134,"./match":135,"./step":136,"./var":137}],132:[function(t,e,i){"use strict";function s(t,e,i,r){var n=r-i,o=t-i;return 0===n?0:1===e?o/n:(Math.pow(e,o)-1)/(Math.pow(e,n)-1)}var l=t("@mapbox/unitbezier"),h=t("../../util/interpolate"),r=t("../types"),m=r.toString,y=r.NumberType,n=t("../stops"),p=n.findStopLessThanOrEqualTo,g=function(t,e,i,r){this.type=t,this.interpolation=e,this.input=i,this.labels=[],this.outputs=[];for(var n=0,o=r;n<o.length;n+=1){var a=o[n],s=a[0],l=a[1];this.labels.push(s),this.outputs.push(l)}};g.interpolationFactor=function(t,e,i,r){var n=0;if("exponential"===t.name)n=s(e,t.base,i,r);else if("linear"===t.name)n=s(e,1,i,r);else if("cubic-bezier"===t.name){var o=t.controlPoints,a=new l(o[0],o[1],o[2],o[3]);n=a.solve(s(e,1,i,r))}return n},g.parse=function(t,e){var i=t[1],r=t[2],n=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var o=i[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:o}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var a=i.slice(1);if(4!==a.length||a.some(function(t){return"number"!=typeof t||t<0||1<t}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:a}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,y)))return null;var s=[],l=null;e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var u=0;u<n.length;u+=2){var c=n[u],h=n[u+1],p=u+3,f=u+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(s.length&&s[s.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var d=e.parse(h,f,l);if(!d)return null;l=l||d.type,s.push([c,d])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new g(l,i,r,s):e.error("Type "+m(l)+" is not interpolatable.")},g.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;if(r>=e[n-1])return i[n-1].evaluate(t);var o=p(e,r),a=e[o],s=e[o+1],l=g.interpolationFactor(this.interpolation,r,a,s),u=i[o].evaluate(t),c=i[o+1].evaluate(t);return h[this.type.kind.toLowerCase()](u,c,l)},g.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},g.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},e.exports=g},{"../../util/interpolate":158,"../stops":145,"../types":146,"@mapbox/unitbezier":7}],133:[function(t,e,i){"use strict";var s=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};s.prototype.evaluate=function(t){t.pushScope(this.bindings);var e=this.result.evaluate(t);return t.popScope(),e},s.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},s.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],r=1;r<t.length-1;r+=2){var n=t[r];if("string"!=typeof n)return e.error("Expected string, but found "+typeof n+" instead.",r);if(/[^a-zA-Z0-9_]/.test(n))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;i.push([n,o])}var a=e.parse(t[t.length-1],t.length-1,void 0,i);return a?new s(i,a):null},s.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},e.exports=s},{}],134:[function(t,e,i){"use strict";var r=t("../values"),o=r.isValue,a=r.typeOf,s=function(t,e){this.type=t,this.value=e};s.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!o(t[1]))return e.error("invalid value");var i=t[1],r=a(i),n=e.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new s(r,i)},s.prototype.evaluate=function(){return this.value},s.prototype.eachChild=function(){},s.prototype.possibleOutputs=function(){return[this.value]},e.exports=s},{"../values":147}],135:[function(t,e,i){"use strict";var r=t("../values"),y=r.typeOf,g=function(t,e,i,r,n,o){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=n,this.otherwise=o};g.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var n={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return u.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return u.error("Numeric branch labels must be integer values.");if(i){if(u.checkSubtype(i,y(p)))return null}else i=y(p);if(void 0!==n[String(p)])return u.error("Branch labels must be unique.");n[String(p)]=o.length}var f=e.parse(l,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=e.parse(t[1],1,i);if(!d)return null;var m=e.parse(t[t.length-1],t.length-1,r);return m?new g(i,r,d,n,o,m):null},g.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},g.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},g.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},e.exports=g},{"../values":147}],136:[function(t,e,i){"use strict";var r=t("../types"),p=r.NumberType,n=t("../stops"),o=n.findStopLessThanOrEqualTo,f=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,n=i;r<n.length;r+=1){var o=n[r],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};f.parse=function(t,e){var i=t[1],r=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,1,p)))return null;var n=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),r.unshift(-1/0);for(var a=0;a<r.length;a+=2){var s=r[a],l=r[a+1],u=a+1,c=a+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(n.length&&n[n.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=e.parse(l,c,o);if(!h)return null;o=o||h.type,n.push([s,h])}return new f(o,i,n)},f.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var n=e.length;return r>=e[n-1]?i[n-1].evaluate(t):i[o(e,r)].evaluate(t)},f.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},f.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},e.exports=f},{"../stops":145,"../types":146}],137:[function(t,e,i){"use strict";var r=function(t,e){this.type=e,this.name=t};r.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new r(i,e.scope.get(i).type):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},r.prototype.evaluate=function(t){return t.scope.get(this.name).evaluate(t)},r.prototype.eachChild=function(){},r.prototype.possibleOutputs=function(){return[void 0]},e.exports=r},{}],138:[function(t,e,i){"use strict";var r=t("./scope"),n=t("./values"),o=n.Color,a=["Unknown","Point","LineString","Polygon"],s=function(){this.scope=new r,this._parseColorCache={}};s.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},s.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?a[this.feature.type]:this.feature.type:null},s.prototype.properties=function(){return this.feature&&this.feature.properties||{}},s.prototype.pushScope=function(t){this.scope=this.scope.concat(t)},s.prototype.popScope=function(){this.scope=this.scope.parent},s.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=o.parse(t)),e},e.exports=s},{"./scope":144,"./values":147}],139:[function(t,e,i){"use strict";function n(t){return Array.isArray(t)&&0<t.length&&"string"==typeof t[0]&&t[0]in y}function s(t,e,i){void 0===i&&(i={});var r,n,o=new u(y,[],(n={color:O,string:D,number:z,enum:D,boolean:F},"array"===(r=e).type?B(n[r.value]||R,r.length):n[r.type]||null)),a=o.parse(t);return a?b(!1===i.handleErrors?new w(a):new S(a,e)):x(o.errors)}function o(t,e,i){if(void 0===i&&(i={}),"error"===(t=s(t,e,i)).result)return t;var r=t.value.expression,n=g.isFeatureConstant(r);if(!n&&!e["property-function"])return x([new l("","property expressions not supported")]);var o=g.isGlobalPropertyConstant(r,["zoom"]);if(!o&&!1===e["zoom-function"])return x([new l("","zoom expressions not supported")]);var a=function i(t){var r=null;if(t instanceof m)r=i(t.result);else if(t instanceof d)for(var e=0,n=t.args;e<n.length;e+=1){var o=n[e];if(r=i(o))break}else(t instanceof p||t instanceof f)&&t.input instanceof h&&"zoom"===t.input.name&&(r=t);return r instanceof l||t.eachChild(function(t){var e=i(t);e instanceof l?r=e:!r&&e?r=new l("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&e&&r!==e&&(r=new l("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}(r);return a||o?a instanceof l?x([a]):a instanceof f&&"piecewise-constant"===e.function?x([new l("",'"interpolate" expressions cannot be used with this property')]):b(a?new E(n?"camera":"composite",t.value,a):new C(n?"constant":"source",t.value)):x([new l("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var r=t("../util/extend"),l=t("./parsing_error"),u=t("./parsing_context"),a=t("./evaluation_context"),c=t("./compound_expression"),h=c.CompoundExpression,p=t("./definitions/step"),f=t("./definitions/interpolate"),d=t("./definitions/coalesce"),m=t("./definitions/let"),y=t("./definitions"),g=t("./is_constant"),v=t("./runtime_error"),_=t("../util/result"),b=_.success,x=_.error,w=function(t){this.expression=t};w.prototype.evaluate=function(t,e){return this._evaluator||(this._evaluator=new a),this._evaluator.globals=t,this._evaluator.feature=e,this.expression.evaluate(this._evaluator)};var S=function(r){function t(t,e){var i;r.call(this,t),this._warningHistory={},this._defaultValue="color"===(i=e).type&&k(i.default)?new A(0,0,0,0):"color"===i.type?A.parse(i.default)||null:void 0===i.default?null:i.default,"enum"===e.type&&(this._enumValues=e.values)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.evaluate=function(t,e){this._evaluator||(this._evaluator=new a),this._evaluator.globals=t,this._evaluator.feature=e;try{var i=this.expression.evaluate(this._evaluator);if(null==i)return this._defaultValue;if(this._enumValues&&!(i in this._enumValues))throw new v("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(i)+" instead.");return i}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}},t}(w),C=function(t,e){this.kind=t,this._styleExpression=e};C.prototype.evaluate=function(t,e){return this._styleExpression.evaluate(t,e)};var E=function(t,e,i){this.kind=t,this.zoomStops=i.labels,this._styleExpression=e,i instanceof f&&(this._interpolationType=i.interpolation)};E.prototype.evaluate=function(t,e){return this._styleExpression.evaluate(t,e)},E.prototype.interpolationFactor=function(t,e,i){return this._interpolationType?f.interpolationFactor(this._interpolationType,t,e,i):0};var T=t("../function"),k=T.isFunction,M=T.createFunction,P=t("./values"),A=P.Color,L=function(t,e){this._parameters=t,this._specification=e,r(this,M(this._parameters,this._specification))};L.deserialize=function(t){return new L(t._parameters,t._specification)},L.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}},e.exports={StyleExpression:w,StyleExpressionWithErrorHandling:S,isExpression:n,createExpression:s,createPropertyExpression:o,normalizePropertyExpression:function(t,e){if(k(t))return new L(t,e);if(n(t)){var i=o(t,e);if("error"===i.result)throw new Error(i.value.map(function(t){return t.key+": "+t.message}).join(", "));return i.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=A.parse(t)),{kind:"constant",evaluate:function(){return r}}},ZoomConstantExpression:C,ZoomDependentExpression:E,StylePropertyFunction:L};var I=t("./types"),O=I.ColorType,D=I.StringType,z=I.NumberType,F=I.BooleanType,R=I.ValueType,B=I.array},{"../function":149,"../util/extend":156,"../util/result":160,"./compound_expression":123,"./definitions":131,"./definitions/coalesce":128,"./definitions/interpolate":132,"./definitions/let":133,"./definitions/step":136,"./evaluation_context":138,"./is_constant":140,"./parsing_context":141,"./parsing_error":142,"./runtime_error":143,"./types":146,"./values":147}],140:[function(t,e,i){"use strict";var r=t("./compound_expression"),n=r.CompoundExpression;e.exports={isFeatureConstant:function e(t){if(t instanceof n){if("get"===t.name&&1===t.args.length)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var i=!0;return t.eachChild(function(t){i&&!e(t)&&(i=!1)}),i},isGlobalPropertyConstant:function e(t,i){if(t instanceof n&&0<=i.indexOf(t.name))return!1;var r=!0;return t.eachChild(function(t){r&&!e(t,i)&&(r=!1)}),r}}},{"./compound_expression":123}],141:[function(p,t,e){"use strict";var o=p("./scope"),i=p("./types"),r=i.checkSubtype,n=p("./parsing_error"),f=p("./definitions/literal"),d=p("./definitions/assertion"),m=p("./definitions/array"),y=p("./definitions/coercion"),a=function(t,e,i,r,n){void 0===e&&(e=[]),void 0===r&&(r=new o),void 0===n&&(n=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=n,this.expectedType=i};a.prototype.parse=function(t,e,i,r,n){void 0===n&&(n={});var o=this;if(e&&(o=o.concat(e,i,r)),null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return o.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var a=t[0];if("string"!=typeof a)return o.error("Expression name must be a string, but found "+typeof a+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var s=o.registry[a];if(s){var l=s.parse(t,o);if(!l)return null;if(o.expectedType){var u=o.expectedType,c=l.type;if("string"!==u.kind&&"number"!==u.kind&&"boolean"!==u.kind||"value"!==c.kind)if("array"===u.kind&&"value"===c.kind)n.omitTypeAnnotations||(l=new m(u,l));else if("color"!==u.kind||"value"!==c.kind&&"string"!==c.kind){if(o.checkSubtype(o.expectedType,l.type))return null}else n.omitTypeAnnotations||(l=new y(u,[l]));else n.omitTypeAnnotations||(l=new d(u,[l]))}if(!(l instanceof f)&&function(t){var e=p("./compound_expression").CompoundExpression,i=p("./is_constant"),r=i.isGlobalPropertyConstant,n=i.isFeatureConstant;if(t instanceof p("./definitions/var"))return!1;if(t instanceof e&&"error"===t.name)return!1;var o=!0;return t.eachChild(function(t){t instanceof f||(o=!1)}),!!o&&n(t)&&r(t,["zoom","heatmap-density"])}(l)){var h=new(p("./evaluation_context"));try{l=new f(l.type,l.evaluate(h))}catch(t){return o.error(t.message),null}}return l}return o.error('Unknown expression "'+a+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?o.error("'undefined' value invalid. Use null instead."):"object"==typeof t?o.error('Bare objects invalid. Use ["literal", {...}] instead.'):o.error("Expected an array, but found "+typeof t+" instead.")},a.prototype.concat=function(t,e,i){var r="number"==typeof t?this.path.concat(t):this.path,n=i?this.scope.concat(i):this.scope;return new a(this.registry,r,e||null,n,this.errors)},a.prototype.error=function(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new n(r,t))},a.prototype.checkSubtype=function(t,e){var i=r(t,e);return i&&this.error(i),i},t.exports=a},{"./compound_expression":123,"./definitions/array":124,"./definitions/assertion":125,"./definitions/coercion":129,"./definitions/literal":134,"./definitions/var":137,"./evaluation_context":138,"./is_constant":140,"./parsing_error":142,"./scope":144,"./types":146}],142:[function(t,e,i){"use strict";var r=function(i){function t(t,e){i.call(this,e),this.message=e,this.key=t}return i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t}(Error);e.exports=r},{}],143:[function(t,e,i){"use strict";var r=function(t){this.name="ExpressionEvaluationError",this.message=t};r.prototype.toJSON=function(){return this.message},e.exports=r},{}],144:[function(t,e,i){"use strict";var r=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,r=e;i<r.length;i+=1){var n=r[i],o=n[0],a=n[1];this.bindings[o]=a}};r.prototype.concat=function(t){return new r(this,t)},r.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},r.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)},e.exports=r},{}],145:[function(t,e,i){"use strict";var l=t("./runtime_error");e.exports={findStopLessThanOrEqualTo:function(t,e){for(var i,r,n=t.length,o=0,a=n-1,s=0;o<=a;){if(s=Math.floor((o+a)/2),i=t[s],r=t[s+1],e===i||i<e&&e<r)return s;if(i<e)o=s+1;else{if(!(e<i))throw new l("Input is not a number.");a=s-1}}return Math.max(s-1,0)}}},{"./runtime_error":143}],146:[function(t,e,i){"use strict";function r(t,e){return{kind:"array",itemType:t,N:e}}function a(t){if("array"!==t.kind)return t.kind;var e=a(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}var n={kind:"null"},o={kind:"number"},s={kind:"string"},l={kind:"boolean"},u={kind:"color"},c={kind:"object"},h={kind:"value"},p=[n,o,s,l,u,c,r(h)];e.exports={NullType:n,NumberType:o,StringType:s,BooleanType:l,ColorType:u,ObjectType:c,ValueType:h,array:r,ErrorType:{kind:"error"},toString:a,checkSubtype:function t(e,i){if("error"===i.kind)return null;if("array"===e.kind){if("array"===i.kind&&!t(e.itemType,i.itemType)&&("number"!=typeof e.N||e.N===i.N))return null}else{if(e.kind===i.kind)return null;if("value"===e.kind)for(var r=0,n=p;r<n.length;r+=1){var o=n[r];if(!t(o,i))return null}}return"Expected "+a(e)+" but found "+a(i)+" instead."}}},{}],147:[function(t,e,i){"use strict";var l=t("../util/color"),r=t("./types"),u=r.NullType,c=r.NumberType,h=r.StringType,p=r.BooleanType,f=r.ColorType,d=r.ObjectType,m=r.ValueType,y=r.array;e.exports={Color:l,validateRGBA:function(t,e,i,r){return"number"==typeof t&&0<=t&&t<=255&&"number"==typeof e&&0<=e&&e<=255&&"number"==typeof i&&0<=i&&i<=255?void 0===r||"number"==typeof r&&0<=r&&r<=1?null:"Invalid rgba value ["+[t,e,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."},isValue:function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof l)return!0;if(Array.isArray(e)){for(var i=0,r=e;i<r.length;i+=1)if(!t(r[i]))return!1;return!0}if("object"!=typeof e)return!1;for(var n in e)if(!t(e[n]))return!1;return!0},typeOf:function t(e){if(null===e)return u;if("string"==typeof e)return h;if("boolean"==typeof e)return p;if("number"==typeof e)return c;if(e instanceof l)return f;if(Array.isArray(e)){for(var i,r=e.length,n=0,o=e;n<o.length;n+=1){var a=o[n],s=t(a);if(i){if(i===s)continue;i=m;break}i=s}return y(i||m,r)}return d}}},{"../util/color":153,"./types":146}],148:[function(t,e,i){"use strict";function n(t){if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return 2<=t.length&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===t.length&&(Array.isArray(t[1])||Array.isArray(t[2]));case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var r=i[e];if(!n(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function r(t,e){return t<e?-1:e<t?1:0}function o(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?a(t[1],t[2],"=="):"!="===i?u(a(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?a(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(o))):"all"===i?["all"].concat(t.slice(1).map(o)):"none"===i?["all"].concat(t.slice(1).map(o).map(u)):"in"===i?s(t[1],t.slice(2)):"!in"===i?u(s(t[1],t.slice(2))):"has"===i?l(t[1]):"!has"!==i||u(l(t[1]))}function a(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function s(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return 200<e.length&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(r)]]:["filter-in-small",t,["literal",e]]}}function l(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function u(t){return["!",t]}var c=t("../expression"),h=c.createExpression;e.exports=function(t){if(!t)return function(){return!0};n(t)||(t=o(t));var i=h(t,p);if("error"===i.result)throw new Error(i.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,e){return i.value.evaluate(t,e)}},e.exports.isExpressionFilter=n;var p={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0}},{"../expression":139}],149:[function(t,e,i){"use strict";function g(t){return t}function S(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function C(t,e,i,r,n){return S(typeof i===n?r[i]:void 0,t.default,e.default)}function E(t,e,i){if("number"!==_(i))return S(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[r-1][0])return t.stops[r-1][1];var n=v(t.stops,i);return t.stops[n][1]}function T(t,e,i){var r=void 0!==t.base?t.base:1;if("number"!==_(i))return S(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];var o,a,s,l,u,c,h=v(t.stops,i),p=(o=i,a=r,s=t.stops[h][0],l=t.stops[h+1][0],c=o-s,0==(u=l-s)?0:1===a?c/u:(Math.pow(a,c)-1)/(Math.pow(a,u)-1)),f=t.stops[h][1],d=t.stops[h+1][1],m=b[e.type]||g;if(t.colorSpace&&"rgb"!==t.colorSpace){var y=M[t.colorSpace];m=function(t,e){return y.reverse(y.interpolate(y.forward(t),y.forward(e),p))}}return"function"==typeof f.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=f.evaluate.apply(void 0,t),r=d.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==r)return m(i,r,p)}}:m(f,d,p)}function k(t,e,i){return"color"===e.type?i=P.parse(i):_(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),S(i,t.default,e.default)}function v(t,e){for(var i,r,n=t.length,o=0,a=n-1,s=0;o<=a;){if(s=Math.floor((o+a)/2),i=t[s][0],r=t[s+1][0],e===i||i<e&&e<r)return s;i<e?o=s+1:e<i&&(a=s-1)}return Math.max(s-1,0)}var M=t("../util/color_spaces"),P=t("../util/color"),A=t("../util/extend"),_=t("../util/get_type"),b=t("../util/interpolate"),L=t("../expression/definitions/interpolate");e.exports={createFunction:function t(r,n){var o,a,s,e="color"===n.type,i=r.stops&&"object"==typeof r.stops[0][0],l=i||void 0!==r.property,u=i||!l,c=r.type||("interpolated"===n.function?"exponential":"interval");if(e&&((r=A({},r)).stops&&(r.stops=r.stops.map(function(t){return[t[0],P.parse(t[1])]})),r.default?r.default=P.parse(r.default):r.default=P.parse(n.default)),r.colorSpace&&"rgb"!==r.colorSpace&&!M[r.colorSpace])throw new Error("Unknown color space: "+r.colorSpace);if("exponential"===c)o=T;else if("interval"===c)o=E;else if("categorical"===c){o=C,a=Object.create(null);for(var h=0,p=r.stops;h<p.length;h+=1){var f=p[h];a[f[0]]=f[1]}s=typeof r.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');o=k}if(i){for(var d={},m=[],y=0;y<r.stops.length;y++){var g=r.stops[y],v=g[0].zoom;void 0===d[v]&&(d[v]={zoom:v,type:r.type,property:r.property,default:r.default,stops:[]},m.push(v)),d[v].stops.push([g[0].value,g[1]])}for(var _=[],b=0,x=m;b<x.length;b+=1){var w=x[b];_.push([d[w].zoom,t(d[w],n)])}return{kind:"composite",interpolationFactor:L.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:_.map(function(t){return t[0]}),evaluate:function(t,e){var i=t.zoom;return T({stops:_,base:r.base},n,i).evaluate(i,e)}}}return u?{kind:"camera",interpolationFactor:"exponential"===c?L.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==r.base?r.base:1}):function(){return 0},zoomStops:r.stops.map(function(t){return t[0]}),evaluate:function(t){var e=t.zoom;return o(r,n,e,a,s)}}:{kind:"source",evaluate:function(t,e){var i=e&&e.properties?e.properties[r.property]:void 0;return void 0===i?S(r.default,n.default):o(r,n,i,a,s)}}},isFunction:function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}}},{"../expression/definitions/interpolate":132,"../util/color":153,"../util/color_spaces":154,"../util/extend":156,"../util/get_type":157,"../util/interpolate":158}],150:[function(t,e,i){"use strict";function l(t){var e=typeof t;if("number"===e||"boolean"===e||"string"===e||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var i="[",r=0,n=t;r<n.length;r+=1)i+=l(n[r])+",";return i+"]"}for(var o=Object.keys(t).sort(),a="{",s=0;s<o.length;s++)a+=JSON.stringify(o[s])+":"+l(t[o[s]])+",";return a+"}"}function s(t){for(var e="",i=0,r=n;i<r.length;i+=1)e+="/"+l(t[r[i]]);return e}var n=t("./util/ref_properties");e.exports=function(t){for(var e={},i=0;i<t.length;i++){var r=s(t[i]),n=e[r];n||(n=e[r]=[]),n.push(t[i])}var o=[];for(var a in e)o.push(e[a]);return o}},{"./util/ref_properties":159}],151:[function(t,e,i){"use strict";e.exports=t("./v8.json")},{"./v8.json":152}],152:[function(t,e,i){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image","source_canvas"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],153:[function(t,e,i){"use strict";var r=t("csscolorparser"),n=r.parseCSSColor,o=function(t,e,i,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=i,this.a=r};o.parse=function(t){if(t){if(t instanceof o)return t;if("string"==typeof t){var e=n(t);if(e)return new o(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},o.prototype.toString=function(){var e=this;return"rgba("+[this.r,this.g,this.b].map(function(t){return Math.round(255*t/e.a)}).concat(this.a).join(",")+")"},o.black=new o(0,0,0,1),o.white=new o(1,1,1,1),o.transparent=new o(0,0,0,0),e.exports=o},{csscolorparser:13}],154:[function(t,e,i){"use strict";function a(t){return g<t?Math.pow(t,1/3):t/y+d}function n(t){return m<t?t*t*t:y*(t-d)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function s(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function l(t){var e=s(t.r),i=s(t.g),r=s(t.b),n=a((.4124564*e+.3575761*i+.1804375*r)/h),o=a((.2126729*e+.7151522*i+.072175*r)/p);return{l:116*o-16,a:500*(n-o),b:200*(o-a((.0193339*e+.119192*i+.9503041*r)/f)),alpha:t.a}}function r(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=p*n(e),i=h*n(i),r=f*n(r),new u(o(3.2404542*i-1.5371385*e-.4985314*r),o(-.969266*i+1.8760108*e+.041556*r),o(.0556434*i-.2040259*e+1.0572252*r),t.alpha)}var u=t("./color"),c=t("./interpolate").number,h=.95047,p=1,f=1.08883,d=4/29,m=6/29,y=3*m*m,g=m*m*m,v=Math.PI/180,_=180/Math.PI;e.exports={lab:{forward:l,reverse:r,interpolate:function(t,e,i){return{l:c(t.l,e.l,i),a:c(t.a,e.a,i),b:c(t.b,e.b,i),alpha:c(t.alpha,e.alpha,i)}}},hcl:{forward:function(t){var e=l(t),i=e.l,r=e.a,n=e.b,o=Math.atan2(n,r)*_;return{h:o<0?o+360:o,c:Math.sqrt(r*r+n*n),l:i,alpha:t.a}},reverse:function(t){var e=t.h*v,i=t.c;return r({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:(r=t.h,n=e.h,o=i,a=n-r,r+o*(180<a||a<-180?a-360*Math.round(a/360):a)),c:c(t.c,e.c,i),l:c(t.l,e.l,i),alpha:c(t.alpha,e.alpha,i)};var r,n,o,a}}}},{"./color":153,"./interpolate":158}],155:[function(t,e,i){"use strict";e.exports=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],i[r]))return!1;return!0}if("object"!=typeof e||null===e||null===i)return e===i;if("object"!=typeof i)return!1;if(Object.keys(e).length!==Object.keys(i).length)return!1;for(var n in e)if(!t(e[n],i[n]))return!1;return!0}},{}],156:[function(t,e,i){"use strict";e.exports=function(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var o=n[r];for(var a in o)t[a]=o[a]}return t}},{}],157:[function(t,e,i){"use strict";e.exports=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}},{}],158:[function(t,e,i){"use strict";function n(t,e,i){return t*(1-i)+e*i}var r=t("./color");e.exports={number:n,color:function(t,e,i){return new r(n(t.r,e.r,i),n(t.g,e.g,i),n(t.b,e.b,i),n(t.a,e.a,i))},array:function(t,i,r){return t.map(function(t,e){return n(t,i[e],r)})}}},{"./color":153}],159:[function(t,e,i){"use strict";e.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],160:[function(t,e,i){"use strict";e.exports={success:function(t){return{result:"success",value:t}},error:function(t){return{result:"error",value:t}}}},{}],161:[function(t,e,i){"use strict";function r(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}e.exports=r,e.exports.deep=function t(e){return Array.isArray(e)?e.map(t):r(e)}},{}],162:[function(l,t,e){"use strict";var u=l("../util/extend"),c=l("../util/unbundle_jsonlint"),i=l("../expression"),h=i.isExpression,r=l("../function"),p=r.isFunction;t.exports=function(t){var e=l("./validate_function"),i=l("./validate_expression"),r=l("./validate_object"),n={"*":function(){return[]},array:l("./validate_array"),boolean:l("./validate_boolean"),number:l("./validate_number"),color:l("./validate_color"),constants:l("./validate_constants"),enum:l("./validate_enum"),filter:l("./validate_filter"),function:l("./validate_function"),layer:l("./validate_layer"),object:l("./validate_object"),source:l("./validate_source"),light:l("./validate_light"),string:l("./validate_string")},o=t.value,a=t.valueSpec,s=t.styleSpec;return a.function&&p(c(o))?e(t):a.function&&h(c.deep(o))?i(t):a.type&&n[a.type]?n[a.type](t):r(u({},t,{valueSpec:a.type?s[a.type]:a}))}},{"../expression":139,"../function":149,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate_array":163,"./validate_boolean":164,"./validate_color":165,"./validate_constants":166,"./validate_enum":167,"./validate_expression":168,"./validate_filter":169,"./validate_function":170,"./validate_layer":172,"./validate_light":174,"./validate_number":175,"./validate_object":176,"./validate_source":179,"./validate_string":180}],163:[function(t,e,i){"use strict";var c=t("../util/get_type"),h=t("./validate"),p=t("../error/validation_error");e.exports=function(t){var e=t.value,i=t.valueSpec,r=t.style,n=t.styleSpec,o=t.key,a=t.arrayElementValidator||h;if("array"!==c(e))return[new p(o,e,"array expected, "+c(e)+" found")];if(i.length&&e.length!==i.length)return[new p(o,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new p(o,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var s={type:i.value};n.$version<7&&(s.function=i.function),"object"===c(i.value)&&(s=i.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:r,styleSpec:n,key:o+"["+u+"]"}));return l}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],164:[function(t,e,i){"use strict";var n=t("../util/get_type"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,i=t.key,r=n(e);return"boolean"!==r?[new o(i,e,"boolean expected, "+r+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],165:[function(t,e,i){"use strict";var n=t("../error/validation_error"),o=t("../util/get_type"),a=t("csscolorparser").parseCSSColor;e.exports=function(t){var e=t.key,i=t.value,r=o(i);return"string"!==r?[new n(e,i,"color expected, "+r+" found")]:null===a(i)?[new n(e,i,'color expected, "'+i+'" found')]:[]}},{"../error/validation_error":122,"../util/get_type":157,csscolorparser:13}],166:[function(t,e,i){"use strict";var r=t("../error/validation_error");e.exports=function(t){var e=t.key,i=t.value;return i?[new r(e,i,"constants have been deprecated as of v8")]:[]}},{"../error/validation_error":122}],167:[function(t,e,i){"use strict";var o=t("../error/validation_error"),a=t("../util/unbundle_jsonlint");e.exports=function(t){var e=t.key,i=t.value,r=t.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(a(i))&&n.push(new o(e,i,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(r.values).indexOf(a(i))&&n.push(new o(e,i,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(i)+" found")),n}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161}],168:[function(t,e,i){"use strict";var r=t("../error/validation_error"),n=t("../expression"),o=n.createExpression,a=n.createPropertyExpression,s=t("../util/unbundle_jsonlint");e.exports=function(e){var t=("property"===e.expressionContext?a:o)(s.deep(e.value),e.valueSpec);return"error"===t.result?t.value.map(function(t){return new r(""+e.key+t.key,e.value,t.message)}):"property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==t.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new r(e.key,e.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}},{"../error/validation_error":122,"../expression":139,"../util/unbundle_jsonlint":161}],169:[function(t,e,i){"use strict";var u=t("../error/validation_error"),r=t("./validate_expression"),c=t("./validate_enum"),h=t("../util/get_type"),p=t("../util/unbundle_jsonlint"),n=t("../util/extend"),o=t("../feature_filter"),a=o.isExpressionFilter;e.exports=function(t){return a(p.deep(t.value))?r(n({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var i=e.value,r=e.key;if("array"!==h(i))return[new u(r,i,"array expected, "+h(i)+" found")];var n,o=e.styleSpec,a=[];if(i.length<1)return[new u(r,i,"filter array must have at least 1 element")];switch(a=a.concat(c({key:r+"[0]",value:i[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),p(i[0])){case"<":case"<=":case">":case">=":2<=i.length&&"$type"===p(i[1])&&a.push(new u(r,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&a.push(new u(r,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":2<=i.length&&"string"!==(n=h(i[1]))&&a.push(new u(r+"[1]",i[1],"string expected, "+n+" found"));for(var s=2;s<i.length;s++)n=h(i[s]),"$type"===p(i[1])?a=a.concat(c({key:r+"["+s+"]",value:i[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&a.push(new u(r+"["+s+"]",i[s],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var l=1;l<i.length;l++)a=a.concat(t({key:r+"["+l+"]",value:i[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=h(i[1]),2!==i.length?a.push(new u(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==n&&a.push(new u(r+"[1]",i[1],"string expected, "+n+" found"))}return a}(t)}},{"../error/validation_error":122,"../feature_filter":148,"../util/extend":156,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_expression":168}],170:[function(t,e,i){"use strict";var f=t("../error/validation_error"),d=t("../util/get_type"),m=t("./validate"),y=t("./validate_object"),g=t("./validate_array"),v=t("./validate_number"),_=t("../util/unbundle_jsonlint");e.exports=function(t){function r(t){var e=[],i=t.value,r=t.key;if("array"!==d(i))return[new f(r,i,"array expected, "+d(i)+" found")];if(2!==i.length)return[new f(r,i,"array length 2 expected, length "+i.length+" found")];if(h){if("object"!==d(i[0]))return[new f(r,i,"object expected, "+d(i[0])+" found")];if(void 0===i[0].zoom)return[new f(r,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new f(r,i,"object stop key must have value")];if(o&&o>_(i[0].zoom))return[new f(r,i[0].zoom,"stop zoom values must appear in ascending order")];_(i[0].zoom)!==o&&(o=_(i[0].zoom),s=void 0,c={}),e=e.concat(y({key:r+"[0]",value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:v,value:n}}))}else e=e.concat(n({key:r+"[0]",value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return e.concat(m({key:r+"[1]",value:i[1],valueSpec:l,style:t.style,styleSpec:t.styleSpec}))}function n(t,e){var i=d(t.value),r=_(t.value),n=null!==t.value?t.value:e;if(a){if(i!==a)return[new f(t.key,n,i+" stop domain type must match previous stop domain type "+a)]}else a=i;if("number"!==i&&"string"!==i&&"boolean"!==i)return[new f(t.key,n,"stop domain value must be a number, string, or boolean")];if("number"===i||"categorical"===u)return"categorical"!==u||"number"!==i||isFinite(r)&&Math.floor(r)===r?"categorical"!==u&&"number"===i&&void 0!==s&&r<s?[new f(t.key,n,"stop domain values must appear in ascending order")]:(s=r,"categorical"===u&&r in c?[new f(t.key,n,"stop domain values must be unique")]:(c[r]=!0,[])):[new f(t.key,n,"integer expected, found "+r)];var o="number expected, "+i+" found";return l["property-function"]&&void 0===u&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new f(t.key,n,o)]}var a,s,o,l=t.valueSpec,u=_(t.value.type),c={},e="categorical"!==u&&void 0===t.value.property,i=!e,h="array"===d(t.value.stops)&&"array"===d(t.value.stops[0])&&"object"===d(t.value.stops[0][0]),p=y({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===u)return[new f(t.key,t.value,'identity function may not have a "stops" property')];var e=[],i=t.value;return e=e.concat(g({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:r})),"array"===d(i)&&0===i.length&&e.push(new f(t.key,i,"array must have at least one stop")),e},default:function(t){return m({key:t.key,value:t.value,valueSpec:l,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===u&&e&&p.push(new f(t.key,t.value,'missing required property "property"')),"identity"===u||t.value.stops||p.push(new f(t.key,t.value,'missing required property "stops"')),"exponential"===u&&"piecewise-constant"===t.valueSpec.function&&p.push(new f(t.key,t.value,"exponential functions not supported")),8<=t.styleSpec.$version&&(i&&!t.valueSpec["property-function"]?p.push(new f(t.key,t.value,"property functions not supported")):e&&!t.valueSpec["zoom-function"]&&"heatmap-color"!==t.objectKey&&p.push(new f(t.key,t.value,"zoom functions not supported"))),"categorical"!==u&&!h||void 0!==t.value.property||p.push(new f(t.key,t.value,'"property" property is required')),p}},{"../error/validation_error":122,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_array":163,"./validate_number":175,"./validate_object":176}],171:[function(t,e,i){"use strict";var n=t("../error/validation_error"),o=t("./validate_string");e.exports=function(t){var e=t.value,i=t.key,r=o(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new n(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new n(i,e,'"glyphs" url must include a "{range}" token'))),r}},{"../error/validation_error":122,"./validate_string":180}],172:[function(t,e,i){"use strict";var d=t("../error/validation_error"),m=t("../util/unbundle_jsonlint"),y=t("./validate_object"),g=t("./validate_filter"),v=t("./validate_paint_property"),_=t("./validate_layout_property"),b=t("./validate"),x=t("../util/extend");e.exports=function(t){var e=[],i=t.value,r=t.key,n=t.style,o=t.styleSpec;i.type||i.ref||e.push(new d(r,i,'either "type" or "ref" is required'));var a,s=m(i.type),l=m(i.ref);if(i.id)for(var u=m(i.id),c=0;c<t.arrayIndex;c++){var h=n.layers[c];m(h.id)===u&&e.push(new d(r,i.id,'duplicate layer id "'+i.id+'", previously used at line '+h.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach(function(t){t in i&&e.push(new d(r,i[t],'"'+t+'" is prohibited for ref layers'))}),n.layers.forEach(function(t){m(t.id)===l&&(a=t)}),a?a.ref?e.push(new d(r,i.ref,"ref cannot reference another ref layer")):s=m(a.type):e.push(new d(r,i.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(i.source){var p=n.sources&&n.sources[i.source],f=p&&m(p.type);p?"vector"===f&&"raster"===s?e.push(new d(r,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new d(r,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==f||i["source-layer"]?"raster-dem"===f&&"hillshade"!==s&&e.push(new d(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):e.push(new d(r,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new d(r,i.source,'source "'+i.source+'" not found'))}else e.push(new d(r,i,'missing required property "source"'));return e=e.concat(y({key:r,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return b({key:r+".type",value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:g,layout:function(t){return y({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return _(x({layerType:s},t))}}})},paint:function(t){return y({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return v(x({layerType:s},t))}}})}}}))}},{"../error/validation_error":122,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_filter":169,"./validate_layout_property":173,"./validate_object":176,"./validate_paint_property":177}],173:[function(t,e,i){"use strict";var r=t("./validate_property");e.exports=function(t){return r(t,"layout")}},{"./validate_property":178}],174:[function(t,e,i){"use strict";var u=t("../error/validation_error"),c=t("../util/get_type"),h=t("./validate");e.exports=function(t){var e=t.value,i=t.styleSpec,r=i.light,n=t.style,o=[],a=c(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new u("light",e,"object expected, "+a+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=l&&r[l[1]]&&r[l[1]].transition?o.concat(h({key:s,value:e[s],valueSpec:i.transition,style:n,styleSpec:i})):r[s]?o.concat(h({key:s,value:e[s],valueSpec:r[s],style:n,styleSpec:i})):o.concat([new u(s,e[s],'unknown property "'+s+'"')])}return o}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],175:[function(t,e,i){"use strict";var o=t("../util/get_type"),a=t("../error/validation_error");e.exports=function(t){var e=t.key,i=t.value,r=t.valueSpec,n=o(i);return"number"!==n?[new a(e,i,"number expected, "+n+" found")]:"minimum"in r&&i<r.minimum?[new a(e,i,i+" is less than the minimum value "+r.minimum)]:"maximum"in r&&i>r.maximum?[new a(e,i,i+" is greater than the maximum value "+r.maximum)]:[]}},{"../error/validation_error":122,"../util/get_type":157}],176:[function(t,e,i){"use strict";var d=t("../error/validation_error"),m=t("../util/get_type"),y=t("./validate");e.exports=function(t){var e=t.key,i=t.value,r=t.valueSpec||{},n=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=m(i);if("object"!==l)return[new d(e,i,"object expected, "+l+" found")];for(var u in i){var c=u.split(".")[0],h=r[c]||r["*"],p=void 0;if(n[c])p=n[c];else if(r[c])p=y;else if(n["*"])p=n["*"];else{if(!r["*"]){s.push(new d(e,i[u],'unknown property "'+u+'"'));continue}p=y}s=s.concat(p({key:(e?e+".":e)+u,value:i[u],valueSpec:h,style:o,styleSpec:a,object:i,objectKey:u},i))}for(var f in r)n[f]||r[f].required&&void 0===r[f].default&&void 0===i[f]&&s.push(new d(e,i,'missing required property "'+f+'"'));return s}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],177:[function(t,e,i){"use strict";var r=t("./validate_property");e.exports=function(t){return r(t,"paint")}},{"./validate_property":178}],178:[function(t,e,i){"use strict";var p=t("./validate"),f=t("../error/validation_error"),d=t("../util/get_type"),r=t("../function"),m=r.isFunction,y=t("../util/unbundle_jsonlint");e.exports=function(t,e){var i=t.key,r=t.style,n=t.styleSpec,o=t.value,a=t.objectKey,s=n[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return p({key:i,value:o,valueSpec:n.transition,style:r,styleSpec:n});var u,c=t.valueSpec||s[a];if(!c)return[new f(i,o,'unknown property "'+a+'"')];if("string"===d(o)&&c["property-function"]&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new f(i,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new f(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&m(y.deep(o))&&"identity"===y(o.type)&&h.push(new f(i,o,'"text-font" does not support identity functions'))),h.concat(p({key:t.key,value:o,valueSpec:c,style:r,styleSpec:n,expressionContext:"property",propertyKey:a}))}},{"../error/validation_error":122,"../function":149,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162}],179:[function(t,e,i){"use strict";var l=t("../error/validation_error"),u=t("../util/unbundle_jsonlint"),c=t("./validate_object"),h=t("./validate_enum");e.exports=function(t){var e=t.value,i=t.key,r=t.styleSpec,n=t.style;if(!e.type)return[new l(i,e,'"type" is required')];var o=u(e.type),a=[];switch(o){case"vector":case"raster":case"raster-dem":if(a=a.concat(c({key:i,value:e,valueSpec:r["source_"+o.replace("-","_")],style:t.style,styleSpec:r})),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&a.push(new l(i+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":return c({key:i,value:e,valueSpec:r.source_geojson,style:n,styleSpec:r});case"video":return c({key:i,value:e,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return c({key:i,value:e,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return c({key:i,value:e,valueSpec:r.source_canvas,style:n,styleSpec:r});default:return h({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image","canvas"]},style:n,styleSpec:r})}}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_object":176}],180:[function(t,e,i){"use strict";var n=t("../util/get_type"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,i=t.key,r=n(e);return"string"!==r?[new o(i,e,"string expected, "+r+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],181:[function(t,e,i){"use strict";function r(t,e){e=e||l;var i=[];return i=i.concat(s({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:u,"*":function(){return[]}}})),t.constants&&(i=i.concat(a({key:"constants",value:t.constants,style:t,styleSpec:e}))),n(i)}function n(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function o(t){return function(){return n(t.apply(this,arguments))}}var a=t("./validate/validate_constants"),s=t("./validate/validate"),l=t("./reference/latest"),u=t("./validate/validate_glyphs_url");r.source=o(t("./validate/validate_source")),r.light=o(t("./validate/validate_light")),r.layer=o(t("./validate/validate_layer")),r.filter=o(t("./validate/validate_filter")),r.paintProperty=o(t("./validate/validate_paint_property")),r.layoutProperty=o(t("./validate/validate_layout_property")),e.exports=r},{"./reference/latest":151,"./validate/validate":162,"./validate/validate_constants":166,"./validate/validate_filter":169,"./validate/validate_glyphs_url":171,"./validate/validate_layer":172,"./validate/validate_layout_property":173,"./validate/validate_light":174,"./validate/validate_paint_property":177,"./validate/validate_source":179}],182:[function(t,e,i){"use strict";var r=t("./zoom_history"),n=function(t,e){this.zoom=t,this.transition=e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new r,{})};n.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},e.exports=n},{"./zoom_history":212}],183:[function(t,e,i){"use strict";var r=t("../style-spec/reference/latest"),n=t("../util/util"),o=t("../util/evented"),a=t("./validate_style"),s=t("../util/util"),l=s.sphericalToCartesian,u=(t("../style-spec/util/color"),t("../style-spec/util/interpolate")),c=t("./properties"),h=c.Properties,p=c.Transitionable,f=(c.Transitioning,c.PossiblyEvaluated,c.DataConstantProperty),d=function(){this.specification=r.light.position};d.prototype.possiblyEvaluate=function(t,e){return l(t.expression.evaluate(e))},d.prototype.interpolate=function(t,e,i){return{x:u.number(t.x,e.x,i),y:u.number(t.y,e.y,i),z:u.number(t.z,e.z,i)}};var m=new h({anchor:new f(r.light.anchor),position:new d,color:new f(r.light.color),intensity:new f(r.light.intensity)}),y="-transition",g=function(e){function t(t){e.call(this),this._transitionable=new p(m),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getLight=function(){return this._transitionable.serialize()},t.prototype.setLight=function(t){if(!this._validate(a.light,t))for(var e in t){var i=t[e];n.endsWith(e,y)?this._transitionable.setTransition(e.slice(0,-y.length),i):this._transitionable.setValue(e,i)}},t.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},t.prototype.hasTransition=function(){return this._transitioning.hasTransition()},t.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},t.prototype._validate=function(t,e){return a.emitErrors(this,t.call(a,n.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:r})))},t}(o);e.exports=g},{"../style-spec/reference/latest":151,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/evented":260,"../util/util":275,"./properties":188,"./validate_style":211}],184:[function(t,e,i){"use strict";var r=t("../util/mapbox"),l=r.normalizeGlyphsURL,u=t("../util/ajax"),c=t("./parse_glyph_pbf");e.exports=function(t,e,i,r,a){var n=256*e,o=n+255,s=r(l(i).replace("{fontstack}",t).replace("{range}",n+"-"+o),u.ResourceType.Glyphs);u.getArrayBuffer(s,function(t,e){if(t)a(t);else if(e){for(var i={},r=0,n=c(e.data);r<n.length;r+=1){var o=n[r];i[o.id]=o}a(null,i)}})}},{"../util/ajax":251,"../util/mapbox":267,"./parse_glyph_pbf":186}],185:[function(t,e,i){"use strict";var n=t("../util/ajax"),m=t("../util/browser"),r=t("../util/mapbox"),o=r.normalizeSpriteURL,a=t("../util/image"),y=a.RGBAImage;e.exports=function(t,e,h){function i(){if(d)h(d);else if(p&&f){var t=m.getImageData(f),e={};for(var i in p){var r=p[i],n=r.width,o=r.height,a=r.x,s=r.y,l=r.sdf,u=r.pixelRatio,c=new y({width:n,height:o});y.copy(t,c,{x:a,y:s},{x:0,y:0},{width:n,height:o}),e[i]={data:c,pixelRatio:u,sdf:l}}h(null,e)}}var p,f,d,r=1<m.devicePixelRatio?"@2x":"";n.getJSON(e(o(t,r,".json"),n.ResourceType.SpriteJSON),function(t,e){d||(d=t,p=e,i())}),n.getImage(e(o(t,r,".png"),n.ResourceType.SpriteImage),function(t,e){d||(d=t,f=e,i())})}},{"../util/ajax":251,"../util/browser":252,"../util/image":263,"../util/mapbox":267}],186:[function(t,e,i){"use strict";function r(t,e,i){1===t&&i.readMessage(n,e)}function n(t,e,i){if(3===t){var r=i.readMessage(h,{}),n=r.id,o=r.bitmap,a=r.width,s=r.height,l=r.left,u=r.top,c=r.advance;e.push({id:n,bitmap:new p({width:a+2*f,height:s+2*f},o),metrics:{width:a,height:s,left:l,top:u,advance:c}})}}function h(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}var o=t("../util/image"),p=o.AlphaImage,a=t("pbf"),f=3;e.exports=function(t){return new a(t).readFields(r,[])},e.exports.GLYPH_PBF_BORDER=f},{"../util/image":263,pbf:30}],187:[function(t,e,i){"use strict";var u=t("../util/browser"),o=t("../symbol/placement"),c=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};c.prototype.continuePlacement=function(t,e,i,r,n){for(;this._currentTileIndex<t.length;){var o=t[this._currentTileIndex];if(e.placeLayerTile(r,o,i,this._seenCrossTileIDs),this._currentTileIndex++,n())return!0}};var r=function(t,e,i,r,n){this.placement=new o(t,n),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1};r.prototype.isDone=function(){return this._done},r.prototype.continuePlacement=function(t,e,i){for(var r=this,n=u.now(),o=function(){var t=u.now()-n;return!r._forceFullPlacement&&2<t};0<=this._currentPlacementIndex;){var a=t[r._currentPlacementIndex],s=e[a],l=r.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(r._inProgressLayer||(r._inProgressLayer=new c),r._inProgressLayer.continuePlacement(i[s.source],r.placement,r._showCollisionBoxes,s,o))return;delete r._inProgressLayer}r._currentPlacementIndex--}this._done=!0},r.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement},e.exports=r},{"../symbol/placement":223,"../util/browser":252}],188:[function(t,e,i){"use strict";var r=t("../util/util"),n=r.clone,o=r.extend,a=r.easeCubicInOut,s=t("../style-spec/util/interpolate"),l=t("../style-spec/expression"),u=l.normalizePropertyExpression,c=(t("../style-spec/util/color"),t("../util/web_worker_transfer")),h=c.register,p=function(t,e){this.property=t,this.value=e,this.expression=u(void 0===e?t.specification.default:e,t.specification)};p.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},p.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var f=function(t){this.property=t,this.value=new p(t,void 0)};f.prototype.transitioned=function(t,e){return new m(this.property,this.value,e,o({},t.transition,this.transition),t.now)},f.prototype.untransitioned=function(){return new m(this.property,this.value,null,{},0)};var d=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};d.prototype.getValue=function(t){return n(this._values[t].value.value)},d.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new f(this._values[t].property)),this._values[t].value=new p(this._values[t].property,null===e?void 0:n(e))},d.prototype.getTransition=function(t){return n(this._values[t].transition)},d.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new f(this._values[t].property)),this._values[t].transition=n(e)||void 0},d.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},d.prototype.transitioned=function(t,e){for(var i=new y(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var o=n[r];i._values[o]=this._values[o].transitioned(t,e._values[o])}return i},d.prototype.untransitioned=function(){for(var t=new y(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e];t._values[r]=this._values[r].untransitioned()}return t};var m=function(t,e,i,r,n){this.property=t,this.value=e,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=i)};m.prototype.possiblyEvaluate=function(t){var e=t.now||0,i=this.value.possiblyEvaluate(t),r=this.prior;if(r){if(e>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(e<this.begin)return r.possiblyEvaluate(t);var n=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t),i,a(n))}return i};var y=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};y.prototype.possiblyEvaluate=function(t){for(var e=new _(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var n=r[i];e._values[n]=this._values[n].possiblyEvaluate(t)}return e},y.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var i=e[t];if(this._values[i].prior)return!0}return!1};var g=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};g.prototype.getValue=function(t){return n(this._values[t].value)},g.prototype.setValue=function(t,e){this._values[t]=new p(this._values[t].property,null===e?void 0:n(e))},g.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var r=i[e],n=this.getValue(r);void 0!==n&&(t[r]=n)}return t},g.prototype.possiblyEvaluate=function(t){for(var e=new _(this._properties),i=0,r=Object.keys(this._values);i<r.length;i+=1){var n=r[i];e._values[n]=this._values[n].possiblyEvaluate(t)}return e};var v=function(t,e,i){this.property=t,this.value=e,this.globals=i};v.prototype.isConstant=function(){return"constant"===this.value.kind},v.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},v.prototype.evaluate=function(t){return this.property.evaluate(this.value,this.globals,t)};var _=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};_.prototype.get=function(t){return this._values[t]};var b=function(t){this.specification=t};b.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},b.prototype.interpolate=function(t,e,i){var r=s[this.specification.type];return r?r(t,e,i):t};var x=function(t){this.specification=t};x.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new v(this,{kind:"constant",value:t.expression.evaluate(e)},e):new v(this,t.expression,e)},x.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0!==t.value.value&&void 0!==e.value.value){var r=s[this.specification.type];return r?new v(this,{kind:"constant",value:r(t.value.value,e.value.value,i)},t.globals):t}},x.prototype.evaluate=function(t,e,i){return"constant"===t.kind?t.value:t.evaluate(e,i)};var w=function(t){this.specification=t};w.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"!==t.expression.kind)return this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);var i=t.expression.evaluate(e);return this._calculate(i,i,i,e)}},w.prototype._calculate=function(t,e,i,r){var n=r.zoom,o=n-Math.floor(n),a=r.crossFadingFactor();return n>r.zoomHistory.lastIntegerZoom?{from:t,to:e,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:i,to:e,fromScale:.5,toScale:1,t:1-(1-a)*o}},w.prototype.interpolate=function(t){return t};var S=function(t){this.specification=t};S.prototype.possiblyEvaluate=function(){},S.prototype.interpolate=function(){},h("DataDrivenProperty",x),h("DataConstantProperty",b),h("CrossFadedProperty",w),h("HeatmapColorProperty",S),e.exports={PropertyValue:p,Transitionable:d,Transitioning:y,Layout:g,PossiblyEvaluatedPropertyValue:v,PossiblyEvaluated:_,DataConstantProperty:b,DataDrivenProperty:x,CrossFadedProperty:w,HeatmapColorProperty:S,Properties:function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var i=t[e],r=this.defaultPropertyValues[e]=new p(i,void 0),n=this.defaultTransitionablePropertyValues[e]=new f(i);this.defaultTransitioningPropertyValues[e]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}}}},{"../style-spec/expression":139,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/util":275,"../util/web_worker_transfer":278}],189:[function(t,e,i){"use strict";var h=t("@mapbox/point-geometry");e.exports={getMaximumPaintValue:function(t,e,i){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:i.programConfigurations.get(e.id).binders[t].statistics.max},translateDistance:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},translate:function(t,e,i,r,n){if(!e[0]&&!e[1])return t;var o=h.convert(e);"viewport"===i&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++){for(var l=t[s],u=[],c=0;c<l.length;c++)u.push(l[c].sub(o._mult(n)));a.push(u)}return a}}},{"@mapbox/point-geometry":4}],190:[function(t,e,i){"use strict";var r=t("../util/evented"),l=t("./style_layer"),u=t("./load_sprite"),n=t("../render/image_manager"),a=t("../render/glyph_manager"),c=t("./light"),s=t("../render/line_atlas"),h=t("../util/util"),o=t("../util/ajax"),p=t("../util/mapbox"),g=t("../util/browser"),f=t("../util/dispatcher"),d=t("./validate_style"),m=t("../source/source").getType,y=t("../source/source").setType,v=t("../source/query_features"),_=t("../source/source_cache"),b=(t("../source/geojson_source"),t("../style-spec/reference/latest")),x=t("../util/global_worker_pool"),w=t("../style-spec/deref"),S=t("../style-spec/diff"),C=t("../source/rtl_text_plugin"),E=t("./pauseable_placement"),T=t("./zoom_history"),k=t("../symbol/cross_tile_symbol_index"),M=h.pick(S.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),P=h.pick(S.operations,["setCenter","setZoom","setBearing","setPitch"]),A=function(r){function t(t,e){var o=this;void 0===e&&(e={}),r.call(this),this.map=t,this.dispatcher=new f(x(),this),this.imageManager=new n,this.glyphManager=new a(t._transformRequest,e.localIdeographFontFamily),this.lineAtlas=new s(256,512),this.crossTileSymbolIndex=new k,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new T,this._loaded=!1,this._resetUpdates();var i=this;this._rtlTextPluginCallback=C.registerForPluginAvailability(function(t){for(var e in i.dispatcher.broadcast("loadRTLTextPlugin",t.pluginBlobURL,t.errorCallback),i.sourceCaches)i.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var r in o._layers){var n=o._layers[r];n.source===i.id&&o._validateLayer(n)}}}})}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.loadURL=function(t,e){var i=this;void 0===e&&(e={}),this.fire("dataloading",{dataType:"style"});var r="boolean"==typeof e.validate?e.validate:!p.isMapboxURL(t);t=p.normalizeStyleURL(t,e.accessToken);var n=this.map._transformRequest(t,o.ResourceType.Style);o.getJSON(n,function(t,e){t?i.fire("error",{error:t}):e&&i._load(e,r)})},t.prototype.loadJSON=function(t,e){var i=this;void 0===e&&(e={}),this.fire("dataloading",{dataType:"style"}),g.frame(function(){i._load(t,!1!==e.validate)})},t.prototype._load=function(t,e){var r=this;if(!e||!d.emitErrors(this,d(t))){for(var i in this._loaded=!0,(this.stylesheet=t).sources)r.addSource(i,t.sources[i],{validate:!1});t.sprite?u(t.sprite,this.map._transformRequest,function(t,e){if(t)r.fire("error",t);else if(e)for(var i in e)r.imageManager.addImage(i,e[i]);r.imageManager.setLoaded(!0),r.fire("data",{dataType:"style"})}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var n=w(this.stylesheet.layers);this._order=n.map(function(t){return t.id}),this._layers={};for(var o=0,a=n;o<a.length;o+=1){var s=a[o];(s=l.create(s)).setEventedParent(r,{layer:{id:s.id}}),r._layers[s.id]=s}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new c(this.stylesheet.light),this.fire("data",{dataType:"style"}),this.fire("style.load")}},t.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(e){var i=t.sourceLayer;if(i){var r=e.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire("error",{error:new Error('Source layer "'+i+'" does not exist on source "'+r.id+'" as specified by style layer "'+t.id+'"')})}}},t.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},t.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},t.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},t.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},t.prototype.update=function(t){var e=this;if(this._loaded){if(this._changed){var i=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var n in(i.length||r.length)&&this._updateWorkerLayers(i,r),e._updatedSources){var o=e._updatedSources[n];"reload"===o?e._reloadSource(n):"clear"===o&&e._clearSource(n)}for(var a in e._updatedPaintProps)e._layers[a].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates(),this.fire("data",{dataType:"style"})}for(var s in e.sourceCaches)e.sourceCaches[s].used=!1;for(var l=0,u=e._order;l<u.length;l+=1){var c=u[l],h=e._layers[c];h.recalculate(t),!h.isHidden(t.zoom)&&h.source&&(e.sourceCaches[h.source].used=!0)}this.light.recalculate(t),this.z=t.zoom}},t.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},t.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},t.prototype.setState=function(t){var e=this;if(this._checkLoaded(),d.emitErrors(this,d(t)))return!1;(t=h.clone(t)).layers=w(t.layers);var i=S(this.serialize(),t).filter(function(t){return!(t.command in P)});if(0===i.length)return!1;var r=i.filter(function(t){return!(t.command in M)});if(0<r.length)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return i.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},t.prototype.addImage=function(t,e){if(this.getImage(t))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(t,e),this.fire("data",{dataType:"style"})},t.prototype.getImage=function(t){return this.imageManager.getImage(t)},t.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(t),this.fire("data",{dataType:"style"})},t.prototype.addSource=function(t,e,i){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image","canvas"].indexOf(e.type)&&this._validate(d.source,"sources."+t,e,null,i))){this.map&&this.map._collectResourceTiming&&(e.collectResourceTiming=!0);var n=this.sourceCaches[t]=new _(t,e,this.dispatcher);n.style=this,n.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:n.serialize(),sourceId:t}}),n.onAdd(this.map),this._changed=!0}},t.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var e in this._layers)if(this._layers[e].source===t)return this.fire("error",{error:new Error('Source "'+t+'" cannot be removed while layer "'+e+'" is using it.')});var i=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],i.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:t}),i.setEventedParent(null),i.clearTiles(),i.onRemove&&i.onRemove(this.map),this._changed=!0},t.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},t.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},t.prototype.addLayer=function(t,e,i){this._checkLoaded();var r=t.id;if("object"==typeof t.source&&(this.addSource(r,t.source),t=h.clone(t),t=h.extend(t,{source:r})),!this._validate(d.layer,"layers."+r,t,{arrayIndex:-1},i)){var n=l.create(t);this._validateLayer(n),n.setEventedParent(this,{layer:{id:r}});var o=e?this._order.indexOf(e):this._order.length;if(e&&-1===o)return void this.fire("error",{error:new Error('Layer with id "'+e+'" does not exist on this map.')});if(this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=n,this._removedLayers[r]&&n.source){var a=this._removedLayers[r];delete this._removedLayers[r],a.type!==n.type?this._updatedSources[n.source]="clear":(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause())}this._updateLayer(n)}},t.prototype.moveLayer=function(t,e){if(this._checkLoaded(),this._changed=!0,this._layers[t]){var i=this._order.indexOf(t);this._order.splice(i,1);var r=e?this._order.indexOf(e):this._order.length;e&&-1===r?this.fire("error",{error:new Error('Layer with id "'+e+'" does not exist on this map.')}):(this._order.splice(r,0,t),this._layerOrderChanged=!0)}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")})},t.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(e){e.setEventedParent(null);var i=this._order.indexOf(t);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")})},t.prototype.getLayer=function(t){return this._layers[t]},t.prototype.setLayerZoomRange=function(t,e,i){this._checkLoaded();var r=this.getLayer(t);r?r.minzoom===e&&r.maxzoom===i||(null!=e&&(r.minzoom=e),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")})},t.prototype.setFilter=function(t,e){this._checkLoaded();var i=this.getLayer(t);if(i)return h.deepEqual(i.filter,e)?void 0:null==e?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(d.filter,"layers."+i.id+".filter",e)||(i.filter=h.clone(e),this._updateLayer(i)));this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")})},t.prototype.getFilter=function(t){return h.clone(this.getLayer(t).filter)},t.prototype.setLayoutProperty=function(t,e,i){this._checkLoaded();var r=this.getLayer(t);r?h.deepEqual(r.getLayoutProperty(e),i)||(r.setLayoutProperty(e,i),this._updateLayer(r)):this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},t.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},t.prototype.setPaintProperty=function(t,e,i){this._checkLoaded();var r=this.getLayer(t);if(r){if(!h.deepEqual(r.getPaintProperty(e),i)){var n=r._transitionablePaint._values[e].value.isDataDriven();r.setPaintProperty(e,i),(r._transitionablePaint._values[e].value.isDataDriven()||n)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[t]=!0}}else this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")})},t.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},t.prototype.getTransition=function(){return h.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},t.prototype.serialize=function(){var e=this;return h.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:h.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(t){return void 0!==t})},t.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},t.prototype._flattenRenderedFeatures=function(t){for(var e=[],i=this._order.length-1;0<=i;i--)for(var r=this._order[i],n=0,o=t;n<o.length;n+=1){var a=o[n],s=a[r];if(s)for(var l=0,u=s;l<u.length;l+=1){var c=u[l];e.push(c)}}return e},t.prototype.queryRenderedFeatures=function(t,e,i,r){e&&e.filter&&this._validate(d.filter,"queryRenderedFeatures.filter",e.filter);var n={};if(e&&e.layers){if(!Array.isArray(e.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var o=0,a=e.layers;o<a.length;o+=1){var s=a[o],l=this._layers[s];if(!l)return this.fire("error",{error:"The layer '"+s+"' does not exist in the map's style and cannot be queried for features."}),[];n[l.source]=!0}}var u=[];for(var c in this.sourceCaches)if(!e.layers||n[c]){var h=v.rendered(this.sourceCaches[c],this._layers,t,e,i,r,this.placement?this.placement.collisionIndex:null);u.push(h)}return this._flattenRenderedFeatures(u)},t.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(d.filter,"querySourceFeatures.filter",e.filter);var i=this.sourceCaches[t];return i?v.source(i,e):[]},t.prototype.addSourceType=function(t,e,i){return m(t)?i(new Error('A source type called "'+t+'" already exists.')):(y(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))},t.prototype.getLight=function(){return this.light.getLight()},t.prototype.setLight=function(t){this._checkLoaded();var e=this.light.getLight(),i=!1;for(var r in t)if(!h.deepEqual(t[r],e[r])){i=!0;break}if(i){var n={now:g.now(),transition:h.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t),this.light.updateTransitions(n)}},t.prototype._validate=function(t,e,i,r,n){return(!n||!1!==n.validate)&&d.emitErrors(this,t.call(d,h.extend({key:e,style:this.serialize(),value:i,styleSpec:b},r)))},t.prototype._remove=function(){for(var t in C.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[t].clearTiles();this.dispatcher.remove()},t.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},t.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},t.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},t.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},t.prototype._updatePlacement=function(t,e,i){for(var r=!1,n=!1,o={},a=0,s=this._order;a<s.length;a+=1){var l=s[a],u=this._layers[l];if("symbol"===u.type){if(!o[u.source]){var c=this.sourceCaches[u.source];o[u.source]=c.getRenderableIds().map(function(t){return c.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var h=this.crossTileSymbolIndex.addLayer(u,o[u.source]);r=r||h}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var p=this._layerOrderChanged;if((p||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(g.now()))&&(this.pauseablePlacement=new E(t,this._order,p,e,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,o),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,g.now()),n=!0),r&&this.pauseablePlacement.placement.setStale()),n||r)for(var f=0,d=this._order;f<d.length;f+=1){var m=d[f],y=this._layers[m];"symbol"===y.type&&this.placement.updateLayerOpacities(y,o[y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(g.now())},t.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i)},t.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},t}(r);e.exports=A},{"../render/glyph_manager":86,"../render/image_manager":88,"../render/line_atlas":89,"../source/geojson_source":99,"../source/query_features":105,"../source/rtl_text_plugin":109,"../source/source":110,"../source/source_cache":111,"../style-spec/deref":120,"../style-spec/diff":121,"../style-spec/reference/latest":151,"../symbol/cross_tile_symbol_index":218,"../util/ajax":251,"../util/browser":252,"../util/dispatcher":258,"../util/evented":260,"../util/global_worker_pool":262,"../util/mapbox":267,"../util/util":275,"./light":183,"./load_sprite":185,"./pauseable_placement":187,"./style_layer":191,"./validate_style":211,"./zoom_history":212}],191:[function(t,e,i){"use strict";var o=t("../util/util"),a=t("../style-spec/reference/latest"),s=t("./validate_style"),r=t("../util/evented"),n=t("./properties"),l=n.Layout,u=n.Transitionable,c=(n.Transitioning,n.Properties,"-transition"),h=function(n){function t(t,e){for(var i in n.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.visibility="visible","background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),this._featureFilter=function(){return!0},e.layout&&(this._unevaluatedLayout=new l(e.layout)),this._transitionablePaint=new u(e.paint),t.paint)this.setPaintProperty(i,t.paint[i],{validate:!1});for(var r in t.layout)this.setLayoutProperty(r,t.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},t.prototype.setLayoutProperty=function(t,e,i){if(null!=e){var r="layers."+this.id+".layout."+t;if(this._validate(s.layoutProperty,r,t,e,i))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},t.prototype.getPaintProperty=function(t){return o.endsWith(t,c)?this._transitionablePaint.getTransition(t.slice(0,-c.length)):this._transitionablePaint.getValue(t)},t.prototype.setPaintProperty=function(t,e,i){if(null!=e){var r="layers."+this.id+".paint."+t;if(this._validate(s.paintProperty,r,t,e,i))return}o.endsWith(t,c)?this._transitionablePaint.setTransition(t.slice(0,-c.length),e||void 0):this._transitionablePaint.setValue(t,e)},t.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},t.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),o.filterObject(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},t.prototype._validate=function(t,e,i,r,n){return(!n||!1!==n.validate)&&s.emitErrors(this,t.call(s,{key:e,layerType:this.type,objectKey:i,value:r,styleSpec:a,style:{glyphs:!0,sprite:!0}}))},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t}(r);e.exports=h;var p={circle:t("./style_layer/circle_style_layer"),heatmap:t("./style_layer/heatmap_style_layer"),hillshade:t("./style_layer/hillshade_style_layer"),fill:t("./style_layer/fill_style_layer"),"fill-extrusion":t("./style_layer/fill_extrusion_style_layer"),line:t("./style_layer/line_style_layer"),symbol:t("./style_layer/symbol_style_layer"),background:t("./style_layer/background_style_layer"),raster:t("./style_layer/raster_style_layer")};h.create=function(t){return new p[t.type](t)}},{"../style-spec/reference/latest":151,"../util/evented":260,"../util/util":275,"./properties":188,"./style_layer/background_style_layer":192,"./style_layer/circle_style_layer":194,"./style_layer/fill_extrusion_style_layer":196,"./style_layer/fill_style_layer":198,"./style_layer/heatmap_style_layer":200,"./style_layer/hillshade_style_layer":202,"./style_layer/line_style_layer":204,"./style_layer/raster_style_layer":206,"./style_layer/symbol_style_layer":208,"./validate_style":211}],192:[function(t,e,i){"use strict";var r=t("../style_layer"),n=t("./background_style_layer_properties"),o=t("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,n)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(r));e.exports=a},{"../properties":188,"../style_layer":191,"./background_style_layer_properties":193}],193:[function(t,e,i){"use strict";var r=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=(n.DataDrivenProperty,n.CrossFadedProperty),l=(n.HeatmapColorProperty,new o({"background-color":new a(r.paint_background["background-color"]),"background-pattern":new s(r.paint_background["background-pattern"]),"background-opacity":new a(r.paint_background["background-opacity"])}));e.exports={paint:l}},{"../../style-spec/reference/latest":151,"../properties":188}],194:[function(t,e,i){"use strict";var r=t("../style_layer"),n=t("../../data/bucket/circle_bucket"),o=t("../../util/intersection_tests"),u=o.multiPolygonIntersectsBufferedMultiPoint,a=t("../query_utils"),s=a.getMaximumPaintValue,l=a.translateDistance,c=a.translate,h=t("./circle_style_layer_properties"),p=t("../properties"),f=(p.Transitionable,p.Transitioning,p.PossiblyEvaluated,function(e){function t(t){e.call(this,t,h)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.createBucket=function(t){return new n(t)},t.prototype.queryRadius=function(t){var e=t;return s("circle-radius",this,e)+s("circle-stroke-width",this,e)+l(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(t,e,i,r,n,o){var a=c(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),n,o),s=this.paint.get("circle-radius").evaluate(e)*o,l=this.paint.get("circle-stroke-width").evaluate(e)*o;return u(a,i,s+l)},t}(r));e.exports=f},{"../../data/bucket/circle_bucket":42,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./circle_style_layer_properties":195}],195:[function(t,e,i){"use strict";var r=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=(n.CrossFadedProperty,n.HeatmapColorProperty,new o({"circle-radius":new s(r.paint_circle["circle-radius"]),"circle-color":new s(r.paint_circle["circle-color"]),"circle-blur":new s(r.paint_circle["circle-blur"]),"circle-opacity":new s(r.paint_circle["circle-opacity"]),"circle-translate":new a(r.paint_circle["circle-translate"]),"circle-translate-anchor":new a(r.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new a(r.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new a(r.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new s(r.paint_circle["circle-stroke-width"]),"circle-stroke-color":new s(r.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new s(r.paint_circle["circle-stroke-opacity"])}));e.exports={paint:l}},{"../../style-spec/reference/latest":151,"../properties":188}],196:[function(t,e,i){"use strict";var r=t("../style_layer"),n=t("../../data/bucket/fill_extrusion_bucket"),o=t("../../util/intersection_tests"),s=o.multiPolygonIntersectsMultiPolygon,a=t("../query_utils"),l=a.translateDistance,u=a.translate,c=t("./fill_extrusion_style_layer_properties"),h=t("../properties"),p=(h.Transitionable,h.Transitioning,h.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.createBucket=function(t){return new n(t)},t.prototype.queryRadius=function(){return l(this.paint.get("fill-extrusion-translate"))},t.prototype.queryIntersectsFeature=function(t,e,i,r,n,o){var a=u(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),n,o);return s(a,i)},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},t.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},t}(r));e.exports=p},{"../../data/bucket/fill_extrusion_bucket":46,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_extrusion_style_layer_properties":197}],197:[function(t,e,i){"use strict";var r=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=n.CrossFadedProperty,u=(n.HeatmapColorProperty,new o({"fill-extrusion-opacity":new a(r["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new s(r["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new a(r["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new a(r["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new l(r["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new s(r["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new s(r["paint_fill-extrusion"]["fill-extrusion-base"])}));e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],198:[function(t,e,i){"use strict";var r=t("../style_layer"),n=t("../../data/bucket/fill_bucket"),o=t("../../util/intersection_tests"),s=o.multiPolygonIntersectsMultiPolygon,a=t("../query_utils"),l=a.translateDistance,u=a.translate,c=t("./fill_style_layer_properties"),h=t("../properties"),p=(h.Transitionable,h.Transitioning,h.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.recalculate=function(t){this.paint=this._transitioningPaint.possiblyEvaluate(t),void 0===this._transitionablePaint.getValue("fill-outline-color")&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(t){return new n(t)},t.prototype.queryRadius=function(){return l(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(t,e,i,r,n,o){var a=u(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),n,o);return s(a,i)},t}(r));e.exports=p},{"../../data/bucket/fill_bucket":44,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_style_layer_properties":199}],199:[function(t,e,i){"use strict";var r=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=n.CrossFadedProperty,u=(n.HeatmapColorProperty,new o({"fill-antialias":new a(r.paint_fill["fill-antialias"]),"fill-opacity":new s(r.paint_fill["fill-opacity"]),"fill-color":new s(r.paint_fill["fill-color"]),"fill-outline-color":new s(r.paint_fill["fill-outline-color"]),"fill-translate":new a(r.paint_fill["fill-translate"]),"fill-translate-anchor":new a(r.paint_fill["fill-translate-anchor"]),"fill-pattern":new l(r.paint_fill["fill-pattern"])}));e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],200:[function(t,e,i){"use strict";var r=t("../style_layer"),n=t("../../data/bucket/heatmap_bucket"),o=t("../../util/image").RGBAImage,a=t("./heatmap_style_layer_properties"),s=t("../properties"),l=(s.Transitionable,s.Transitioning,s.PossiblyEvaluated,function(r){function t(t){r.call(this,t,a),this._updateColorRamp()}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.createBucket=function(t){return new n(t)},t.prototype.setPaintProperty=function(t,e,i){r.prototype.setPaintProperty.call(this,t,e,i),"heatmap-color"===t&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){for(var t=this._transitionablePaint._values["heatmap-color"].value.expression,e=new Uint8Array(1024),i=e.length,r=4;r<i;r+=4){var n=t.evaluate({heatmapDensity:r/i});e[r+0]=Math.floor(255*n.r/n.a),e[r+1]=Math.floor(255*n.g/n.a),e[r+2]=Math.floor(255*n.b/n.a),e[r+3]=Math.floor(255*n.a)}this.colorRamp=new o({width:256,height:1},e),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(r));e.exports=l},{"../../data/bucket/heatmap_bucket":47,"../../util/image":263,"../properties":188,"../style_layer":191,"./heatmap_style_layer_properties":201}],201:[function(t,e,i){"use strict";var r=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=(n.CrossFadedProperty,n.HeatmapColorProperty),u=new o({"heatmap-radius":new s(r.paint_heatmap["heatmap-radius"]),"heatmap-weight":new s(r.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new a(r.paint_heatmap["heatmap-intensity"]),"heatmap-color":new l(r.paint_heatmap["heatmap-color"]),"heatmap-opacity":new a(r.paint_heatmap["heatmap-opacity"])});e.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],202:[function(t,e,i){"use strict";var r=t("../style_layer"),n=t("./hillshade_style_layer_properties"),o=t("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,n)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(r));e.exports=a},{"../properties":188,"../style_layer":191,"./hillshade_style_layer_properties":203}],203:[function(t,e,i){"use strict";var r=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=(n.DataDrivenProperty,n.CrossFadedProperty,n.HeatmapColorProperty,new o({"hillshade-illumination-direction":new a(r.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new a(r.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new a(r.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new a(r.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new a(r.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new a(r.paint_hillshade["hillshade-accent-color"])}));e.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],204:[function(t,e,i){"use strict";function u(t,e){return 0<e?e+2*t:t}var m=t("@mapbox/point-geometry"),r=t("../style_layer"),n=t("../../data/bucket/line_bucket"),o=t("../../util/intersection_tests"),c=o.multiPolygonIntersectsBufferedMultiLine,a=t("../query_utils"),s=a.getMaximumPaintValue,l=a.translateDistance,h=a.translate,p=t("./line_style_layer_properties"),f=t("../../util/util"),d=f.extend,y=t("../evaluation_parameters"),g=t("../properties"),v=(g.Transitionable,g.Transitioning,g.Layout,g.PossiblyEvaluated,g.DataDrivenProperty),_=function(r){function t(){r.apply(this,arguments)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.possiblyEvaluate=function(t,e){return e=new y(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),r.prototype.possiblyEvaluate.call(this,t,e)},t.prototype.evaluate=function(t,e,i){return e=d({},e,{zoom:Math.floor(e.zoom)}),r.prototype.evaluate.call(this,t,e,i)},t}(v),b=new _(p.paint.properties["line-width"].specification);b.useIntegerZoom=!0;var x=function(e){function t(t){e.call(this,t,p)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=b.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(t){return new n(t)},t.prototype.queryRadius=function(t){var e=t,i=u(s("line-width",this,e),s("line-gap-width",this,e)),r=s("line-offset",this,e);return i/2+Math.abs(r)+l(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(t,e,i,r,n,o){var a=h(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),n,o),s=o/2*u(this.paint.get("line-width").evaluate(e),this.paint.get("line-gap-width").evaluate(e)),l=this.paint.get("line-offset").evaluate(e);return l&&(i=function(t,e){for(var i=[],r=new m(0,0),n=0;n<t.length;n++){for(var o=t[n],a=[],s=0;s<o.length;s++){var l=o[s-1],u=o[s],c=o[s+1],h=0===s?r:u.sub(l)._unit()._perp(),p=s===o.length-1?r:c.sub(u)._unit()._perp(),f=h._add(p)._unit(),d=f.x*p.x+f.y*p.y;f._mult(1/d),a.push(f._mult(e)._add(u))}i.push(a)}return i}(i,l*o)),c(a,i,s)},t}(r);e.exports=x},{"../../data/bucket/line_bucket":49,"../../util/intersection_tests":264,"../../util/util":275,"../evaluation_parameters":182,"../properties":188,"../query_utils":189,"../style_layer":191,"./line_style_layer_properties":205,"@mapbox/point-geometry":4}],205:[function(t,e,i){"use strict";var r=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=n.CrossFadedProperty,u=(n.HeatmapColorProperty,new o({"line-cap":new a(r.layout_line["line-cap"]),"line-join":new s(r.layout_line["line-join"]),"line-miter-limit":new a(r.layout_line["line-miter-limit"]),"line-round-limit":new a(r.layout_line["line-round-limit"])})),c=new o({"line-opacity":new s(r.paint_line["line-opacity"]),"line-color":new s(r.paint_line["line-color"]),"line-translate":new a(r.paint_line["line-translate"]),"line-translate-anchor":new a(r.paint_line["line-translate-anchor"]),"line-width":new s(r.paint_line["line-width"]),"line-gap-width":new s(r.paint_line["line-gap-width"]),"line-offset":new s(r.paint_line["line-offset"]),"line-blur":new s(r.paint_line["line-blur"]),"line-dasharray":new l(r.paint_line["line-dasharray"]),"line-pattern":new l(r.paint_line["line-pattern"])});e.exports={paint:c,layout:u}},{"../../style-spec/reference/latest":151,"../properties":188}],206:[function(t,e,i){"use strict";var r=t("../style_layer"),n=t("./raster_style_layer_properties"),o=t("../properties"),a=(o.Transitionable,o.Transitioning,o.PossiblyEvaluated,function(e){function t(t){e.call(this,t,n)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(r));e.exports=a},{"../properties":188,"../style_layer":191,"./raster_style_layer_properties":207}],207:[function(t,e,i){"use strict";var r=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=(n.DataDrivenProperty,n.CrossFadedProperty,n.HeatmapColorProperty,new o({"raster-opacity":new a(r.paint_raster["raster-opacity"]),"raster-hue-rotate":new a(r.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new a(r.paint_raster["raster-brightness-min"]),"raster-brightness-max":new a(r.paint_raster["raster-brightness-max"]),"raster-saturation":new a(r.paint_raster["raster-saturation"]),"raster-contrast":new a(r.paint_raster["raster-contrast"]),"raster-fade-duration":new a(r.paint_raster["raster-fade-duration"])}));e.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],208:[function(t,e,i){"use strict";var r=t("../style_layer"),n=t("../../data/bucket/symbol_bucket"),o=t("../../util/token"),a=t("../../style-spec/expression"),s=a.isExpression,l=t("./symbol_style_layer_properties"),u=t("../properties"),c=(u.Transitionable,u.Transitioning,u.Layout,u.PossiblyEvaluated,function(e){function t(t){e.call(this,t,l)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(t,e){var i=this.layout.get(t).evaluate(e),r=this._unevaluatedLayout._values[t];return r.isDataDriven()||s(r.value)?i:o(e.properties,i)},t.prototype.createBucket=function(t){return new n(t)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(r));e.exports=c},{"../../data/bucket/symbol_bucket":51,"../../style-spec/expression":139,"../../util/token":274,"../properties":188,"../style_layer":191,"./symbol_style_layer_properties":209}],209:[function(t,e,i){"use strict";var r=t("../../style-spec/reference/latest"),n=t("../properties"),o=n.Properties,a=n.DataConstantProperty,s=n.DataDrivenProperty,l=(n.CrossFadedProperty,n.HeatmapColorProperty,new o({"symbol-placement":new a(r.layout_symbol["symbol-placement"]),"symbol-spacing":new a(r.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new a(r.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new a(r.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new a(r.layout_symbol["icon-ignore-placement"]),"icon-optional":new a(r.layout_symbol["icon-optional"]),"icon-rotation-alignment":new a(r.layout_symbol["icon-rotation-alignment"]),"icon-size":new s(r.layout_symbol["icon-size"]),"icon-text-fit":new a(r.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new a(r.layout_symbol["icon-text-fit-padding"]),"icon-image":new s(r.layout_symbol["icon-image"]),"icon-rotate":new s(r.layout_symbol["icon-rotate"]),"icon-padding":new a(r.layout_symbol["icon-padding"]),"icon-keep-upright":new a(r.layout_symbol["icon-keep-upright"]),"icon-offset":new s(r.layout_symbol["icon-offset"]),"icon-anchor":new s(r.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new a(r.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new a(r.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new a(r.layout_symbol["text-rotation-alignment"]),"text-field":new s(r.layout_symbol["text-field"]),"text-font":new s(r.layout_symbol["text-font"]),"text-size":new s(r.layout_symbol["text-size"]),"text-max-width":new s(r.layout_symbol["text-max-width"]),"text-line-height":new a(r.layout_symbol["text-line-height"]),"text-letter-spacing":new s(r.layout_symbol["text-letter-spacing"]),"text-justify":new s(r.layout_symbol["text-justify"]),"text-anchor":new s(r.layout_symbol["text-anchor"]),"text-max-angle":new a(r.layout_symbol["text-max-angle"]),"text-rotate":new s(r.layout_symbol["text-rotate"]),"text-padding":new a(r.layout_symbol["text-padding"]),"text-keep-upright":new a(r.layout_symbol["text-keep-upright"]),"text-transform":new s(r.layout_symbol["text-transform"]),"text-offset":new s(r.layout_symbol["text-offset"]),"text-allow-overlap":new a(r.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new a(r.layout_symbol["text-ignore-placement"]),"text-optional":new a(r.layout_symbol["text-optional"])})),u=new o({"icon-opacity":new s(r.paint_symbol["icon-opacity"]),"icon-color":new s(r.paint_symbol["icon-color"]),"icon-halo-color":new s(r.paint_symbol["icon-halo-color"]),"icon-halo-width":new s(r.paint_symbol["icon-halo-width"]),"icon-halo-blur":new s(r.paint_symbol["icon-halo-blur"]),"icon-translate":new a(r.paint_symbol["icon-translate"]),"icon-translate-anchor":new a(r.paint_symbol["icon-translate-anchor"]),"text-opacity":new s(r.paint_symbol["text-opacity"]),"text-color":new s(r.paint_symbol["text-color"]),"text-halo-color":new s(r.paint_symbol["text-halo-color"]),"text-halo-width":new s(r.paint_symbol["text-halo-width"]),"text-halo-blur":new s(r.paint_symbol["text-halo-blur"]),"text-translate":new a(r.paint_symbol["text-translate"]),"text-translate-anchor":new a(r.paint_symbol["text-translate-anchor"])});e.exports={paint:u,layout:l}},{"../../style-spec/reference/latest":151,"../properties":188}],210:[function(t,e,i){"use strict";var b=t("./style_layer"),x=t("../util/util"),w=t("../style-spec/feature_filter"),S=t("../style-spec/group_by_layout"),r=function(t){t&&this.replace(t)};r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(t,e){for(var i=this,r=0,n=t;r<n.length;r+=1){var o=n[r];i._layerConfigs[o.id]=o;var a=i._layers[o.id]=b.create(o);a._featureFilter=w(a.filter)}for(var s=0,l=e;s<l.length;s+=1){var u=l[s];delete i._layerConfigs[u],delete i._layers[u]}this.familiesBySource={};for(var c=S(x.values(this._layerConfigs)),h=0,p=c;h<p.length;h+=1){var f=p[h],d=f.map(function(t){return i._layers[t.id]}),m=d[0];if("none"!==m.visibility){var y=m.source||"",g=i.familiesBySource[y];g||(g=i.familiesBySource[y]={});var v=m.sourceLayer||"_geojsonTileLayer",_=g[v];_||(_=g[v]=[]),_.push(d)}}},e.exports=r},{"../style-spec/feature_filter":148,"../style-spec/group_by_layout":150,"../util/util":275,"./style_layer":191}],211:[function(t,e,i){"use strict";e.exports=t("../style-spec/validate_style.min"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var i=0,r=e;i<r.length;i+=1){var n=r[i],o=n.message;t.fire("error",{error:new Error(o)})}return!0}return!1}},{"../style-spec/validate_style.min":181}],212:[function(t,e,i){"use strict";var r=function(){this.first=!0};r.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))},e.exports=r},{}],213:[function(t,e,i){"use strict";var r=t("@mapbox/point-geometry"),n=t("../util/web_worker_transfer"),o=n.register,a=function(n){function t(t,e,i,r){n.call(this,t,e),this.angle=i,void 0!==r&&(this.segment=r)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(r);o("Anchor",a),e.exports=a},{"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],214:[function(t,e,i){"use strict";e.exports=function(t,e,i,r,n){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;-i/2<s;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<i/2;){var c=t[a-1],h=t[a],p=t[a+1];if(!p)return!1;var f=c.angleTo(h)-h.angleTo(p);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>r;)u-=l.shift().angleDelta;if(n<u)return!1;a++,s+=h.dist(p)}return!0}},{}],215:[function(t,e,i){"use strict";var p=t("@mapbox/point-geometry");e.exports=function(t,e,i,r,n){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],l=void 0,u=0;u<s.length-1;u++){var c=s[u],h=s[u+1];c.x<e&&h.x<e||(c.x<e?c=new p(e,c.y+(h.y-c.y)*((e-c.x)/(h.x-c.x)))._round():h.x<e&&(h=new p(e,c.y+(h.y-c.y)*((e-c.x)/(h.x-c.x)))._round()),c.y<i&&h.y<i||(c.y<i?c=new p(c.x+(h.x-c.x)*((i-c.y)/(h.y-c.y)),i)._round():h.y<i&&(h=new p(c.x+(h.x-c.x)*((i-c.y)/(h.y-c.y)),i)._round()),c.x>=r&&h.x>=r||(c.x>=r?c=new p(r,c.y+(h.y-c.y)*((r-c.x)/(h.x-c.x)))._round():h.x>=r&&(h=new p(r,c.y+(h.y-c.y)*((r-c.x)/(h.x-c.x)))._round()),c.y>=n&&h.y>=n||(c.y>=n?c=new p(c.x+(h.x-c.x)*((n-c.y)/(h.y-c.y)),n)._round():h.y>=n&&(h=new p(c.x+(h.x-c.x)*((n-c.y)/(h.y-c.y)),n)._round()),l&&c.equals(l[l.length-1])||(l=[c],o.push(l)),l.push(h)))))}return o}},{"@mapbox/point-geometry":4}],216:[function(t,e,i){"use strict";var r=function(t,e,i,r,n,o,a,s,l,u,c){var h=a.top*s-l,p=a.bottom*s+l,f=a.left*s-l,d=a.right*s+l;if(this.boxStartIndex=t.length,u){var m=p-h,y=d-f;0<m&&(m=Math.max(10*s,m),this._addLineCollisionCircles(t,e,i,i.segment,y,m,r,n,o,c))}else t.emplaceBack(i.x,i.y,f,h,d,p,r,n,o,0,0);this.boxEndIndex=t.length};r.prototype._addLineCollisionCircles=function(t,e,i,r,n,o,a,s,l,u){var c=o/2,h=Math.floor(n/c),p=1+.4*Math.log(u)/Math.LN2,f=Math.floor(h*p/2),d=-o/2,m=i,y=r+1,g=d,v=-n/2,_=v-n/4;do{if(--y<0){if(v<g)return;y=0;break}g-=e[y].dist(m),m=e[y]}while(_<g);for(var b=e[y].dist(e[y+1]),x=-f;x<h+f;x++){var w=x*c,S=v+w;if(w<0&&(S+=w),n<w&&(S+=w-n),!(S<g)){for(;g+b<S;){if(g+=b,++y+1>=e.length)return;b=e[y].dist(e[y+1])}var C=S-g,E=e[y],T=e[y+1],k=T.sub(E)._unit()._mult(C)._add(E)._round(),M=Math.abs(S-d)<c?0:.8*(S-d);t.emplaceBack(k.x,k.y,-o/2,-o/2,o/2,o/2,a,s,l,o/2,M)}}},e.exports=r},{}],217:[function(t,e,i){"use strict";function B(t,e,i){t[e+4]=i?1:0}var N=t("@mapbox/point-geometry"),F=t("../util/intersection_tests"),r=t("./grid_index"),n=t("@mapbox/gl-matrix"),j=(n.mat4,t("../symbol/projection")),o=function(t,e,i){void 0===e&&(e=new r(t.width+200,t.height+200,25)),void 0===i&&(i=new r(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100};o.prototype.placeCollisionBox=function(t,e,i,r){var n=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),o=i*n.perspectiveRatio,a=t.x1*o+n.point.x,s=t.y1*o+n.point.y,l=t.x2*o+n.point.x,u=t.y2*o+n.point.y;return!e&&this.grid.hitTest(a,s,l,u)?{box:[],offscreen:!1}:{box:[a,s,l,u],offscreen:this.isOffscreen(a,s,l,u)}},o.prototype.approximateTileDistance=function(t,e,i,r,n){var o=n?1:r/this.pitchfactor,a=t.lastSegmentViewportDistance*i;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},o.prototype.placeCollisionCircles=function(t,e,i,r,n,o,a,s,l,u,c,h,p){var f=[],d=this.projectAnchor(u,o.anchorX,o.anchorY),m=l/24,y=o.lineOffsetX*l,g=o.lineOffsetY*l,v=new N(o.anchorX,o.anchorY),_=j.project(v,c).point,b=j.placeFirstAndLastGlyph(m,s,y,g,!1,_,v,o,a,c,{},!0),x=!1,w=!0,S=d.perspectiveRatio*r,C=1/(r*i),E=0,T=0;b&&(E=this.approximateTileDistance(b.first.tileDistance,b.first.angle,C,d.cameraDistance,p),T=this.approximateTileDistance(b.last.tileDistance,b.last.angle,C,d.cameraDistance,p));for(var k=0;k<t.length;k+=5){var M=t[k],P=t[k+1],A=t[k+2],L=t[k+3];if(!b||L<-E||T<L)B(t,k,!1);else{var I=this.projectPoint(u,M,P),O=A*S;if(0<f.length){var D=I.x-f[f.length-4],z=I.y-f[f.length-3];if(D*D+z*z<O*O*2&&k+8<t.length){var F=t[k+8];if(-E<F&&F<T){B(t,k,!1);continue}}}var R=k/5;if(f.push(I.x,I.y,O,R),B(t,k,!0),w=w&&this.isOffscreen(I.x-O,I.y-O,I.x+O,I.y+O),!e&&this.grid.hitTestCircle(I.x,I.y,O)){if(!h)return{circles:[],offscreen:!1};x=!0}}}return{circles:x?[]:f,offscreen:w}},o.prototype.queryRenderedSymbols=function(t,e,i,r,n,o){var a={},s=[];if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return s;for(var l=this.transform.calculatePosMatrix(e.toUnwrapped()),u=[],c=1/0,h=1/0,p=-1/0,f=-1/0,d=0;d<t.length;d++)for(var m=t[d],y=0;y<m.length;y++){var g=this.projectPoint(l,m[y].x,m[y].y);c=Math.min(c,g.x),h=Math.min(h,g.y),p=Math.max(p,g.x),f=Math.max(f,g.y),u.push(g)}for(var v=e.key,_=[],b=this.grid.query(c,h,p,f),x=0;x<b.length;x++)b[x].sourceID===n&&b[x].tileID===v&&o[b[x].bucketInstanceId]&&_.push(b[x].boxIndex);for(var w=this.ignoredGrid.query(c,h,p,f),S=0;S<w.length;S++)w[S].sourceID===n&&w[S].tileID===v&&o[w[S].bucketInstanceId]&&_.push(w[S].boxIndex);for(var C=0;C<_.length;C++){var E=r.get(_[C]),T=E.sourceLayerIndex,k=E.featureIndex,M=E.bucketIndex;if(void 0===a[T]&&(a[T]={}),void 0===a[T][k]&&(a[T][k]={}),!a[T][k][M]){var P=this.projectAndGetPerspectiveRatio(l,E.anchorPointX,E.anchorPointY),A=i*P.perspectiveRatio,L=E.x1*A+P.point.x,I=E.y1*A+P.point.y,O=E.x2*A+P.point.x,D=E.y2*A+P.point.y,z=[new N(L,I),new N(O,I),new N(O,D),new N(L,D)];F.polygonIntersectsPolygon(u,z)&&(a[T][k][M]=!0,s.push(_[C]))}}return s},o.prototype.insertCollisionBox=function(t,e,i,r,n,o){var a=e?this.ignoredGrid:this.grid,s={tileID:i,sourceID:r,bucketInstanceId:n,boxIndex:o};a.insert(s,t[0],t[1],t[2],t[3])},o.prototype.insertCollisionCircles=function(t,e,i,r,n,o){for(var a=e?this.ignoredGrid:this.grid,s=0;s<t.length;s+=4){var l={tileID:i,sourceID:r,bucketInstanceId:n,boxIndex:o+t[s+3]};a.insertCircle(l,t[s],t[s+1],t[s+2])}},o.prototype.projectAnchor=function(t,e,i){var r=[e,i,0,1];return j.xyTransformMat4(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},o.prototype.projectPoint=function(t,e,i){var r=[e,i,0,1];return j.xyTransformMat4(r,r,t),new N((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},o.prototype.projectAndGetPerspectiveRatio=function(t,e,i){var r=[e,i,0,1];return j.xyTransformMat4(r,r,t),{point:new N((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},o.prototype.isOffscreen=function(t,e,i,r){return i<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},e.exports=o},{"../symbol/projection":224,"../util/intersection_tests":264,"./grid_index":220,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],218:[function(t,e,i){"use strict";var o=t("../data/extent"),a=512/o/2,m=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var r=0,n=e;r<n.length;r+=1){var o=n[r],a=o.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,t)})}};m.prototype.getScaledCoordinates=function(t,e){var i=e.canonical.z-this.tileID.canonical.z,r=a/Math.pow(2,i),n=t.anchor;return{x:Math.floor((e.canonical.x*o+n.x)*r),y:Math.floor((e.canonical.y*o+n.y)*r)}},m.prototype.findMatches=function(t,e,i){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),n=0,o=t;n<o.length;n+=1){var a=o[n];if(!a.crossTileID){var s=this.indexedSymbolInstances[a.key];if(s)for(var l=this.getScaledCoordinates(a,e),u=0,c=s;u<c.length;u+=1){var h=c[u];if(Math.abs(h.coord.x-l.x)<=r&&Math.abs(h.coord.y-l.y)<=r&&!i[h.crossTileID]){i[h.crossTileID]=!0,a.crossTileID=h.crossTileID;break}}}}};var r=function(){this.maxCrossTileID=0};r.prototype.generate=function(){return++this.maxCrossTileID};var u=function(){this.indexes={},this.usedCrossTileIDs={}};u.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0,n=e.symbolInstances;r<n.length;r+=1)n[r].crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var o=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var s=this.indexes[a];if(Number(a)>t.overscaledZ)for(var l in s){var u=s[l];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,o)}else{var c=t.scaledTo(Number(a)),h=s[c.key];h&&h.findMatches(e.symbolInstances,t,o)}}for(var p=0,f=e.symbolInstances;p<f.length;p+=1){var d=f[p];d.crossTileID||(d.crossTileID=i.generate(),o[d.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new m(t,e.symbolInstances,e.bucketInstanceId),!0},u.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var r=0,n=e.indexedSymbolInstances[i];r<n.length;r+=1){var o=n[r];delete this.usedCrossTileIDs[t][o.crossTileID]}},u.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var r=this.indexes[i];for(var n in r)t[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],e=!0)}return e};var n=function(){this.layerIndexes={},this.crossTileIDs=new r,this.maxBucketInstanceId=0};n.prototype.addLayer=function(t,e){var i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new u);for(var r=!1,n={},o=0,a=e;o<a.length;o+=1){var s=a[o],l=s.getBucket(t);l&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,l,this.crossTileIDs)&&(r=!0),n[l.bucketInstanceId]=!0)}return i.removeStaleBuckets(n)&&(r=!0),r},n.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[i]||delete this.layerIndexes[i]},e.exports=n},{"../data/extent":53}],219:[function(t,e,i){"use strict";function C(t,e,i,r,n,o,a,s,l){for(var u=o/2,c=0,h=0;h<t.length-1;h++)c+=t[h].dist(t[h+1]);for(var p=0,f=e-i,d=[],m=0;m<t.length-1;m++){for(var y=t[m],g=t[m+1],v=y.dist(g),_=g.angleTo(y);f+i<p+v;){var b=((f+=i)-p)/v,x=E(y.x,g.x,b),w=E(y.y,g.y,b);if(0<=x&&x<l&&0<=w&&w<l&&0<=f-u&&f+u<=c){var S=new T(x,w,_,m);S._round(),r&&!k(t,S,o,r,n)||d.push(S)}}p+=v}return s||d.length||a||(d=C(t,p/2,i,r,n,o,a,!0,l)),d}var E=t("../style-spec/util/interpolate").number,T=t("../symbol/anchor"),k=t("./check_max_angle");e.exports=function(t,e,i,r,n,o,a,s,l){var u=r?.6*o*a:0,c=Math.max(r?r.right-r.left:0,n?n.right-n.left:0),h=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;e-c*a<e/4&&(e=c*a+e/4);var p=2*o;return C(t,h?e/2*s%e:(c/2+p)*a*s%e,e,u,i,c*a,h,!1,l)}},{"../style-spec/util/interpolate":158,"../symbol/anchor":213,"./check_max_angle":214}],220:[function(t,e,i){"use strict";var r=function(t,e,i){var r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};r.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},r.prototype.insert=function(t,e,i,r,n){this._forEachCell(e,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},r.prototype.insertCircle=function(t,e,i,r){this._forEachCell(e-r,i-r,e+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(r)},r.prototype._insertBoxCell=function(t,e,i,r,n,o){this.boxCells[n].push(o)},r.prototype._insertCircleCell=function(t,e,i,r,n,o){this.circleCells[n].push(o)},r.prototype._query=function(t,e,i,r,n){if(i<0||t>this.width||r<0||e>this.height)return!n&&[];var o=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=r)o=Array.prototype.slice.call(this.boxKeys).concat(this.circleKeys);else{var a={hitTest:n,seenUids:{box:{},circle:{}}};this._forEachCell(t,e,i,r,this._queryCell,o,a)}return n?0<o.length:o},r.prototype._queryCircle=function(t,e,i,r){var n=t-i,o=t+i,a=e-i,s=e+i;if(o<0||n>this.width||s<0||a>this.height)return!r&&[];var l=[],u={hitTest:r,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}};return this._forEachCell(n,a,o,s,this._queryCellCircle,l,u),r?0<l.length:l},r.prototype.query=function(t,e,i,r){return this._query(t,e,i,r,!1)},r.prototype.hitTest=function(t,e,i,r){return this._query(t,e,i,r,!0)},r.prototype.hitTestCircle=function(t,e,i){return this._queryCircle(t,e,i,!0)},r.prototype._queryCell=function(t,e,i,r,n,o,a){var s=a.seenUids,l=this.boxCells[n];if(null!==l)for(var u=this.bboxes,c=0,h=l;c<h.length;c+=1){var p=h[c];if(!s.box[p]){s.box[p]=!0;var f=4*p;if(t<=u[f+2]&&e<=u[f+3]&&i>=u[f+0]&&r>=u[f+1]){if(a.hitTest)return o.push(!0),!0;o.push(this.boxKeys[p])}}}var d=this.circleCells[n];if(null!==d)for(var m=this.circles,y=0,g=d;y<g.length;y+=1){var v=g[y];if(!s.circle[v]){s.circle[v]=!0;var _=3*v;if(this._circleAndRectCollide(m[_],m[_+1],m[_+2],t,e,i,r)){if(a.hitTest)return o.push(!0),!0;o.push(this.circleKeys[v])}}}},r.prototype._queryCellCircle=function(t,e,i,r,n,o,a){var s=a.circle,l=a.seenUids,u=this.boxCells[n];if(null!==u)for(var c=this.bboxes,h=0,p=u;h<p.length;h+=1){var f=p[h];if(!l.box[f]){l.box[f]=!0;var d=4*f;if(this._circleAndRectCollide(s.x,s.y,s.radius,c[d+0],c[d+1],c[d+2],c[d+3]))return o.push(!0),!0}}var m=this.circleCells[n];if(null!==m)for(var y=this.circles,g=0,v=m;g<v.length;g+=1){var _=v[g];if(!l.circle[_]){l.circle[_]=!0;var b=3*_;if(this._circlesCollide(y[b],y[b+1],y[b+2],s.x,s.y,s.radius))return o.push(!0),!0}}},r.prototype._forEachCell=function(t,e,i,r,n,o,a){for(var s=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),c=this._convertToYCellCoord(r),h=s;h<=u;h++)for(var p=l;p<=c;p++){var f=this.xCellCount*p+h;if(n.call(this,t,e,i,r,f,o,a))return}},r.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},r.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},r.prototype._circlesCollide=function(t,e,i,r,n,o){var a=r-t,s=n-e,l=i+o;return a*a+s*s<l*l},r.prototype._circleAndRectCollide=function(t,e,i,r,n,o,a){var s=(o-r)/2,l=Math.abs(t-(r+s));if(s+i<l)return!1;var u=(a-n)/2,c=Math.abs(e-(n+u));if(u+i<c)return!1;if(l<=s||c<=u)return!0;var h=l-s,p=c-u;return h*h+p*p<=i*i},e.exports=r},{}],221:[function(t,e,i){"use strict";e.exports=function(e){function t(t){s.push(e[t]),l++}function i(t,e,i){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(i[0]),r}function r(t,e,i){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=i[0].concat(s[r].geometry[0]),r}function n(t,e,i){var r=i?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},a={},s=[],l=0,u=0;u<e.length;u++){var c=e[u],h=c.geometry,p=c.text;if(p){var f=n(p,h),d=n(p,h,!0);if(f in a&&d in o&&a[f]!==o[d]){var m=r(f,d,h),y=i(f,d,s[m].geometry);delete o[f],delete a[d],a[n(p,s[y].geometry,!0)]=y,s[m].geometry=null}else f in a?i(f,d,h):d in o?r(f,d,h):(t(u),o[f]=l-1,a[d]=l-1)}else t(u)}return s.filter(function(t){return t.geometry})}},{}],222:[function(t,e,i){"use strict";var r=t("../util/web_worker_transfer"),n=r.register,o=function(){this.opacity=0,this.targetOpacity=0,this.time=0};o.prototype.clone=function(){var t=new o;return t.opacity=this.opacity,t.targetOpacity=this.targetOpacity,t.time=this.time,t},n("OpacityState",o),e.exports=o},{"../util/web_worker_transfer":278}],223:[function(t,e,i){"use strict";function S(t,e,i){t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0),t.emplaceBack(e?1:0,i?1:0)}function C(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*a+e*s+i*l+e*u+i*c+e*d+i*m+e}var r=t("./collision_index"),h=t("../data/extent"),k=t("./symbol_size"),p=t("./projection"),M=t("../style/style_layer/symbol_style_layer_properties").layout,f=t("../source/pixels_to_tile_units"),o=function(t,e,i,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&i?1:0,this.placed=i};o.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var E=function(t,e,i,r,n){this.text=new o(t?t.text:null,e,i,n),this.icon=new o(t?t.icon:null,e,r,n)};E.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var P=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},n=function(t,e){this.transform=t.clone(),this.collisionIndex=new r(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e};n.prototype.placeLayerTile=function(t,e,i,r){var n=e.getBucket(t);if(n){var o=n.layers[0].layout,a=Math.pow(2,this.transform.zoom-e.tileID.overscaledZ),s=e.tileSize/h,l=this.transform.calculatePosMatrix(e.tileID.toUnwrapped()),u=p.getLabelPlaneMatrix(l,"map"===o.get("text-pitch-alignment"),"map"===o.get("text-rotation-alignment"),this.transform,f(e,1,this.transform.zoom)),c=p.getLabelPlaneMatrix(l,"map"===o.get("icon-pitch-alignment"),"map"===o.get("icon-rotation-alignment"),this.transform,f(e,1,this.transform.zoom));this.placeLayerBucket(n,l,u,c,a,s,i,r,e.collisionBoxArray,e.tileID.key,t.source)}},n.prototype.placeLayerBucket=function(t,e,i,r,n,o,a,s,l,u,c){for(var h=t.layers[0].layout,p=k.evaluateSizeForZoom(t.textSizeData,this.transform.zoom,M.properties["text-size"]),f=!t.hasTextData()||h.get("text-optional"),d=!t.hasIconData()||h.get("icon-optional"),m=0,y=t.symbolInstances;m<y.length;m+=1){var g=y[m];if(!s[g.crossTileID]){var v=!1,_=!1,b=!0,x=null,w=null,S=null;g.collisionArrays||(g.collisionArrays=t.deserializeCollisionBoxes(l,g.textBoxStartIndex,g.textBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex)),g.collisionArrays.textBox&&(x=this.collisionIndex.placeCollisionBox(g.collisionArrays.textBox,h.get("text-allow-overlap"),o,e),v=0<x.box.length,b=b&&x.offscreen);var C=g.collisionArrays.textCircles;if(C){var E=t.text.placedSymbolArray.get(g.placedTextSymbolIndices[0]),T=k.evaluateSizeForFeature(t.textSizeData,p,E);w=this.collisionIndex.placeCollisionCircles(C,h.get("text-allow-overlap"),n,o,g.key,E,t.lineVertexArray,t.glyphOffsetArray,T,e,i,a,"map"===h.get("text-pitch-alignment")),v=h.get("text-allow-overlap")||0<w.circles.length,b=b&&w.offscreen}g.collisionArrays.iconBox&&(S=this.collisionIndex.placeCollisionBox(g.collisionArrays.iconBox,h.get("icon-allow-overlap"),o,e),_=0<S.box.length,b=b&&S.offscreen),f||d?d?f||(_=_&&v):v=_&&v:_=v=_&&v,v&&x&&this.collisionIndex.insertCollisionBox(x.box,h.get("text-ignore-placement"),u,c,t.bucketInstanceId,g.textBoxStartIndex),_&&S&&this.collisionIndex.insertCollisionBox(S.box,h.get("icon-ignore-placement"),u,c,t.bucketInstanceId,g.iconBoxStartIndex),v&&w&&this.collisionIndex.insertCollisionCircles(w.circles,h.get("text-ignore-placement"),u,c,t.bucketInstanceId,g.textBoxStartIndex),this.placements[g.crossTileID]=new P(v,_,b||t.justReloaded),s[g.crossTileID]=!0}}t.justReloaded=!1},n.prototype.commit=function(t,e){this.commitTime=e;var i=!1,r=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,n=t?t.opacities:{};for(var o in this.placements){var a=this.placements[o],s=n[o];i=s?(this.opacities[o]=new E(s,r,a.text,a.icon),i||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new E(null,r,a.text,a.icon,a.skipFade),i||a.text||a.icon)}for(var l in n){var u=n[l];if(!this.opacities[l]){var c=new E(u,r,!1,!1);c.isHidden()||(this.opacities[l]=c,i=i||u.text.placed||u.icon.placed)}}i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},n.prototype.updateLayerOpacities=function(t,e){for(var i={},r=0,n=e;r<n.length;r+=1){var o=n[r],a=o.getBucket(t);a&&this.updateBucketOpacities(a,i,o.collisionBoxArray)}},n.prototype.updateBucketOpacities=function(t,e,i){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();for(var r=t.layers[0].layout,n=new E(null,0,r.get("text-allow-overlap"),r.get("icon-allow-overlap"),!0),o=0;o<t.symbolInstances.length;o++){var a=t.symbolInstances[o],s=e[a.crossTileID],l=this.opacities[a.crossTileID];l?s&&(l=n):(l=n,this.opacities[a.crossTileID]=l),e[a.crossTileID]=!0;var u=0<a.numGlyphVertices||0<a.numVerticalGlyphVertices,c=0<a.numIconVertices;if(u){for(var h=C(l.text),p=(a.numGlyphVertices+a.numVerticalGlyphVertices)/4,f=0;f<p;f++)t.text.opacityVertexArray.emplaceBack(h);for(var d=0,m=a.placedTextSymbolIndices;d<m.length;d+=1){var y=m[d];t.text.placedSymbolArray.get(y).hidden=l.text.isHidden()}}if(c){for(var g=C(l.icon),v=0;v<a.numIconVertices/4;v++)t.icon.opacityVertexArray.emplaceBack(g);t.icon.placedSymbolArray.get(o).hidden=l.icon.isHidden()}a.collisionArrays||(a.collisionArrays=t.deserializeCollisionBoxes(i,a.textBoxStartIndex,a.textBoxEndIndex,a.iconBoxStartIndex,a.iconBoxEndIndex));var _=a.collisionArrays;if(_){_.textBox&&t.hasCollisionBoxData()&&S(t.collisionBox.collisionVertexArray,l.text.placed,!1),_.iconBox&&t.hasCollisionBoxData()&&S(t.collisionBox.collisionVertexArray,l.icon.placed,!1);var b=_.textCircles;if(b&&t.hasCollisionCircleData())for(var x=0;x<b.length;x+=5){var w=s||0===b[x+4];S(t.collisionCircle.collisionVertexArray,l.text.placed,w)}}}t.sortFeatures(this.transform.angle),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},n.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},n.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},n.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},n.prototype.setStale=function(){this.stale=!0};var a=Math.pow(2,25),s=Math.pow(2,24),l=Math.pow(2,17),u=Math.pow(2,16),c=Math.pow(2,9),d=Math.pow(2,8),m=Math.pow(2,1);e.exports=n},{"../data/extent":53,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"./collision_index":217,"./projection":224,"./symbol_size":228}],224:[function(t,e,i){"use strict";function F(t,e){var i=[t.x,t.y,0,1];n(i,i,e);var r=i[3];return{point:new V(i[0]/r,i[1]/r),signedDistanceFromCamera:r}}function R(t,e,i,r,n,o,a,s,l,u,c,h){var p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(p-1),g=j(t*m,i,r,n,o,a,s.segment,f,d,l,u,c,h);if(!g)return null;var v=j(t*y,i,r,n,o,a,s.segment,f,d,l,u,c,h);return v?{first:g,last:v}:null}function B(t,e,i,r){return t===$.horizontal&&Math.abs(i.y-e.y)>Math.abs(i.x-e.x)*r?{useVertical:!0}:(t===$.vertical?e.y<i.y:e.x>i.x)?{needsFlipping:!0}:null}function L(t,e,i,r,n,o,a,s,l,u,c,h,p,f){var d,m=e/24,y=t.lineOffsetX*e,g=t.lineOffsetY*e;if(1<t.numGlyphs){var v=t.glyphStartIndex+t.numGlyphs,_=t.lineStartIndex,b=t.lineStartIndex+t.lineLength,x=R(m,s,y,g,i,c,h,t,l,o,p,!1);if(!x)return{notEnoughRoom:!0};var w=F(x.first.point,a).point,S=F(x.last.point,a).point;if(r&&!i){var C=B(t.writingMode,w,S,f);if(C)return C}d=[x.first];for(var E=t.glyphStartIndex+1;E<v-1;E++)d.push(j(m*s.getoffsetX(E),y,g,i,c,h,t.segment,_,b,l,o,p,!1));d.push(x.last)}else{if(r&&!i){var T=F(h,n).point,k=t.lineStartIndex+t.segment+1,M=new V(l.getx(k),l.gety(k)),P=F(M,n),A=0<P.signedDistanceFromCamera?P.point:N(h,M,T,1,n),L=B(t.writingMode,T,A,f);if(L)return L}var I=j(m*s.getoffsetX(t.glyphStartIndex),y,g,i,c,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,o,p,!1);if(!I)return{notEnoughRoom:!0};d=[I]}for(var O=0,D=d;O<D.length;O+=1){var z=D[O];U(u,z.point,z.angle)}return{}}function N(t,e,i,r,n){var o=F(t.add(t.sub(e)._unit()),n).point,a=i.sub(o);return i.add(a._mult(r/a.mag()))}function j(t,e,i,r,n,o,a,s,l,u,c,h,p){var f=r?t-e:t+e,d=0<f?1:-1,m=0;r&&(d*=-1,m=Math.PI),d<0&&(m+=Math.PI);for(var y=0<d?s+a:s+a+1,g=y,v=n,_=n,b=0,x=0,w=Math.abs(f);b+x<=w;){if((y+=d)<s||l<=y)return null;if(_=v,void 0===(v=h[y])){var S=new V(u.getx(y),u.gety(y)),C=F(S,c);if(0<C.signedDistanceFromCamera)v=h[y]=C.point;else{var E=y-d;v=N(0===b?o:new V(u.getx(E),u.gety(E)),S,_,w-b+1,c)}}b+=x,x=_.dist(v)}var T=(w-b)/x,k=v.sub(_),M=k.mult(T)._add(_);return M._add(k._unit()._perp()._mult(i*d)),{point:M,angle:m+Math.atan2(v.y-_.y,v.x-_.x),tileDistance:p?{prevTileDistance:y-d===g?0:u.gettileUnitDistanceFromAnchor(y-d),lastSegmentViewportDistance:w-b}:null}}function I(t,e){for(var i=0;i<t;i++){var r=e.length;e.resize(r+4),e.float32.set(s,3*r)}}function n(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t[3]=i[3]*r+i[7]*n+i[15],t}var V=t("@mapbox/point-geometry"),r=t("@mapbox/gl-matrix"),a=r.mat4,O=r.vec4,D=t("./symbol_size"),o=t("../data/bucket/symbol_bucket"),U=o.addDynamicAttributes,z=t("../style/style_layer/symbol_style_layer_properties").layout,$=t("../symbol/shaping").WritingMode;e.exports={updateLineLabels:function(t,e,i,r,n,o,a,s){var l,u,c,h,p=r?t.textSizeData:t.iconSizeData,f=D.evaluateSizeForZoom(p,i.transform.zoom,z.properties[r?"text-size":"icon-size"]),d=[256/i.width*2+1,256/i.height*2+1],m=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;m.clear();for(var y=t.lineVertexArray,g=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,v=i.transform.width/i.transform.height,_=!1,b=0;b<g.length;b++){var x=g.get(b);if(x.hidden||x.writingMode===$.vertical&&!_)I(x.numGlyphs,m);else{_=!1;var w=[x.anchorX,x.anchorY,0,1];if(O.transformMat4(w,w,e),u=d,c=(l=l=w)[0]/l[3],h=l[1]/l[3],c>=-u[0]&&c<=u[0]&&h>=-u[1]&&h<=u[1]){var S=w[3],C=.5+S/i.transform.cameraToCenterDistance*.5,E=D.evaluateSizeForFeature(p,f,x),T=a?E*C:E/C,k=new V(x.anchorX,x.anchorY),M=F(k,n).point,P={},A=L(x,T,!1,s,e,n,o,t.glyphOffsetArray,y,m,M,k,P,v);_=A.useVertical,(A.notEnoughRoom||_||A.needsFlipping&&L(x,T,!0,s,e,n,o,t.glyphOffsetArray,y,m,M,k,P,v).notEnoughRoom)&&I(x.numGlyphs,m)}else I(x.numGlyphs,m)}}r?t.text.dynamicLayoutVertexBuffer.updateData(m):t.icon.dynamicLayoutVertexBuffer.updateData(m)},getLabelPlaneMatrix:function(t,e,i,r,n){var o=a.identity(new Float32Array(16));return e?(a.identity(o),a.scale(o,o,[1/n,1/n,1]),i||a.rotateZ(o,o,r.angle)):(a.scale(o,o,[r.width/2,-r.height/2,1]),a.translate(o,o,[1,-1,0]),a.multiply(o,o,t)),o},getGlCoordMatrix:function(t,e,i,r,n){var o=a.identity(new Float32Array(16));return e?(a.multiply(o,o,t),a.scale(o,o,[n,n,1]),i||a.rotateZ(o,o,-r.angle)):(a.scale(o,o,[1,-1,1]),a.translate(o,o,[-1,-1,0]),a.scale(o,o,[2/r.width,2/r.height,1])),o},project:F,placeFirstAndLastGlyph:R,xyTransformMat4:n};var s=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0])},{"../data/bucket/symbol_bucket":51,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/shaping":226,"./symbol_size":228,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],225:[function(t,e,i){"use strict";var B=t("@mapbox/point-geometry"),r=t("../style/parse_glyph_pbf"),O=r.GLYPH_PBF_BORDER;e.exports={getIconQuads:function(t,e,i,r,n,o,a){var s,l,u,c,h=e.image,p=i.layout,f=e.top-1/h.pixelRatio,d=e.left-1/h.pixelRatio,m=e.bottom+1/h.pixelRatio,y=e.right+1/h.pixelRatio;if("none"!==p.get("icon-text-fit")&&n){var g=y-d,v=m-f,_=p.get("text-size").evaluate(a)/24,b=n.left*_,x=n.right*_,w=n.top*_,S=n.bottom*_,C=x-b,E=S-w,T=p.get("icon-text-fit-padding")[0],k=p.get("icon-text-fit-padding")[1],M=p.get("icon-text-fit-padding")[2],P=p.get("icon-text-fit-padding")[3],A="width"===p.get("icon-text-fit")?.5*(E-v):0,L="height"===p.get("icon-text-fit")?.5*(C-g):0,I="width"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?C:g,O="height"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?E:v;s=new B(b+L-P,w+A-T),l=new B(b+L+k+I,w+A-T),u=new B(b+L+k+I,w+A+M+O),c=new B(b+L-P,w+A+M+O)}else s=new B(d,f),l=new B(y,f),u=new B(y,m),c=new B(d,m);var D=i.layout.get("icon-rotate").evaluate(a)*Math.PI/180;if(D){var z=Math.sin(D),F=Math.cos(D),R=[F,-z,z,F];s._matMult(R),l._matMult(R),c._matMult(R),u._matMult(R)}return[{tl:s,tr:l,bl:c,br:u,tex:{x:h.textureRect.x-1,y:h.textureRect.y-1,w:h.textureRect.w+2,h:h.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]},getGlyphQuads:function(t,e,i,r,n,o,a){for(var s=i.layout.get("text-rotate").evaluate(o)*Math.PI/180,l=i.layout.get("text-offset").evaluate(o).map(function(t){return 24*t}),u=e.positionedGlyphs,c=[],h=0;h<u.length;h++){var p=u[h],f=a[p.glyph];if(f){var d=f.rect;if(d){var m=O+1,y=f.metrics.advance/2,g=r?[p.x+y,p.y]:[0,0],v=r?[0,0]:[p.x+y+l[0],p.y+l[1]],_=f.metrics.left-m-y+v[0],b=-f.metrics.top-m+v[1],x=_+d.w,w=b+d.h,S=new B(_,b),C=new B(x,b),E=new B(_,w),T=new B(x,w);if(r&&p.vertical){var k=new B(-y,y),M=-Math.PI/2,P=new B(5,0);S._rotateAround(M,k)._add(P),C._rotateAround(M,k)._add(P),E._rotateAround(M,k)._add(P),T._rotateAround(M,k)._add(P)}if(s){var A=Math.sin(s),L=Math.cos(s),I=[L,-A,A,L];S._matMult(I),C._matMult(I),E._matMult(I),T._matMult(I)}c.push({tl:S,tr:C,bl:E,br:T,tex:d,writingMode:e.writingMode,glyphOffset:g})}}}return c}}},{"../style/parse_glyph_pbf":186,"@mapbox/point-geometry":4}],226:[function(t,e,i){"use strict";function m(t,e){for(var i=[],r=0,n=0,o=e;n<o.length;n+=1){var a=o[n];i.push(t.substring(r,a)),r=a}return r<t.length&&i.push(t.substring(r,t.length)),i}function f(t,e,i,r){var n=Math.pow(t-e,2);return r?t<e?n/2:2*n:n+Math.abs(i)*i}function d(t,e,i,r,n,o){for(var a=null,s=f(e,i,n,o),l=0,u=r;l<u.length;l+=1){var c=u[l],h=e-c.x,p=f(h,i,n,o)+c.badness;p<=s&&(a=c,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function y(t,e,i,r){if(!i)return[];if(!t)return[];for(var n=[],o=function(t,e,i,r){for(var n=0,o=0;o<t.length;o++){var a=r[t.charCodeAt(o)];a&&(n+=a.metrics.advance+e)}return n/Math.max(1,Math.ceil(n/i))}(t,e,i,r),a=0,s=0;s<t.length;s++){var l=t.charCodeAt(s),u=r[l];u&&!b[l]&&(a+=u.metrics.advance+e),s<t.length-1&&(x[l]||P.charAllowsIdeographicBreaking(l))&&n.push(d(s+1,a,o,n,(c=l,h=t.charCodeAt(s+1),p=void 0,p=0,10===c&&(p-=1e4),40!==c&&65288!==c||(p+=50),41!==h&&65289!==h||(p+=50),p),!1))}var c,h,p;return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(d(t.length,a,o,n,0,!0))}function T(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function g(t,e,i,r,n,o,a,s,l){for(var u=0,c=-17,h=0,p=t.positionedGlyphs,f="right"===o?1:"left"===o?0:.5,d=0,m=i;d<m.length;d+=1){var y=m[d];if((y=y.trim()).length){for(var g=p.length,v=0;v<y.length;v++){var _=y.charCodeAt(v),b=e[_];b&&(P.charHasUprightVerticalOrientation(_)&&a!==A.horizontal?(p.push({glyph:_,x:u,y:0,vertical:!0}),u+=l+s):(p.push({glyph:_,x:u,y:c,vertical:!1}),u+=b.metrics.advance+s))}if(p.length!==g){var x=u-s;h=Math.max(x,h),k(p,e,g,p.length-1,f)}u=0,c+=r}else c+=r}var w=T(n),S=w.horizontalAlign,C=w.verticalAlign;M(p,f,S,C,h,r,i.length);var E=i.length*r;t.top+=-C*E,t.bottom=t.top+E,t.left+=-S*h,t.right=t.left+h}function k(t,e,i,r,n){if(n){var o=e[t[r].glyph];if(o)for(var a=o.metrics.advance,s=(t[r].x+a)*n,l=i;l<=r;l++)t[l].x-=s}}function M(t,e,i,r,n,o,a){for(var s=(e-i)*n,l=(-r*a+.5)*o,u=0;u<t.length;u++)t[u].x+=s,t[u].y+=l}var P=t("../util/script_detection"),v=t("../util/verticalize_punctuation"),_=t("../source/rtl_text_plugin"),A={horizontal:1,vertical:2,horizontalOnly:3};e.exports={shapeText:function(t,e,i,r,n,o,a,s,l,u){var c=t.trim();u===A.vertical&&(c=v(c));var h,p=[],f={positionedGlyphs:p,text:c,top:s[1],bottom:s[1],left:s[0],right:s[0],writingMode:u},d=_.processBidirectionalText;return h=d?d(c,y(c,a,i,e)):m(c,y(c,a,i,e)),g(f,e,h,r,n,o,u,a,l),!!p.length&&f},shapeIcon:function(t,e,i){var r=T(i),n=r.horizontalAlign,o=r.verticalAlign,a=e[0],s=e[1],l=a-t.displaySize[0]*n,u=l+t.displaySize[0],c=s-t.displaySize[1]*o;return{image:t,top:c,bottom:c+t.displaySize[1],left:l,right:u}},WritingMode:A};var b={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},x={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":109,"../util/script_detection":269,"../util/verticalize_punctuation":277}],227:[function(t,e,i){"use strict";function F(i,r,n,o,a,s){var t=s.layoutTextSize.evaluate(r),e=s.layoutIconSize.evaluate(r),l=s.textMaxSize.evaluate(r);void 0===l&&(l=t);var u=i.layers[0].layout,c=u.get("text-offset").evaluate(r),h=u.get("icon-offset").evaluate(r),p=t/24,f=i.tilePixelRatio*p,d=i.tilePixelRatio*l/24,m=i.tilePixelRatio*e,y=i.tilePixelRatio*u.get("symbol-spacing"),g=u.get("text-padding")*i.tilePixelRatio,v=u.get("icon-padding")*i.tilePixelRatio,_=u.get("text-max-angle")/180*Math.PI,b="map"===u.get("text-rotation-alignment")&&"line"===u.get("symbol-placement"),x="map"===u.get("icon-rotation-alignment")&&"line"===u.get("symbol-placement"),w=u.get("symbol-placement"),S=y/2,C=function(t,e){e.x<0||e.x>=nt||e.y<0||e.y>=nt||i.symbolInstances.push(function(t,e,i,r,n,o,a,s,l,u,c,h,p,f,d,m,y,g,v,_,b,x){var w,S,C=t.addToLineVertexArray(e,i),E=0,T=0,k=0,M=r.horizontal?r.horizontal.text:"",P=[];r.horizontal&&(w=new tt(a,i,e,s,l,u,r.horizontal,c,h,p,t.overscaling),T+=G(t,e,r.horizontal,o,p,v,_,f,C,r.vertical?J.horizontal:J.horizontalOnly,P,b,x),r.vertical&&(k+=G(t,e,r.vertical,o,p,v,_,f,C,J.vertical,P,b,x)));var A=w?w.boxStartIndex:t.collisionBoxArray.length,L=w?w.boxEndIndex:t.collisionBoxArray.length;if(n){var I=Q(e,n,o,y,r.horizontal,v,_);S=new tt(a,i,e,s,l,u,n,d,m,!1,t.overscaling),E=4*I.length;var O=t.iconSizeData,D=null;"source"===O.functionType?D=[10*o.layout.get("icon-size").evaluate(_)]:"composite"===O.functionType&&(D=[10*x.compositeIconSizes[0].evaluate(_),10*x.compositeIconSizes[1].evaluate(_)]),t.addSymbols(t.icon,I,D,g,y,_,!1,e,C.lineStartIndex,C.lineLength)}var z=S?S.boxStartIndex:t.collisionBoxArray.length,F=S?S.boxEndIndex:t.collisionBoxArray.length;return t.glyphOffsetArray.length>=ot.MAX_GLYPHS&&et.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:M,textBoxStartIndex:A,textBoxEndIndex:L,iconBoxStartIndex:z,iconBoxEndIndex:F,textOffset:f,iconOffset:g,anchor:e,line:i,featureIndex:s,feature:_,numGlyphVertices:T,numVerticalGlyphVertices:k,numIconVertices:E,textOpacityState:new Y,iconOpacityState:new Y,isDuplicate:!1,placedTextSymbolIndices:P,crossTileID:0}}(i,e,t,n,o,i.layers[0],i.collisionBoxArray,r.index,r.sourceLayerIndex,i.index,f,g,b,c,m,v,x,h,{zoom:i.zoom},r,a,s))};if("line"===w)for(var E=0,T=K(r.geometry,0,0,nt,nt);E<T.length;E+=1)for(var k=T[E],M=X(k,y,_,n.vertical||n.horizontal,o,24,d,i.overscaling,nt),P=0,A=M;P<A.length;P+=1){var L=A[P],I=n.horizontal;I&&H(i,I.text,S,L)||C(k,L)}else if("Polygon"===r.type)for(var O=0,D=rt(r.geometry,0);O<D.length;O+=1){var z=D[O],F=it(z,16);C(z[0],new Z(F.x,F.y,0))}else if("LineString"===r.type)for(var R=0,B=r.geometry;R<B.length;R+=1){var N=B[R];C(N,new Z(N[0].x,N[0].y,0))}else if("Point"===r.type)for(var j=0,V=r.geometry;j<V.length;j+=1)for(var U=V[j],$=0,q=U;$<q.length;$+=1){var W=q[$];C([W],new Z(W.x,W.y,0))}}function G(t,e,i,r,n,o,a,s,l,u,c,h,p){var f=y(e,i,r,n,o,a,h),d=t.textSizeData,m=null;return"source"===d.functionType?m=[10*r.layout.get("text-size").evaluate(a)]:"composite"===d.functionType&&(m=[10*p.compositeTextSizes[0].evaluate(a),10*p.compositeTextSizes[1].evaluate(a)]),t.addSymbols(t.text,f,m,s,n,a,u,e,l.lineStartIndex,l.lineLength),c.push(t.text.placedSymbolArray.length-1),4*f.length}function H(t,e,i,r){var n=t.compareText;if(e in n){for(var o=n[e],a=o.length-1;0<=a;a--)if(r.dist(o[a])<i)return!0}else n[e]=[];return n[e].push(r),!1}var Z=t("./anchor"),X=t("./get_anchors"),K=t("./clip_line"),Y=t("./opacity_state"),r=t("./shaping"),R=r.shapeText,B=r.shapeIcon,J=r.WritingMode,n=t("./quads"),y=n.getGlyphQuads,Q=n.getIconQuads,tt=t("./collision_feature"),et=t("../util/util"),N=t("../util/script_detection"),it=t("../util/find_pole_of_inaccessibility"),rt=t("../util/classify_rings"),nt=t("../data/extent"),ot=t("../data/bucket/symbol_bucket"),j=t("../style/evaluation_parameters");t("@mapbox/point-geometry"),e.exports={performSymbolLayout:function(t,e,i,r,n,o){t.createArrays(),t.symbolInstances=[];var a=512*t.overscaling;t.tilePixelRatio=nt/a,t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,u={};if("composite"===t.textSizeData.functionType){var c=t.textSizeData.zoomRange,h=c.min,p=c.max;u.compositeTextSizes=[l["text-size"].possiblyEvaluate(new j(h)),l["text-size"].possiblyEvaluate(new j(p))]}if("composite"===t.iconSizeData.functionType){var f=t.iconSizeData.zoomRange,d=f.min,m=f.max;u.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new j(d)),l["icon-size"].possiblyEvaluate(new j(m))]}u.layoutTextSize=l["text-size"].possiblyEvaluate(new j(t.zoom+1)),u.layoutIconSize=l["icon-size"].possiblyEvaluate(new j(t.zoom+1)),u.textMaxSize=l["text-size"].possiblyEvaluate(new j(18));for(var y=24*s.get("text-line-height"),g="map"===s.get("text-rotation-alignment")&&"line"===s.get("symbol-placement"),v=s.get("text-keep-upright"),_=0,b=t.features;_<b.length;_+=1){var x=b[_],w=s.get("text-font").evaluate(x).join(","),S=e[w]||{},C=i[w]||{},E={},T=x.text;if(T){var k=N.allowsVerticalWritingMode(T),M=s.get("text-offset").evaluate(x).map(function(t){return 24*t}),P=24*s.get("text-letter-spacing").evaluate(x),A=N.allowsLetterSpacing(T)?P:0,L=s.get("text-anchor").evaluate(x),I=s.get("text-justify").evaluate(x),O="line"!==s.get("symbol-placement")?24*s.get("text-max-width").evaluate(x):0;E.horizontal=R(T,S,O,y,L,I,A,M,24,J.horizontal),k&&g&&v&&(E.vertical=R(T,S,O,y,L,I,A,M,24,J.vertical))}var D=void 0;if(x.icon){var z=r[x.icon];z&&(D=B(n[x.icon],s.get("icon-offset").evaluate(x),s.get("icon-anchor").evaluate(x)),void 0===t.sdfIcons?t.sdfIcons=z.sdf:t.sdfIcons!==z.sdf&&et.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),z.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(E.horizontal||D)&&F(t,x,E,D,C,u)}o&&t.generateCollisionDebugBuffers()}}},{"../data/bucket/symbol_bucket":51,"../data/extent":53,"../style/evaluation_parameters":182,"../util/classify_rings":255,"../util/find_pole_of_inaccessibility":261,"../util/script_detection":269,"../util/util":275,"./anchor":213,"./clip_line":215,"./collision_feature":216,"./get_anchors":219,"./opacity_state":222,"./quads":225,"./shaping":226,"@mapbox/point-geometry":4}],228:[function(t,e,i){"use strict";var r=t("../style-spec/expression"),h=r.normalizePropertyExpression,n=t("../style-spec/util/interpolate"),p=t("../util/util");e.exports={getSizeData:function(t,e){var i=e.expression;if("constant"===i.kind)return{functionType:"constant",layoutSize:i.evaluate({zoom:t+1})};if("source"===i.kind)return{functionType:"source"};for(var r=i.zoomStops,n=0;n<r.length&&r[n]<=t;)n++;for(var o=n=Math.max(0,n-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var a={min:r[n],max:r[o]};return"composite"===i.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:i.evaluate({zoom:t+1}),zoomRange:a,sizeRange:{min:i.evaluate({zoom:a.min}),max:i.evaluate({zoom:a.max})},propertyValue:e.value}},evaluateSizeForFeature:function(t,e,i){var r=e;return"source"===t.functionType?i.lowerSize/10:"composite"===t.functionType?n.number(i.lowerSize/10,i.upperSize/10,r.uSizeT):r.uSize},evaluateSizeForZoom:function(t,e,i){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var r=t.propertyValue,n=t.zoomRange,o=t.sizeRange,a=h(r,i.specification),s=p.clamp(a.interpolationFactor(e,n.min,n.max),0,1);return{uSizeT:0,uSize:o.min+s*(o.max-o.min)}}var l=t.propertyValue,u=t.zoomRange,c=h(l,i.specification);return{uSizeT:p.clamp(c.interpolationFactor(e,u.min,u.max),0,1),uSize:0}}}},{"../style-spec/expression":139,"../style-spec/util/interpolate":158,"../util/util":275}],229:[function(t,e,i){"use strict";var n=t("../source/rtl_text_plugin");e.exports=function(t,e,i){var r=e.layout.get("text-transform").evaluate(i);return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),n.applyArabicShaping&&(t=n.applyArabicShaping(t)),t}},{"../source/rtl_text_plugin":109}],230:[function(t,e,i){"use strict";var h=t("@mapbox/point-geometry"),p=t("../util/dom"),r=t("../util/window"),f=!!r.navigator.platform&&/iPad|iPhone|iPod/.test(r.navigator.platform),d={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),touchZoomRotate:t("./handler/touch_zoom_rotate")};e.exports=function(n,t){function e(){u=null}function i(t,e){var i=p.mousePos(o,e);return n.fire(t,{lngLat:n.unproject(i),point:i,originalEvent:e})}function r(t,e){var i=p.touchPos(o,e),r=i.reduce(function(t,e,i,r){return t.add(e.div(r.length))},new h(0,0));return n.fire(t,{lngLat:n.unproject(r),point:r,lngLats:i.map(function(t){return n.unproject(t)},this),points:i,originalEvent:e})}var o=n.getCanvasContainer(),a=null,s=!1,l=null,u=null;for(var c in d)n[c]=new d[c](n,t),t.interactive&&t[c]&&n[c].enable(t[c]);p.addEventListener(o,"mouseout",function(t){i("mouseout",t)}),p.addEventListener(o,"mousedown",function(t){n.doubleClickZoom.isActive()||n.stop(),l=p.mousePos(o,t),i("mousedown",t),s=!0}),p.addEventListener(o,"mouseup",function(t){var e=n.dragRotate&&n.dragRotate.isActive();a&&!e&&i("contextmenu",a),a=null,s=!1,i("mouseup",t)}),p.addEventListener(o,"mousemove",function(t){if(!(n.dragPan&&n.dragPan.isActive()||n.dragRotate&&n.dragRotate.isActive())){for(var e=t.toElement||t.target;e&&e!==o;)e=e.parentNode;e===o&&i("mousemove",t)}}),p.addEventListener(o,"mouseover",function(t){for(var e=t.toElement||t.target;e&&e!==o;)e=e.parentNode;e===o&&i("mouseover",t)}),p.addEventListener(o,"touchstart",function(t){n.stop(),r("touchstart",t),!t.touches||1<t.touches.length||(u?(clearTimeout(u),u=null,i("dblclick",t)):u=setTimeout(e,300))},{passive:!0}),p.addEventListener(o,"touchmove",function(t){r("touchmove",t)},{passive:!f}),p.addEventListener(o,"touchend",function(t){r("touchend",t)}),p.addEventListener(o,"touchcancel",function(t){r("touchcancel",t)}),p.addEventListener(o,"click",function(t){p.mousePos(o,t).equals(l)&&i("click",t)}),p.addEventListener(o,"dblclick",function(t){i("dblclick",t),t.preventDefault()}),p.addEventListener(o,"contextmenu",function(t){var e=n.dragRotate&&n.dragRotate.isActive();s||e?s&&(a=t):i("contextmenu",t),t.preventDefault()})}},{"../util/dom":259,"../util/window":254,"./handler/box_zoom":239,"./handler/dblclick_zoom":240,"./handler/drag_pan":241,"./handler/drag_rotate":242,"./handler/keyboard":243,"./handler/scroll_zoom":244,"./handler/touch_zoom_rotate":245,"@mapbox/point-geometry":4}],231:[function(t,e,i){"use strict";var I=t("../util/util"),O=t("../style-spec/util/interpolate").number,n=t("../util/browser"),D=t("../geo/lng_lat"),d=t("../geo/lng_lat_bounds"),z=t("@mapbox/point-geometry"),r=t("../util/evented"),o=function(i){function t(t,e){i.call(this),this.moving=!1,this.transform=t,this._bearingSnap=e.bearingSnap}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.getCenter=function(){return this.transform.center},t.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},t.prototype.panBy=function(t,e,i){return t=z.convert(t).mult(-1),this.panTo(this.transform.center,I.extend({offset:t},e),i)},t.prototype.panTo=function(t,e,i){return this.easeTo(I.extend({center:t},e),i)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},t.prototype.zoomTo=function(t,e,i){return this.easeTo(I.extend({zoom:t},e),i)},t.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},t.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},t.prototype.rotateTo=function(t,e,i){return this.easeTo(I.extend({bearing:t},e),i)},t.prototype.resetNorth=function(t,e){return this.rotateTo(0,I.extend({duration:1e3},t),e),this},t.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},t.prototype.fitBounds=function(t,e,i){if("number"==typeof(e=I.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){var r=e.padding;e.padding={top:r,bottom:r,right:r,left:r}}if(!I.deepEqual(Object.keys(e.padding).sort(function(t,e){return t<e?-1:e<t?1:0}),["bottom","left","right","top"]))return I.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;t=d.convert(t);var n=[(e.padding.left-e.padding.right)/2,(e.padding.top-e.padding.bottom)/2],o=Math.min(e.padding.right,e.padding.left),a=Math.min(e.padding.top,e.padding.bottom);e.offset=[e.offset[0]+n[0],e.offset[1]+n[1]];var s=z.convert(e.offset),l=this.transform,u=l.project(t.getNorthWest()),c=l.project(t.getSouthEast()),h=c.sub(u),p=(l.width-2*o-2*Math.abs(s.x))/h.x,f=(l.height-2*a-2*Math.abs(s.y))/h.y;return f<0||p<0?(I.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(e.center=l.unproject(u.add(c).div(2)),e.zoom=Math.min(l.scaleZoom(l.scale*Math.min(p,f)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,i):this.flyTo(e,i))},t.prototype.jumpTo=function(t,e){this.stop();var i=this.transform,r=!1,n=!1,o=!1;return"zoom"in t&&i.zoom!==+t.zoom&&(r=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=D.convert(t.center)),"bearing"in t&&i.bearing!==+t.bearing&&(n=!0,i.bearing=+t.bearing),"pitch"in t&&i.pitch!==+t.pitch&&(o=!0,i.pitch=+t.pitch),this.fire("movestart",e).fire("move",e),r&&this.fire("zoomstart",e).fire("zoom",e).fire("zoomend",e),n&&this.fire("rotate",e),o&&this.fire("pitchstart",e).fire("pitch",e).fire("pitchend",e),this.fire("moveend",e)},t.prototype.easeTo=function(t,o){var a=this;this.stop(),!1===(t=I.extend({offset:[0,0],duration:500,easing:I.ease},t)).animate&&(t.duration=0);var s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),h="zoom"in t?+t.zoom:l,p="bearing"in t?this._normalizeBearing(t.bearing,u):u,f="pitch"in t?+t.pitch:c,d=s.centerPoint.add(z.convert(t.offset)),e=s.pointLocation(d),i=D.convert(t.center||e);this._normalizeCenter(i);var m,y,g=s.project(e),v=s.project(i).sub(g),_=s.zoomScale(h-l);return t.around&&(m=D.convert(t.around),y=s.locationPoint(m)),this.zooming=h!==l,this.rotating=u!==p,this.pitching=f!==c,this._prepareEase(o,t.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(t){if(a.zooming&&(s.zoom=O(l,h,t)),a.rotating&&(s.bearing=O(u,p,t)),a.pitching&&(s.pitch=O(c,f,t)),m)s.setLocationAtPoint(m,y);else{var e=s.zoomScale(s.zoom-l),i=l<h?Math.min(2,_):Math.max(.5,_),r=Math.pow(i,1-t),n=s.unproject(g.add(v.mult(t*r)).mult(e));s.setLocationAtPoint(s.renderWorldCopies?n.wrap():n,d)}a._fireMoveEvents(o)},function(){t.delayEndEvents?a._onEaseEnd=setTimeout(function(){return a._afterEase(o)},t.delayEndEvents):a._afterEase(o)},t),this},t.prototype._prepareEase=function(t,e){this.moving=!0,e||this.fire("movestart",t),this.zooming&&this.fire("zoomstart",t),this.pitching&&this.fire("pitchstart",t)},t.prototype._fireMoveEvents=function(t){this.fire("move",t),this.zooming&&this.fire("zoom",t),this.rotating&&this.fire("rotate",t),this.pitching&&this.fire("pitch",t)},t.prototype._afterEase=function(t){var e=this.zooming,i=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,e&&this.fire("zoomend",t),i&&this.fire("pitchend",t),this.fire("moveend",t)},t.prototype.flyTo=function(t,n){function e(t){var e=(x*x-b*b+(t?-1:1)*E*E*w*w)/(2*(t?x:b)*E*w);return Math.log(Math.sqrt(e*e+1)-e)}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function r(t){return(Math.exp(t)+Math.exp(-t))/2}var o=this;this.stop(),t=I.extend({offset:[0,0],speed:1.2,curve:1.42,easing:I.ease},t);var a=this.transform,s=this.getZoom(),l=this.getBearing(),u=this.getPitch(),c="zoom"in t?I.clamp(+t.zoom,a.minZoom,a.maxZoom):s,h="bearing"in t?this._normalizeBearing(t.bearing,l):l,p="pitch"in t?+t.pitch:u,f=a.zoomScale(c-s),d=a.centerPoint.add(z.convert(t.offset)),m=a.pointLocation(d),y=D.convert(t.center||m);this._normalizeCenter(y);var g=a.project(m),v=a.project(y).sub(g),_=t.curve,b=Math.max(a.width,a.height),x=b/f,w=v.mag();if("minZoom"in t){var S=I.clamp(Math.min(t.minZoom,s,c),a.minZoom,a.maxZoom),C=b/a.zoomScale(S-s);_=Math.sqrt(C/w*2)}var E=_*_,T=e(0),k=function(t){return r(T)/r(T+_*t)},M=function(t){return b*((r(T)*(i(e=T+_*t)/r(e))-i(T))/E)/w;var e},P=(e(1)-T)/_;if(Math.abs(w)<1e-6||!isFinite(P)){if(Math.abs(b-x)<1e-6)return this.easeTo(t,n);var A=x<b?-1:1;P=Math.abs(Math.log(x/b))/_,M=function(){return 0},k=function(t){return Math.exp(A*_*t)}}if("duration"in t)t.duration=+t.duration;else{var L="screenSpeed"in t?+t.screenSpeed/_:+t.speed;t.duration=1e3*P/L}return t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this.zooming=!0,this.rotating=l!==h,this.pitching=p!==u,this._prepareEase(n,!1),this._ease(function(t){var e=t*P,i=1/k(e);a.zoom=s+a.scaleZoom(i),o.rotating&&(a.bearing=O(l,h,t)),o.pitching&&(a.pitch=O(u,p,t));var r=a.unproject(g.add(v.mult(M(e))).mult(i));a.setLocationAtPoint(a.renderWorldCopies?r.wrap():r,d),o._fireMoveEvents(n)},function(){return o._afterEase(n)},t),this},t.prototype.isEasing=function(){return!!this._isEasing},t.prototype.isMoving=function(){return this.moving},t.prototype.stop=function(){return this._onFrame&&this._finishAnimation(),this},t.prototype._ease=function(i,t,e){var r=this;!1===e.animate||0===e.duration?(i(1),t()):(this._easeStart=n.now(),this._isEasing=!0,this._easeOptions=e,this._startAnimation(function(t){var e=Math.min((n.now()-r._easeStart)/r._easeOptions.duration,1);i(r._easeOptions.easing(e)),1===e&&r.stop()},function(){r._isEasing=!1,t()}))},t.prototype._updateCamera=function(){this._onFrame&&this._onFrame(this.transform)},t.prototype._startAnimation=function(t,e){return void 0===e&&(e=function(){}),this.stop(),this._onFrame=t,this._finishFn=e,this._update(),this},t.prototype._finishAnimation=function(){delete this._onFrame;var t=this._finishFn;delete this._finishFn,t.call(this)},t.prototype._normalizeBearing=function(t,e){t=I.wrap(t,-180,180);var i=Math.abs(t-e);return Math.abs(t-360-e)<i&&(t-=360),Math.abs(t+360-e)<i&&(t+=360),t},t.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=180<i?-360:i<-180?360:0}},t}(r);e.exports=o},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../style-spec/util/interpolate":158,"../util/browser":252,"../util/evented":260,"../util/util":275,"@mapbox/point-geometry":4}],232:[function(t,e,i){"use strict";var r=t("../../util/dom"),n=t("../../util/util"),o=t("../../util/config"),a=function(t){this.options=t,n.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};a.prototype.getDefaultPosition=function(){return"bottom-right"},a.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},a.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var r=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:o.ACCESS_TOKEN}];if(t){var e=r.reduce(function(t,e,i){return e.value&&(t+=e.key+"="+e.value+(i<r.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+e+(this._map._hash?this._map._hash.getHashString(!0):"")}},a.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},a.prototype._updateAttributions=function(){if(this._map.style){var r=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var e=this._map.style.sourceCaches;for(var i in e){var n=e[i].getSource();n.attribution&&r.indexOf(n.attribution)<0&&r.push(n.attribution)}r.sort(function(t,e){return t.length-e.length}),(r=r.filter(function(t,e){for(var i=e+1;i<r.length;i++)if(0<=r[i].indexOf(t))return!1;return!0})).length?(this._container.innerHTML=r.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},a.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},e.exports=a},{"../../util/config":256,"../../util/dom":259,"../../util/util":275}],233:[function(t,e,i){"use strict";var r=t("../../util/dom"),n=t("../../util/util"),o=t("../../util/window"),a=function(){this._fullscreen=!1,n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};a.prototype.onAdd=function(t){return this._map=t,this._mapContainer=this._map.getContainer(),this._container=r.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map=null,o.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._checkFullscreenSupport=function(){return!!(o.document.fullscreenEnabled||o.document.mozFullScreenEnabled||o.document.msFullscreenEnabled||o.document.webkitFullscreenEnabled)},a.prototype._setupUI=function(){var t=this._fullscreenButton=r.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);t.setAttribute("aria-label","Toggle fullscreen"),t.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.document.addEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){(o.document.fullscreenElement||o.document.mozFullScreenElement||o.document.webkitFullscreenElement||o.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},a.prototype._onClickFullscreen=function(){this._isFullscreen()?o.document.exitFullscreen?o.document.exitFullscreen():o.document.mozCancelFullScreen?o.document.mozCancelFullScreen():o.document.msExitFullscreen?o.document.msExitFullscreen():o.document.webkitCancelFullScreen&&o.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},e.exports=a},{"../../util/dom":259,"../../util/util":275,"../../util/window":254}],234:[function(t,e,i){"use strict";var r,n=t("../../util/evented"),o=t("../../util/dom"),a=t("../../util/window"),s=t("../../util/util"),l=t("../../geo/lng_lat"),u=t("../marker"),c={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},h="mapboxgl-ctrl",p=function(e){function t(t){e.call(this),this.options=s.extend({},c,t),s.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.onAdd=function(t){return this._map=t,this._container=o.create("div",h+" "+h+"-group"),e=this._setupUI,void 0!==r?e(r):void 0!==a.navigator.permissions?a.navigator.permissions.query({name:"geolocation"}).then(function(t){r="denied"!==t.state,e(r)}):(r=!!a.navigator.geolocation,e(r)),this._container;var e},t.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),o.remove(this._container),this._map=void 0},t.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",t),this._finish()},t.prototype._updateCamera=function(t){var e=new l(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy;this._map.fitBounds(e.toBounds(i),this.options.fitBoundsOptions,{geolocateSource:!0})},t.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},t.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",t),this._finish()},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},t.prototype._setupUI=function(t){var e=this;!1!==t&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=o.create("button",h+"-icon "+h+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new u(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(t){t.geolocateSource||"ACTIVE_LOCK"!==e._watchState||(e._watchState="BACKGROUND",e._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),e._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),e.fire("trackuserlocationend"))}))},t.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=a.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else a.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},t.prototype._clearWatch=function(){a.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},t}(n);e.exports=p},{"../../geo/lng_lat":62,"../../util/dom":259,"../../util/evented":260,"../../util/util":275,"../../util/window":254,"../marker":248}],235:[function(t,e,i){"use strict";var r=t("../../util/dom"),n=t("../../util/util"),o=function(){n.bindAll(["_updateLogo"],this)};o.prototype.onAdd=function(t){this._map=t,this._container=r.create("div","mapboxgl-ctrl");var e=r.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},o.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo)},o.prototype.getDefaultPosition=function(){return"bottom-left"},o.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},o.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},e.exports=o},{"../../util/dom":259,"../../util/util":275}],236:[function(t,e,i){"use strict";var n=t("../../util/dom"),r=t("../../util/util"),o=t("../handler/drag_rotate"),a={showCompass:!0,showZoom:!0},s=function(t){var e=this;this.options=r.extend({},a,t),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return e._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return e._map.zoomOut()})),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return e._map.resetNorth()}),this._compassArrow=n.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};s.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},s.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new o(t,{button:"left",element:this._compass}),this._handler.enable()),this._container},s.prototype.onRemove=function(){n.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler),delete this._map},s.prototype._createButton=function(t,e,i){var r=n.create("button",t,this._container);return r.type="button",r.setAttribute("aria-label",e),r.addEventListener("click",i),r},e.exports=s},{"../../util/dom":259,"../../util/util":275,"../handler/drag_rotate":242}],237:[function(t,e,i){"use strict";function r(t,e,i){var r,n,o,a,s,l,u=i&&i.maxWidth||100,c=t._container.clientHeight/2,h=(r=t.unproject([0,c]),n=t.unproject([u,c]),o=Math.PI/180,a=r.lat*o,s=n.lat*o,l=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((n.lng-r.lng)*o),6371e3*Math.acos(Math.min(l,1)));if(i&&"imperial"===i.unit){var p=3.2808*h;5280<p?d(e,u,p/5280,"mi"):d(e,u,p,"ft")}else if(i&&"nautical"===i.unit){var f=h/1852;d(e,u,f,"nm")}else d(e,u,h,"m")}function d(t,e,i,r){var n,o,a,s=(n=i,(o=Math.pow(10,(""+Math.floor(n)).length-1))*(a=10<=(a=n/o)?10:5<=a?5:3<=a?3:2<=a?2:1)),l=s/i;"m"===r&&1e3<=s&&(s/=1e3,r="km"),t.style.width=e*l+"px",t.innerHTML=s+r}var n=t("../../util/dom"),o=t("../../util/util"),a=function(t){this.options=t,o.bindAll(["_onMove"],this)};a.prototype.getDefaultPosition=function(){return"bottom-left"},a.prototype._onMove=function(){r(this._map,this._container,this.options)},a.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},a.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},e.exports=a},{"../../util/dom":259,"../../util/util":275}],238:[function(t,e,i){},{}],239:[function(t,e,i){"use strict";var s=t("../../util/dom"),n=t("../../geo/lng_lat_bounds"),r=t("../../util/util"),o=t("../../util/window"),a=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),r.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};a.prototype.isEnabled=function(){return!!this._enabled},a.prototype.isActive=function(){return!!this._active},a.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},a.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},a.prototype._onMouseDown=function(t){t.shiftKey&&0===t.button&&(o.document.addEventListener("mousemove",this._onMouseMove,!1),o.document.addEventListener("keydown",this._onKeyDown,!1),o.document.addEventListener("mouseup",this._onMouseUp,!1),s.disableDrag(),this._startPos=s.mousePos(this._el,t),this._active=!0)},a.prototype._onMouseMove=function(t){var e=this._startPos,i=s.mousePos(this._el,t);this._box||(this._box=s.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(e.x,i.x),n=Math.max(e.x,i.x),o=Math.min(e.y,i.y),a=Math.max(e.y,i.y);s.setTransform(this._box,"translate("+r+"px,"+o+"px)"),this._box.style.width=n-r+"px",this._box.style.height=a-o+"px"},a.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,i=s.mousePos(this._el,t),r=(new n).extend(this._map.unproject(e)).extend(this._map.unproject(i));this._finish(),e.x===i.x&&e.y===i.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(r,{linear:!0}).fire("boxzoomend",{originalEvent:t,boxZoomBounds:r})}},a.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},a.prototype._finish=function(){this._active=!1,o.document.removeEventListener("mousemove",this._onMouseMove,!1),o.document.removeEventListener("keydown",this._onKeyDown,!1),o.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(s.remove(this._box),this._box=null),s.enableDrag()},a.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},e.exports=a},{"../../geo/lng_lat_bounds":63,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],240:[function(t,e,i){"use strict";var r=t("../../util/util"),n=function(t){this._map=t,r.bindAll(["_onDblClick","_onZoomEnd"],this)};n.prototype.isEnabled=function(){return!!this._enabled},n.prototype.isActive=function(){return!!this._active},n.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},n.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},n.prototype._onDblClick=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},n.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)},e.exports=n},{"../../util/util":275}],241:[function(t,e,i){"use strict";var r=t("../../util/dom"),n=t("../../util/util"),o=t("../../util/window"),a=t("../../util/browser"),p=n.bezier(0,0,.3,1),s=function(t){this._map=t,this._el=t.getCanvasContainer(),n.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp","_onDragFrame","_onDragFinished"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),r.addEventListener(this._el,"mousedown",this._onDown),r.addEventListener(this._el,"touchstart",this._onDown,{passive:!1}),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),r.removeEventListener(this._el,"mousedown",this._onDown),r.removeEventListener(this._el,"touchstart",this._onDown,{passive:!1}),this._enabled=!1)},s.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(r.addEventListener(o.document,"touchmove",this._onMove,{passive:!1}),r.addEventListener(o.document,"touchend",this._onTouchEnd)):(r.addEventListener(o.document,"mousemove",this._onMove),r.addEventListener(o.document,"mouseup",this._onMouseUp)),r.addEventListener(o,"blur",this._onMouseUp),this._active=!1,this._previousPos=r.mousePos(this._el,t),this._inertia=[[a.now(),this._previousPos]])},s.prototype._onMove=function(t){if(!this._ignoreEvent(t)){(this._lastMoveEvent=t).preventDefault();var e=r.mousePos(this._el,t);if(this._drainInertiaBuffer(),this._inertia.push([a.now(),e]),!this._previousPos)return void(this._previousPos=e);this._pos=e,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()}},s.prototype._onDragFrame=function(t){var e=this._lastMoveEvent;e&&(t.setLocationAtPoint(t.pointLocation(this._previousPos),this._pos),this._fireEvent("drag",e),this._fireEvent("move",e),this._previousPos=this._pos,delete this._lastMoveEvent)},s.prototype._onDragFinished=function(t){var e=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,delete this._pos,this._fireEvent("dragend",t),this._drainInertiaBuffer();var i=function(){e._map.moving=!1,e._fireEvent("moveend",t)},r=this._inertia;if(r.length<2)return void i();var n=r[r.length-1],o=r[0],a=n[1].sub(o[1]),s=(n[0]-o[0])/1e3;if(0===s||n[1].equals(o[1]))return void i();var l=a.mult(.3/s),u=l.mag();1400<u&&(u=1400,l._unit()._mult(u));var c=u/750,h=l.mult(-c/2);this._map.panBy(h,{duration:1e3*c,easing:p,noMoveStart:!0},{originalEvent:t})}},s.prototype._onUp=function(t){this._onDragFinished(t)},s.prototype._onMouseUp=function(t){this._ignoreEvent(t)||(this._onUp(t),r.removeEventListener(o.document,"mousemove",this._onMove),r.removeEventListener(o.document,"mouseup",this._onMouseUp),r.removeEventListener(o,"blur",this._onMouseUp))},s.prototype._onTouchEnd=function(t){this._ignoreEvent(t)||(this._onUp(t),r.removeEventListener(o.document,"touchmove",this._onMove,{passive:!1}),r.removeEventListener(o.document,"touchend",this._onTouchEnd))},s.prototype._fireEvent=function(t,e){return this._map.fire(t,e?{originalEvent:e}:{})},s.prototype._ignoreEvent=function(t){var e=this._map;return!(!e.boxZoom||!e.boxZoom.isActive())||!(!e.dragRotate||!e.dragRotate.isActive())||(t.touches?1<t.touches.length:!!t.ctrlKey||"mousemove"!==t.type&&t.button&&0!==t.button)},s.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=a.now();0<t.length&&160<e-t[0][0];)t.shift()},e.exports=s},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],242:[function(t,e,i){"use strict";var r=t("../../util/dom"),n=t("../../util/util"),o=t("../../util/window"),c=t("../../util/browser"),m=n.bezier(0,0,.25,1),a=function(t,e){this._map=t,this._el=e.element||t.getCanvasContainer(),this._button=e.button||"right",this._bearingSnap=e.bearingSnap||0,this._pitchWithRotate=!1!==e.pitchWithRotate,n.bindAll(["_onDown","_onMove","_onUp","_onDragFrame","_onDragFinished"],this)};a.prototype.isEnabled=function(){return!!this._enabled},a.prototype.isActive=function(){return!!this._active},a.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},a.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},a.prototype._onDown=function(t){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var e=t.ctrlKey?0:2,i=t.button;if(void 0!==o.InstallTrigger&&2===t.button&&t.ctrlKey&&0<=o.navigator.platform.toUpperCase().indexOf("MAC")&&(i=0),i!==e)return}else if(t.ctrlKey||0!==t.button)return;r.disableDrag(),o.document.addEventListener("mousemove",this._onMove,{capture:!0}),o.document.addEventListener("mouseup",this._onUp),o.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[c.now(),this._map.getBearing()]],this._previousPos=r.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},a.prototype._onMove=function(t){this._lastMoveEvent=t;var e=r.mousePos(this._el,t);this._previousPos?(this._pos=e,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()):this._previousPos=e},a.prototype._onUp=function(t){o.document.removeEventListener("mousemove",this._onMove,{capture:!0}),o.document.removeEventListener("mouseup",this._onUp),o.removeEventListener("blur",this._onUp),r.enableDrag(),this._onDragFinished(t)},a.prototype._onDragFrame=function(t){var e=this._lastMoveEvent;if(e){var i=this._previousPos,r=this._pos,n=.8*(i.x-r.x),o=-.5*(i.y-r.y),a=t.bearing-n,s=t.pitch-o,l=this._inertia,u=l[l.length-1];this._drainInertiaBuffer(),l.push([c.now(),this._map._normalizeBearing(a,u[1])]),t.bearing=a,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.pitch=s),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._previousPos=this._pos}},a.prototype._onDragFinished=function(t){var e=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,this._fireEvent("rotateend",t),this._drainInertiaBuffer();var i=this._map,r=i.getBearing(),n=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?i.resetNorth({noMoveStart:!0},{originalEvent:t}):(e._map.moving=!1,e._fireEvent("moveend",t)),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(n.length<2)return void o();var a=n[0],s=n[n.length-1],l=n[n.length-2],u=i._normalizeBearing(r,l[1]),c=s[1]-a[1],h=c<0?-1:1,p=(s[0]-a[0])/1e3;if(0===c||0===p)return void o();var f=Math.abs(c*(.25/p));180<f&&(f=180);var d=f/180;u+=h*f*(d/2),Math.abs(i._normalizeBearing(u,0))<this._bearingSnap&&(u=i._normalizeBearing(0,u)),i.rotateTo(u,{duration:1e3*d,easing:m,noMoveStart:!0},{originalEvent:t})}},a.prototype._fireEvent=function(t,e){return this._map.fire(t,e?{originalEvent:e}:{})},a.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=c.now();0<t.length&&160<e-t[0][0];)t.shift()},e.exports=a},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],243:[function(t,e,i){"use strict";function u(t){return t*(2-t)}var r=t("../../util/util"),n=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onKeyDown"],this)};n.prototype.isEnabled=function(){return!!this._enabled},n.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},n.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},n.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,i=0,r=0,n=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),n=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),n=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),l={duration:300,delayEndEvents:500,easing:u,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*i,pitch:a.getPitch()+10*r,offset:[100*-n,100*-o],center:a.getCenter()};a.easeTo(l,{originalEvent:t})}},e.exports=n},{"../../util/util":275}],244:[function(t,e,i){"use strict";var r=t("../../util/dom"),s=t("../../util/util"),l=t("../../util/browser"),n=t("../../util/window"),a=t("../../style-spec/util/interpolate").number,o=t("../../geo/lng_lat"),u=4.000244140625,c=n.navigator.userAgent.toLowerCase(),h=-1!==c.indexOf("firefox"),p=-1!==c.indexOf("safari")&&-1===c.indexOf("chrom"),f=function(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,s.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};f.prototype.isEnabled=function(){return!!this._enabled},f.prototype.isActive=function(){return!!this._active},f.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},f.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},f.prototype._onWheel=function(t){var e=0;"wheel"===t.type?(e=t.deltaY,h&&t.deltaMode===n.WheelEvent.DOM_DELTA_PIXEL&&(e/=l.devicePixelRatio),t.deltaMode===n.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,p&&(e/=3));var i=l.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==e&&e%u==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":400<r?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this.isActive()||this._start(t)),t.preventDefault()},f.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},f.prototype._start=function(t){if(this._delta){this._active=!0,this._map.moving=!0,this._map.zooming=!0,this._map.fire("movestart",{originalEvent:t}),this._map.fire("zoomstart",{originalEvent:t}),clearTimeout(this._finishTimeout);var e=r.mousePos(this._el,t);this._around=o.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(e)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._map._startAnimation(this._onScrollFrame,this._onScrollFinished)}},f.prototype._onScrollFrame=function(t){if(this.isActive()){if(0!==this._delta){var e="wheel"===this._type&&Math.abs(this._delta)>u?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==i&&(i=1/i);var r="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(r*i))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}if("wheel"===this._type){var n=Math.min((l.now()-this._lastWheelEventTime)/200,1),o=this._easing(n);t.zoom=a(this._startZoom,this._targetZoom,o),1===n&&this._map.stop()}else t.zoom=this._targetZoom,this._map.stop();t.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire("move",{originalEvent:this._lastWheelEvent}),this._map.fire("zoom",{originalEvent:this._lastWheelEvent})}},f.prototype._onScrollFinished=function(){var t=this;this.isActive()&&(this._active=!1,this._finishTimeout=setTimeout(function(){t._map.moving=!1,t._map.zooming=!1,t._map.fire("zoomend"),t._map.fire("moveend"),delete t._targetZoom},200))},f.prototype._smoothOutEasing=function(t){var e=s.ease;if(this._prevEase){var i=this._prevEase,r=(l.now()-i.start)/i.duration,n=i.easing(r+.01)-i.easing(r),o=.27/Math.sqrt(n*n+1e-4)*.01,a=Math.sqrt(.0729-o*o);e=s.bezier(o,a,.25,1)}return this._prevEase={start:l.now(),duration:t,easing:e},e},e.exports=f},{"../../geo/lng_lat":62,"../../style-spec/util/interpolate":158,"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],245:[function(t,e,i){"use strict";var f=t("../../util/dom"),r=t("../../util/util"),d=t("../../util/window"),c=t("../../util/browser"),m=r.bezier(0,0,.15,1),n=function(t){this._map=t,this._el=t.getCanvasContainer(),r.bindAll(["_onStart","_onMove","_onEnd"],this)};n.prototype.isEnabled=function(){return!!this._enabled},n.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),f.addEventListener(this._el,"touchstart",this._onStart,{passive:!1}),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},n.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),f.removeEventListener(this._el,"touchstart",this._onStart,{passive:!1}),this._enabled=!1)},n.prototype.disableRotation=function(){this._rotationDisabled=!0},n.prototype.enableRotation=function(){this._rotationDisabled=!1},n.prototype._onStart=function(t){if(2===t.touches.length){var e=f.mousePos(this._el,t.touches[0]),i=f.mousePos(this._el,t.touches[1]);this._startVec=e.sub(i),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],f.addEventListener(d.document,"touchmove",this._onMove,{passive:!1}),f.addEventListener(d.document,"touchend",this._onEnd)}},n.prototype._onMove=function(t){if(2===t.touches.length){var e=f.mousePos(this._el,t.touches[0]),i=f.mousePos(this._el,t.touches[1]),r=e.add(i).div(2),n=e.sub(i),o=n.mag()/this._startVec.mag(),a=this._rotationDisabled?0:180*n.angleWith(this._startVec)/Math.PI,s=this._map;if(this._gestureIntent){var l={duration:0,around:s.unproject(r)};"rotate"===this._gestureIntent&&(l.bearing=this._startBearing+a),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(l.zoom=s.transform.scaleZoom(this._startScale*o)),s.stop(),this._drainInertiaBuffer(),this._inertia.push([c.now(),o,r]),s.easeTo(l,{originalEvent:t})}else{var u=.15<Math.abs(1-o);10<Math.abs(a)?this._gestureIntent="rotate":u&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=n,this._startScale=s.transform.scale,this._startBearing=s.transform.bearing)}t.preventDefault()}},n.prototype._onEnd=function(t){f.removeEventListener(d.document,"touchmove",this._onMove,{passive:!1}),f.removeEventListener(d.document,"touchend",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,i=this._map;if(e.length<2)i.snapToNorth({},{originalEvent:t});else{var r=e[e.length-1],n=e[0],o=i.transform.scaleZoom(this._startScale*r[1]),a=i.transform.scaleZoom(this._startScale*n[1]),s=o-a,l=(r[0]-n[0])/1e3,u=r[2];if(0!==l&&o!==a){var c=.15*s/l;2.5<Math.abs(c)&&(c=0<c?2.5:-2.5);var h=1e3*Math.abs(c/(12*.15)),p=o+c*h/2e3;p<0&&(p=0),i.easeTo({zoom:p,duration:h,easing:m,around:this._aroundCenter?i.getCenter():i.unproject(u)},{originalEvent:t})}else i.snapToNorth({},{originalEvent:t})}},n.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=c.now();2<t.length&&160<e-t[0][0];)t.shift()},e.exports=n},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],246:[function(t,e,i){"use strict";var r=t("../util/util"),n=t("../util/window"),o=t("../util/throttle"),a=function(){r.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=o(this._updateHashUnthrottled.bind(this),300)};a.prototype.addTo=function(t){return this._map=t,n.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},a.prototype.remove=function(){return n.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},a.prototype.getHashString=function(t){var e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,r),o=Math.round(e.lng*n)/n,a=Math.round(e.lat*n)/n,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=t?"#/"+o+"/"+a+"/"+i:"#"+i+"/"+a+"/"+o,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},a.prototype._onHashChange=function(){var t=n.location.hash.replace("#","").split("/");return 3<=t.length&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},a.prototype._updateHashUnthrottled=function(){var t=this.getHashString();n.history.replaceState("","",t)},e.exports=a},{"../util/throttle":272,"../util/util":275,"../util/window":254}],247:[function(t,e,i){"use strict";function r(t){t.parentNode&&t.parentNode.removeChild(t)}var l=t("../util/util"),p=t("../util/browser"),n=t("../util/window"),o=t("../util/window"),f=o.HTMLImageElement,a=o.HTMLElement,u=t("../util/dom"),c=t("../util/ajax"),h=t("../style/style"),d=t("../style/evaluation_parameters"),m=t("../render/painter"),y=t("../geo/transform"),g=t("./hash"),v=t("./bind_handlers"),s=t("./camera"),_=t("../geo/lng_lat"),b=t("../geo/lng_lat_bounds"),x=t("@mapbox/point-geometry"),w=t("./control/attribution_control"),S=t("./control/logo_control"),C=t("@mapbox/mapbox-gl-supported"),E=t("../util/image"),T=E.RGBAImage;t("./events");var k={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},M=function(s){function t(t){if(null!=(t=l.extend({},k,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var e=new y(t.minZoom,t.maxZoom,t.renderWorldCopies);s.call(this,e,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming;var i=t.transformRequest;if(this._transformRequest=i?function(t,e){return i(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof t.container){var r=n.document.getElementById(t.container);if(!r)throw new Error("Container '"+t.container+"' not found.");this._container=r}else{if(!(t.container instanceof a))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}t.maxBounds&&this.setMaxBounds(t.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==n&&(n.addEventListener("online",this._onWindowOnline,!1),n.addEventListener("resize",this._onWindowResize,!1)),v(this,t),this._hash=t.hash&&(new g).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new w),this.addControl(new S,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}s&&(t.__proto__=s),t.prototype=Object.create(s&&s.prototype);var e={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return(t.prototype.constructor=t).prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var i=t.onAdd(this),r=this._controlPositions[e];return-1!==e.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this},t.prototype.removeControl=function(t){return t.onRemove(this),this},t.prototype.resize=function(){var t=this._containerDimensions(),e=t[0],i=t[1];return this._resizeCanvas(e,i),this.transform.resize(e,i),this.painter.resize(e,i),this.fire("movestart").fire("move").fire("resize").fire("moveend")},t.prototype.getBounds=function(){var t=new b(this.transform.pointLocation(new x(0,this.transform.height)),this.transform.pointLocation(new x(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new x(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new x(0,this.transform.size.y)))),t},t.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new b([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},t.prototype.setMaxBounds=function(t){if(t){var e=b.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!=t||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},t.prototype.setMinZoom=function(t){if(0<=(t=null==t?0:t)&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(t){return this.transform.locationPoint(_.convert(t))},t.prototype.unproject=function(t){return this.transform.pointLocation(x.convert(t))},t.prototype.on=function(r,n,o){var a=this;if(void 0===o)return s.prototype.on.call(this,r,n);var t=function(){if("mouseenter"===r||"mouseover"===r){var i=!1;return{layer:n,listener:o,delegates:{mousemove:function(t){var e=a.getLayer(n)?a.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length?i||(i=!0,o.call(a,l.extend({features:e},t,{type:r}))):i=!1},mouseout:function(){i=!1}}}}if("mouseleave"!==r&&"mouseout"!==r)return{layer:n,listener:o,delegates:(t={},t[r]=function(t){var e=a.getLayer(n)?a.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length&&o.call(a,l.extend({features:e},t))},t)};var t,e=!1;return{layer:n,listener:o,delegates:{mousemove:function(t){(a.getLayer(n)?a.queryRenderedFeatures(t.point,{layers:[n]}):[]).length?e=!0:e&&(e=!1,o.call(a,l.extend({},t,{type:r})))},mouseout:function(t){e&&(e=!1,o.call(a,l.extend({},t,{type:r})))}}}}();for(var e in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[r]=this._delegatedListeners[r]||[],this._delegatedListeners[r].push(t),t.delegates)a.on(e,t.delegates[e]);return this},t.prototype.off=function(t,e,i){if(void 0===i)return s.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var r=this._delegatedListeners[t],n=0;n<r.length;n++){var o=r[n];if(o.layer===e&&o.listener===i){for(var a in o.delegates)this.off(a,o.delegates[a]);return r.splice(n,1),this}}return this},t.prototype.queryRenderedFeatures=function(t,e){return e=2===arguments.length?(t=arguments[0],arguments[1]):1===arguments.length&&((i=arguments[0])instanceof x||Array.isArray(i))?(t=arguments[0],{}):1===arguments.length?(t=void 0,arguments[0]):(t=void 0,{}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(t),e,this.transform.zoom,this.transform.angle):[];var i},t.prototype._makeQueryGeometry=function(t){var e,i=this;if(void 0===t&&(t=[x.convert([0,0]),x.convert([this.transform.width,this.transform.height])]),t instanceof x||"number"==typeof t[0])e=[x.convert(t)];else{var r=[x.convert(t[0]),x.convert(t[1])];e=[r[0],new x(r[1].x,r[0].y),r[1],new x(r[0].x,r[1].y),r[0]]}return e=e.map(function(t){return i.transform.pointCoordinate(t)})},t.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},t.prototype.setStyle=function(t,e){if((!e||!1!==e.diff&&!e.localIdeographFontFamily)&&this.style&&t&&"object"==typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(t){l.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new h(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)):delete this.style,this},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},t.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire("error",{error:new Error("There is no source with ID '"+t+"'")}):e.loaded()},t.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e],r=i._tiles;for(var n in r){var o=r[n];if("loaded"!==o.state&&"errored"!==o.state)return!1}}return!0},t.prototype.addSourceType=function(t,e,i){return this.style.addSourceType(t,e,i)},t.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},t.prototype.getSource=function(t){return this.style.getSource(t)},t.prototype.addImage=function(t,e,i){void 0===i&&(i={});var r=i.pixelRatio;void 0===r&&(r=1);var n=i.sdf;if(void 0===n&&(n=!1),e instanceof f){var o=p.getImageData(e),a=o.width,s=o.height,l=o.data;this.style.addImage(t,{data:new T({width:a,height:s},l),pixelRatio:r,sdf:n})}else{if(void 0===e.width||void 0===e.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});var u=e.width,c=e.height,h=e.data;this.style.addImage(t,{data:new T({width:u,height:c},h.slice(0)),pixelRatio:r,sdf:n})}},t.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire("error",{error:new Error("Missing required image id")}),!1)},t.prototype.removeImage=function(t){this.style.removeImage(t)},t.prototype.loadImage=function(t,e){c.getImage(this._transformRequest(t,c.ResourceType.Image),e)},t.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},t.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},t.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},t.prototype.getLayer=function(t){return this.style.getLayer(t)},t.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},t.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0),this},t.prototype.getFilter=function(t){return this.style.getFilter(t)},t.prototype.setPaintProperty=function(t,e,i){return this.style.setPaintProperty(t,e,i),this._update(!0),this},t.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},t.prototype.setLayoutProperty=function(t,e,i){return this.style.setLayoutProperty(t,e,i),this._update(!0),this},t.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},t.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},t.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSContainer=u.create("div","mapboxgl-missing-css",t)).innerHTML="Missing Mapbox GL JS CSS";var e=this._canvasContainer=u.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=u.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var r=this._controlContainer=u.create("div","mapboxgl-control-container",t),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){n[t]=u.create("div","mapboxgl-ctrl-"+t,r)})},t.prototype._resizeCanvas=function(t,e){var i=n.devicePixelRatio||1;this._canvas.width=i*t,this._canvas.height=i*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},t.prototype._setupPainter=function(){var t=l.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},C.webGLContextAttributes),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);e?this.painter=new m(e,this.transform):this.fire("error",{error:new Error("Failed to initialize WebGL")})},t.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&(p.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:t})},t.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:t})},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},t.prototype._update=function(t){this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender())},t.prototype._render=function(){this._updateCamera();var t=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var e=this.transform.zoom,i=p.now();this.style.zoomHistory.update(e,i);var r=new d(e,{now:i,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),n=r.crossFadingFactor();1===n&&n===this._crossFadingFactor||(t=!0,this._crossFadingFactor=n),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming,fadeDuration:this._fadeDuration}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this.style&&(this.style.hasTransitions()||t)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove(),p.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==n&&(n.removeEventListener("resize",this._onWindowResize,!1),n.removeEventListener("online",this._onWindowOnline,!1));var t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),r(this._canvasContainer),r(this._controlContainer),r(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},t.prototype._rerender=function(){var t=this;this.style&&!this._frameId&&(this._frameId=p.frame(function(){t._frameId=null,t._render()}))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},e.showTileBoundaries.get=function(){return!!this._showTileBoundaries},e.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},e.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},e.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&((this._showCollisionBoxes=t)?this.style._generateCollisionBoxes():this._update())},e.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},e.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},e.repaint.get=function(){return!!this._repaint},e.repaint.set=function(t){this._repaint=t,this._update()},e.vertices.get=function(){return!!this._vertices},e.vertices.set=function(t){this._vertices=t,this._update()},t.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(t.dataType+"data",t)},t.prototype._onDataLoading=function(t){this.fire(t.dataType+"dataloading",t)},Object.defineProperties(t.prototype,e),t}(s);e.exports=M},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../geo/transform":64,"../render/painter":90,"../style/evaluation_parameters":182,"../style/style":190,"../util/ajax":251,"../util/browser":252,"../util/dom":259,"../util/image":263,"../util/util":275,"../util/window":254,"./bind_handlers":230,"./camera":231,"./control/attribution_control":232,"./control/logo_control":235,"./events":238,"./hash":246,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],248:[function(t,e,i){"use strict";var _=t("../util/dom"),r=t("../geo/lng_lat"),b=t("@mapbox/point-geometry"),n=t("../util/smart_wrap"),o=t("../util/util"),x=o.bindAll,a=function(t,e){if(x(["_update","_onMapClick"],this),!t){t=_.create("div");var i=_.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var r=_.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var n=_.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"fill-rule","nonzero");var o=_.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"transform","translate(3.0, 29.0)"),o.setAttributeNS(null,"fill","#000000");for(var a=0,s=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];a<s.length;a+=1){var l=s[a],u=_.createNS("http://www.w3.org/2000/svg","ellipse");u.setAttributeNS(null,"opacity","0.04"),u.setAttributeNS(null,"cx","10.5"),u.setAttributeNS(null,"cy","5.80029008"),u.setAttributeNS(null,"rx",l.rx),u.setAttributeNS(null,"ry",l.ry),o.appendChild(u)}var c=_.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill","#3FB1CE");var h=_.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(h);var p=_.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25"),p.setAttributeNS(null,"fill","#000000");var f=_.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),p.appendChild(f);var d=_.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");var m=_.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");var y=_.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");var g=_.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),m.appendChild(y),m.appendChild(g),n.appendChild(o),n.appendChild(c),n.appendChild(p),n.appendChild(d),n.appendChild(m),i.appendChild(n),t.appendChild(i);var v=[0,-14];e&&e.offset||(e?e.offset=v:e={offset:v})}this._offset=b.convert(e&&e.offset||[0,0]),t.classList.add("mapboxgl-marker"),this._element=t,this._popup=null};a.prototype.addTo=function(t){return this.remove(),(this._map=t).getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},a.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(t){return this._lngLat=r.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},a.prototype.getElement=function(){return this._element},a.prototype.setPopup=function(t){return this._popup&&(this._popup.remove(),this._popup=null),t&&("offset"in t.options||(t.options.offset=this._offset),this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)),this},a.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},a.prototype.getPopup=function(){return this._popup},a.prototype.togglePopup=function(){var t=this._popup;return t&&(t.isOpen()?t.remove():t.addTo(this._map)),this},a.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=n(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),_.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},a.prototype.getOffset=function(){return this._offset},a.prototype.setOffset=function(t){return this._offset=b.convert(t),this._update(),this},e.exports=a},{"../geo/lng_lat":62,"../util/dom":259,"../util/smart_wrap":270,"../util/util":275,"@mapbox/point-geometry":4}],249:[function(t,e,i){"use strict";var r=t("../util/util"),n=t("../util/evented"),u=t("../util/dom"),o=t("../geo/lng_lat"),c=t("@mapbox/point-geometry"),a=t("../util/window"),h=t("../util/smart_wrap"),s={closeButton:!0,closeOnClick:!0},l=function(e){function t(t){e.call(this),this.options=r.extend(Object.create(s),t),r.bindAll(["_update","_onClickClose"],this)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&u.remove(this._content),this._container&&(u.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(t){return this._lngLat=o.convert(t),this._pos=null,this._update(),this},t.prototype.setText=function(t){return this.setDOMContent(a.document.createTextNode(t))},t.prototype.setHTML=function(t){var e,i=a.document.createDocumentFragment(),r=a.document.createElement("body");for(r.innerHTML=t;e=r.firstChild;)i.appendChild(e);return this.setDOMContent(i)},t.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},t.prototype._createContent=function(){this._content&&u.remove(this._content),this._content=u.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=u.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},t.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=u.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=u.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=h(this._lngLat,this._pos,this._map.transform));var t=this._pos=this._map.project(this._lngLat),e=this.options.anchor,i=function t(e){if(e){if("number"==typeof e){var i=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new c(0,e),"top-left":new c(i,i),"top-right":new c(-i,i),bottom:new c(0,-e),"bottom-left":new c(i,-i),"bottom-right":new c(-i,-i),left:new c(e,0),right:new c(-e,0)}}if(e instanceof c||Array.isArray(e)){var r=c.convert(e);return{top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{top:c.convert(e.top||[0,0]),"top-left":c.convert(e["top-left"]||[0,0]),"top-right":c.convert(e["top-right"]||[0,0]),bottom:c.convert(e.bottom||[0,0]),"bottom-left":c.convert(e["bottom-left"]||[0,0]),"bottom-right":c.convert(e["bottom-right"]||[0,0]),left:c.convert(e.left||[0,0]),right:c.convert(e.right||[0,0])}}return t(new c(0,0))}(this.options.offset);if(!e){var r=this._container.offsetWidth,n=this._container.offsetHeight;e=t.y+i.bottom.y<n?["top"]:t.y>this._map.transform.height-n?["bottom"]:[],t.x<r/2?e.push("left"):t.x>this._map.transform.width-r/2&&e.push("right"),e=0===e.length?"bottom":e.join("-")}var o=t.add(i[e]).round(),a={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},s=this._container.classList;for(var l in a)s.remove("mapboxgl-popup-anchor-"+l);s.add("mapboxgl-popup-anchor-"+e),u.setTransform(this._container,a[e]+" translate("+o.x+"px,"+o.y+"px)")}},t.prototype._onClickClose=function(){this.remove()},t}(n);e.exports=l},{"../geo/lng_lat":62,"../util/dom":259,"../util/evented":260,"../util/smart_wrap":270,"../util/util":275,"../util/window":254,"@mapbox/point-geometry":4}],250:[function(t,e,i){"use strict";var r=t("./util"),n=t("./web_worker_transfer"),l=n.serialize,u=n.deserialize,o=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.callbackID=0,r.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};o.prototype.send=function(t,e,i,r){var n=i?this.mapId+":"+this.callbackID++:null;i&&(this.callbacks[n]=i);var o=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(n),data:l(e,o)},o)},o.prototype.receive=function(t){var e,r=this,i=t.data,n=i.id;if(!i.targetMapId||this.mapId===i.targetMapId){var o=function(t,e){var i=[];r.target.postMessage({sourceMapId:r.mapId,type:"<response>",id:String(n),error:t?String(t):null,data:l(e,i)},i)};if("<response>"===i.type)e=this.callbacks[i.id],delete this.callbacks[i.id],e&&i.error?e(new Error(i.error)):e&&e(null,u(i.data));else if(void 0!==i.id&&this.parent[i.type])this.parent[i.type](i.sourceMapId,u(i.data),o);else if(void 0!==i.id&&this.parent.getWorkerSource){var a=i.type.split("."),s=this.parent.getWorkerSource(i.sourceMapId,a[0]);s[a[1]](u(i.data),o)}else this.parent[i.type](u(i.data))}},o.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},e.exports=o},{"./util":275,"./web_worker_transfer":278}],251:[function(t,e,i){"use strict";function r(t){var e=new s.XMLHttpRequest;for(var i in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(i,t.headers[i]);return e.withCredentials="include"===t.credentials,e}var s=t("./window"),n={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};i.ResourceType=n,"function"==typeof Object.freeze&&Object.freeze(n);var o=function(i){function t(t,e){i.call(this,t),this.status=e}return i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t}(Error);i.getJSON=function(t,e){var i=r(t);return i.setRequestHeader("Accept","application/json"),i.onerror=function(){e(new Error(i.statusText))},i.onload=function(){if(200<=i.status&&i.status<300&&i.response){var t;try{t=JSON.parse(i.response)}catch(t){return e(t)}e(null,t)}else e(new o(i.statusText,i.status))},i.send(),i},i.getArrayBuffer=function(t,e){var i=r(t);return i.responseType="arraybuffer",i.onerror=function(){e(new Error(i.statusText))},i.onload=function(){var t=i.response;if(0===t.byteLength&&200===i.status)return e(new Error("http status 200 returned without content."));200<=i.status&&i.status<300&&i.response?e(null,{data:t,cacheControl:i.getResponseHeader("Cache-Control"),expires:i.getResponseHeader("Expires")}):e(new o(i.statusText,i.status))},i.send(),i},i.getImage=function(t,o){return i.getArrayBuffer(t,function(t,e){if(t)o(t);else if(e){var i=new s.Image,r=s.URL||s.webkitURL;i.onload=function(){o(null,i),r.revokeObjectURL(i.src)};var n=new s.Blob([new Uint8Array(e.data)],{type:"image/png"});i.cacheControl=e.cacheControl,i.expires=e.expires,i.src=e.data.byteLength?r.createObjectURL(n):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},i.getVideo=function(t,e){var i,r,n=s.document.createElement("video");n.onloadstart=function(){e(null,n)};for(var o=0;o<t.length;o++){var a=s.document.createElement("source");i=t[o],r=void 0,(r=s.document.createElement("a")).href=i,r.protocol===s.document.location.protocol&&r.host===s.document.location.host||(n.crossOrigin="Anonymous"),a.src=t[o],n.appendChild(a)}return n}},{"./window":254}],252:[function(t,e,i){"use strict";var r=t("./window"),n=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),o=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,a=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;e.exports={now:n,frame:function(t){return o(t)},cancelFrame:function(t){return a(t)},getImageData:function(t){var e=r.document.createElement("canvas"),i=e.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(0,0,t.width,t.height)},hardwareConcurrency:r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},supportsWebp:!1};var s=r.document.createElement("img");s.onload=function(){e.exports.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":254}],253:[function(t,e,i){"use strict";var r=t("webworkify"),n=t("../window"),o=n.URL.createObjectURL(new r(t("../../source/worker"),{bare:!0}));e.exports=function(){return new n.Worker(o)}},{"../../source/worker":118,"../window":254,webworkify:36}],254:[function(t,e,i){"use strict";e.exports=self},{}],255:[function(t,e,i){"use strict";function u(t,e){return e.area-t.area}var c=t("quickselect"),h=t("./util").calculateSignedArea;e.exports=function(t,e){var i=t.length;if(i<=1)return[t];for(var r,n,o=[],a=0;a<i;a++){var s=h(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===n&&(n=s<0),n===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),1<e)for(var l=0;l<o.length;l++)o[l].length<=e||(c(o[l],e,1,o[l].length-1,u),o[l]=o[l].slice(0,e));return o}},{"./util":275,quickselect:31}],256:[function(t,e,i){"use strict";e.exports={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null}},{}],257:[function(t,e,i){"use strict";var r=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};r.prototype.encode=function(t){return this._stringToNumber[t]},r.prototype.decode=function(t){return this._numberToString[t]},e.exports=r},{}],258:[function(t,e,i){"use strict";var a=t("./util"),s=t("./actor"),r=function(t,e){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var i=this.workerPool.acquire(this.id),r=0;r<i.length;r++){var n=i[r],o=new s(n,e,this.id);o.name="Worker "+r,this.actors.push(o)}};r.prototype.broadcast=function(i,r,t){t=t||function(){},a.asyncAll(this.actors,function(t,e){t.send(i,r,e)},t)},r.prototype.send=function(t,e,i,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,i),r},r.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},e.exports=r},{"./actor":250,"./util":275}],259:[function(t,e,i){"use strict";function r(t){for(var e=0;e<t.length;e++)if(t[e]in s)return t[e];return t[0]}var a=t("@mapbox/point-geometry"),n=t("./window");i.create=function(t,e,i){var r=n.document.createElement(t);return e&&(r.className=e),i&&i.appendChild(r),r},i.createNS=function(t,e){return n.document.createElementNS(t,e)};var o,s=n.document.documentElement.style,l=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){l&&(o=s[l],s[l]="none")},i.enableDrag=function(){l&&(s[l]=o)};var u=r(["transform","WebkitTransform"]),c=!(i.setTransform=function(t,e){t.style[u]=e});try{var h=Object.defineProperty({},"passive",{get:function(){c=!0}});n.addEventListener("test",h,h),n.removeEventListener("test",h,h)}catch(t){c=!1}i.addEventListener=function(t,e,i,r){void 0===r&&(r={}),"passive"in r&&c?t.addEventListener(e,i,r):t.addEventListener(e,i,r.capture)},i.removeEventListener=function(t,e,i,r){void 0===r&&(r={}),"passive"in r&&c?t.removeEventListener(e,i,r):t.removeEventListener(e,i,r.capture)};var p=function(t){t.preventDefault(),t.stopPropagation(),n.removeEventListener("click",p,!0)};i.suppressClick=function(){n.addEventListener("click",p,!0),n.setTimeout(function(){n.removeEventListener("click",p,!0)},0)},i.mousePos=function(t,e){var i=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new a(e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop)},i.touchPos=function(t,e){for(var i=t.getBoundingClientRect(),r=[],n="touchend"===e.type?e.changedTouches:e.touches,o=0;o<n.length;o++)r.push(new a(n[o].clientX-i.left-t.clientLeft,n[o].clientY-i.top-t.clientTop));return r},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}},{"./window":254,"@mapbox/point-geometry":4}],260:[function(t,e,i){"use strict";function r(t,e,i){i[t]=i[t]||[],i[t].push(e)}function u(t,e,i){if(i&&i[t]){var r=i[t].indexOf(e);-1!==r&&i[t].splice(r,1)}}var c=t("./util"),n=function(){};n.prototype.on=function(t,e){return this._listeners=this._listeners||{},r(t,e,this._listeners),this},n.prototype.off=function(t,e){return u(t,e,this._listeners),u(t,e,this._oneTimeListeners),this},n.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},r(t,e,this._oneTimeListeners),this},n.prototype.fire=function(t,e){if(this.listens(t)){e=c.extend({},e,{type:t,target:this});for(var i=this._listeners&&this._listeners[t]?this._listeners[t].slice():[],r=0,n=i;r<n.length;r+=1)n[r].call(this,e);for(var o=this._oneTimeListeners&&this._oneTimeListeners[t]?this._oneTimeListeners[t].slice():[],a=0,s=o;a<s.length;a+=1){var l=s[a];u(t,l,this._oneTimeListeners),l.call(this,e)}this._eventedParent&&this._eventedParent.fire(t,c.extend({},e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else c.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this},n.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&0<this._listeners[t].length||this._oneTimeListeners&&this._oneTimeListeners[t]&&0<this._oneTimeListeners[t].length||this._eventedParent&&this._eventedParent.listens(t)},n.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this},e.exports=n},{"./util":275}],261:[function(t,e,i){"use strict";function b(t,e){return e.max-t.max}function x(t,e,i,r){this.p=new S(t,e),this.h=i,this.d=function(t,e){for(var i=!1,r=1/0,n=0;n<e.length;n++)for(var o=e[n],a=0,s=o.length,l=s-1;a<s;l=a++){var u=o[a],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(i=!i),r=Math.min(r,h(t,u,c))}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var w=t("tinyqueue"),S=t("@mapbox/point-geometry"),h=t("./intersection_tests").distToSegmentSquared;e.exports=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var r=1/0,n=1/0,o=-1/0,a=-1/0,s=t[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<r)&&(r=u.x),(!l||u.y<n)&&(n=u.y),(!l||u.x>o)&&(o=u.x),(!l||u.y>a)&&(a=u.y)}var c=o-r,h=a-n,p=Math.min(c,h),f=p/2,d=new w(null,b);if(0===p)return new S(r,n);for(var m=r;m<o;m+=p)for(var y=n;y<a;y+=p)d.push(new x(m+f,y+f,f,t));for(var g=function(t){for(var e=0,i=0,r=0,n=t[0],o=0,a=n.length,s=a-1;o<a;s=o++){var l=n[o],u=n[s],c=l.x*u.y-u.x*l.y;i+=(l.x+u.x)*c,r+=(l.y+u.y)*c,e+=3*c}return new x(i/e,r/e,0,t)}(t),v=d.length;d.length;){var _=d.pop();(_.d>g.d||!g.d)&&(g=_,i&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,v)),_.max-g.d<=e||(f=_.h/2,d.push(new x(_.p.x-f,_.p.y-f,f,t)),d.push(new x(_.p.x+f,_.p.y-f,f,t)),d.push(new x(_.p.x-f,_.p.y+f,f,t)),d.push(new x(_.p.x+f,_.p.y+f,f,t)),v+=4)}return i&&(console.log("num probes: "+v),console.log("best distance: "+g.d)),g.p}},{"./intersection_tests":264,"@mapbox/point-geometry":4,tinyqueue:33}],262:[function(t,e,i){"use strict";var r,n=t("./worker_pool");e.exports=function(){return r||(r=new n),r}},{"./worker_pool":279}],263:[function(t,e,i){"use strict";function a(t,e,i,r){var n=e.width,o=e.height;if(r){if(r.length!==n*o*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(n*o*i);return t.width=n,t.height=o,t.data=r,t}function r(t,e,i){var r=e.width,n=e.height;if(r!==t.width||n!==t.height){var o=a({},{width:r,height:n},i);s(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,n)},i),t.width=r,t.height=n,t.data=o.data}}function s(t,e,i,r,n,o){if(0===n.width||0===n.height)return e;if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<n.height;l++)for(var u=((i.y+l)*t.width+i.x)*o,c=((r.y+l)*e.width+r.x)*o,h=0;h<n.width*o;h++)s[c+h]=a[u+h];return e}var n=t("./web_worker_transfer"),o=n.register,l=function(t,e){a(this,t,1,e)};l.prototype.resize=function(t){r(this,t,1)},l.prototype.clone=function(){return new l({width:this.width,height:this.height},new Uint8Array(this.data))},l.copy=function(t,e,i,r,n){s(t,e,i,r,n,1)};var u=function(t,e){a(this,t,4,e)};u.prototype.resize=function(t){r(this,t,4)},u.prototype.clone=function(){return new u({width:this.width,height:this.height},new Uint8Array(this.data))},u.copy=function(t,e,i,r,n){s(t,e,i,r,n,4)},o("AlphaImage",l),o("RGBAImage",u),e.exports={AlphaImage:l,RGBAImage:u}},{"./web_worker_transfer":278}],264:[function(t,e,i){"use strict";function l(t,e,i){if(1<t.length){if(u(t,e))return!0;for(var r=0;r<e.length;r++)if(c(e[r],t,i))return!0}for(var n=0;n<t.length;n++)if(c(t[n],e,i))return!0;return!1}function u(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var r=t[i],n=t[i+1],o=0;o<e.length-1;o++){var a=e[o],s=e[o+1];if(u=n,f(l=r,c=a,h=s)!==f(u,c,h)&&f(l,u,c)!==f(l,u,h))return!0}var l,u,c,h;return!1}function c(t,e,i){var r=i*i;if(1===e.length)return t.distSqr(e[0])<r;for(var n=1;n<e.length;n++)if(o(t,e[n-1],e[n])<r)return!0;return!1}function o(t,e,i){var r=e.distSqr(i);if(0===r)return t.distSqr(e);var n=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/r;return n<0?t.distSqr(e):1<n?t.distSqr(i):t.distSqr(i.sub(e)._mult(n)._add(e))}function h(t,e){for(var i,r,n,o=!1,a=0;a<t.length;a++){i=t[a];for(var s=0,l=i.length-1;s<i.length;l=s++)r=i[s],n=i[l],r.y>e.y!=n.y>e.y&&e.x<(n.x-r.x)*(e.y-r.y)/(n.y-r.y)+r.x&&(o=!o)}return o}function p(t,e){for(var i=!1,r=0,n=t.length-1;r<t.length;n=r++){var o=t[r],a=t[n];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}var r=t("./util"),f=r.isCounterClockwise;e.exports={multiPolygonIntersectsBufferedMultiPoint:function(t,e,i){for(var r=0;r<t.length;r++)for(var n=t[r],o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];if(p(n,l))return!0;if(c(l,n,i))return!0}return!1},multiPolygonIntersectsMultiPolygon:function(t,e){if(1===t.length&&1===t[0].length)return h(e,t[0][0]);for(var i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.length;n++)if(h(t,r[n]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(h(e,a[s]))return!0;for(var l=0;l<e.length;l++)if(u(a,e[l]))return!0}return!1},multiPolygonIntersectsBufferedMultiLine:function(t,e,i){for(var r=0;r<e.length;r++)for(var n=e[r],o=0;o<t.length;o++){var a=t[o];if(3<=a.length)for(var s=0;s<n.length;s++)if(p(a,n[s]))return!0;if(l(a,n,i))return!0}return!1},polygonIntersectsPolygon:function(t,e){for(var i=0;i<t.length;i++)if(p(e,t[i]))return!0;for(var r=0;r<e.length;r++)if(p(t,e[r]))return!0;return!!u(t,e)},distToSegmentSquared:o}},{"./util":275}],265:[function(t,e,i){"use strict";e.exports={"Latin-1 Supplement":function(t){return 128<=t&&t<=255},Arabic:function(t){return 1536<=t&&t<=1791},"Arabic Supplement":function(t){return 1872<=t&&t<=1919},"Arabic Extended-A":function(t){return 2208<=t&&t<=2303},"Hangul Jamo":function(t){return 4352<=t&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return 5120<=t&&t<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(t){return 6320<=t&&t<=6399},"General Punctuation":function(t){return 8192<=t&&t<=8303},"Letterlike Symbols":function(t){return 8448<=t&&t<=8527},"Number Forms":function(t){return 8528<=t&&t<=8591},"Miscellaneous Technical":function(t){return 8960<=t&&t<=9215},"Control Pictures":function(t){return 9216<=t&&t<=9279},"Optical Character Recognition":function(t){return 9280<=t&&t<=9311},"Enclosed Alphanumerics":function(t){return 9312<=t&&t<=9471},"Geometric Shapes":function(t){return 9632<=t&&t<=9727},"Miscellaneous Symbols":function(t){return 9728<=t&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return 11008<=t&&t<=11263},"CJK Radicals Supplement":function(t){return 11904<=t&&t<=12031},"Kangxi Radicals":function(t){return 12032<=t&&t<=12255},"Ideographic Description Characters":function(t){return 12272<=t&&t<=12287},"CJK Symbols and Punctuation":function(t){return 12288<=t&&t<=12351},Hiragana:function(t){return 12352<=t&&t<=12447},Katakana:function(t){return 12448<=t&&t<=12543},Bopomofo:function(t){return 12544<=t&&t<=12591},"Hangul Compatibility Jamo":function(t){return 12592<=t&&t<=12687},Kanbun:function(t){return 12688<=t&&t<=12703},"Bopomofo Extended":function(t){return 12704<=t&&t<=12735},"CJK Strokes":function(t){return 12736<=t&&t<=12783},"Katakana Phonetic Extensions":function(t){return 12784<=t&&t<=12799},"Enclosed CJK Letters and Months":function(t){return 12800<=t&&t<=13055},"CJK Compatibility":function(t){return 13056<=t&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return 13312<=t&&t<=19903},"Yijing Hexagram Symbols":function(t){return 19904<=t&&t<=19967},"CJK Unified Ideographs":function(t){return 19968<=t&&t<=40959},"Yi Syllables":function(t){return 40960<=t&&t<=42127},"Yi Radicals":function(t){return 42128<=t&&t<=42191},"Hangul Jamo Extended-A":function(t){return 43360<=t&&t<=43391},"Hangul Syllables":function(t){return 44032<=t&&t<=55215},"Hangul Jamo Extended-B":function(t){return 55216<=t&&t<=55295},"Private Use Area":function(t){return 57344<=t&&t<=63743},"CJK Compatibility Ideographs":function(t){return 63744<=t&&t<=64255},"Arabic Presentation Forms-A":function(t){return 64336<=t&&t<=65023},"Vertical Forms":function(t){return 65040<=t&&t<=65055},"CJK Compatibility Forms":function(t){return 65072<=t&&t<=65103},"Small Form Variants":function(t){return 65104<=t&&t<=65135},"Arabic Presentation Forms-B":function(t){return 65136<=t&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return 65280<=t&&t<=65519}}},{}],266:[function(t,e,i){"use strict";var r=function(t,e){this.max=t,this.onRemove=e,this.reset()};r.prototype.reset=function(){for(var t in this.data)this.onRemove(this.data[t]);return this.data={},this.order=[],this},r.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var i=this.getAndRemove(this.order[0]);i&&this.onRemove(i)}return this},r.prototype.has=function(t){return t in this.data},r.prototype.keys=function(){return this.order},r.prototype.getAndRemove=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},r.prototype.get=function(t){return this.has(t)?this.data[t]:null},r.prototype.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},r.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this.getAndRemove(this.order[0]);e&&this.onRemove(e)}return this},e.exports=r},{}],267:[function(t,e,i){"use strict";function o(t,e){var i=s(u.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"/"!==i.path&&(t.path=""+i.path+t.path),!u.REQUIRE_ACCESS_TOKEN)return l(t);if(!(e=e||u.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+r);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+r);return t.params.push("access_token="+e),l(t)}function a(t){return 0===t.indexOf("mapbox:")}function s(t){var e=t.match(n);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function l(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var u=t("./config"),c=t("./browser"),r="See https://www.mapbox.com/api-documentation/#access-tokens";i.isMapboxURL=a,i.normalizeStyleURL=function(t,e){if(!a(t))return t;var i=s(t);return i.path="/styles/v1"+i.path,o(i,e)},i.normalizeGlyphsURL=function(t,e){if(!a(t))return t;var i=s(t);return i.path="/fonts/v1"+i.path,o(i,e)},i.normalizeSourceURL=function(t,e){if(!a(t))return t;var i=s(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),o(i,e)},i.normalizeSpriteURL=function(t,e,i,r){var n=s(t);return a(t)?(n.path="/styles/v1"+n.path+"/sprite"+e+i,o(n,r)):(n.path+=""+e+i,l(n))};var h=/(\.(png|jpg)\d*)(?=$)/;i.normalizeTileURL=function(t,e,i){if(!e||!a(e))return t;var r=s(t),n=2<=c.devicePixelRatio||512===i?"@2x":"",o=c.supportsWebp?".webp":"$1";return r.path=r.path.replace(h,""+n+o),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(u.ACCESS_TOKEN||""))}(r.params),l(r)};var n=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":252,"./config":256}],268:[function(t,e,i){"use strict";e.exports={getEntriesByName:function(t){return!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(t)}}},{}],269:[function(t,e,n){"use strict";var i=t("./is_char_in_unicode_block");e.exports.allowsIdeographicBreaking=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(!n.charAllowsIdeographicBreaking(r.charCodeAt(0)))return!1}return!0},e.exports.allowsVerticalWritingMode=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(n.charHasUprightVerticalOrientation(r.charCodeAt(0)))return!0}return!1},e.exports.allowsLetterSpacing=function(t){for(var e=0,i=t;e<i.length;e+=1){var r=i[e];if(!n.charAllowsLetterSpacing(r.charCodeAt(0)))return!1}return!0},e.exports.charAllowsLetterSpacing=function(t){return!(i.Arabic(t)||i["Arabic Supplement"](t)||i["Arabic Extended-A"](t)||i["Arabic Presentation Forms-A"](t)||i["Arabic Presentation Forms-B"](t))},e.exports.charAllowsIdeographicBreaking=function(t){return!(t<11904||!(i["Bopomofo Extended"](t)||i.Bopomofo(t)||i["CJK Compatibility Forms"](t)||i["CJK Compatibility Ideographs"](t)||i["CJK Compatibility"](t)||i["CJK Radicals Supplement"](t)||i["CJK Strokes"](t)||i["CJK Symbols and Punctuation"](t)||i["CJK Unified Ideographs Extension A"](t)||i["CJK Unified Ideographs"](t)||i["Enclosed CJK Letters and Months"](t)||i["Halfwidth and Fullwidth Forms"](t)||i.Hiragana(t)||i["Ideographic Description Characters"](t)||i["Kangxi Radicals"](t)||i["Katakana Phonetic Extensions"](t)||i.Katakana(t)||i["Vertical Forms"](t)||i["Yi Radicals"](t)||i["Yi Syllables"](t)))},n.charHasUprightVerticalOrientation=function(t){return!(746!==t&&747!==t&&(t<4352||!(i["Bopomofo Extended"](t)||i.Bopomofo(t)||i["CJK Compatibility Forms"](t)&&!(65097<=t&&t<=65103)||i["CJK Compatibility Ideographs"](t)||i["CJK Compatibility"](t)||i["CJK Radicals Supplement"](t)||i["CJK Strokes"](t)||!(!i["CJK Symbols and Punctuation"](t)||12296<=t&&t<=12305||12308<=t&&t<=12319||12336===t)||i["CJK Unified Ideographs Extension A"](t)||i["CJK Unified Ideographs"](t)||i["Enclosed CJK Letters and Months"](t)||i["Hangul Compatibility Jamo"](t)||i["Hangul Jamo Extended-A"](t)||i["Hangul Jamo Extended-B"](t)||i["Hangul Jamo"](t)||i["Hangul Syllables"](t)||i.Hiragana(t)||i["Ideographic Description Characters"](t)||i.Kanbun(t)||i["Kangxi Radicals"](t)||i["Katakana Phonetic Extensions"](t)||i.Katakana(t)&&12540!==t||!(!i["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||65306<=t&&t<=65310||65339===t||65341===t||65343===t||65371<=t&&t<=65503||65507===t||65512<=t&&t<=65519)||!(!i["Small Form Variants"](t)||65112<=t&&t<=65118||65123<=t&&t<=65126)||i["Unified Canadian Aboriginal Syllabics"](t)||i["Unified Canadian Aboriginal Syllabics Extended"](t)||i["Vertical Forms"](t)||i["Yijing Hexagram Symbols"](t)||i["Yi Syllables"](t)||i["Yi Radicals"](t))))},n.charHasNeutralVerticalOrientation=function(t){return!!(i["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||i["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||i["Letterlike Symbols"](t)||i["Number Forms"](t)||i["Miscellaneous Technical"](t)&&(8960<=t&&t<=8967||8972<=t&&t<=8991||8996<=t&&t<=9e3||9003===t||9085<=t&&t<=9114||9150<=t&&t<=9165||9167===t||9169<=t&&t<=9179||9186<=t&&t<=9215)||i["Control Pictures"](t)&&9251!==t||i["Optical Character Recognition"](t)||i["Enclosed Alphanumerics"](t)||i["Geometric Shapes"](t)||i["Miscellaneous Symbols"](t)&&!(9754<=t&&t<=9759)||i["Miscellaneous Symbols and Arrows"](t)&&(11026<=t&&t<=11055||11088<=t&&t<=11097||11192<=t&&t<=11243)||i["CJK Symbols and Punctuation"](t)||i.Katakana(t)||i["Private Use Area"](t)||i["CJK Compatibility Forms"](t)||i["Small Form Variants"](t)||i["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||9984<=t&&t<=10087||10102<=t&&t<=10131||65532===t||65533===t)},n.charHasRotatedVerticalOrientation=function(t){return!(n.charHasUprightVerticalOrientation(t)||n.charHasNeutralVerticalOrientation(t))}},{"./is_char_in_unicode_block":265}],270:[function(t,e,i){"use strict";var s=t("../geo/lng_lat");e.exports=function(t,e,i){if(t=new s(t.lng,t.lat),e){var r=new s(t.lng-360,t.lat),n=new s(t.lng+360,t.lat),o=i.locationPoint(t).distSqr(e);i.locationPoint(r).distSqr(e)<o?t=r:i.locationPoint(n).distSqr(e)<o&&(t=n)}for(;180<Math.abs(t.lng-i.center.lng);){var a=i.locationPoint(t);if(0<=a.x&&0<=a.y&&a.x<=i.width&&a.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}},{"../geo/lng_lat":62}],271:[function(t,e,i){"use strict";function l(t,e){return Math.ceil(t/e)*e}var u={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},r=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};r.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},r.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},r.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},r.prototype.clear=function(){this.length=0},r.prototype.resize=function(t){this.reserve(t),this.length=t},r.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},r.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")},e.exports.StructArray=r,e.exports.Struct=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},e.exports.viewTypes=u,e.exports.createLayout=function(t,o){void 0===o&&(o=1);var a=0,s=0;return{members:t.map(function(t){var e,i=(e=t.type,u[e].BYTES_PER_ELEMENT),r=a=l(a,Math.max(o,i)),n=t.components||1;return s=Math.max(s,i),a+=i*n,{name:t.name,type:t.type,components:n,offset:r}}),size:l(a,Math.max(s,o)),alignment:o}}},{}],272:[function(t,e,i){"use strict";e.exports=function(t,e){var i=!1,r=0,n=function(){r=0,i&&(t(),r=setTimeout(n,e),i=!1)};return function(){return i=!0,r||n(),r}}},{}],273:[function(t,e,i){"use strict";function c(t,e){if(t.row>e.row){var i=t;t=e,e=i}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function h(t,e,i,r,n){var o=Math.max(i,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=0<t.dx,h=e.dx<0,p=o;p<a;p++){var f=l*Math.max(0,Math.min(t.dy,p+c-t.y0))+t.x0,d=u*Math.max(0,Math.min(e.dy,p+h-e.y0))+e.x0;n(Math.floor(d),Math.ceil(f),p)}}function r(t,e,i,r,n,o){var a,s=c(t,e),l=c(e,i),u=c(i,t);s.dy>l.dy&&(a=s,s=l,l=a),s.dy>u.dy&&(a=s,s=u,u=a),l.dy>u.dy&&(a=l,l=u,u=a),s.dy&&h(u,s,r,n,o),l.dy&&h(u,l,r,n,o)}t("../geo/coordinate");var n=t("../source/tile_id"),p=n.OverscaledTileID;e.exports=function(s,t,l,u){function e(t,e,i){var r,n,o,a;if(0<=i&&i<=c)for(r=t;r<e;r++)n=Math.floor(r/c),o=(r%c+c)%c,0!==n&&!0!==u||(a=new p(l,n,s,o,i),h[a.key]=a)}void 0===u&&(u=!0);var c=1<<s,h={};return r(t[0],t[1],t[2],0,c,e),r(t[2],t[3],t[0],0,c,e),Object.keys(h).map(function(t){return h[t]})}},{"../geo/coordinate":61,"../source/tile_id":114}],274:[function(t,e,i){"use strict";e.exports=function(i,t){return t.replace(/{([^{}]+)}/g,function(t,e){return e in i?String(i[e]):""})}},{}],275:[function(t,e,r){"use strict";var o=t("@mapbox/unitbezier"),c=t("../geo/coordinate");t("@mapbox/point-geometry"),r.easeCubicInOut=function(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},r.bezier=function(t,e,i,r){var n=new o(t,e,i,r);return function(t){return n.solve(t)}},r.ease=r.bezier(.25,.1,.25,1),r.clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},r.wrap=function(t,e,i){var r=i-e,n=((t-e)%r+r)%r+e;return n===e?i:n},r.asyncAll=function(t,e,r){if(!t.length)return r(null,[]);var n=t.length,o=new Array(t.length),a=null;t.forEach(function(t,i){e(t,function(t,e){t&&(a=t),o[i]=e,0==--n&&r(a,o)})})},r.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},r.keysDifference=function(t,e){var i=[];for(var r in t)r in e||i.push(r);return i},r.extend=function(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var o=n[r];for(var a in o)t[a]=o[a]}return t},r.pick=function(t,e){for(var i={},r=0;r<e.length;r++){var n=e[r];n in t&&(i[n]=t[n])}return i};var i=1;r.uniqueId=function(){return i++},r.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},r.getCoordinatesCenter=function(t){for(var e=1/0,i=1/0,r=-1/0,n=-1/0,o=0;o<t.length;o++)e=Math.min(e,t[o].column),i=Math.min(i,t[o].row),r=Math.max(r,t[o].column),n=Math.max(n,t[o].row);var a=r-e,s=n-i,l=Math.max(a,s),u=Math.max(0,Math.floor(-Math.log(l)/Math.LN2));return new c((e+r)/2,(i+n)/2,0).zoomTo(u)},r.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},r.mapObject=function(t,e,i){var r={};for(var n in t)r[n]=e.call(i||this,t[n],n,t);return r},r.filterObject=function(t,e,i){var r={};for(var n in t)e.call(i||this,t[n],n,t)&&(r[n]=t[n]);return r},r.deepEqual=t("../style-spec/util/deep_equal"),r.clone=function(t){return Array.isArray(t)?t.map(r.clone):"object"==typeof t&&t?r.mapObject(t,r.clone):t},r.arraysIntersect=function(t,e){for(var i=0;i<t.length;i++)if(0<=e.indexOf(t[i]))return!0;return!1};var n={};r.warnOnce=function(t){n[t]||("undefined"!=typeof console&&console.warn(t),n[t]=!0)},r.isCounterClockwise=function(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)},r.calculateSignedArea=function(t){for(var e=0,i=0,r=t.length,n=r-1,o=void 0,a=void 0;i<r;n=i++)o=t[i],a=t[n],e+=(a.x-o.x)*(o.y+a.y);return e},r.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],i=t[t.length-1];return!(0<Math.abs(e.x-i.x)||0<Math.abs(e.y-i.y))&&.01<Math.abs(r.calculateSignedArea(t))},r.sphericalToCartesian=function(t){var e=t[0],i=t[1],r=t[2];return i+=90,i*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(r),y:e*Math.sin(i)*Math.sin(r),z:e*Math.cos(r)}},r.parseCacheControl=function(t){var o={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,e,i,r){var n=i||r;return o[e]=!n||n.toLowerCase(),""}),o["max-age"]){var e=parseInt(o["max-age"],10);isNaN(e)?delete o["max-age"]:o["max-age"]=e}return o}},{"../geo/coordinate":61,"../style-spec/util/deep_equal":155,"@mapbox/point-geometry":4,"@mapbox/unitbezier":7}],276:[function(t,e,i){"use strict";var r=function(t,e,i,r){this.type="Feature",(this._vectorTileFeature=t)._z=e,t._x=i,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},n={geometry:{}};n.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},n.geometry.set=function(t){this._geometry=t},r.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(r.prototype,n),e.exports=r},{}],277:[function(t,o,e){"use strict";var a=t("./script_detection");o.exports=function(t){for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i+1)||null,n=t.charCodeAt(i-1)||null;r&&a.charHasRotatedVerticalOrientation(r)&&!o.exports.lookup[t[i+1]]||n&&a.charHasRotatedVerticalOrientation(n)&&!o.exports.lookup[t[i-1]]||!o.exports.lookup[t[i]]?e+=t[i]:e+=o.exports.lookup[t[i]]}return e},o.exports.lookup={"!":"ï¸","#":"ï¼",$:"ï¼","%":"ï¼","&":"ï¼","(":"ï¸µ",")":"ï¸¶","*":"ï¼","+":"ï¼",",":"ï¸","-":"ï¸²",".":"ã»","/":"ï¼",":":"ï¸",";":"ï¸","<":"ï¸¿","=":"ï¼",">":"ï¹","?":"ï¸","@":"ï¼ ","[":"ï¹","\\":"ï¼¼","]":"ï¹","^":"ï¼¾",_:"ï¸³","`":"ï½","{":"ï¸·","|":"â","}":"ï¸¸","~":"ï½","Â¢":"ï¿ ","Â£":"ï¿¡","Â¥":"ï¿¥","Â¦":"ï¿¤","Â¬":"ï¿¢","Â¯":"ï¿£","â":"ï¸²","â":"ï¸±","â":"ï¹","â":"ï¹","â":"ï¹","â":"ï¹","â¦":"ï¸","â§":"ã»","â©":"ï¿¦","ã":"ï¸","ã":"ï¸","ã":"ï¸¿","ã":"ï¹","ã":"ï¸½","ã":"ï¸¾","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¸»","ã":"ï¸¼","ã":"ï¸¹","ã":"ï¸º","ã":"ï¸","ã":"ï¸","ï¼":"ï¸","ï¼":"ï¸µ","ï¼":"ï¸¶","ï¼":"ï¸","ï¼":"ï¸²","ï¼":"ã»","ï¼":"ï¸","ï¼":"ï¸","ï¼":"ï¸¿","ï¼":"ï¹","ï¼":"ï¸","ï¼»":"ï¹","ï¼½":"ï¹","ï¼¿":"ï¸³","ï½":"ï¸·","ï½":"â","ï½":"ï¸¸","ï½":"ï¸µ","ï½ ":"ï¸¶","ï½¡":"ï¸","ï½¢":"ï¹","ï½£":"ï¹"}},{"./script_detection":269}],278:[function(t,e,i){"use strict";function r(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),g[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}var n=t("grid-index"),o=t("../style-spec/util/color"),a=t("../style-spec/expression"),s=a.StylePropertyFunction,l=a.StyleExpression,u=a.StyleExpressionWithErrorHandling,c=a.ZoomDependentExpression,h=a.ZoomConstantExpression,p=t("../style-spec/expression/compound_expression"),f=p.CompoundExpression,d=t("../style-spec/expression/definitions"),m=t("./window"),y=m.ImageData,g={};for(var v in r("Object",Object),n.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),i},n.deserialize=function(t){return new n(t)},r("Grid",n),r("Color",o),r("StylePropertyFunction",s),r("StyleExpression",l,{omit:["_evaluator"]}),r("StyleExpressionWithErrorHandling",u,{omit:["_evaluator"]}),r("ZoomDependentExpression",c),r("ZoomConstantExpression",h),r("CompoundExpression",f,{omit:["_evaluate"]}),d)d[v]._classRegistryKey||r("Expression_"+v,d[v]);e.exports={register:r,serialize:function t(e,i){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return i&&i.push(e),e;if(ArrayBuffer.isView(e)){var r=e;return i&&i.push(r.buffer),r}if(e instanceof y)return i&&i.push(e.data.buffer),e;if(Array.isArray(e)){for(var n=[],o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t(s,i))}return n}if("object"!=typeof e)throw new Error("can't serialize object of type "+typeof e);var l=e.constructor,u=l._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var c={};if(l.serialize)c._serialized=l.serialize(e,i);else for(var h in e)if(e.hasOwnProperty(h)&&!(0<=g[u].omit.indexOf(h))){var p=e[h];c[h]=0<=g[u].shallow.indexOf(h)?p:t(p,i)}return{name:u,properties:c}},deserialize:function e(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof y)return t;if(Array.isArray(t))return t.map(function(t){return e(t)});if("object"!=typeof t)throw new Error("can't deserialize object of type "+typeof t);var i=t,r=i.name,n=i.properties;if(!r)throw new Error("can't deserialize object of anonymous class");var o=g[r],a=o.klass;if(!a)throw new Error("can't deserialize unregistered class "+r);if(a.deserialize)return a.deserialize(n._serialized);for(var s=Object.create(a.prototype),l=0,u=Object.keys(n);l<u.length;l+=1){var c=u[l];s[c]=0<=g[r].shallow.indexOf(c)?n[c]:e(n[c])}return s}}},{"../style-spec/expression":139,"../style-spec/expression/compound_expression":123,"../style-spec/expression/definitions":131,"../style-spec/util/color":153,"./window":254,"grid-index":24}],279:[function(i,t,e){"use strict";var r=i("./web_worker"),n=function(){this.active={}};n.prototype.acquire=function(t){if(!this.workers){var e=i("../").workerCount;for(this.workers=[];this.workers.length<e;)this.workers.push(new r)}return this.active[t]=!0,this.workers.slice()},n.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},t.exports=n},{"../":73,"./web_worker":253}]},{},[73])(73)},"4v0n":function(t,e){t.exports=d},"4ycU":function(t,e,i){},"53J1":function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=46)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},29:function(t,e,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[i("span",[e._v(e._s(e.currentLabel))])])],2)};r._withStripped=!0;var n=i(3),o=i.n(n),a=i(4),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l={mixins:[o.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&0<this.select.multipleLimit)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(t,e){var i=this.select,r=i.remote,n=i.valueKey;if(!this.created&&!r){if(n&&"object"===(void 0===t?"undefined":s(t))&&"object"===(void 0===e?"undefined":s(e))&&t[n]===e[n])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(t,e){if(this.isObject){var i=this.select.valueKey;return Object(a.getValueByPath)(t,i)===Object(a.getValueByPath)(e,i)}return t===e},contains:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];if(this.isObject){var i=this.select.valueKey;return t.some(function(t){return Object(a.getValueByPath)(t,i)===Object(a.getValueByPath)(e,i)})}return-1<t.indexOf(e)},handleGroupDisabled:function(t){this.groupDisabled=t},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(t){this.visible=new RegExp(Object(a.escapeRegexpString)(t),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){this.select.onOptionDestroy(this.select.options.indexOf(this))}},u=i(0),c=Object(u.a)(l,r,[],!1,null,null,null);c.options.__file="packages/select/src/option.vue";e.a=c.exports},3:function(t,e){t.exports=i("0BDH")},4:function(t,e){t.exports=i("gSIQ")},46:function(t,e,i){"use strict";i.r(e);var r=i(29);r.a.install=function(t){t.component(r.a.name,r.a)},e.default=r.a}})},"5FBR":function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=73)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},2:function(t,e){t.exports=i("WST1")},21:function(t,e){t.exports=i("EvI9")},25:function(t,e,i){"use strict";var s=i(2);e.a={bind:function(t,e,i){var r=null,n=void 0,o=function(){return i.context[e.expression].apply()},a=function(){new Date-n<100&&o(),clearInterval(r),r=null};Object(s.on)(t,"mousedown",function(t){0===t.button&&(n=new Date,Object(s.once)(document,"mouseup",a),clearInterval(r),r=setInterval(o,100))})}}},73:function(t,e,i){"use strict";i.r(e);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(t){t.preventDefault()}}},[e.controls?i("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.decrease(t):null}}},[i("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?i("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.increase(t):null}}},[i("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),i("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(t){return"button"in t||!e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?(t.preventDefault(),e.increase(t)):null},function(t){return"button"in t||!e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?(t.preventDefault(),e.decrease(t)):null}]}})],1)};r._withStripped=!0;var n=i(9),o=i.n(n),a=i(21),s=i.n(a),l=i(25),u={name:"ElInputNumber",mixins:[s()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:l.a},components:{ElInput:o.a},props:{step:{type:Number,default:1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(t){return 0<=t&&t===parseInt(t,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(t){var e=void 0===t?t:Number(t);if(void 0!==e){if(isNaN(e))return;void 0!==this.precision&&(e=this.toPrecision(e,this.precision))}e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),this.currentValue=e,this.userInput=null,this.$emit("input",e)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var t=this.value,e=this.step,i=this.getPrecision,r=this.precision,n=i(e);return void 0!==r?(r<n&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),r):Math.max(i(t),n)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var t=this.currentValue;return"number"==typeof t&&void 0!==this.precision?t.toFixed(this.precision):t}},methods:{toPrecision:function(t,e){return void 0===e&&(e=this.numPrecision),parseFloat(Number(t).toFixed(e))},getPrecision:function(t){if(void 0===t)return 0;var e=t.toString(),i=e.indexOf("."),r=0;return-1!==i&&(r=e.length-i-1),r},_increase:function(t,e){if("number"!=typeof t&&void 0!==t)return this.currentValue;var i=Math.pow(10,this.numPrecision);return this.toPrecision((i*t+i*e)/i)},_decrease:function(t,e){if("number"!=typeof t&&void 0!==t)return this.currentValue;var i=Math.pow(10,this.numPrecision);return this.toPrecision((i*t-i*e)/i)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var t=this.value||0,e=this._increase(t,this.step);this.setCurrentValue(e)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var t=this.value||0,e=this._decrease(t,this.step);this.setCurrentValue(e)}},handleBlur:function(t){this.$emit("blur",t)},handleFocus:function(t){this.$emit("focus",t)},setCurrentValue:function(t){var e=this.currentValue;"number"==typeof t&&void 0!==this.precision&&(t=this.toPrecision(t,this.precision)),t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),e!==t&&(this.userInput=null,this.$emit("input",t),this.$emit("change",t,e),this.currentValue=t)},handleInput:function(t){this.userInput=t},handleInputChange:function(t){var e=""===t?void 0:Number(t);isNaN(e)&&""!==t||this.setCurrentValue(e),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var t=this.$refs.input.$refs.input;t.setAttribute("role","spinbutton"),t.setAttribute("aria-valuemax",this.max),t.setAttribute("aria-valuemin",this.min),t.setAttribute("aria-valuenow",this.currentValue),t.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){this.$refs&&this.$refs.input&&this.$refs.input.$refs.input.setAttribute("aria-valuenow",this.currentValue)}},c=i(0),h=Object(c.a)(u,r,[],!1,null,null,null);h.options.__file="packages/input-number/src/input-number.vue";var p=h.exports;p.install=function(t){t.component(p.name,p)};e.default=p},9:function(t,e){t.exports=i("8606")}})},"5i1c":function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){if(o.default.prototype.$isServer)return 0;if(void 0!==a)return a;var t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",t.appendChild(i);var r=i.offsetWidth;return t.parentNode.removeChild(t),a=e-r};var r,n=i("i7/w"),o=(r=n)&&r.__esModule?r:{default:r};var a=void 0},"6XTx":function(t,e,i){"use strict";e.__esModule=!0;var r,n=i("i7/w"),o=(r=n)&&r.__esModule?r:{default:r},a=i("UShQ");var s=o.default.prototype.$isServer?function(){}:i("YWdi"),l=function(t){return t.stopPropagation()};e.default={props:{transformOrigin:{type:[Boolean,String],default:!0},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,arrowOffset:{type:Number,default:35},appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(t){this.showPopper=t,this.$emit("input",t)}},showPopper:function(t){this.disabled||(t?this.updatePopper():this.destroyPopper(),this.$emit("input",t))}},methods:{createPopper:function(){var e=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var t=this.popperOptions,i=this.popperElm=this.popperElm||this.popper||this.$refs.popper,r=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!r&&this.$slots.reference&&this.$slots.reference[0]&&(r=this.referenceElm=this.$slots.reference[0].elm),i&&r&&(this.visibleArrow&&this.appendArrow(i),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),t.placement=this.currentPlacement,t.offset=this.offset,t.arrowOffset=this.arrowOffset,this.popperJS=new s(r,i,t),this.popperJS.onCreate(function(t){e.$emit("created",e),e.resetTransformOrigin(),e.$nextTick(e.updatePopper)}),"function"==typeof t.onUpdate&&this.popperJS.onUpdate(t.onUpdate),this.popperJS._popper.style.zIndex=a.PopupManager.nextZIndex(),this.popperElm.addEventListener("click",l))}},updatePopper:function(){var t=this.popperJS;t?(t.update(),t._popper&&(t._popper.style.zIndex=a.PopupManager.nextZIndex())):this.createPopper()},doDestroy:function(t){!this.popperJS||this.showPopper&&!t||(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){if(this.transformOrigin){var t=this.popperJS._popper.getAttribute("x-placement").split("-")[0],e={top:"bottom",bottom:"top",left:"right",right:"left"}[t];this.popperJS._popper.style.transformOrigin="string"==typeof this.transformOrigin?this.transformOrigin:-1<["top","bottom"].indexOf(t)?"center "+e:e+" center"}},appendArrow:function(t){var e=void 0;if(!this.appended){for(var i in this.appended=!0,t.attributes)if(/^_v-/.test(t.attributes[i].name)){e=t.attributes[i].name;break}var r=document.createElement("div");e&&r.setAttribute(e,""),r.setAttribute("x-arrow",""),r.className="popper__arrow",t.appendChild(r)}}},beforeDestroy:function(){this.doDestroy(!0),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",l),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}}},"7N9w":function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=113)}({113:function(t,e,i){"use strict";i.r(e);var r=i(16),n=i.n(r),o=i(26),a=i.n(o),s=i(8),c=i.n(s),l=i(4),h=1,p={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:"",className:"el-table-column--selection"},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},f={selection:{renderHeader:function(t,e){var i=e.store;return t("el-checkbox",{attrs:{disabled:i.states.data&&0===i.states.data.length,indeterminate:0<i.states.selection.length&&!this.isAllSelected,value:this.isAllSelected},nativeOn:{click:this.toggleAllSelection}})},renderCell:function(t,e){var i=e.row,r=e.column,n=e.store,o=e.$index;return t("el-checkbox",{nativeOn:{click:function(t){return t.stopPropagation()}},attrs:{value:n.isSelected(i),disabled:!!r.selectable&&!r.selectable.call(null,i,o)},on:{input:function(){n.commit("rowSelectedChanged",i)}}})},sortable:!1,resizable:!1},index:{renderHeader:function(t,e){return e.column.label||"#"},renderCell:function(t,e){var i=e.$index,r=i+1,n=e.column.index;return"number"==typeof n?r=i+n:"function"==typeof n&&(r=n(i)),t("div",[r])},sortable:!1},expand:{renderHeader:function(t,e){return e.column.label||""},renderCell:function(t,e,i){var r=e.row;return t("div",{class:"el-table__expand-icon "+(-1<e.store.states.expandRows.indexOf(r)?"el-table__expand-icon--expanded":""),on:{click:function(t){return i.handleExpandClick(r,t)}}},[t("i",{class:"el-icon el-icon-arrow-right"})])},sortable:!1,resizable:!1,className:"el-table__expand-column"}},d=function(t,e){var i=e.row,r=e.column,n=e.$index,o=r.property,a=o&&Object(l.getPropByPath)(i,o).v;return r&&r.formatter?r.formatter(i,r,a,n):a},m=function(t){return void 0!==t&&(t=parseInt(t,10),isNaN(t)&&(t=null)),t},y=function(t){return void 0!==t&&(t=parseInt(t,10),isNaN(t)&&(t=80)),t},u={name:"ElTableColumn",props:{type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{},minWidth:{},renderHeader:Function,sortable:{type:[String,Boolean],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},context:{},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:function(){return["ascending","descending",null]},validator:function(t){return t.every(function(t){return-1<["ascending","descending",null].indexOf(t)})}}},data:function(){return{isSubColumn:!1,columns:[]}},beforeCreate:function(){this.row={},this.column={},this.$index=0},components:{ElCheckbox:n.a,ElTag:a.a},computed:{owner:function(){for(var t=this.$parent;t&&!t.tableId;)t=t.$parent;return t},columnOrTableParent:function(){for(var t=this.$parent;t&&!t.tableId&&!t.columnId;)t=t.$parent;return t}},created:function(){var e=this;this.$createElement;this.customRender=this.$options.render,this.$options.render=function(t){return t("div",e.$slots.default)};var t=this.columnOrTableParent,i=this.owner;this.isSubColumn=i!==t,this.columnId=(t.tableId||t.columnId)+"_column_"+h++;var r=this.type,n=m(this.width),o=y(this.minWidth),a=function(t,e){var i={};for(var r in c()(i,p[t||"default"]),e)if(e.hasOwnProperty(r)){var n=e[r];void 0!==n&&(i[r]=n)}return i.minWidth||(i.minWidth=80),i.realWidth=void 0===i.width?i.minWidth:i.width,i}(r,{id:this.columnId,columnKey:this.columnKey,label:this.label,className:this.className,labelClassName:this.labelClassName,property:this.prop||this.property,type:r,renderCell:null,renderHeader:this.renderHeader,minWidth:o,width:n,isColumnGroup:!1,context:this.context,align:this.align?"is-"+this.align:null,headerAlign:this.headerAlign?"is-"+this.headerAlign:this.align?"is-"+this.align:null,sortable:""===this.sortable||this.sortable,sortMethod:this.sortMethod,sortBy:this.sortBy,resizable:this.resizable,showOverflowTooltip:this.showOverflowTooltip||this.showTooltipWhenOverflow,formatter:this.formatter,selectable:this.selectable,reserveSelection:this.reserveSelection,fixed:""===this.fixed||this.fixed,filterMethod:this.filterMethod,filters:this.filters,filterable:this.filters||this.filterMethod,filterMultiple:this.filterMultiple,filterOpened:!1,filteredValue:this.filteredValue||[],filterPlacement:this.filterPlacement||"",index:this.index,sortOrders:this.sortOrders}),s=f[r]||{};Object.keys(s).forEach(function(t){var e=s[t];void 0!==e&&("renderHeader"===t&&("selection"===r&&a[t]?console.warn("[Element Warn][TableColumn]Selection column doesn't allow to set render-header function."):e=a[t]||e),a[t]="className"===t?a[t]+" "+e:e)}),this.renderHeader&&console.warn("[Element Warn][TableColumn]Comparing to render-header, scoped-slot header is easier to use. We recommend users to use scoped-slot header.");var l=(this.columnConfig=a).renderCell,u=this;if("expand"===r)return i.renderExpanded=function(t,e){return u.$scopedSlots.default?u.$scopedSlots.default(e):u.$slots.default},void(a.renderCell=function(t,e){return t("div",{class:"cell"},[l(t,e,this._renderProxy)])});a.renderCell=function(t,e){return u.$scopedSlots.default&&(l=function(){return u.$scopedSlots.default(e)}),l||(l=d),u.showOverflowTooltip||u.showTooltipWhenOverflow?t("div",{class:"cell el-tooltip",style:{width:(e.column.realWidth||e.column.width)-1+"px"}},[l(t,e)]):t("div",{class:"cell"},[l(t,e)])}},destroyed:function(){if(this.$parent){var t=this.$parent;this.owner.store.commit("removeColumn",this.columnConfig,this.isSubColumn?t.columnConfig:null)}},watch:{label:function(t){this.columnConfig&&(this.columnConfig.label=t)},prop:function(t){this.columnConfig&&(this.columnConfig.property=t)},property:function(t){this.columnConfig&&(this.columnConfig.property=t)},filters:function(t){this.columnConfig&&(this.columnConfig.filters=t)},filterMultiple:function(t){this.columnConfig&&(this.columnConfig.filterMultiple=t)},align:function(t){this.columnConfig&&(this.columnConfig.align=t?"is-"+t:null,this.headerAlign||(this.columnConfig.headerAlign=t?"is-"+t:null))},headerAlign:function(t){this.columnConfig&&(this.columnConfig.headerAlign="is-"+(t||this.align))},width:function(t){this.columnConfig&&(this.columnConfig.width=m(t),this.owner.store.scheduleLayout())},minWidth:function(t){this.columnConfig&&(this.columnConfig.minWidth=y(t),this.owner.store.scheduleLayout())},fixed:function(t){this.columnConfig&&(this.columnConfig.fixed=t,this.owner.store.scheduleLayout(!0))},sortable:function(t){this.columnConfig&&(this.columnConfig.sortable=t)},index:function(t){this.columnConfig&&(this.columnConfig.index=t)},formatter:function(t){this.columnConfig&&(this.columnConfig.formatter=t)},className:function(t){this.columnConfig&&(this.columnConfig.className=t)},labelClassName:function(t){this.columnConfig&&(this.columnConfig.labelClassName=t)}},mounted:function(){var i=this,t=this.owner,e=this.columnOrTableParent,r=void 0;r=this.isSubColumn?[].indexOf.call(e.$el.children,this.$el):[].indexOf.call(e.$refs.hiddenColumns.children,this.$el),this.$scopedSlots.header&&("selection"===this.type?console.warn("[Element Warn][TableColumn]Selection column doesn't allow to set scoped-slot header."):this.columnConfig.renderHeader=function(t,e){return i.$scopedSlots.header(e)}),t.store.commit("insertColumn",this.columnConfig,r,this.isSubColumn?e.columnConfig:null)},install:function(t){t.component(u.name,u)}};e.default=u},16:function(t,e){t.exports=i("3Nwd")},26:function(t,e){t.exports=i("i7wE")},4:function(t,e){t.exports=i("gSIQ")},8:function(t,e){t.exports=i("f03z")}})},"7W2i":function(t,e,i){var r=i("SksO");t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},"7t/g":function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=82)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},82:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"el-button",class:[t.type?"el-button--"+t.type:"",t.buttonSize?"el-button--"+t.buttonSize:"",{"is-disabled":t.buttonDisabled,"is-loading":t.loading,"is-plain":t.plain,"is-round":t.round,"is-circle":t.circle}],attrs:{disabled:t.buttonDisabled||t.loading,autofocus:t.autofocus,type:t.nativeType},on:{click:t.handleClick}},[t.loading?i("i",{staticClass:"el-icon-loading"}):t._e(),t.icon&&!t.loading?i("i",{class:t.icon}):t._e(),t.$slots.default?i("span",[t._t("default")],2):t._e()])};r._withStripped=!0;var n={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(t){this.$emit("click",t)}}},o=i(0),a=Object(o.a)(n,r,[],!1,null,null,null);a.options.__file="packages/button/src/button.vue";var s=a.exports;s.install=function(t){t.component(s.name,s)};e.default=s}})},8606:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=61)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},10:function(t,e){t.exports=i("K7XR")},3:function(t,e){t.exports=i("0BDH")},61:function(t,e,i){"use strict";i.r(e);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?i("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?i("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},domProps:{value:e.nativeInputValue},on:{compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?i("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?i("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.$slots.suffix||e.suffixIcon||e.showClear||e.showPassword||e.validateState&&e.needStatusIcon?i("span",{staticClass:"el-input__suffix"},[i("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible?e._e():[e._t("suffix"),e.suffixIcon?i("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?i("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{click:e.clear}}):e._e(),e.showPwdVisible?i("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e()],2),e.validateState?i("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?i("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:i("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},domProps:{value:e.nativeInputValue},on:{compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1))],2)};r._withStripped=!0;var n=i(3),o=i.n(n),a=i(10),s=i.n(a),v=void 0,_=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function l(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;v||(v=document.createElement("textarea"),document.body.appendChild(v));var r,n,o,a,s,l=(r=t,n=window.getComputedStyle(r),o=n.getPropertyValue("box-sizing"),a=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),s=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),{contextStyle:_.map(function(t){return t+":"+n.getPropertyValue(t)}).join(";"),paddingSize:a,borderSize:s,boxSizing:o}),u=l.paddingSize,c=l.borderSize,h=l.boxSizing,p=l.contextStyle;v.setAttribute("style",p+";\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n"),v.value=t.value||t.placeholder||"";var f=v.scrollHeight,d={};"border-box"===h?f+=c:"content-box"===h&&(f-=u),v.value="";var m=v.scrollHeight-u;if(null!==e){var y=m*e;"border-box"===h&&(y=y+u+c),f=Math.max(y,f),d.minHeight=y+"px"}if(null!==i){var g=m*i;"border-box"===h&&(g=g+u+c),f=Math.min(g,f)}return d.height=f+"px",v.parentNode&&v.parentNode.removeChild(v),v=null,d}var u=i(8),c=i.n(u),h={name:"ElInput",componentName:"ElInput",mixins:[o.a,s.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isOnComposition:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(t){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return c()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":this.value},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)}},watch:{value:function(t){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[t])}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(t){this.focused=!1,this.$emit("blur",t),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var t=this.autosize;if("textarea"===this.type)if(t){var e=t.minRows,i=t.maxRows;this.textareaCalcStyle=l(this.$refs.textarea,e,i)}else this.textareaCalcStyle={minHeight:l(this.$refs.textarea).minHeight}}},handleFocus:function(t){this.focused=!0,this.$emit("focus",t)},handleComposition:function(t){"compositionstart"===t.type&&(this.isOnComposition=!0),"compositionend"===t.type&&(this.isOnComposition=!1,this.handleInput(t))},handleInput:function(t){var e=this;this.isOnComposition||t.target.value!==this.nativeInputValue&&(this.$emit("input",t.target.value),this.$nextTick(function(){e.getInput().value=e.value}))},handleChange:function(t){this.$emit("change",t.target.value)},calcIconOffset:function(t){var e=[].slice.call(this.$el.querySelectorAll(".el-input__"+t)||[]);if(e.length){for(var i=null,r=0;r<e.length;r++)if(e[r].parentNode===this.$el){i=e[r];break}if(i){var n={suffix:"append",prefix:"prepend"}[t];this.$slots[n]?i.style.transform="translateX("+("suffix"===t?"-":"")+this.$el.querySelector(".el-input-group__"+n).offsetWidth+"px)":i.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},p=i(0),f=Object(p.a)(h,r,[],!1,null,null,null);f.options.__file="packages/input/src/input.vue";var d=f.exports;d.install=function(t){t.component(d.name,d)};e.default=d},8:function(t,e){t.exports=i("f03z")}})},"8NkQ":function(t,e,i){"use strict";e.__esModule=!0,e.default={el:{colorpicker:{confirm:"ç¡®å®",clear:"æ¸ç©º"},datepicker:{now:"æ­¤å»",today:"ä»å¤©",cancel:"åæ¶",clear:"æ¸ç©º",confirm:"ç¡®å®",selectDate:"éæ©æ¥æ",selectTime:"éæ©æ¶é´",startDate:"å¼å§æ¥æ",startTime:"å¼å§æ¶é´",endDate:"ç»ææ¥æ",endTime:"ç»ææ¶é´",prevYear:"åä¸å¹´",nextYear:"åä¸å¹´",prevMonth:"ä¸ä¸ªæ",nextMonth:"ä¸ä¸ªæ",year:"å¹´",month1:"1 æ",month2:"2 æ",month3:"3 æ",month4:"4 æ",month5:"5 æ",month6:"6 æ",month7:"7 æ",month8:"8 æ",month9:"9 æ",month10:"10 æ",month11:"11 æ",month12:"12 æ",weeks:{sun:"æ¥",mon:"ä¸",tue:"äº",wed:"ä¸",thu:"å",fri:"äº",sat:"å­"},months:{jan:"ä¸æ",feb:"äºæ",mar:"ä¸æ",apr:"åæ",may:"äºæ",jun:"å­æ",jul:"ä¸æ",aug:"å«æ",sep:"ä¹æ",oct:"åæ",nov:"åä¸æ",dec:"åäºæ"}},select:{loading:"å è½½ä¸­",noMatch:"æ å¹éæ°æ®",noData:"æ æ°æ®",placeholder:"è¯·éæ©"},cascader:{noMatch:"æ å¹éæ°æ®",loading:"å è½½ä¸­",placeholder:"è¯·éæ©"},pagination:{goto:"åå¾",pagesize:"æ¡/é¡µ",total:"å± {total} æ¡",pageClassifier:"é¡µ"},messagebox:{title:"æç¤º",confirm:"ç¡®å®",cancel:"åæ¶",error:"è¾å¥çæ°æ®ä¸åæ³!"},upload:{deleteTip:"æ delete é®å¯å é¤",delete:"å é¤",preview:"æ¥çå¾ç",continue:"ç»§ç»­ä¸ä¼ "},table:{emptyText:"ææ æ°æ®",confirmFilter:"ç­é",resetFilter:"éç½®",clearFilter:"å¨é¨",sumText:"åè®¡"},tree:{emptyText:"ææ æ°æ®"},transfer:{noMatch:"æ å¹éæ°æ®",noData:"æ æ°æ®",titles:["åè¡¨ 1","åè¡¨ 2"],filterPlaceholder:"è¯·è¾å¥æç´¢åå®¹",noCheckedFormat:"å± {total} é¡¹",hasCheckedFormat:"å·²é {checked}/{total} é¡¹"}}}},"8oxB":function(t,e){var i,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var l,u=[],c=!1,h=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=s(p);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new d(t,e)),1!==u.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},"9Plv":function(t,e,i){},"9SnE":function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=67)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},13:function(t,e){t.exports=i("UShQ")},20:function(t,e){t.exports=i("Qfgm")},6:function(t,e){t.exports=i("i7/w")},67:function(t,e,i){"use strict";i.r(e);var r=i(6),n=i.n(r),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":t.handleAfterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["el-message",t.type&&!t.iconClass?"el-message--"+t.type:"",t.center?"is-center":"",t.showClose?"is-closable":"",t.customClass],attrs:{role:"alert"},on:{mouseenter:t.clearTimer,mouseleave:t.startTimer}},[t.iconClass?i("i",{class:t.iconClass}):i("i",{class:t.typeClass}),t._t("default",[t.dangerouslyUseHTMLString?i("p",{staticClass:"el-message__content",domProps:{innerHTML:t._s(t.message)}}):i("p",{staticClass:"el-message__content"},[t._v(t._s(t.message))])]),t.showClose?i("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:t.close}}):t._e()],2)])};o._withStripped=!0;var a={success:"success",info:"info",warning:"warning",error:"error"},s={data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+a[this.type]:""}},watch:{closed:function(t){t&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"==typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var t=this;0<this.duration&&(this.timer=setTimeout(function(){t.closed||t.close()},this.duration))},keydown:function(t){27===t.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},l=i(0),u=Object(l.a)(s,o,[],!1,null,null,null);u.options.__file="packages/message/src/main.vue";var c=u.exports,h=i(13),p=i(20),f=n.a.extend(c),d=void 0,m=[],y=1,g=function t(e){if(!n.a.prototype.$isServer){"string"==typeof(e=e||{})&&(e={message:e});var i=e.onClose,r="message_"+y++;return e.onClose=function(){t.close(r,i)},(d=new f({data:e})).id=r,Object(p.isVNode)(d.message)&&(d.$slots.default=[d.message],d.message=null),d.vm=d.$mount(),document.body.appendChild(d.vm.$el),d.vm.visible=!0,d.dom=d.vm.$el,d.dom.style.zIndex=h.PopupManager.nextZIndex(),m.push(d),d.vm}};["success","warning","info","error"].forEach(function(e){g[e]=function(t){return"string"==typeof t&&(t={message:t}),t.type=e,g(t)}}),g.close=function(t,e){for(var i=0,r=m.length;i<r;i++)if(t===m[i].id){"function"==typeof e&&e(m[i]),m.splice(i,1);break}},g.closeAll=function(){for(var t=m.length-1;0<=t;t--)m[t].close()};var v=g;e.default=v}})},"9csQ":function(f,t,e){(function(t){var n=1/0,o="[object Symbol]",e="object"==typeof t&&t&&t.Object===Object&&t,i="object"==typeof self&&self&&self.Object===Object&&self,r=e||i||Function("return this")(),a=Object.prototype,s=0,l=a.toString,u=r.Symbol,c=u?u.prototype:void 0,h=c?c.toString:void 0;function p(t){if("string"==typeof t)return t;if("symbol"==typeof(e=t)||(i=e)&&"object"==typeof i&&l.call(e)==o)return h?h.call(t):"";var e,i,r=t+"";return"0"==r&&1/t==-n?"-0":r}f.exports=function(t){var e,i=++s;return(null==(e=t)?"":p(e))+i}}).call(this,e("yLpj"))},AKIq:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("/rf6");e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&2<=t.length&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(1<e.length&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,i){if(!e||!i)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,i){if(!t)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,i){if(!t)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+i+", FeatureCollection required");for(var r=0,n=t.features;r<n.length;r++){var o=n[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},ATId:function(t,e,i){t.exports=function(f,m){"use strict";var t;return f=f&&f.hasOwnProperty("default")?f.default:f,m=m&&m.hasOwnProperty("default")?m.default:m,function(t){var c;function d(){return document.createElement("canvas")}t.exports,(c=window).DOMParser=window.DOMParser;var p,h=function(t,e,i){if(null!=t||null!=e||null!=i){var r=function(n){var I={opts:n,FRAMERATE:30,MAX_VIRTUAL_PIXELS:3e4,rootEmSize:12,emSize:12,log:function(t){}};1==I.opts.log&&"undefined"!=typeof console&&(I.log=function(t){console.log(t)}),I.init=function(t){var e=0;I.UniqueId=function(){return"canvg"+ ++e},I.Definitions={},I.Styles={},I.StylesSpecificity={},I.Animations=[],I.Images=[],I.ctx=t,I.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},I.init(),I.ImagesLoaded=function(){for(var t=0;t<I.Images.length;t++)if(!I.Images[t].loaded)return!1;return!0},I.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},I.compressSpaces=function(t){return t.replace(/(?!\u3000)\s+/gm," ")},I.ajax=function(t){var e;return(e=c.XMLHttpRequest?new c.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(e.open("GET",t,!1),e.send(null),e.responseText):null},I.parseXml=function(t){if("undefined"!=typeof Windows&&void 0!==Windows.Data&&void 0!==Windows.Data.Xml){var e=new Windows.Data.Xml.Dom.XmlDocument,i=new Windows.Data.Xml.Dom.XmlLoadSettings;return i.prohibitDtd=!1,e.loadXml(t,i),e}if(!c.DOMParser){t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}try{var r=n.xmldom?new c.DOMParser(n.xmldom):new c.DOMParser;return r.parseFromString(t,"image/svg+xml")}catch(e){return(r=n.xmldom?new c.DOMParser(n.xmldom):new c.DOMParser).parseFromString(t,"text/xml")}},I.Property=function(t,e){this.name=t,this.value=e},I.Property.prototype.getValue=function(){return this.value},I.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},I.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},I.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},I.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},I.Property.prototype.addOpacity=function(t){var e=this.value;if(null!=t.value&&""!=t.value&&"string"==typeof this.value){var i=new f(this.value);i.ok&&(e="rgba("+i.r+", "+i.g+", "+i.b+", "+t.numValue()+")")}return new I.Property(this.name,e)},I.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)'"]+)/);return t&&(t=t[1]),t||(t=this.value),I.Definitions[t]},I.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},I.Property.prototype.getFillStyleDefinition=function(t,e){var i=this.getDefinition();if(null!=i&&i.createGradient)return i.createGradient(I.ctx,t,e);if(null!=i&&i.createPattern){if(i.getHrefAttribute().hasValue()){var r=i.attribute("patternTransform");i=i.getHrefAttribute().getDefinition(),r.hasValue()&&(i.attribute("patternTransform",!0).value=r.value)}return i.createPattern(I.ctx,t)}return null},I.Property.prototype.getDPI=function(t){return 96},I.Property.prototype.getREM=function(t){return I.rootEmSize},I.Property.prototype.getEM=function(t){return I.emSize},I.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},I.Property.prototype.isPixels=function(){if(!this.hasValue())return!1;var t=this.value+"";return!!t.match(/px$/)||!!t.match(/^[0-9]+$/)},I.Property.prototype.toPixels=function(t,e){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/rem$/))return this.numValue()*this.getREM(t);if(i.match(/em$/))return this.numValue()*this.getEM(t);if(i.match(/ex$/))return this.numValue()*this.getEM(t)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(t)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(t)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(t)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(t);if(i.match(/%$/))return this.numValue()*I.ViewPort.ComputeSize(t);var r=this.numValue();return e&&r<1?r*I.ViewPort.ComputeSize(t):r},I.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},I.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var t={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return I.Property.prototype.toTextBaseline=function(){return this.hasValue()?t[this.value]:null},I.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(t,e,i,r,n,o){var a=null!=o?this.Parse(o):this.CreateFont("","","","","",I.ctx.font);return{fontFamily:n=n||a.fontFamily,fontSize:r||a.fontSize,fontStyle:t||a.fontStyle,fontWeight:i||a.fontWeight,fontVariant:e||a.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var a=this;this.Parse=function(t){for(var e={},i=I.trim(I.compressSpaces(t||"")).split(" "),r={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},n="",o=0;o<i.length;o++)r.fontStyle||-1==a.Styles.indexOf(i[o])?r.fontVariant||-1==a.Variants.indexOf(i[o])?r.fontWeight||-1==a.Weights.indexOf(i[o])?r.fontSize?"inherit"!=i[o]&&(n+=i[o]):("inherit"!=i[o]&&(e.fontSize=i[o].split("/")[0]),r.fontStyle=r.fontVariant=r.fontWeight=r.fontSize=!0):("inherit"!=i[o]&&(e.fontWeight=i[o]),r.fontStyle=r.fontVariant=r.fontWeight=!0):("inherit"!=i[o]&&(e.fontVariant=i[o]),r.fontStyle=r.fontVariant=!0):("inherit"!=i[o]&&(e.fontStyle=i[o]),r.fontStyle=!0);return""!=n&&(e.fontFamily=n),e}},I.ToNumberArray=function(t){for(var e=I.trim(I.compressSpaces((t||"").replace(/,/g," "))).split(" "),i=0;i<e.length;i++)e[i]=parseFloat(e[i]);return e},I.Point=function(t,e){this.x=t,this.y=e},I.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},I.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],i=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=i},I.CreatePoint=function(t){var e=I.ToNumberArray(t);return new I.Point(e[0],e[1])},I.CreatePath=function(t){for(var e=I.ToNumberArray(t),i=[],r=0;r<e.length;r+=2)i.push(new I.Point(e[r],e[r+1]));return i},I.BoundingBox=function(t,e,i,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)},this.addQuadraticCurve=function(t,e,i,r,n,o){var a=t+2/3*(i-t),s=e+2/3*(r-e),l=a+1/3*(n-t),u=s+1/3*(o-e);this.addBezierCurve(t,e,a,l,s,u,n,o)},this.addBezierCurve=function(t,e,i,r,n,o,a,s){var l=[t,e],u=[i,r],c=[n,o],h=[a,s];this.addPoint(l[0],l[1]),this.addPoint(h[0],h[1]);for(var p=0;p<=1;p++){var f=function(t){return Math.pow(1-t,3)*l[p]+3*Math.pow(1-t,2)*t*u[p]+3*(1-t)*Math.pow(t,2)*c[p]+Math.pow(t,3)*h[p]},d=6*l[p]-12*u[p]+6*c[p],m=-3*l[p]+9*u[p]-9*c[p]+3*h[p],y=3*u[p]-3*l[p];if(0!=m){var g=Math.pow(d,2)-4*y*m;if(!(g<0)){var v=(-d+Math.sqrt(g))/(2*m);0<v&&v<1&&(0==p&&this.addX(f(v)),1==p&&this.addY(f(v)));var _=(-d-Math.sqrt(g))/(2*m);0<_&&_<1&&(0==p&&this.addX(f(_)),1==p&&this.addY(f(_)))}}else{if(0==d)continue;var b=-y/d;0<b&&b<1&&(0==p&&this.addX(f(b)),1==p&&this.addY(f(b)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(i,r)},I.Transform=function(t){var e=this;this.Type={},this.Type.translate=function(t){this.p=I.CreatePoint(t),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.unapply=function(t){t.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var e=I.ToNumberArray(t);this.angle=new I.Property("angle",e[0]),this.cx=e[1]||0,this.cy=e[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.unapply=function(t){t.translate(this.cx,this.cy),t.rotate(-1*this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=I.CreatePoint(t),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(t){t.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=I.ToNumberArray(t),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(t){var e=this.m[0],i=this.m[2],r=this.m[4],n=this.m[1],o=this.m[3],a=this.m[5],s=1/(e*(1*o-0*a)-i*(1*n-0*a)+r*(0*n-0*o));t.transform(s*(1*o-0*a),s*(0*a-1*n),s*(0*r-1*i),s*(1*e-0*r),s*(i*a-r*o),s*(r*n-e*a))},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=e.Type.matrix,this.base(t),this.angle=new I.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=e.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.unapply=function(t){for(var e=this.transforms.length-1;0<=e;e--)this.transforms[e].unapply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=I.trim(I.compressSpaces(t)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<i.length;r++)if("none"!==i[r]){var n=I.trim(i[r].split("(")[0]),o=i[r].split("(")[1].replace(")",""),a=this.Type[n];if(void 0!==a){var s=new a(o);s.type=n,this.transforms.push(s)}}},I.AspectRatio=function(t,e,i,r,n,o,a,s,l,u){var c=(e=(e=I.compressSpaces(e)).replace(/^defer\s/,"")).split(" ")[0]||"xMidYMid",h=e.split(" ")[1]||"meet",p=i/r,f=n/o,d=Math.min(p,f),m=Math.max(p,f);"meet"==h&&(r*=d,o*=d),"slice"==h&&(r*=m,o*=m),l=new I.Property("refX",l),u=new I.Property("refY",u),l.hasValue()&&u.hasValue()?t.translate(-d*l.toPixels("x"),-d*u.toPixels("y")):(c.match(/^xMid/)&&("meet"==h&&d==f||"slice"==h&&m==f)&&t.translate(i/2-r/2,0),c.match(/YMid$/)&&("meet"==h&&d==p||"slice"==h&&m==p)&&t.translate(0,n/2-o/2),c.match(/^xMax/)&&("meet"==h&&d==f||"slice"==h&&m==f)&&t.translate(i-r,0),c.match(/YMax$/)&&("meet"==h&&d==p||"slice"==h&&m==p)&&t.translate(0,n-o)),"none"==c?t.scale(p,f):"meet"==h?t.scale(d,d):"slice"==h&&t.scale(m,m),t.translate(null==a?0:-a,null==s?0:-s)},I.Element={},I.EmptyProperty=new I.Property("EMPTY",""),I.Element.ElementBase=function(o){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(t,e){var i=this.attributes[t];return null!=i?i:(1==e&&(i=new I.Property(t,""),this.attributes[t]=i),i||I.EmptyProperty)},this.getHrefAttribute=function(){for(var t in this.attributes)if("href"==t||t.match(/:href$/))return this.attributes[t];return I.EmptyProperty},this.style=function(t,e,i){var r=this.styles[t];if(null!=r)return r;var n=this.attribute(t);if(null!=n&&n.hasValue())return this.styles[t]=n;if(1!=i){var o=this.parent;if(null!=o){var a=o.style(t);if(null!=a&&a.hasValue())return a}}return 1==e&&(r=new I.Property(t,""),this.styles[t]=r),r||I.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(t.save(),this.style("mask").hasValue()){var e=this.style("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var i=this.style("filter").getDefinition();null!=i&&i.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(t){},this.clearContext=function(t){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(t,e){var i=t;e&&(i=I.CreateElement(t)),i.parent=this,"title"!=i.type&&this.children.push(i)},this.addStylesFromStyleDefinition=function(){for(var t in I.Styles)if("@"!=t[0]&&p(o,t)){var e=I.Styles[t],i=I.StylesSpecificity[t];if(null!=e)for(var r in e){var n=this.stylesSpecificity[r];void 0===n&&(n="000"),n<i&&(this.styles[r]=e[r],this.stylesSpecificity[r]=i)}}};var t,e=new RegExp("^[A-Z-]+$");if(null!=o&&1==o.nodeType){for(var i=0;i<o.attributes.length;i++){var r=o.attributes[i],n=(t=r.nodeName,e.test(t)?t.toLowerCase():t);this.attributes[n]=new I.Property(n,r.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue()){var a=this.attribute("style").value.split(";");for(i=0;i<a.length;i++)if(""!=I.trim(a[i])){var s=a[i].split(":"),l=I.trim(s[0]),u=I.trim(s[1]);this.styles[l]=new I.Property(l,u)}}for(this.attribute("id").hasValue()&&null==I.Definitions[this.attribute("id").value]&&(I.Definitions[this.attribute("id").value]=this),i=0;i<o.childNodes.length;i++){var c=o.childNodes[i];if(1==c.nodeType&&this.addChild(c,!0),this.captureTextNodes&&(3==c.nodeType||4==c.nodeType)){var h=c.value||c.text||c.textContent||"";""!=I.compressSpaces(h)&&this.addChild(new I.Element.tspan(c),!1)}}}},I.Element.RenderedElementBase=function(t){this.base=I.Element.ElementBase,this.base(t),this.calculateOpacity=function(){for(var t=1,e=this;null!=e;){var i=e.style("opacity",!1,!0);i.hasValue()&&(t*=i.numValue()),e=e.parent}return t},this.setContext=function(t,e){if(!e){var i;if(this.style("fill").isUrlDefinition())null!=(i=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")))&&(t.fillStyle=i);else if(this.style("fill").hasValue()){var r;"currentColor"==(r=this.style("fill")).value&&(r.value=this.style("color").value),"inherit"!=r.value&&(t.fillStyle="none"==r.value?"rgba(0,0,0,0)":r.value)}if(this.style("fill-opacity").hasValue()&&(r=(r=new I.Property("fill",t.fillStyle)).addOpacity(this.style("fill-opacity")),t.fillStyle=r.value),this.style("stroke").isUrlDefinition())null!=(i=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")))&&(t.strokeStyle=i);else if(this.style("stroke").hasValue()){var n;"currentColor"==(n=this.style("stroke")).value&&(n.value=this.style("color").value),"inherit"!=n.value&&(t.strokeStyle="none"==n.value?"rgba(0,0,0,0)":n.value)}if(this.style("stroke-opacity").hasValue()&&(n=(n=new I.Property("stroke",t.strokeStyle)).addOpacity(this.style("stroke-opacity")),t.strokeStyle=n.value),this.style("stroke-width").hasValue()){var o=this.style("stroke-width").toPixels();t.lineWidth=0==o?.001:o}if(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),this.style("paint-order").hasValue()&&(t.paintOrder=this.style("paint-order").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var a=I.ToNumberArray(this.style("stroke-dasharray").value);void 0!==t.setLineDash?t.setLineDash(a):void 0!==t.webkitLineDash?t.webkitLineDash=a:void 0===t.mozDash||1==a.length&&0==a[0]||(t.mozDash=a);var s=this.style("stroke-dashoffset").toPixels();void 0!==t.lineDashOffset?t.lineDashOffset=s:void 0!==t.webkitLineDashOffset?t.webkitLineDashOffset=s:void 0!==t.mozDashOffset&&(t.mozDashOffset=s)}}if(void 0!==t.font){t.font=I.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString();var l=this.style("font-size",!1,!1);l.isPixels()&&(I.emSize=l.toPixels())}if(this.style("transform",!1,!0).hasValue()&&new I.Transform(this.style("transform",!1,!0).value).apply(t),this.style("clip-path",!1,!0).hasValue()){var u=this.style("clip-path",!1,!0).getDefinition();null!=u&&u.apply(t)}t.globalAlpha=this.calculateOpacity()}},I.Element.RenderedElementBase.prototype=new I.Element.ElementBase,I.Element.PathElementBase=function(t){this.base=I.Element.RenderedElementBase,this.base(t),this.path=function(t){return null!=t&&t.beginPath(),new I.BoundingBox},this.renderChildren=function(t){this.path(t),I.Mouse.checkPath(this,t),""!=t.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?t.fill(this.style("fill-rule").value):t.fill()),""!=t.strokeStyle&&t.stroke();var e=this.getMarkers();if(null!=e){if(this.style("marker-start").isUrlDefinition()&&(i=this.style("marker-start").getDefinition()).render(t,e[0][0],e[0][1]),this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),r=1;r<e.length-1;r++)i.render(t,e[r][0],e[r][1]);this.style("marker-end").isUrlDefinition()&&(i=this.style("marker-end").getDefinition()).render(t,e[e.length-1][0],e[e.length-1][1])}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},I.Element.PathElementBase.prototype=new I.Element.RenderedElementBase,I.Element.svg=function(t){this.base=I.Element.RenderedElementBase,this.base(t),this.baseClearContext=this.clearContext,this.clearContext=function(t){this.baseClearContext(t),I.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(t){if(t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.canvas.style&&void 0!==t.font&&void 0!==c.getComputedStyle){t.font=c.getComputedStyle(t.canvas).getPropertyValue("font");var e=new I.Property("fontSize",I.Font.Parse(t.font).fontSize);e.hasValue()&&(I.rootEmSize=I.emSize=e.toPixels("y"))}this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var i=I.ViewPort.width(),r=I.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),void 0===this.root){i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");var n=0,o=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(n=-this.attribute("refX").toPixels("x"),o=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(t.beginPath(),t.moveTo(n,o),t.lineTo(i,o),t.lineTo(i,r),t.lineTo(n,r),t.closePath(),t.clip())}if(I.ViewPort.SetCurrent(i,r),this.attribute("viewBox").hasValue()){var a=I.ToNumberArray(this.attribute("viewBox").value),s=a[0],l=a[1];i=a[2],r=a[3],I.AspectRatio(t,this.attribute("preserveAspectRatio").value,I.ViewPort.width(),i,I.ViewPort.height(),r,s,l,this.attribute("refX").value,this.attribute("refY").value),I.ViewPort.RemoveCurrent(),I.ViewPort.SetCurrent(a[2],a[3])}}},I.Element.svg.prototype=new I.Element.RenderedElementBase,I.Element.rect=function(t){this.base=I.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y"),o=this.attribute("rx").toPixels("x"),a=this.attribute("ry").toPixels("y");if(this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(a=o),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(o=a),o=Math.min(o,r/2),a=Math.min(a,n/2),null!=t){var s=(Math.sqrt(2)-1)/3*4;t.beginPath(),t.moveTo(e+o,i),t.lineTo(e+r-o,i),t.bezierCurveTo(e+r-o+s*o,i,e+r,i+a-s*a,e+r,i+a),t.lineTo(e+r,i+n-a),t.bezierCurveTo(e+r,i+n-a+s*a,e+r-o+s*o,i+n,e+r-o,i+n),t.lineTo(e+o,i+n),t.bezierCurveTo(e+o-s*o,i+n,e,i+n-a+s*a,e,i+n-a),t.lineTo(e,i+a),t.bezierCurveTo(e,i+a-s*a,e+o-s*o,i,e+o,i),t.closePath()}return new I.BoundingBox(e,i,e+r,i+n)}},I.Element.rect.prototype=new I.Element.PathElementBase,I.Element.circle=function(t){this.base=I.Element.PathElementBase,this.base(t),this.path=function(t){var e=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(e,i,r,0,2*Math.PI,!1),t.closePath()),new I.BoundingBox(e-r,i-r,e+r,i+r)}},I.Element.circle.prototype=new I.Element.PathElementBase,I.Element.ellipse=function(t){this.base=I.Element.PathElementBase,this.base(t),this.path=function(t){var e=(Math.sqrt(2)-1)/3*4,i=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),n=this.attribute("cx").toPixels("x"),o=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(n+i,o),t.bezierCurveTo(n+i,o+e*r,n+e*i,o+r,n,o+r),t.bezierCurveTo(n-e*i,o+r,n-i,o+e*r,n-i,o),t.bezierCurveTo(n-i,o-e*r,n-e*i,o-r,n,o-r),t.bezierCurveTo(n+e*i,o-r,n+i,o-e*r,n+i,o),t.closePath()),new I.BoundingBox(n-i,o-r,n+i,o+r)}},I.Element.ellipse.prototype=new I.Element.PathElementBase,I.Element.line=function(t){this.base=I.Element.PathElementBase,this.base(t),this.getPoints=function(){return[new I.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new I.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(t){var e=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y)),new I.BoundingBox(e[0].x,e[0].y,e[1].x,e[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},I.Element.line.prototype=new I.Element.PathElementBase,I.Element.polyline=function(t){this.base=I.Element.PathElementBase,this.base(t),this.points=I.CreatePath(this.attribute("points").value),this.path=function(t){var e=new I.BoundingBox(this.points[0].x,this.points[0].y);null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)e.addPoint(this.points[i].x,this.points[i].y),null!=t&&t.lineTo(this.points[i].x,this.points[i].y);return e},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return 0<t.length&&t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},I.Element.polyline.prototype=new I.Element.PathElementBase,I.Element.polygon=function(t){this.base=I.Element.polyline,this.base(t),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},I.Element.polygon.prototype=new I.Element.polyline,I.Element.path=function(t){this.base=I.Element.PathElementBase,this.base(t);var e=this.attribute("d").value;e=e.replace(/,/gm," ");for(var i=0;i<2;i++)e=e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");for(e=(e=e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2"),i=0;i<2;i++)e=e.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");e=e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),e=I.compressSpaces(e),e=I.trim(e),this.PathParser=new function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new I.Point(0,0),this.control=new I.Point(0,0),this.current=new I.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new I.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t},this.getReflectedControlPoint=function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new I.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,i){null!=i&&0<this.angles.length&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(i)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(e),this.path=function(t){var e=this.PathParser;e.reset();var i=new I.BoundingBox;for(null!=t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":var r=e.getAsCurrentPoint();for(e.addMarker(r),i.addPoint(r.x,r.y),null!=t&&t.moveTo(r.x,r.y),e.start=e.current;!e.isCommandOrEnd();)r=e.getAsCurrentPoint(),e.addMarker(r,e.start),i.addPoint(r.x,r.y),null!=t&&t.lineTo(r.x,r.y);break;case"L":case"l":for(;!e.isCommandOrEnd();){var n=e.current;r=e.getAsCurrentPoint(),e.addMarker(r,n),i.addPoint(r.x,r.y),null!=t&&t.lineTo(r.x,r.y)}break;case"H":case"h":for(;!e.isCommandOrEnd();){var o=new I.Point((e.isRelativeCommand()?e.current.x:0)+e.getScalar(),e.current.y);e.addMarker(o,e.current),e.current=o,i.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y)}break;case"V":case"v":for(;!e.isCommandOrEnd();)o=new I.Point(e.current.x,(e.isRelativeCommand()?e.current.y:0)+e.getScalar()),e.addMarker(o,e.current),e.current=o,i.addPoint(e.current.x,e.current.y),null!=t&&t.lineTo(e.current.x,e.current.y);break;case"C":case"c":for(;!e.isCommandOrEnd();){var a=e.current,s=e.getPoint(),l=e.getAsControlPoint(),u=e.getAsCurrentPoint();e.addMarker(u,l,s),i.addBezierCurve(a.x,a.y,s.x,s.y,l.x,l.y,u.x,u.y),null!=t&&t.bezierCurveTo(s.x,s.y,l.x,l.y,u.x,u.y)}break;case"S":case"s":for(;!e.isCommandOrEnd();)a=e.current,s=e.getReflectedControlPoint(),l=e.getAsControlPoint(),u=e.getAsCurrentPoint(),e.addMarker(u,l,s),i.addBezierCurve(a.x,a.y,s.x,s.y,l.x,l.y,u.x,u.y),null!=t&&t.bezierCurveTo(s.x,s.y,l.x,l.y,u.x,u.y);break;case"Q":case"q":for(;!e.isCommandOrEnd();)a=e.current,l=e.getAsControlPoint(),u=e.getAsCurrentPoint(),e.addMarker(u,l,l),i.addQuadraticCurve(a.x,a.y,l.x,l.y,u.x,u.y),null!=t&&t.quadraticCurveTo(l.x,l.y,u.x,u.y);break;case"T":case"t":for(;!e.isCommandOrEnd();)a=e.current,l=e.getReflectedControlPoint(),e.control=l,u=e.getAsCurrentPoint(),e.addMarker(u,l,l),i.addQuadraticCurve(a.x,a.y,l.x,l.y,u.x,u.y),null!=t&&t.quadraticCurveTo(l.x,l.y,u.x,u.y);break;case"A":case"a":for(;!e.isCommandOrEnd();){a=e.current;var c=e.getScalar(),h=e.getScalar(),p=e.getScalar()*(Math.PI/180),f=e.getScalar(),d=e.getScalar(),m=(u=e.getAsCurrentPoint(),new I.Point(Math.cos(p)*(a.x-u.x)/2+Math.sin(p)*(a.y-u.y)/2,-Math.sin(p)*(a.x-u.x)/2+Math.cos(p)*(a.y-u.y)/2)),y=Math.pow(m.x,2)/Math.pow(c,2)+Math.pow(m.y,2)/Math.pow(h,2);1<y&&(c*=Math.sqrt(y),h*=Math.sqrt(y));var g=(f==d?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(h,2)-Math.pow(c,2)*Math.pow(m.y,2)-Math.pow(h,2)*Math.pow(m.x,2))/(Math.pow(c,2)*Math.pow(m.y,2)+Math.pow(h,2)*Math.pow(m.x,2)));isNaN(g)&&(g=0);var v=new I.Point(g*c*m.y/h,g*-h*m.x/c),_=new I.Point((a.x+u.x)/2+Math.cos(p)*v.x-Math.sin(p)*v.y,(a.y+u.y)/2+Math.sin(p)*v.x+Math.cos(p)*v.y),b=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},x=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(b(t)*b(e))},w=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(x(t,e))},S=w([1,0],[(m.x-v.x)/c,(m.y-v.y)/h]),C=[(m.x-v.x)/c,(m.y-v.y)/h],E=[(-m.x-v.x)/c,(-m.y-v.y)/h],T=w(C,E);x(C,E)<=-1&&(T=Math.PI),1<=x(C,E)&&(T=0);var k=1-d?1:-1,M=S+k*(T/2),P=new I.Point(_.x+c*Math.cos(M),_.y+h*Math.sin(M));if(e.addMarkerAngle(P,M-k*Math.PI/2),e.addMarkerAngle(u,M-k*Math.PI),i.addPoint(u.x,u.y),null!=t){x=h<c?c:h;var A=h<c?1:c/h,L=h<c?h/c:1;t.translate(_.x,_.y),t.rotate(p),t.scale(A,L),t.arc(0,0,x,S,S+T,1-d),t.scale(1/A,1/L),t.rotate(-p),t.translate(-_.x,-_.y)}}break;case"Z":case"z":null!=t&&i.x1!==i.x2&&i.y1!==i.y2&&t.closePath(),e.current=e.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),i=[],r=0;r<t.length;r++)i.push([t[r],e[r]]);return i}},I.Element.path.prototype=new I.Element.PathElementBase,I.Element.pattern=function(t){this.base=I.Element.ElementBase,this.base(t),this.createPattern=function(t,e){var i=this.attribute("width").toPixels("x",!0),r=this.attribute("height").toPixels("y",!0),n=new I.Element.svg;n.attributes.viewBox=new I.Property("viewBox",this.attribute("viewBox").value),n.attributes.width=new I.Property("width",i+"px"),n.attributes.height=new I.Property("height",r+"px"),n.attributes.transform=new I.Property("transform",this.attribute("patternTransform").value),n.children=this.children;var o=d();o.width=i,o.height=r;var a=o.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&a.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var s=-1;s<=1;s++)for(var l=-1;l<=1;l++)a.save(),n.attributes.x=new I.Property("x",s*o.width),n.attributes.y=new I.Property("y",l*o.height),n.render(a),a.restore();return t.createPattern(o,"repeat")}},I.Element.pattern.prototype=new I.Element.ElementBase,I.Element.marker=function(t){this.base=I.Element.ElementBase,this.base(t),this.baseRender=this.render,this.render=function(t,e,i){if(e){t.translate(e.x,e.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth),t.save();var r=new I.Element.svg;r.attributes.viewBox=new I.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new I.Property("refX",this.attribute("refX").value),r.attributes.refY=new I.Property("refY",this.attribute("refY").value),r.attributes.width=new I.Property("width",this.attribute("markerWidth").value),r.attributes.height=new I.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new I.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new I.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(t),t.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-i),t.translate(-e.x,-e.y)}}},I.Element.marker.prototype=new I.Element.ElementBase,I.Element.defs=function(t){this.base=I.Element.ElementBase,this.base(t),this.render=function(t){}},I.Element.defs.prototype=new I.Element.ElementBase,I.Element.GradientBase=function(t){this.base=I.Element.ElementBase,this.base(t),this.stops=[];for(var e=0;e<this.children.length;e++){var i=this.children[e];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(t){for(var e=0;e<this.attributesToInherit.length;e++){var i=this.attributesToInherit[e];!this.attribute(i).hasValue()&&t.attribute(i).hasValue()&&(this.attribute(i,!0).value=t.attribute(i).value)}},this.createGradient=function(t,e,i){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(r));var n=function(t){return i.hasValue()?new I.Property("color",t).addOpacity(i).value:t},o=this.getGradient(t,e);if(null==o)return n(r.stops[r.stops.length-1].color);for(var a=0;a<r.stops.length;a++)o.addColorStop(r.stops[a].offset,n(r.stops[a].color));if(this.attribute("gradientTransform").hasValue()){var s=I.ViewPort.viewPorts[0],l=new I.Element.rect;l.attributes.x=new I.Property("x",-I.MAX_VIRTUAL_PIXELS/3),l.attributes.y=new I.Property("y",-I.MAX_VIRTUAL_PIXELS/3),l.attributes.width=new I.Property("width",I.MAX_VIRTUAL_PIXELS),l.attributes.height=new I.Property("height",I.MAX_VIRTUAL_PIXELS);var u=new I.Element.g;u.attributes.transform=new I.Property("transform",this.attribute("gradientTransform").value),u.children=[l];var c=new I.Element.svg;c.attributes.x=new I.Property("x",0),c.attributes.y=new I.Property("y",0),c.attributes.width=new I.Property("width",s.width),c.attributes.height=new I.Property("height",s.height),c.children=[u];var h=d();h.width=s.width,h.height=s.height;var p=h.getContext("2d");return p.fillStyle=o,c.render(p),p.createPattern(h,"no-repeat")}return o}},I.Element.GradientBase.prototype=new I.Element.ElementBase,I.Element.linearGradient=function(t){this.base=I.Element.GradientBase,this.base(t),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(t,e){var i="objectBoundingBox"==this.gradientUnits()?e.getBoundingBox(t):null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var r="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),n="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),o="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),a="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return r==o&&n==a?null:t.createLinearGradient(r,n,o,a)}},I.Element.linearGradient.prototype=new I.Element.GradientBase,I.Element.radialGradient=function(t){this.base=I.Element.GradientBase,this.base(t),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(t,e){var i=e.getBoundingBox(t);this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var r="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),n="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),o=r,a=n;this.attribute("fx").hasValue()&&(o="objectBoundingBox"==this.gradientUnits()?i.x()+i.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(a="objectBoundingBox"==this.gradientUnits()?i.y()+i.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits()?(i.width()+i.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(o,a,0,r,n,s)}},I.Element.radialGradient.prototype=new I.Element.GradientBase,I.Element.stop=function(t){this.base=I.Element.ElementBase,this.base(t),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),1<this.offset&&(this.offset=1);var e=this.style("stop-color",!0);""===e.value&&(e.value="#000"),this.style("stop-opacity").hasValue()&&(e=e.addOpacity(this.style("stop-opacity"))),this.color=e.value},I.Element.stop.prototype=new I.Element.ElementBase,I.Element.AnimateBase=function(t){this.base=I.Element.ElementBase,this.base(t),I.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var i=this.calcValue();this.attribute("type").hasValue()&&(i=this.attribute("type").value+"("+i+")"),this.getProperty().value=i,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var e=t.progress*(this.values.value.length-1),i=Math.floor(e),r=Math.ceil(e);t.from=new I.Property("from",parseFloat(this.values.value[i])),t.to=new I.Property("to",parseFloat(this.values.value[r])),t.progress=(e-i)/(r-i)}else t.from=this.from,t.to=this.to;return t}},I.Element.AnimateBase.prototype=new I.Element.ElementBase,I.Element.animate=function(t){this.base=I.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress();return t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress+this.initialUnits}},I.Element.animate.prototype=new I.Element.AnimateBase,I.Element.animateColor=function(t){this.base=I.Element.AnimateBase,this.base(t),this.calcValue=function(){var t=this.progress(),e=new f(t.from.value),i=new f(t.to.value);if(e.ok&&i.ok){var r=e.r+(i.r-e.r)*t.progress,n=e.g+(i.g-e.g)*t.progress,o=e.b+(i.b-e.b)*t.progress;return"rgb("+parseInt(r,10)+","+parseInt(n,10)+","+parseInt(o,10)+")"}return this.attribute("from").value}},I.Element.animateColor.prototype=new I.Element.AnimateBase,I.Element.animateTransform=function(t){this.base=I.Element.AnimateBase,this.base(t),this.calcValue=function(){for(var t=this.progress(),e=I.ToNumberArray(t.from.value),i=I.ToNumberArray(t.to.value),r="",n=0;n<e.length;n++)r+=e[n]+(i[n]-e[n])*t.progress+" ";return r}},I.Element.animateTransform.prototype=new I.Element.animate,I.Element.font=function(t){this.base=I.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var e=0;e<this.children.length;e++){var i=this.children[e];"font-face"==i.type?(this.fontFace=i).style("font-family").hasValue()&&(I.Definitions[i.style("font-family").value]=this):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},I.Element.font.prototype=new I.Element.ElementBase,I.Element.fontface=function(t){this.base=I.Element.ElementBase,this.base(t),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},I.Element.fontface.prototype=new I.Element.ElementBase,I.Element.missingglyph=function(t){this.base=I.Element.path,this.base(t),this.horizAdvX=0},I.Element.missingglyph.prototype=new I.Element.path,I.Element.glyph=function(t){this.base=I.Element.path,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},I.Element.glyph.prototype=new I.Element.path,I.Element.text=function(t){this.captureTextNodes=!0,this.base=I.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t);var e=this.style("dominant-baseline").toTextBaseline();null==e&&(e=this.style("alignment-baseline").toTextBaseline()),null!=e&&(t.textBaseline=e)},this.initializeCoordinates=function(t){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(t,this,0)},this.getBoundingBox=function(t){this.initializeCoordinates(t);for(var e=null,i=0;i<this.children.length;i++){var r=this.getChildBoundingBox(t,this,this,i);null==e?e=r:e.addBoundingBox(r)}return e},this.renderChildren=function(t){this.initializeCoordinates(t);for(var e=0;e<this.children.length;e++)this.renderChild(t,this,this,e)},this.getAnchorDelta=function(t,e,i){var r=this.style("text-anchor").valueOrDefault("start");if("start"==r)return 0;for(var n=0,o=i;o<e.children.length;o++){var a=e.children[o];if(i<o&&a.attribute("x").hasValue())break;n+=a.measureTextRecursive(t)}return-1*("end"==r?n:n/2)},this.adjustChildCoordinates=function(t,e,i,r){var n=i.children[r];return n.attribute("x").hasValue()?(n.x=n.attribute("x").toPixels("x")+e.getAnchorDelta(t,i,r),n.attribute("dx").hasValue()&&(n.x+=n.attribute("dx").toPixels("x"))):(n.attribute("dx").hasValue()&&(e.x+=n.attribute("dx").toPixels("x")),n.x=e.x),e.x=n.x+n.measureText(t),n.attribute("y").hasValue()?(n.y=n.attribute("y").toPixels("y"),n.attribute("dy").hasValue()&&(n.y+=n.attribute("dy").toPixels("y"))):(n.attribute("dy").hasValue()&&(e.y+=n.attribute("dy").toPixels("y")),n.y=e.y),e.y=n.y,n},this.getChildBoundingBox=function(t,e,i,r){var n=this.adjustChildCoordinates(t,e,i,r),o=n.getBoundingBox(t);for(r=0;r<n.children.length;r++){var a=e.getChildBoundingBox(t,e,n,r);o.addBoundingBox(a)}return o},this.renderChild=function(t,e,i,r){var n=this.adjustChildCoordinates(t,e,i,r);for(n.render(t),r=0;r<n.children.length;r++)e.renderChild(t,e,n,r)}},I.Element.text.prototype=new I.Element.RenderedElementBase,I.Element.TextElementBase=function(t){this.base=I.Element.RenderedElementBase,this.base(t),this.getGlyph=function(t,e,i){var r=e[i],n=null;if(t.isArabic){var o="isolated";(0==i||" "==e[i-1])&&i<e.length-2&&" "!=e[i+1]&&(o="terminal"),0<i&&" "!=e[i-1]&&i<e.length-2&&" "!=e[i+1]&&(o="medial"),0<i&&" "!=e[i-1]&&(i==e.length-1||" "==e[i+1])&&(o="initial"),void 0!==t.glyphs[r]&&null==(n=t.glyphs[r][o])&&"glyph"==t.glyphs[r].type&&(n=t.glyphs[r])}else n=t.glyphs[r];return null==n&&(n=t.missingGlyph),n},this.renderChildren=function(t){var e=this.parent.style("font-family").getDefinition();if(null==e)"stroke"==t.paintOrder?(""!=t.strokeStyle&&t.strokeText(I.compressSpaces(this.getText()),this.x,this.y),""!=t.fillStyle&&t.fillText(I.compressSpaces(this.getText()),this.x,this.y)):(""!=t.fillStyle&&t.fillText(I.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(I.compressSpaces(this.getText()),this.x,this.y));else{var i=this.parent.style("font-size").numValueOrDefault(I.Font.Parse(I.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(I.Font.Parse(I.ctx.font).fontStyle),n=this.getText();e.isRTL&&(n=n.split("").reverse().join(""));for(var o=I.ToNumberArray(this.parent.attribute("dx").value),a=0;a<n.length;a++){var s=this.getGlyph(e,n,a),l=i/e.fontFace.unitsPerEm;t.translate(this.x,this.y),t.scale(l,-l);var u=t.lineWidth;t.lineWidth=t.lineWidth*e.fontFace.unitsPerEm/i,"italic"==r&&t.transform(1,0,.4,1,0,0),s.render(t),"italic"==r&&t.transform(1,0,-.4,1,0,0),t.lineWidth=u,t.scale(1/l,-1/l),t.translate(-this.x,-this.y),this.x+=i*(s.horizAdvX||e.horizAdvX)/e.fontFace.unitsPerEm,void 0===o[a]||isNaN(o[a])||(this.x+=o[a])}}},this.getText=function(){},this.measureTextRecursive=function(t){for(var e=this.measureText(t),i=0;i<this.children.length;i++)e+=this.children[i].measureTextRecursive(t);return e},this.measureText=function(t){var e=this.parent.style("font-family").getDefinition();if(null!=e){var i=this.parent.style("font-size").numValueOrDefault(I.Font.Parse(I.ctx.font).fontSize),r=0,n=this.getText();e.isRTL&&(n=n.split("").reverse().join(""));for(var o=I.ToNumberArray(this.parent.attribute("dx").value),a=0;a<n.length;a++)r+=(this.getGlyph(e,n,a).horizAdvX||e.horizAdvX)*i/e.fontFace.unitsPerEm,void 0===o[a]||isNaN(o[a])||(r+=o[a]);return r}var s=I.compressSpaces(this.getText());if(!t.measureText)return 10*s.length;t.save(),this.setContext(t,!0);var l=t.measureText(s).width;return t.restore(),l},this.getBoundingBox=function(t){var e=this.parent.style("font-size").numValueOrDefault(I.Font.Parse(I.ctx.font).fontSize);return new I.BoundingBox(this.x,this.y-e,this.x+this.measureText(t),this.y)}},I.Element.TextElementBase.prototype=new I.Element.RenderedElementBase,I.Element.tspan=function(t){this.captureTextNodes=!0,this.base=I.Element.TextElementBase,this.base(t),this.text=I.compressSpaces(t.value||t.text||t.textContent||""),this.getText=function(){return 0<this.children.length?"":this.text}},I.Element.tspan.prototype=new I.Element.TextElementBase,I.Element.tref=function(t){this.base=I.Element.TextElementBase,this.base(t),this.getText=function(){var t=this.getHrefAttribute().getDefinition();if(null!=t)return t.children[0].getText()}},I.Element.tref.prototype=new I.Element.TextElementBase,I.Element.a=function(t){this.base=I.Element.TextElementBase,this.base(t),this.hasText=0<t.childNodes.length;for(var e=0;e<t.childNodes.length;e++)3!=t.childNodes[e].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].value||t.childNodes[0].data:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(t){if(this.hasText){this.baseRenderChildren(t);var e=new I.Property("fontSize",I.Font.Parse(I.ctx.font).fontSize);I.Mouse.checkBoundingBox(this,new I.BoundingBox(this.x,this.y-e.toPixels("y"),this.x+this.measureText(t),this.y))}else if(0<this.children.length){var i=new I.Element.g;i.children=this.children,i.parent=this,i.render(t)}},this.onclick=function(){c.open(this.getHrefAttribute().value)},this.onmousemove=function(){I.ctx.canvas.style.cursor="pointer"}},I.Element.a.prototype=new I.Element.TextElementBase,I.Element.image=function(t){this.base=I.Element.RenderedElementBase,this.base(t);var e=this.getHrefAttribute().value;if(""!=e){var o=e.match(/\.svg$/);if(I.Images.push(this),this.loaded=!1,o)this.img=I.ajax(e),this.loaded=!0;else{this.img=document.createElement("img"),1==I.opts.useCORS&&(this.img.crossOrigin="Anonymous");var a=this;this.img.onload=function(){a.loaded=!0},this.img.onerror=function(){I.log('ERROR: image "'+e+'" not found'),a.loaded=!0},this.img.src=e}this.renderChildren=function(t){var e=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y");0!=r&&0!=n&&(t.save(),o?t.drawSvg(this.img,e,i,r,n):(t.translate(e,i),I.AspectRatio(t,this.attribute("preserveAspectRatio").value,r,this.img.width,n,this.img.height,0,0),a.loaded&&(void 0===this.img.complete||this.img.complete)&&t.drawImage(this.img,0,0)),t.restore())},this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new I.BoundingBox(t,e,t+i,e+r)}}},I.Element.image.prototype=new I.Element.RenderedElementBase,I.Element.g=function(t){this.base=I.Element.RenderedElementBase,this.base(t),this.getBoundingBox=function(t){for(var e=new I.BoundingBox,i=0;i<this.children.length;i++)e.addBoundingBox(this.children[i].getBoundingBox(t));return e}},I.Element.g.prototype=new I.Element.RenderedElementBase,I.Element.symbol=function(t){this.base=I.Element.RenderedElementBase,this.base(t),this.render=function(t){}},I.Element.symbol.prototype=new I.Element.RenderedElementBase,I.Element.style=function(t){this.base=I.Element.ElementBase,this.base(t);for(var e="",i=0;i<t.childNodes.length;i++)e+=t.childNodes[i].data;e=e.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");var r=(e=I.compressSpaces(e)).split("}");for(i=0;i<r.length;i++)if(""!=I.trim(r[i]))for(var n=r[i].split("{"),o=n[0].split(","),a=n[1].split(";"),s=0;s<o.length;s++){var l=I.trim(o[s]);if(""!=l){for(var u=I.Styles[l]||{},c=0;c<a.length;c++){var h=a[c].indexOf(":"),p=a[c].substr(0,h),f=a[c].substr(h+1,a[c].length-h);null!=p&&null!=f&&(u[I.trim(p)]=new I.Property(I.trim(p),I.trim(f)))}if(I.Styles[l]=u,I.StylesSpecificity[l]=S(l),"@font-face"==l)for(var d=u["font-family"].value.replace(/"/g,""),m=u.src.value.split(","),y=0;y<m.length;y++)if(0<m[y].indexOf('format("svg")'))for(var g=m[y].indexOf("url"),v=m[y].indexOf(")",g),_=m[y].substr(g+5,v-g-6),b=I.parseXml(I.ajax(_)).getElementsByTagName("font"),x=0;x<b.length;x++){var w=I.CreateElement(b[x]);I.Definitions[d]=w}}}},I.Element.style.prototype=new I.Element.ElementBase,I.Element.use=function(t){this.base=I.Element.RenderedElementBase,this.base(t),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))};var r=this.getHrefAttribute().getDefinition();this.path=function(t){null!=r&&r.path(t)},this.elementTransform=function(){if(null!=r&&r.style("transform",!1,!0).hasValue())return new I.Transform(r.style("transform",!1,!0).value)},this.getBoundingBox=function(t){if(null!=r)return r.getBoundingBox(t)},this.renderChildren=function(t){if(null!=r){var e=r;"symbol"==r.type&&((e=new I.Element.svg).type="svg",e.attributes.viewBox=new I.Property("viewBox",r.attribute("viewBox").value),e.attributes.preserveAspectRatio=new I.Property("preserveAspectRatio",r.attribute("preserveAspectRatio").value),e.attributes.overflow=new I.Property("overflow",r.attribute("overflow").value),e.children=r.children),"svg"==e.type&&(this.attribute("width").hasValue()&&(e.attributes.width=new I.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(e.attributes.height=new I.Property("height",this.attribute("height").value)));var i=e.parent;e.parent=null,e.render(t),e.parent=i}}},I.Element.use.prototype=new I.Element.RenderedElementBase,I.Element.mask=function(t){this.base=I.Element.ElementBase,this.base(t),this.apply=function(t,e){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");if(0==n&&0==o){for(var a=new I.BoundingBox,s=0;s<this.children.length;s++)a.addBoundingBox(this.children[s].getBoundingBox(t));i=Math.floor(a.x1),r=Math.floor(a.y1),n=Math.floor(a.width()),o=Math.floor(a.height())}var l=e.attribute("mask").value;e.attribute("mask").value="";var u=d();u.width=i+n,u.height=r+o;var c=u.getContext("2d");this.renderChildren(c);var h=d();h.width=i+n,h.height=r+o;var p=h.getContext("2d");e.render(p),p.globalCompositeOperation="destination-in",p.fillStyle=c.createPattern(u,"no-repeat"),p.fillRect(0,0,i+n,r+o),t.fillStyle=p.createPattern(h,"no-repeat"),t.fillRect(0,0,i+n,r+o),e.attribute("mask").value=l},this.render=function(t){}},I.Element.mask.prototype=new I.Element.ElementBase,I.Element.clipPath=function(t){this.base=I.Element.ElementBase,this.base(t),this.apply=function(t){var e="undefined"!=typeof CanvasRenderingContext2D,i=t.beginPath,r=t.closePath;e&&(CanvasRenderingContext2D.prototype.beginPath=function(){},CanvasRenderingContext2D.prototype.closePath=function(){}),i.call(t);for(var n=0;n<this.children.length;n++){var o=this.children[n];if(void 0!==o.path){var a=void 0!==o.elementTransform&&o.elementTransform();!a&&o.style("transform",!1,!0).hasValue()&&(a=new I.Transform(o.style("transform",!1,!0).value)),a&&a.apply(t),o.path(t),e&&(CanvasRenderingContext2D.prototype.closePath=r),a&&a.unapply(t)}}r.call(t),t.clip(),e&&(CanvasRenderingContext2D.prototype.beginPath=i,CanvasRenderingContext2D.prototype.closePath=r)},this.render=function(t){}},I.Element.clipPath.prototype=new I.Element.ElementBase,I.Element.filter=function(t){this.base=I.Element.ElementBase,this.base(t),this.apply=function(t,e){var i=e.getBoundingBox(t),r=Math.floor(i.x1),n=Math.floor(i.y1),o=Math.floor(i.width()),a=Math.floor(i.height()),s=e.style("filter").value;e.style("filter").value="";for(var l=0,u=0,c=0;c<this.children.length;c++){var h=this.children[c].extraFilterDistance||0;l=Math.max(l,h),u=Math.max(u,h)}var p=d();p.width=o+2*l,p.height=a+2*u;var f=p.getContext("2d");for(f.translate(-r+l,-n+u),e.render(f),c=0;c<this.children.length;c++)"function"==typeof this.children[c].apply&&this.children[c].apply(f,0,0,o+2*l,a+2*u);t.drawImage(p,0,0,o+2*l,a+2*u,r-l,n-u,o+2*l,a+2*u),e.style("filter",!0).value=s},this.render=function(t){}},I.Element.filter.prototype=new I.Element.ElementBase,I.Element.feMorphology=function(t){this.base=I.Element.ElementBase,this.base(t),this.apply=function(t,e,i,r,n){}},I.Element.feMorphology.prototype=new I.Element.ElementBase,I.Element.feComposite=function(t){this.base=I.Element.ElementBase,this.base(t),this.apply=function(t,e,i,r,n){}},I.Element.feComposite.prototype=new I.Element.ElementBase,I.Element.feColorMatrix=function(t){this.base=I.Element.ElementBase,this.base(t);var r=I.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var e=r[0];r=[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var n=r[0]*Math.PI/180,i=function(t,e,i){return t+Math.cos(n)*e+Math.sin(n)*i};r=[i(.213,.787,-.213),i(.715,-.715,-.715),i(.072,-.072,.928),0,0,i(.213,-.213,.143),i(.715,.285,.14),i(.072,-.072,-.283),0,0,i(.213,-.213,-.787),i(.715,-.715,.715),i(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}function c(t,e,i,r,n,o){return t[i*r*4+4*e+o]}function h(t,e,i,r,n,o,a){t[i*r*4+4*e+o]=a}function p(t,e){var i=r[t];return i*(i<0?e-255:e)}this.apply=function(t,e,i,r,n){var o=t.getImageData(0,0,r,n);for(i=0;i<n;i++)for(e=0;e<r;e++){var a=c(o.data,e,i,r,0,0),s=c(o.data,e,i,r,0,1),l=c(o.data,e,i,r,0,2),u=c(o.data,e,i,r,0,3);h(o.data,e,i,r,0,0,p(0,a)+p(1,s)+p(2,l)+p(3,u)+p(4,1)),h(o.data,e,i,r,0,1,p(5,a)+p(6,s)+p(7,l)+p(8,u)+p(9,1)),h(o.data,e,i,r,0,2,p(10,a)+p(11,s)+p(12,l)+p(13,u)+p(14,1)),h(o.data,e,i,r,0,3,p(15,a)+p(16,s)+p(17,l)+p(18,u)+p(19,1))}t.clearRect(0,0,r,n),t.putImageData(o,0,0)}},I.Element.feColorMatrix.prototype=new I.Element.ElementBase,I.Element.feGaussianBlur=function(t){this.base=I.Element.ElementBase,this.base(t),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(t,e,i,r,n){m&&void 0!==m.canvasRGBA?(t.canvas.id=I.UniqueId(),t.canvas.style.display="none",document.body.appendChild(t.canvas),m.canvasRGBA(t.canvas,e,i,r,n,this.blurRadius),document.body.removeChild(t.canvas)):I.log("ERROR: StackBlur.js must be included for blur to work")}},I.Element.feGaussianBlur.prototype=new I.Element.ElementBase,I.Element.title=function(t){},I.Element.title.prototype=new I.Element.ElementBase,I.Element.desc=function(t){},I.Element.desc.prototype=new I.Element.ElementBase,I.Element.MISSING=function(t){I.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},I.Element.MISSING.prototype=new I.Element.ElementBase,I.CreateElement=function(t){var e=t.nodeName.replace(/^[^:]+:/,"");e=e.replace(/\-/g,"");var i=null;return(i=void 0!==I.Element[e]?new I.Element[e](t):new I.Element.MISSING(t)).type=t.nodeName,i},I.load=function(t,e){I.loadXml(t,I.ajax(e))},I.loadXml=function(t,e){I.loadXmlDoc(t,I.parseXml(e))},I.loadXmlDoc=function(o,a){I.init(o);var i=function(t){for(var e=o.canvas;e;)t.x-=e.offsetLeft,t.y-=e.offsetTop,e=e.offsetParent;return c.scrollX&&(t.x+=c.scrollX),c.scrollY&&(t.y+=c.scrollY),t};1!=I.opts.ignoreMouse&&(o.canvas.onclick=function(t){var e=i(new I.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));I.Mouse.onclick(e.x,e.y)},o.canvas.onmousemove=function(t){var e=i(new I.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));I.Mouse.onmousemove(e.x,e.y)});var s=I.CreateElement(a.documentElement);s.root=!0,s.addStylesFromStyleDefinition();var l=!0,r=function(){I.ViewPort.Clear(),o.canvas.parentNode?I.ViewPort.SetCurrent(o.canvas.parentNode.clientWidth,o.canvas.parentNode.clientHeight):I.ViewPort.SetCurrent(800,600),1!=I.opts.ignoreDimensions&&(s.style("width").hasValue()&&(o.canvas.width=s.style("width").toPixels("x"),o.canvas.style&&(o.canvas.style.width=o.canvas.width+"px")),s.style("height").hasValue()&&(o.canvas.height=s.style("height").toPixels("y"),o.canvas.style&&(o.canvas.style.height=o.canvas.height+"px")));var t=o.canvas.clientWidth||o.canvas.width,e=o.canvas.clientHeight||o.canvas.height;if(1==I.opts.ignoreDimensions&&s.style("width").hasValue()&&s.style("height").hasValue()&&(t=s.style("width").toPixels("x"),e=s.style("height").toPixels("y")),I.ViewPort.SetCurrent(t,e),null!=I.opts.offsetX&&(s.attribute("x",!0).value=I.opts.offsetX),null!=I.opts.offsetY&&(s.attribute("y",!0).value=I.opts.offsetY),null!=I.opts.scaleWidth||null!=I.opts.scaleHeight){var i=null,r=null,n=I.ToNumberArray(s.attribute("viewBox").value);null!=I.opts.scaleWidth&&(s.attribute("width").hasValue()?i=s.attribute("width").toPixels("x")/I.opts.scaleWidth:isNaN(n[2])||(i=n[2]/I.opts.scaleWidth)),null!=I.opts.scaleHeight&&(s.attribute("height").hasValue()?r=s.attribute("height").toPixels("y")/I.opts.scaleHeight:isNaN(n[3])||(r=n[3]/I.opts.scaleHeight)),null==i&&(i=r),null==r&&(r=i),s.attribute("width",!0).value=I.opts.scaleWidth,s.attribute("height",!0).value=I.opts.scaleHeight,s.style("transform",!0,!0).value+=" scale("+1/i+","+1/r+")"}1!=I.opts.ignoreClear&&o.clearRect(0,0,t,e),s.render(o),l&&(l=!1,"function"==typeof I.opts.renderCallback&&I.opts.renderCallback(a))},n=!0;I.ImagesLoaded()&&(n=!1,r()),I.intervalID=setInterval(function(){var t=!1;if(n&&I.ImagesLoaded()&&(t=!(n=!1)),1!=I.opts.ignoreMouse&&(t|=I.Mouse.hasEvents()),1!=I.opts.ignoreAnimation)for(var e=0;e<I.Animations.length;e++)t|=I.Animations[e].update(1e3/I.FRAMERATE);"function"==typeof I.opts.forceRedraw&&1==I.opts.forceRedraw()&&(t=!0),t&&(r(),I.Mouse.runEvents())},1e3/I.FRAMERATE)},I.stop=function(){I.intervalID&&clearInterval(I.intervalID)},I.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var i=0;i<this.events.length;i++){var r=this.events[i];e.isPointInPath&&e.isPointInPath(r.x,r.y)&&(this.eventElements[i]=t)}},this.checkBoundingBox=function(t,e){for(var i=0;i<this.events.length;i++){var r=this.events[i];e.isPointInBox(r.x,r.y)&&(this.eventElements[i]=t)}},this.runEvents=function(){I.ctx.canvas.style.cursor="";for(var t=0;t<this.events.length;t++)for(var e=this.events[t],i=this.eventElements[t];i;)e.run(i),i=i.parent;this.events=[],this.eventElements=[]}},I}(i||{});"string"==typeof t&&(t=document.getElementById(t)),null!=t.svg&&t.svg.stop(),t.childNodes&&1==t.childNodes.length&&"OBJECT"==t.childNodes[0].nodeName||(t.svg=r);var n=t.getContext("2d");void 0!==e.documentElement?r.loadXmlDoc(n,e):"<"==e.substr(0,1)?r.loadXml(n,e):r.load(n,e)}else for(var o=document.querySelectorAll("svg"),a=0;a<o.length;a++){var s=o[a],l=document.createElement("canvas");l.width=s.clientWidth,l.height=s.clientHeight,s.parentNode.insertBefore(l,s),s.parentNode.removeChild(s);var u=document.createElement("div");u.appendChild(s),h(l,u.innerHTML)}};"undefined"==typeof Element||(void 0!==Element.prototype.matches?p=function(t,e){return t.matches(e)}:void 0!==Element.prototype.webkitMatchesSelector?p=function(t,e){return t.webkitMatchesSelector(e)}:void 0!==Element.prototype.mozMatchesSelector?p=function(t,e){return t.mozMatchesSelector(e)}:void 0!==Element.prototype.msMatchesSelector?p=function(t,e){return t.msMatchesSelector(e)}:void 0!==Element.prototype.oMatchesSelector?p=function(t,e){return t.oMatchesSelector(e)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(p=function(t,e){return $(t).is(e)}),void 0===p&&"undefined"!=typeof Sizzle&&(p=Sizzle.matchesSelector)));var e=/(\[[^\]]+\])/g,i=/(#[^\s\+>~\.\[:]+)/g,o=/(\.[^\s\+>~\.\[:]+)/g,a=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,s=/(:[\w-]+\([^\)]*\))/gi,l=/(:[^\s\+>~\.\[:]+)/g,u=/([^\s\+>~\.\[:]+)/g;function S(r){var n=[0,0,0],t=function(t,e){var i=r.match(t);null!=i&&(n[e]+=i.length,r=r.replace(t," "))};return r=(r=r.replace(/:not\(([^\)]*)\)/g,"     $1 ")).replace(/{[\s\S]*/gm," "),t(e,1),t(i,0),t(o,1),t(a,2),t(s,1),t(l,1),r=(r=r.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," "),t(u,2),n.join("")}"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,e,i,r,n,o){var a={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:e,offsetY:i,scaleWidth:r,scaleHeight:n};for(var s in o)o.hasOwnProperty(s)&&(a[s]=o[s]);h(this.canvas,t,a)}),t.exports=h}(t={exports:{}}),t.exports}(i("WOGj"),i("Qu5F"))},B4q0:function(t,e,i){var s=i("lsHq"),l=i("hE+I");t.exports=function(t,e){var i,r,n,o,a;return o=e,a=s.copyOptions(o),s.ensureSpacesExists(a),r=l(t,i=a),n="compact"in i&&i.compact?"_parent":"parent",("addParent"in i&&i.addParent?JSON.stringify(r,function(t,e){return t===n?"_":e},i.spaces):JSON.stringify(r,null,i.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},Bnag:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},"CR+5":function(t,e,i){},CWBI:function(t,e,i){t.exports=i("sZro")},CeSn:function(t,e){var o="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,h=Object.prototype.toString;function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=function(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||(i=e)&&"object"==typeof i&&h.call(e)==o)return NaN;var e,i;if(p(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=p(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=l.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):s.test(t)?NaN:+t}},D2yo:function(t,e){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=115)}({115:function(t,e,i){"use strict";i.r(e);var r={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:{type:String,default:"top"}},computed:{style:function(){var t={};return this.gutter&&(t.marginLeft="-"+this.gutter/2+"px",t.marginRight=t.marginLeft),t}},render:function(t){return t(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"","top"!==this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)},install:function(t){t.component(r.name,r)}};e.default=r}})},D7fx:function(t,e,i){},DhVD:function(t,e,i){var r=i("WX/U");t.exports=function(t,e,i){return void 0===i?r(t,e,!1):r(t,i,!1!==e)}},EMu8:function(t,e,i){},EbDI:function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},EvI9:function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){return{methods:{focus:function(){this.$refs[t].focus()}}}}},FOnU:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=112)}({112:function(t,e,i){"use strict";i.r(e);var r=i(15),n=i(34),s=i.n(n),l=i(4),o=i(2),a={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};var u={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return a[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(t){var e,i,r,n,o,a,s=this.size,l=this.move,u=this.bar;return t("div",{class:["el-scrollbar__bar","is-"+u.key],on:{mousedown:this.clickTrackHandler}},[t("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:(e={size:s,move:l,bar:u},i=e.move,r=e.size,n=e.bar,o={},a="translate"+n.axis+"("+i+"%)",o[n.size]=r,o.transform=a,o.msTransform=a,o.webkitTransform=a,o)})])},methods:{clickThumbHandler:function(t){t.ctrlKey||2===t.button||(this.startDrag(t),this[this.bar.axis]=t.currentTarget[this.bar.offset]-(t[this.bar.client]-t.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(t){var e=100*(Math.abs(t.target.getBoundingClientRect()[this.bar.direction]-t[this.bar.client])-this.$refs.thumb[this.bar.offset]/2)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=e*this.wrap[this.bar.scrollSize]/100},startDrag:function(t){t.stopImmediatePropagation(),this.cursorDown=!0,Object(o.on)(document,"mousemove",this.mouseMoveDocumentHandler),Object(o.on)(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(t){if(!1!==this.cursorDown){var e=this[this.bar.axis];if(e){var i=100*(-1*(this.$el.getBoundingClientRect()[this.bar.direction]-t[this.bar.client])-(this.$refs.thumb[this.bar.offset]-e))/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=i*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(t){this.cursorDown=!1,this[this.bar.axis]=0,Object(o.off)(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(o.off)(document,"mouseup",this.mouseUpDocumentHandler)}},c={name:"ElScrollbar",components:{Bar:u},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(t){var e=s()(),i=this.wrapStyle;if(e){var r="-"+e+"px",n="margin-bottom: "+r+"; margin-right: "+r+";";Array.isArray(this.wrapStyle)?(i=Object(l.toObject)(this.wrapStyle)).marginRight=i.marginBottom=r:"string"==typeof this.wrapStyle?i+=n:i=n}var o=t(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),a=t("div",{ref:"wrap",style:i,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",e?"":"el-scrollbar__wrap--hidden-default"]},[[o]]);return t("div",{class:"el-scrollbar"},this.native?[t("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:i},[[o]])]:[a,t(u,{attrs:{move:this.moveX,size:this.sizeWidth}}),t(u,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})])},methods:{handleScroll:function(){var t=this.wrap;this.moveY=100*t.scrollTop/t.clientHeight,this.moveX=100*t.scrollLeft/t.clientWidth},update:function(){var t,e,i=this.wrap;i&&(t=100*i.clientHeight/i.scrollHeight,e=100*i.clientWidth/i.scrollWidth,this.sizeHeight=t<100?t+"%":"",this.sizeWidth=e<100?e+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(r.addResizeListener)(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(r.removeResizeListener)(this.$refs.resize,this.update)},install:function(t){t.component(c.name,c)}};e.default=c},15:function(t,e){t.exports=i("QBBo")},2:function(t,e){t.exports=i("WST1")},34:function(t,e){t.exports=i("5i1c")},4:function(t,e){t.exports=i("gSIQ")}})},Fk5u:function(t,e){t.exports=l},GVEf:function(t,e,i){},H7XF:function(t,e,i){"use strict";e.byteLength=function(t){var e=f(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){for(var e,i=f(t),r=i[0],n=i[1],o=new p((u=r,c=n,3*(u+c)/4-c)),a=0,s=0<n?r-4:r,l=0;l<s;l+=4)e=h[t.charCodeAt(l)]<<18|h[t.charCodeAt(l+1)]<<12|h[t.charCodeAt(l+2)]<<6|h[t.charCodeAt(l+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;var u,c;2===n&&(e=h[t.charCodeAt(l)]<<2|h[t.charCodeAt(l+1)]>>4,o[a++]=255&e);1===n&&(e=h[t.charCodeAt(l)]<<10|h[t.charCodeAt(l+1)]<<4|h[t.charCodeAt(l+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e);return o},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,n=[],o=0,a=i-r;o<a;o+=16383)n.push(l(t,o,a<o+16383?a:o+16383));1===r?(e=t[i-1],n.push(s[e>>2]+s[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],n.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"="));return n.join("")};for(var s=[],h=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=r.length;n<o;++n)s[n]=r[n],h[r.charCodeAt(n)]=n;function f(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function l(t,e,i){for(var r,n,o=[],a=e;a<i;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(s[(n=r)>>18&63]+s[n>>12&63]+s[n>>6&63]+s[63&n]);return o.join("")}h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63},"Hxq+":function(t,e,i){},IM8Y:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=55)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},24:function(t,e){t.exports=i("KZzr")},3:function(t,e){t.exports=i("0BDH")},45:function(t,e){t.exports=i("5FBR")},55:function(t,e,i){"use strict";i.r(e);var r=function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("div",{staticClass:"el-slider",class:{"is-vertical":i.vertical,"el-slider--with-input":i.showInput},attrs:{role:"slider","aria-valuemin":i.min,"aria-valuemax":i.max,"aria-orientation":i.vertical?"vertical":"horizontal","aria-disabled":i.sliderDisabled}},[i.showInput&&!i.range?r("el-input-number",{ref:"input",staticClass:"el-slider__input",attrs:{step:i.step,disabled:i.sliderDisabled,controls:i.showInputControls,min:i.min,max:i.max,debounce:i.debounce,size:i.inputSize},on:{change:function(t){i.$nextTick(i.emitChange)}},model:{value:i.firstValue,callback:function(t){i.firstValue=t},expression:"firstValue"}}):i._e(),r("div",{ref:"slider",staticClass:"el-slider__runway",class:{"show-input":i.showInput,disabled:i.sliderDisabled},style:i.runwayStyle,on:{click:i.onSliderClick}},[r("div",{staticClass:"el-slider__bar",style:i.barStyle}),r("slider-button",{ref:"button1",attrs:{vertical:i.vertical,"tooltip-class":i.tooltipClass},model:{value:i.firstValue,callback:function(t){i.firstValue=t},expression:"firstValue"}}),i.range?r("slider-button",{ref:"button2",attrs:{vertical:i.vertical,"tooltip-class":i.tooltipClass},model:{value:i.secondValue,callback:function(t){i.secondValue=t},expression:"secondValue"}}):i._e(),i._l(i.stops,function(t,e){return i.showStops?r("div",{key:e,staticClass:"el-slider__stop",style:i.vertical?{bottom:t+"%"}:{left:t+"%"}}):i._e()})],2)],1)};r._withStripped=!0;var n=i(45),o=i.n(n),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"button",staticClass:"el-slider__button-wrapper",class:{hover:e.hovering,dragging:e.dragging},style:e.wrapperStyle,attrs:{tabindex:"0"},on:{mouseenter:e.handleMouseEnter,mouseleave:e.handleMouseLeave,mousedown:e.onButtonDown,touchstart:e.onButtonDown,focus:e.handleMouseEnter,blur:e.handleMouseLeave,keydown:[function(t){return"button"in t||!e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?"button"in t&&0!==t.button?null:e.onLeftKeyDown(t):null},function(t){return"button"in t||!e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])?"button"in t&&2!==t.button?null:e.onRightKeyDown(t):null},function(t){return"button"in t||!e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?(t.preventDefault(),e.onLeftKeyDown(t)):null},function(t){return"button"in t||!e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?(t.preventDefault(),e.onRightKeyDown(t)):null}]}},[i("el-tooltip",{ref:"tooltip",attrs:{placement:"top","popper-class":e.tooltipClass,disabled:!e.showTooltip}},[i("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.formatValue))]),i("div",{staticClass:"el-slider__button",class:{hover:e.hovering,dragging:e.dragging}})])],1)};a._withStripped=!0;var s=i(24),l={name:"ElSliderButton",components:{ElTooltip:i.n(s).a},props:{value:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:String},data:function(){return{hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.sliderDisabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},showTooltip:function(){return this.$parent.showTooltip},precision:function(){return this.$parent.precision},currentPosition:function(){return(this.value-this.min)/(this.max-this.min)*100+"%"},enableFormat:function(){return this.$parent.formatTooltip instanceof Function},formatValue:function(){return this.enableFormat&&this.$parent.formatTooltip(this.value)||this.value},wrapperStyle:function(){return this.vertical?{bottom:this.currentPosition}:{left:this.currentPosition}}},watch:{dragging:function(t){this.$parent.dragging=t}},methods:{displayTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!0)},hideTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!1)},handleMouseEnter:function(){this.hovering=!0,this.displayTooltip()},handleMouseLeave:function(){this.hovering=!1,this.hideTooltip()},onButtonDown:function(t){this.disabled||(t.preventDefault(),this.onDragStart(t),window.addEventListener("mousemove",this.onDragging),window.addEventListener("touchmove",this.onDragging),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),window.addEventListener("contextmenu",this.onDragEnd))},onLeftKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition))},onRightKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition))},onDragStart:function(t){this.dragging=!0,this.isClick=!0,"touchstart"===t.type&&(t.clientY=t.touches[0].clientY,t.clientX=t.touches[0].clientX),this.vertical?this.startY=t.clientY:this.startX=t.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(t){if(this.dragging){this.isClick=!1,this.displayTooltip(),this.$parent.resetSize();var e=0;"touchmove"===t.type&&(t.clientY=t.touches[0].clientY,t.clientX=t.touches[0].clientX),e=this.vertical?(this.currentY=t.clientY,(this.startY-this.currentY)/this.$parent.sliderSize*100):(this.currentX=t.clientX,(this.currentX-this.startX)/this.$parent.sliderSize*100),this.newPosition=this.startPosition+e,this.setPosition(this.newPosition)}},onDragEnd:function(){var t=this;this.dragging&&(setTimeout(function(){t.dragging=!1,t.hideTooltip(),t.isClick||(t.setPosition(t.newPosition),t.$parent.emitChange())},0),window.removeEventListener("mousemove",this.onDragging),window.removeEventListener("touchmove",this.onDragging),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd),window.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(t){var e=this;if(null!==t&&!isNaN(t)){t<0?t=0:100<t&&(t=100);var i=100/((this.max-this.min)/this.step),r=Math.round(t/i)*i*(this.max-this.min)*.01+this.min;r=parseFloat(r.toFixed(this.precision)),this.$emit("input",r),this.$nextTick(function(){e.$refs.tooltip&&e.$refs.tooltip.updatePopper()}),this.dragging||this.value===this.oldValue||(this.oldValue=this.value)}}}},u=i(0),c=Object(u.a)(l,a,[],!1,null,null,null);c.options.__file="packages/slider/src/button.vue";var h=c.exports,p=i(3),f={name:"ElSlider",mixins:[i.n(p).a],inject:{elForm:{default:""}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},value:{type:[Number,Array],default:0},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},inputSize:{type:String,default:"small"},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:Function,disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String},debounce:{type:Number,default:300},label:{type:String},tooltipClass:String},components:{ElInputNumber:o.a,SliderButton:h},data:function(){return{firstValue:null,secondValue:null,oldValue:null,dragging:!1,sliderSize:1}},watch:{value:function(t,i){this.dragging||Array.isArray(t)&&Array.isArray(i)&&t.every(function(t,e){return t===i[e]})||this.setValues()},dragging:function(t){t||this.setValues()},firstValue:function(t){this.range?this.$emit("input",[this.minValue,this.maxValue]):this.$emit("input",t)},secondValue:function(){this.range&&this.$emit("input",[this.minValue,this.maxValue])},min:function(){this.setValues()},max:function(){this.setValues()}},methods:{valueChanged:function(){var i=this;return this.range?![this.minValue,this.maxValue].every(function(t,e){return t===i.oldValue[e]}):this.value!==this.oldValue},setValues:function(){if(this.min>this.max)console.error("[Element Error][Slider]min should not be greater than max.");else{var t=this.value;this.range&&Array.isArray(t)?t[1]<this.min?this.$emit("input",[this.min,this.min]):t[0]>this.max?this.$emit("input",[this.max,this.max]):t[0]<this.min?this.$emit("input",[this.min,t[1]]):t[1]>this.max?this.$emit("input",[t[0],this.max]):(this.firstValue=t[0],this.secondValue=t[1],this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",[this.minValue,this.maxValue]),this.oldValue=t.slice())):this.range||"number"!=typeof t||isNaN(t)||(t<this.min?this.$emit("input",this.min):t>this.max?this.$emit("input",this.max):(this.firstValue=t,this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",t),this.oldValue=t)))}},setPosition:function(t){var e=this.min+t*(this.max-this.min)/100;if(this.range){var i=void 0;i=Math.abs(this.minValue-e)<Math.abs(this.maxValue-e)?this.firstValue<this.secondValue?"button1":"button2":this.firstValue>this.secondValue?"button1":"button2",this.$refs[i].setPosition(t)}else this.$refs.button1.setPosition(t)},onSliderClick:function(t){if(!this.sliderDisabled&&!this.dragging){if(this.resetSize(),this.vertical){var e=this.$refs.slider.getBoundingClientRect().bottom;this.setPosition((e-t.clientY)/this.sliderSize*100)}else{var i=this.$refs.slider.getBoundingClientRect().left;this.setPosition((t.clientX-i)/this.sliderSize*100)}this.emitChange()}},resetSize:function(){this.$refs.slider&&(this.sliderSize=this.$refs.slider["client"+(this.vertical?"Height":"Width")])},emitChange:function(){var t=this;this.$nextTick(function(){t.$emit("change",t.range?[t.minValue,t.maxValue]:t.value)})}},computed:{stops:function(){var e=this;if(!this.showStops||this.min>this.max)return[];if(0===this.step)return[];for(var t=(this.max-this.min)/this.step,i=100*this.step/(this.max-this.min),r=[],n=1;n<t;n++)r.push(n*i);return this.range?r.filter(function(t){return t<100*(e.minValue-e.min)/(e.max-e.min)||t>100*(e.maxValue-e.min)/(e.max-e.min)}):r.filter(function(t){return t>100*(e.firstValue-e.min)/(e.max-e.min)})},minValue:function(){return Math.min(this.firstValue,this.secondValue)},maxValue:function(){return Math.max(this.firstValue,this.secondValue)},barSize:function(){return this.range?100*(this.maxValue-this.minValue)/(this.max-this.min)+"%":100*(this.firstValue-this.min)/(this.max-this.min)+"%"},barStart:function(){return this.range?100*(this.minValue-this.min)/(this.max-this.min)+"%":"0%"},precision:function(){var t=[this.min,this.max,this.step].map(function(t){var e=(""+t).split(".")[1];return e?e.length:0});return Math.max.apply(null,t)},runwayStyle:function(){return this.vertical?{height:this.height}:{}},barStyle:function(){return this.vertical?{height:this.barSize,bottom:this.barStart}:{width:this.barSize,left:this.barStart}},sliderDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},mounted:function(){var t=void 0;t=this.range?(Array.isArray(this.value)?(this.firstValue=Math.max(this.min,this.value[0]),this.secondValue=Math.min(this.max,this.value[1])):(this.firstValue=this.min,this.secondValue=this.max),this.oldValue=[this.firstValue,this.secondValue],this.firstValue+"-"+this.secondValue):("number"!=typeof this.value||isNaN(this.value)?this.firstValue=this.min:this.firstValue=Math.min(this.max,Math.max(this.min,this.value)),this.oldValue=this.firstValue,this.firstValue),this.$el.setAttribute("aria-valuetext",t),this.$el.setAttribute("aria-label",this.label?this.label:"slider between "+this.min+" and "+this.max),this.resetSize(),window.addEventListener("resize",this.resetSize)},beforeDestroy:function(){window.removeEventListener("resize",this.resetSize)}},d=Object(u.a)(f,r,[],!1,null,null,null);d.options.__file="packages/slider/src/main.vue";var m=d.exports;m.install=function(t){t.component(m.name,m)};e.default=m}})},Ijbi:function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}},J78i:function(t,e,i){"use strict";t.exports=o;var r=i("sZro"),n=i("Onz0");function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,(i.writecb=null)!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var i=this;"function"==typeof this._flush?this._flush(function(t,e){s(i,t,e)}):s(this,null,null)}function s(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}n.inherits=i("P7XM"),n.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var i=this;r.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},K7XR:function(t,e,i){"use strict";e.__esModule=!0,e.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},KZzr:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=114)}({114:function(t,e,i){"use strict";i.r(e);var r=i(5),n=i.n(r),o=i(14),a=i.n(o),s=i(2),l=i(20),u=i(4),c=i(6),h=i.n(c),p={name:"ElTooltip",mixins:[n.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0}},data:function(){return{timeoutPending:null,focusing:!1}},computed:{tooltipId:function(){return"el-tooltip-"+Object(u.generateId)()}},beforeCreate:function(){var t=this;this.$isServer||(this.popperVM=new h.a({data:{node:""},render:function(t){return this.node}}).$mount(),this.debounceClose=a()(200,function(){return t.handleClosePopper()}))},render:function(t){var e=this;if(this.popperVM&&(this.popperVM.node=t("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[t("div",{on:{mouseleave:function(){e.setExpectedState(!1),e.debounceClose()},mouseenter:function(){e.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])])),!this.$slots.default||!this.$slots.default.length)return this.$slots.default;var i=Object(l.getFirstComponentChild)(this.$slots.default);if(!i)return i;var r=i.data=i.data||{};return r.staticClass=this.concatClass(r.staticClass,"el-tooltip"),i},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",0),Object(s.on)(this.referenceElm,"mouseenter",this.show),Object(s.on)(this.referenceElm,"mouseleave",this.hide),Object(s.on)(this.referenceElm,"focus",function(){if(e.$slots.default&&e.$slots.default.length){var t=e.$slots.default[0].componentInstance;t&&t.focus?t.focus():e.handleFocus()}else e.handleFocus()}),Object(s.on)(this.referenceElm,"blur",this.handleBlur),Object(s.on)(this.referenceElm,"click",this.removeFocusing))},watch:{focusing:function(t){t?Object(s.addClass)(this.referenceElm,"focusing"):Object(s.removeClass)(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},concatClass:function(t,e){return t&&-1<t.indexOf(e)?t:t?e?t+" "+e:t:e||""},handleShowPopper:function(){var t=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.showPopper=!0},this.openDelay),0<this.hideAfter&&(this.timeoutPending=setTimeout(function(){t.showPopper=!1},this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(t){!1===t&&clearTimeout(this.timeoutPending),this.expectedState=t}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var t=this.referenceElm;Object(s.off)(t,"mouseenter",this.show),Object(s.off)(t,"mouseleave",this.hide),Object(s.off)(t,"focus",this.handleFocus),Object(s.off)(t,"blur",this.handleBlur),Object(s.off)(t,"click",this.removeFocusing)},install:function(t){t.component(p.name,p)}};e.default=p},14:function(t,e){t.exports=i("DhVD")},2:function(t,e){t.exports=i("WST1")},20:function(t,e){t.exports=i("Qfgm")},4:function(t,e){t.exports=i("gSIQ")},5:function(t,e){t.exports=i("6XTx")},6:function(t,e){t.exports=i("i7/w")}})},Kl55:function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(l.default.prototype.$isServer)return;if(!e)return void(t.scrollTop=0);var i=[],r=e.offsetParent;for(;r&&t!==r&&t.contains(r);)i.push(r),r=r.offsetParent;var n=e.offsetTop+i.reduce(function(t,e){return t+e.offsetTop},0),o=n+e.offsetHeight,a=t.scrollTop,s=a+t.clientHeight;n<a?t.scrollTop=n:s<o&&(t.scrollTop=o-t.clientHeight)};var r,n=i("i7/w"),l=(r=n)&&r.__esModule?r:{default:r}},LGOv:function(t,e,i){t.exports=i("3BRs")},MVZn:function(t,e,i){var n=i("lSNA");t.exports=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),r.forEach(function(t){n(e,t,i[t])})}return e}},MXF5:function(t,e,N){(function(i){!function(u){u.parser=function(t,e){return new n(t,e)},u.SAXParser=n,u.SAXStream=a,u.createStream=function(t,e){return new a(t,e)},u.MAX_BUFFER_LENGTH=65536;var r,c=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function n(t,e){if(!(this instanceof n))return new n(t,e);var i=this;!function(t){for(var e=0,i=c.length;e<i;e++)t[c[e]]=""}(i),i.q=i.c="",i.bufferCheckPosition=u.MAX_BUFFER_LENGTH,i.opt=e||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=S.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(u.XML_ENTITIES):Object.create(u.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(f)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),C(i,"onready")}u.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e}),n.prototype={end:function(){P(this)},write:function(t){var e=this;if(this.error)throw this.error;if(e.closed)return M(e,"Cannot write after close. Assign an onready handler.");if(null===t)return P(e);"object"==typeof t&&(t=t.toString());var i=0,r="";for(;r=B(t,i++),e.c=r;)switch(e.trackPosition&&(e.position++,"\n"===r?(e.line++,e.column=0):e.column++),e.state){case S.BEGIN:if(e.state=S.BEGIN_WHITESPACE,"\ufeff"===r)continue;R(e,r);continue;case S.BEGIN_WHITESPACE:R(e,r);continue;case S.TEXT:if(e.sawRoot&&!e.closedRoot){for(var n=i-1;r&&"<"!==r&&"&"!==r;)(r=B(t,i++))&&e.trackPosition&&(e.position++,"\n"===r?(e.line++,e.column=0):e.column++);e.textNode+=t.substring(n,i-1)}"<"!==r||e.sawRoot&&e.closedRoot&&!e.strict?(v(r)||e.sawRoot&&!e.closedRoot||A(e,"Text data outside of root node."),"&"===r?e.state=S.TEXT_ENTITY:e.textNode+=r):(e.state=S.OPEN_WAKA,e.startTagPosition=e.position);continue;case S.SCRIPT:"<"===r?e.state=S.SCRIPT_ENDING:e.script+=r;continue;case S.SCRIPT_ENDING:e.state="/"===r?S.CLOSE_TAG:(e.script+="<"+r,S.SCRIPT);continue;case S.OPEN_WAKA:if("!"===r)e.state=S.SGML_DECL,e.sgmlDecl="";else if(v(r));else if(b(d,r))e.state=S.OPEN_TAG,e.tagName=r;else if("/"===r)e.state=S.CLOSE_TAG,e.tagName="";else if("?"===r)e.state=S.PROC_INST,e.procInstName=e.procInstBody="";else{if(A(e,"Unencoded <"),e.startTagPosition+1<e.position){var o=e.position-e.startTagPosition;r=new Array(o).join(" ")+r}e.textNode+="<"+r,e.state=S.TEXT}continue;case S.SGML_DECL:(e.sgmlDecl+r).toUpperCase()===h?(E(e,"onopencdata"),e.state=S.CDATA,e.sgmlDecl="",e.cdata=""):e.sgmlDecl+r==="--"?(e.state=S.COMMENT,e.comment="",e.sgmlDecl=""):(e.sgmlDecl+r).toUpperCase()===p?(e.state=S.DOCTYPE,(e.doctype||e.sawRoot)&&A(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):">"===r?(E(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=S.TEXT):(_(r)&&(e.state=S.SGML_DECL_QUOTED),e.sgmlDecl+=r);continue;case S.SGML_DECL_QUOTED:r===e.q&&(e.state=S.SGML_DECL,e.q=""),e.sgmlDecl+=r;continue;case S.DOCTYPE:">"===r?(e.state=S.TEXT,E(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=r,"["===r?e.state=S.DOCTYPE_DTD:_(r)&&(e.state=S.DOCTYPE_QUOTED,e.q=r));continue;case S.DOCTYPE_QUOTED:e.doctype+=r,r===e.q&&(e.q="",e.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:e.doctype+=r,"]"===r?e.state=S.DOCTYPE:_(r)&&(e.state=S.DOCTYPE_DTD_QUOTED,e.q=r);continue;case S.DOCTYPE_DTD_QUOTED:e.doctype+=r,r===e.q&&(e.state=S.DOCTYPE_DTD,e.q="");continue;case S.COMMENT:"-"===r?e.state=S.COMMENT_ENDING:e.comment+=r;continue;case S.COMMENT_ENDING:"-"===r?(e.state=S.COMMENT_ENDED,e.comment=k(e.opt,e.comment),e.comment&&E(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+r,e.state=S.COMMENT);continue;case S.COMMENT_ENDED:e.state=">"!==r?(A(e,"Malformed comment"),e.comment+="--"+r,S.COMMENT):S.TEXT;continue;case S.CDATA:"]"===r?e.state=S.CDATA_ENDING:e.cdata+=r;continue;case S.CDATA_ENDING:e.state="]"===r?S.CDATA_ENDING_2:(e.cdata+="]"+r,S.CDATA);continue;case S.CDATA_ENDING_2:">"===r?(e.cdata&&E(e,"oncdata",e.cdata),E(e,"onclosecdata"),e.cdata="",e.state=S.TEXT):"]"===r?e.cdata+="]":(e.cdata+="]]"+r,e.state=S.CDATA);continue;case S.PROC_INST:"?"===r?e.state=S.PROC_INST_ENDING:v(r)?e.state=S.PROC_INST_BODY:e.procInstName+=r;continue;case S.PROC_INST_BODY:if(!e.procInstBody&&v(r))continue;"?"===r?e.state=S.PROC_INST_ENDING:e.procInstBody+=r;continue;case S.PROC_INST_ENDING:e.state=">"===r?(E(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",S.TEXT):(e.procInstBody+="?"+r,S.PROC_INST_BODY);continue;case S.OPEN_TAG:b(m,r)?e.tagName+=r:(L(e),">"===r?D(e):e.state="/"===r?S.OPEN_TAG_SLASH:(v(r)||A(e,"Invalid character in tag name"),S.ATTRIB));continue;case S.OPEN_TAG_SLASH:">"===r?(D(e,!0),z(e)):(A(e,"Forward-slash in opening tag not followed by >"),e.state=S.ATTRIB);continue;case S.ATTRIB:if(v(r))continue;">"===r?D(e):"/"===r?e.state=S.OPEN_TAG_SLASH:b(d,r)?(e.attribName=r,e.attribValue="",e.state=S.ATTRIB_NAME):A(e,"Invalid attribute name");continue;case S.ATTRIB_NAME:"="===r?e.state=S.ATTRIB_VALUE:">"===r?(A(e,"Attribute without value"),e.attribValue=e.attribName,O(e),D(e)):v(r)?e.state=S.ATTRIB_NAME_SAW_WHITE:b(m,r)?e.attribName+=r:A(e,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if("="===r)e.state=S.ATTRIB_VALUE;else{if(v(r))continue;A(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",E(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",">"===r?D(e):b(d,r)?(e.attribName=r,e.state=S.ATTRIB_NAME):(A(e,"Invalid attribute name"),e.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(v(r))continue;_(r)?(e.q=r,e.state=S.ATTRIB_VALUE_QUOTED):(A(e,"Unquoted attribute value"),e.state=S.ATTRIB_VALUE_UNQUOTED,e.attribValue=r);continue;case S.ATTRIB_VALUE_QUOTED:if(r!==e.q){"&"===r?e.state=S.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=r;continue}O(e),e.q="",e.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:v(r)?e.state=S.ATTRIB:">"===r?D(e):"/"===r?e.state=S.OPEN_TAG_SLASH:b(d,r)?(A(e,"No whitespace between attributes"),e.attribName=r,e.attribValue="",e.state=S.ATTRIB_NAME):A(e,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(">"!==(l=r)&&!v(l)){"&"===r?e.state=S.ATTRIB_VALUE_ENTITY_U:e.attribValue+=r;continue}O(e),">"===r?D(e):e.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(e.tagName)">"===r?z(e):b(m,r)?e.tagName+=r:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=S.SCRIPT):(v(r)||A(e,"Invalid tagname in closing tag"),e.state=S.CLOSE_TAG_SAW_WHITE);else{if(v(r))continue;b(d,r)?e.tagName=r:e.script?(e.script+="</"+r,e.state=S.SCRIPT):A(e,"Invalid tagname in closing tag.")}continue;case S.CLOSE_TAG_SAW_WHITE:if(v(r))continue;">"===r?z(e):A(e,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var a,s;switch(e.state){case S.TEXT_ENTITY:a=S.TEXT,s="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:a=S.ATTRIB_VALUE_QUOTED,s="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:a=S.ATTRIB_VALUE_UNQUOTED,s="attribValue"}";"===r?(e[s]+=F(e),e.entity="",e.state=a):b(e.entity.length?g:y,r)?e.entity+=r:(A(e,"Invalid character in entity name"),e[s]+="&"+e.entity+r,e.entity="",e.state=a);continue;default:throw new Error(e,"Unknown state: "+e.state)}var l;e.position>=e.bufferCheckPosition&&function(t){for(var e=Math.max(u.MAX_BUFFER_LENGTH,10),i=0,r=0,n=c.length;r<n;r++){var o=t[c[r]].length;if(e<o)switch(c[r]){case"textNode":T(t);break;case"cdata":E(t,"oncdata",t.cdata),t.cdata="";break;case"script":E(t,"onscript",t.script),t.script="";break;default:M(t,"Max buffer length exceeded: "+c[r])}i=Math.max(i,o)}var a=u.MAX_BUFFER_LENGTH-i;t.bufferCheckPosition=a+t.position}(e);return e}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;T(t=this),""!==t.cdata&&(E(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(E(t,"onscript",t.script),t.script="")}};try{r=N("1IWx").Stream}catch(t){r=function(){}}var o=u.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});function a(t,e){if(!(this instanceof a))return new a(t,e);r.apply(this),this._parser=new n(t,e),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(t){i.emit("error",t),i._parser.error=null},this._decoder=null,o.forEach(function(e){Object.defineProperty(i,"on"+e,{get:function(){return i._parser["on"+e]},set:function(t){if(!t)return i.removeAllListeners(e),i._parser["on"+e]=t;i.on(e,t)},enumerable:!0,configurable:!1})})}(a.prototype=Object.create(r.prototype,{constructor:{value:a}})).write=function(t){if("function"==typeof i&&"function"==typeof i.isBuffer&&i.isBuffer(t)){if(!this._decoder){var e=N("fXKp").StringDecoder;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},a.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},a.prototype.on=function(e,t){var i=this;return i._parser["on"+e]||-1===o.indexOf(e)||(i._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),i.emit.apply(i,t)}),r.prototype.on.call(i,e,t)};var h="[CDATA[",p="DOCTYPE",s="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",f={xml:s,xmlns:l},d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function _(t){return'"'===t||"'"===t}function b(t,e){return t.test(e)}var x,w,t,S=0;for(var e in u.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},u.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},u.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(u.ENTITIES).forEach(function(t){var e=u.ENTITIES[t],i="number"==typeof e?String.fromCharCode(e):e;u.ENTITIES[t]=i}),u.STATE)u.STATE[u.STATE[e]]=e;function C(t,e,i){t[e]&&t[e](i)}function E(t,e,i){t.textNode&&T(t),C(t,e,i)}function T(t){t.textNode=k(t.opt,t.textNode),t.textNode&&C(t,"ontext",t.textNode),t.textNode=""}function k(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function M(t,e){return T(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,C(t,"onerror",e),t}function P(t){return t.sawRoot&&!t.closedRoot&&A(t,"Unclosed root tag"),t.state!==S.BEGIN&&t.state!==S.BEGIN_WHITESPACE&&t.state!==S.TEXT&&M(t,"Unexpected end"),T(t),t.c="",t.closed=!0,C(t,"onend"),n.call(t,t.strict,t.opt),t}function A(t,e){if("object"!=typeof t||!(t instanceof n))throw new Error("bad call to strictFail");t.strict&&M(t,e)}function L(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,i=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(i.ns=e.ns),t.attribList.length=0,E(t,"onopentagstart",i)}function I(t,e){var i=t.indexOf(":")<0?["",t]:t.split(":"),r=i[0],n=i[1];return e&&"xmlns"===t&&(r="xmlns",n=""),{prefix:r,local:n}}function O(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=I(t.attribName,!0),i=e.prefix,r=e.local;if("xmlns"===i)if("xml"===r&&t.attribValue!==s)A(t,"xml: prefix must be bound to "+s+"\nActual: "+t.attribValue);else if("xmlns"===r&&t.attribValue!==l)A(t,"xmlns: prefix must be bound to "+l+"\nActual: "+t.attribValue);else{var n=t.tag,o=t.tags[t.tags.length-1]||t;n.ns===o.ns&&(n.ns=Object.create(o.ns)),n.ns[r]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,E(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function D(e,t){if(e.opt.xmlns){var i=e.tag,r=I(e.tagName);i.prefix=r.prefix,i.local=r.local,i.uri=i.ns[r.prefix]||"",i.prefix&&!i.uri&&(A(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),i.uri=r.prefix);var n=e.tags[e.tags.length-1]||e;i.ns&&n.ns!==i.ns&&Object.keys(i.ns).forEach(function(t){E(e,"onopennamespace",{prefix:t,uri:i.ns[t]})});for(var o=0,a=e.attribList.length;o<a;o++){var s=e.attribList[o],l=s[0],u=s[1],c=I(l,!0),h=c.prefix,p=c.local,f=""===h?"":i.ns[h]||"",d={name:l,value:u,prefix:h,local:p,uri:f};h&&"xmlns"!==h&&!f&&(A(e,"Unbound namespace prefix: "+JSON.stringify(h)),d.uri=h),e.tag.attributes[l]=d,E(e,"onattribute",d)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),E(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=S.TEXT:e.state=S.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function z(i){if(!i.tagName)return A(i,"Weird empty close tag."),i.textNode+="</>",void(i.state=S.TEXT);if(i.script){if("script"!==i.tagName)return i.script+="</"+i.tagName+">",i.tagName="",void(i.state=S.SCRIPT);E(i,"onscript",i.script),i.script=""}var t=i.tags.length,e=i.tagName;i.strict||(e=e[i.looseCase]());for(var r=e;t--;){if(i.tags[t].name===r)break;A(i,"Unexpected close tag")}if(t<0)return A(i,"Unmatched closing tag: "+i.tagName),i.textNode+="</"+i.tagName+">",void(i.state=S.TEXT);i.tagName=e;for(var n=i.tags.length;n-- >t;){var o=i.tag=i.tags.pop();i.tagName=i.tag.name,E(i,"onclosetag",i.tagName);var a={};for(var s in o.ns)a[s]=o.ns[s];var l=i.tags[i.tags.length-1]||i;i.opt.xmlns&&o.ns!==l.ns&&Object.keys(o.ns).forEach(function(t){var e=o.ns[t];E(i,"onclosenamespace",{prefix:t,uri:e})})}0===t&&(i.closedRoot=!0),i.tagName=i.attribValue=i.attribName="",i.attribList.length=0,i.state=S.TEXT}function F(t){var e,i=t.entity,r=i.toLowerCase(),n="";return t.ENTITIES[i]?t.ENTITIES[i]:t.ENTITIES[r]?t.ENTITIES[r]:("#"===(i=r).charAt(0)&&(n="x"===i.charAt(1)?(i=i.slice(2),(e=parseInt(i,16)).toString(16)):(i=i.slice(1),(e=parseInt(i,10)).toString(10))),i=i.replace(/^0+/,""),isNaN(e)||n.toLowerCase()!==i?(A(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function R(t,e){"<"===e?(t.state=S.OPEN_WAKA,t.startTagPosition=t.position):v(e)||(A(t,"Non-whitespace before first tag."),t.textNode=e,t.state=S.TEXT)}function B(t,e){var i="";return e<t.length&&(i=t.charAt(e)),i}S=u.STATE,String.fromCodePoint||(x=String.fromCharCode,w=Math.floor,t=function(){var t,e,i=[],r=-1,n=arguments.length;if(!n)return"";for(var o="";++r<n;){var a=Number(arguments[r]);if(!isFinite(a)||a<0||1114111<a||w(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?i.push(a):(t=55296+((a-=65536)>>10),e=a%1024+56320,i.push(t,e)),(r+1===n||16384<i.length)&&(o+=x.apply(null,i),i.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:t,configurable:!0,writable:!0}):String.fromCodePoint=t)}(e)}).call(this,N("tjlA").Buffer)},MaZv:function(t){t.exports={textColor:"#fff",background:"rgb(0, 0, 0,0.6)",colorGroup:["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78"]}},Nsbk:function(e,t){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}e.exports=i},"O3R+":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("cWyK"),u=6378137;function n(t){var e=0;if(t&&0<t.length){e+=Math.abs(o(t[0]));for(var i=1;i<t.length;i++)e-=Math.abs(o(t[i]))}return e}function o(t){var e,i,r,n,o,a,s=0,l=t.length;if(2<l){for(a=0;a<l;a++)o=a===l-2?(r=l-2,n=l-1,0):a===l-1?(r=l-1,n=0,1):(n=(r=a)+1,a+2),e=t[r],i=t[n],s+=(c(t[o][0])-c(e[0]))*Math.sin(c(i[1]));s=s*u*u/2}return s}function c(t){return t*Math.PI/180}e.default=function(t){return r.geomReduce(t,function(t,e){return t+function(t){var e,i=0;switch(t.type){case"Polygon":return n(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)i+=n(t.coordinates[e]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}},OKBm:function(t,e,i){},Onz0:function(t,i,e){(function(t){function e(t){return Object.prototype.toString.call(t)}i.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},i.isBoolean=function(t){return"boolean"==typeof t},i.isNull=function(t){return null===t},i.isNullOrUndefined=function(t){return null==t},i.isNumber=function(t){return"number"==typeof t},i.isString=function(t){return"string"==typeof t},i.isSymbol=function(t){return"symbol"==typeof t},i.isUndefined=function(t){return void 0===t},i.isRegExp=function(t){return"[object RegExp]"===e(t)},i.isObject=function(t){return"object"==typeof t&&null!==t},i.isDate=function(t){return"[object Date]"===e(t)},i.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},i.isFunction=function(t){return"function"==typeof t},i.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},i.isBuffer=t.isBuffer}).call(this,e("tjlA").Buffer)},P09a:function(t,e){t.exports=o},P7XM:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},PE4B:function(t,e,i){"use strict";var l=function(t){return!(!(r=t)||"object"!=typeof r||(e=t,"[object RegExp]"===(i=Object.prototype.toString.call(e))||"[object Date]"===i||e.$$typeof===n));var e,i,r};var n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function u(t,e){var i;return e&&!0===e.clone&&l(t)?h((i=t,Array.isArray(i)?[]:{}),t,e):t}function c(i,t,r){var n=i.slice();return t.forEach(function(t,e){void 0===n[e]?n[e]=u(t,r):l(t)?n[e]=h(i[e],t,r):-1===i.indexOf(t)&&n.push(u(t,r))}),n}function h(t,e,i){var r,n,o,a,s=Array.isArray(e);return s===Array.isArray(t)?s?((i||{arrayMerge:c}).arrayMerge||c)(t,e,i):(n=e,o=i,a={},l(r=t)&&Object.keys(r).forEach(function(t){a[t]=u(r[t],o)}),Object.keys(n).forEach(function(t){l(n[t])&&r[t]?a[t]=h(r[t],n[t],o):a[t]=u(n[t],o)}),a):u(e,i)}h.all=function(t,i){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(function(t,e){return h(t,e,i)})};var r=h;t.exports=r},PJYZ:function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},"Q9o/":function(t,e){function i(t){return Object.prototype.toString.call(t)}function r(t){return"[object String]"===i(t)}t.exports={getObjectType:i,isDate:function(t){return"[object Date]"===i(t)},isString:r,isDateString:function(t){return r(t)&&!isNaN(Date.parse(t))},parseDateFromString:function(t){return Date.parse(t)},isNumber:function(t){return"number"==typeof t}}},QBBo:function(t,e,i){"use strict";e.__esModule=!0,e.removeResizeListener=e.addResizeListener=void 0;var r,n=i("bdgK"),o=(r=n)&&r.__esModule?r:{default:r};var a="undefined"==typeof window,s=function(t){var e=t,i=Array.isArray(e),r=0;for(e=i?e:e[Symbol.iterator]();;){var n;if(i){if(r>=e.length)break;n=e[r++]}else{if((r=e.next()).done)break;n=r.value}var o=n.target.__resizeListeners__||[];o.length&&o.forEach(function(t){t()})}};e.addResizeListener=function(t,e){a||(t.__resizeListeners__||(t.__resizeListeners__=[],t.__ro__=new o.default(s),t.__ro__.observe(t)),t.__resizeListeners__.push(e))},e.removeResizeListener=function(t,e){t&&t.__resizeListeners__&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||t.__ro__.disconnect())}},"QJ+7":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("cWyK");e.default=function(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},"QX/b":function(t,e,i){"use strict";e.__esModule=!0;var r,n=i("i7/w"),o=(r=n)&&r.__esModule?r:{default:r},a=i("WST1");var s=[],l="@@clickoutsideContext",u=void 0,c=0;function h(i,r,n){return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!(n&&n.context&&t.target&&e.target)||i.contains(t.target)||i.contains(e.target)||i===t.target||n.context.popperElm&&(n.context.popperElm.contains(t.target)||n.context.popperElm.contains(e.target))||(r.expression&&i[l].methodName&&n.context[i[l].methodName]?n.context[i[l].methodName]():i[l].bindingFn&&i[l].bindingFn())}}!o.default.prototype.$isServer&&(0,a.on)(document,"mousedown",function(t){return u=t}),!o.default.prototype.$isServer&&(0,a.on)(document,"mouseup",function(e){s.forEach(function(t){return t[l].documentHandler(e,u)})}),e.default={bind:function(t,e,i){s.push(t);var r=c++;t[l]={id:r,documentHandler:h(t,e,i),methodName:e.expression,bindingFn:e.value}},update:function(t,e,i){t[l].documentHandler=h(t,e,i),t[l].methodName=e.expression,t[l].bindingFn=e.value},unbind:function(t){for(var e=s.length,i=0;i<e;i++)if(s[i][l].id===t[l].id){s.splice(i,1);break}delete t[l]}}},Qfgm:function(t,e,i){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.isVNode=function(t){return null!==t&&"object"===(void 0===t?"undefined":r(t))&&(0,n.hasOwn)(t,"componentOptions")},e.getFirstComponentChild=function(t){return t&&t.filter(function(t){return t&&t.tag})[0]};var n=i("gSIQ")},QpuX:function(t,e,i){t.exports=i("+qE3").EventEmitter},Qu5F:function(t,e){var $=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],q=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function s(t,e,i,r,n){if("string"==typeof t)t=document.getElementById(t);else if("undefined"!=typeof HTMLCanvasElement&&!t instanceof HTMLCanvasElement)return;var o,a=t.getContext("2d");try{try{o=a.getImageData(e,i,r,n)}catch(t){throw new Error("unable to access local image data: "+t)}}catch(t){throw new Error("unable to access image data: "+t)}return o}function l(t,e,i,r,n,o){if(!(isNaN(o)||o<1)){o|=0;var a=s(t,e,i,r,n);a=u(a,e,i,r,n,o),t.getContext("2d").putImageData(a,e,i)}}function u(t,e,i,r,n,o){var a,s,l,u,c,h,p,f,d,m,y,g,v,_,b,x,w,S,C,E,T,k,M,P,A=t.data,L=o+o+1,I=r-1,O=n-1,D=o+1,z=D*(D+1)/2,F=new W,R=F;for(l=1;l<L;l++)if(R=R.next=new W,l==D)var B=R;R.next=F;var N=null,j=null;p=h=0;var V=$[o],U=q[o];for(s=0;s<n;s++){for(x=w=S=C=f=d=m=y=0,g=D*(E=A[h]),v=D*(T=A[h+1]),_=D*(k=A[h+2]),b=D*(M=A[h+3]),f+=z*E,d+=z*T,m+=z*k,y+=z*M,R=F,l=0;l<D;l++)R.r=E,R.g=T,R.b=k,R.a=M,R=R.next;for(l=1;l<D;l++)u=h+((I<l?I:l)<<2),f+=(R.r=E=A[u])*(P=D-l),d+=(R.g=T=A[u+1])*P,m+=(R.b=k=A[u+2])*P,y+=(R.a=M=A[u+3])*P,x+=E,w+=T,S+=k,C+=M,R=R.next;for(N=F,j=B,a=0;a<r;a++)A[h+3]=M=y*V>>U,0!=M?(M=255/M,A[h]=(f*V>>U)*M,A[h+1]=(d*V>>U)*M,A[h+2]=(m*V>>U)*M):A[h]=A[h+1]=A[h+2]=0,f-=g,d-=v,m-=_,y-=b,g-=N.r,v-=N.g,_-=N.b,b-=N.a,u=p+((u=a+o+1)<I?u:I)<<2,f+=x+=N.r=A[u],d+=w+=N.g=A[u+1],m+=S+=N.b=A[u+2],y+=C+=N.a=A[u+3],N=N.next,g+=E=j.r,v+=T=j.g,_+=k=j.b,b+=M=j.a,x-=E,w-=T,S-=k,C-=M,j=j.next,h+=4;p+=r}for(a=0;a<r;a++){for(w=S=C=x=d=m=y=f=0,g=D*(E=A[h=a<<2]),v=D*(T=A[h+1]),_=D*(k=A[h+2]),b=D*(M=A[h+3]),f+=z*E,d+=z*T,m+=z*k,y+=z*M,R=F,l=0;l<D;l++)R.r=E,R.g=T,R.b=k,R.a=M,R=R.next;for(c=r,l=1;l<=o;l++)h=c+a<<2,f+=(R.r=E=A[h])*(P=D-l),d+=(R.g=T=A[h+1])*P,m+=(R.b=k=A[h+2])*P,y+=(R.a=M=A[h+3])*P,x+=E,w+=T,S+=k,C+=M,R=R.next,l<O&&(c+=r);for(h=a,N=F,j=B,s=0;s<n;s++)A[(u=h<<2)+3]=M=y*V>>U,0<M?(M=255/M,A[u]=(f*V>>U)*M,A[u+1]=(d*V>>U)*M,A[u+2]=(m*V>>U)*M):A[u]=A[u+1]=A[u+2]=0,f-=g,d-=v,m-=_,y-=b,g-=N.r,v-=N.g,_-=N.b,b-=N.a,u=a+((u=s+D)<O?u:O)*r<<2,f+=x+=N.r=A[u],d+=w+=N.g=A[u+1],m+=S+=N.b=A[u+2],y+=C+=N.a=A[u+3],N=N.next,g+=E=j.r,v+=T=j.g,_+=k=j.b,b+=M=j.a,x-=E,w-=T,S-=k,C-=M,j=j.next,h+=r}return t}function c(t,e,i,r,n,o){if(!(isNaN(o)||o<1)){o|=0;var a=s(t,e,i,r,n);a=h(a,e,i,r,n,o),t.getContext("2d").putImageData(a,e,i)}}function h(t,e,i,r,n,o){var a,s,l,u,c,h,p,f,d,m,y,g,v,_,b,x,w,S,C,E,T=t.data,k=o+o+1,M=r-1,P=n-1,A=o+1,L=A*(A+1)/2,I=new W,O=I;for(l=1;l<k;l++)if(O=O.next=new W,l==A)var D=O;O.next=I;var z=null,F=null;p=h=0;var R=$[o],B=q[o];for(s=0;s<n;s++){for(_=b=x=f=d=m=0,y=A*(w=T[h]),g=A*(S=T[h+1]),v=A*(C=T[h+2]),f+=L*w,d+=L*S,m+=L*C,O=I,l=0;l<A;l++)O.r=w,O.g=S,O.b=C,O=O.next;for(l=1;l<A;l++)u=h+((M<l?M:l)<<2),f+=(O.r=w=T[u])*(E=A-l),d+=(O.g=S=T[u+1])*E,m+=(O.b=C=T[u+2])*E,_+=w,b+=S,x+=C,O=O.next;for(z=I,F=D,a=0;a<r;a++)T[h]=f*R>>B,T[h+1]=d*R>>B,T[h+2]=m*R>>B,f-=y,d-=g,m-=v,y-=z.r,g-=z.g,v-=z.b,u=p+((u=a+o+1)<M?u:M)<<2,f+=_+=z.r=T[u],d+=b+=z.g=T[u+1],m+=x+=z.b=T[u+2],z=z.next,y+=w=F.r,g+=S=F.g,v+=C=F.b,_-=w,b-=S,x-=C,F=F.next,h+=4;p+=r}for(a=0;a<r;a++){for(b=x=_=d=m=f=0,y=A*(w=T[h=a<<2]),g=A*(S=T[h+1]),v=A*(C=T[h+2]),f+=L*w,d+=L*S,m+=L*C,O=I,l=0;l<A;l++)O.r=w,O.g=S,O.b=C,O=O.next;for(c=r,l=1;l<=o;l++)h=c+a<<2,f+=(O.r=w=T[h])*(E=A-l),d+=(O.g=S=T[h+1])*E,m+=(O.b=C=T[h+2])*E,_+=w,b+=S,x+=C,O=O.next,l<P&&(c+=r);for(h=a,z=I,F=D,s=0;s<n;s++)T[u=h<<2]=f*R>>B,T[u+1]=d*R>>B,T[u+2]=m*R>>B,f-=y,d-=g,m-=v,y-=z.r,g-=z.g,v-=z.b,u=a+((u=s+A)<P?u:P)*r<<2,f+=_+=z.r=T[u],d+=b+=z.g=T[u+1],m+=x+=z.b=T[u+2],z=z.next,y+=w=F.r,g+=S=F.g,v+=C=F.b,_-=w,b-=S,x-=C,F=F.next,h+=r}return t}function W(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}t.exports={image:function(t,e,i,r){if("string"==typeof t)t=document.getElementById(t);else if("undefined"!=typeof HTMLImageElement&&!t instanceof HTMLImageElement)return;var n=t.naturalWidth,o=t.naturalHeight;if("string"==typeof e)e=document.getElementById(e);else if("undefined"!=typeof HTMLCanvasElement&&!e instanceof HTMLCanvasElement)return;e.style.width=n+"px",e.style.height=o+"px",e.width=n,e.height=o;var a=e.getContext("2d");a.clearRect(0,0,n,o),a.drawImage(t,0,0),isNaN(i)||i<1||(r?l(e,0,0,n,o,i):c(e,0,0,n,o,i))},canvasRGBA:l,canvasRGB:c,imageDataRGBA:u,imageDataRGB:h}},RIqP:function(t,e,i){var r=i("Ijbi"),n=i("EbDI"),o=i("Bnag");t.exports=function(t){return r(t)||n(t)||o()}},RQ3N:function(t,e,i){},RT2P:function(t,e){t.exports=p},RoFp:function(t,e,i){"use strict";var o=i("lm0R");function a(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,r=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return r||n?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o.nextTick(a,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o.nextTick(a,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},SJdT:function(t,e,i){"use strict";e.__esModule=!0,e.i18n=e.use=e.t=void 0;var r=a(i("8NkQ")),n=a(i("i7/w")),o=a(i("PE4B"));function a(t){return t&&t.__esModule?t:{default:t}}var s=(0,a(i("nX6K")).default)(n.default),l=r.default,u=!1,c=function(){var t=Object.getPrototypeOf(this||n.default).$t;if("function"==typeof t&&n.default.locale)return u||(u=!0,n.default.locale(n.default.config.lang,(0,o.default)(l,n.default.locale(n.default.config.lang)||{},{clone:!0}))),t.apply(this,arguments)},h=e.t=function(t,e){var i=c.apply(this,arguments);if(null!=i)return i;for(var r=t.split("."),n=l,o=0,a=r.length;o<a;o++){if(i=n[r[o]],o===a-1)return s(i,e);if(!i)return"";n=i}return""},p=e.use=function(t){l=t||l},f=e.i18n=function(t){c=t||c};e.default={use:p,t:h,i18n:f}},SPBs:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("QJ+7"),a=i("/rf6");e.default=function(t,e){void 0===e&&(e={});var i=o.default(t),r=(i[0]+i[2])/2,n=(i[1]+i[3])/2;return a.point([r,n],e.properties,e)}},STtz:function(t,e,i){(function(r){var n=i("zvmt");t.exports=function(t,e){t instanceof r&&(t=t.toString());var i=null;if("string"==typeof t)try{i=JSON.parse(t)}catch(t){throw new Error("The JSON structure is invalid")}else i=t;return n(i,e)}}).call(this,i("tjlA").Buffer)},SksO:function(i,t){function r(t,e){return i.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}i.exports=r},Syab:function(t,e,i){"use strict";e.__esModule=!0;var r,n=i("i7/w"),u=(r=n)&&r.__esModule?r:{default:r},c=i("WST1");var h=!1,o=!1,a=2e3,p=function(){if(!u.default.prototype.$isServer){var t=l.modalDom;return t?h=!0:(h=!1,t=document.createElement("div"),(l.modalDom=t).addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation()}),t.addEventListener("click",function(){l.doOnModalClick&&l.doOnModalClick()})),t}},s={},l={modalFade:!0,getInstance:function(t){return s[t]},register:function(t,e){t&&e&&(s[t]=e)},deregister:function(t){t&&(s[t]=null,delete s[t])},nextZIndex:function(){return l.zIndex++},modalStack:[],doOnModalClick:function(){var t=l.modalStack[l.modalStack.length-1];if(t){var e=l.getInstance(t.id);e&&e.closeOnClickModal&&e.close()}},openModal:function(t,e,i,r,n){if(!u.default.prototype.$isServer&&t&&void 0!==e){this.modalFade=n;for(var o=this.modalStack,a=0,s=o.length;a<s;a++){if(o[a].id===t)return}var l=p();if((0,c.addClass)(l,"v-modal"),this.modalFade&&!h&&(0,c.addClass)(l,"v-modal-enter"),r)r.trim().split(/\s+/).forEach(function(t){return(0,c.addClass)(l,t)});setTimeout(function(){(0,c.removeClass)(l,"v-modal-enter")},200),i&&i.parentNode&&11!==i.parentNode.nodeType?i.parentNode.appendChild(l):document.body.appendChild(l),e&&(l.style.zIndex=e),l.tabIndex=0,l.style.display="",this.modalStack.push({id:t,zIndex:e,modalClass:r})}},closeModal:function(t){var e=this.modalStack,i=p();if(0<e.length){var r=e[e.length-1];if(r.id===t){if(r.modalClass)r.modalClass.trim().split(/\s+/).forEach(function(t){return(0,c.removeClass)(i,t)});e.pop(),0<e.length&&(i.style.zIndex=e[e.length-1].zIndex)}else for(var n=e.length-1;0<=n;n--)if(e[n].id===t){e.splice(n,1);break}}0===e.length&&(this.modalFade&&(0,c.addClass)(i,"v-modal-leave"),setTimeout(function(){0===e.length&&(i.parentNode&&i.parentNode.removeChild(i),i.style.display="none",l.modalDom=void 0),(0,c.removeClass)(i,"v-modal-leave")},200))}};Object.defineProperty(l,"zIndex",{configurable:!0,get:function(){return o||(a=(u.default.prototype.$ELEMENT||{}).zIndex||a,o=!0),a},set:function(t){a=t}});u.default.prototype.$isServer||window.addEventListener("keydown",function(t){if(27===t.keyCode){var e=function(){if(!u.default.prototype.$isServer&&0<l.modalStack.length){var t=l.modalStack[l.modalStack.length-1];if(!t)return;return l.getInstance(t.id)}}();e&&e.closeOnPressEscape&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}}),e.default=l},TkuN:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=52)}([function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},,,function(t,e){t.exports=i("0BDH")},function(t,e){t.exports=i("gSIQ")},function(t,e){t.exports=i("6XTx")},,function(t,e){t.exports=i("a3zo")},,function(t,e){t.exports=i("8606")},,function(t,e){t.exports=i("QX/b")},function(t,e){t.exports=i("SJdT")},,function(t,e){t.exports=i("DhVD")},function(t,e){t.exports=i("QBBo")},,,,function(t,e){t.exports=i("FOnU")},,function(t,e){t.exports=i("EvI9")},,,,,function(t,e){t.exports=i("i7wE")},function(t,e){t.exports=i("Kl55")},,function(t,e,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[i("span",[e._v(e._s(e.currentLabel))])])],2)};r._withStripped=!0;var n=i(3),o=i.n(n),a=i(4),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l={mixins:[o.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&0<this.select.multipleLimit)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(t,e){var i=this.select,r=i.remote,n=i.valueKey;if(!this.created&&!r){if(n&&"object"===(void 0===t?"undefined":s(t))&&"object"===(void 0===e?"undefined":s(e))&&t[n]===e[n])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(t,e){if(this.isObject){var i=this.select.valueKey;return Object(a.getValueByPath)(t,i)===Object(a.getValueByPath)(e,i)}return t===e},contains:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];if(this.isObject){var i=this.select.valueKey;return t.some(function(t){return Object(a.getValueByPath)(t,i)===Object(a.getValueByPath)(e,i)})}return-1<t.indexOf(e)},handleGroupDisabled:function(t){this.groupDisabled=t},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(t){this.visible=new RegExp(Object(a.escapeRegexpString)(t),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){this.select.onOptionDestroy(this.select.options.indexOf(this))}},u=i(0),c=Object(u.a)(l,r,[],!1,null,null,null);c.options.__file="packages/select/src/option.vue";e.a=c.exports},,,,function(t,e){t.exports=i("05c+")},,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var r=function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:i.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[i.selectSize?"el-select--"+i.selectSize:""],on:{click:function(t){return t.stopPropagation(),i.toggleMenu(t)}}},[i.multiple?r("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":i.inputWidth-32+"px",width:"100%"}},[i.collapseTags&&i.selected.length?r("span",[r("el-tag",{attrs:{closable:!i.selectDisabled,size:i.collapseTagSize,hit:i.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){i.deleteTag(t,i.selected[0])}}},[r("span",{staticClass:"el-select__tags-text"},[i._v(i._s(i.selected[0].currentLabel))])]),1<i.selected.length?r("el-tag",{attrs:{closable:!1,size:i.collapseTagSize,type:"info","disable-transitions":""}},[r("span",{staticClass:"el-select__tags-text"},[i._v("+ "+i._s(i.selected.length-1))])]):i._e()],1):i._e(),i.collapseTags?i._e():r("transition-group",{on:{"after-leave":i.resetInputHeight}},i._l(i.selected,function(e){return r("el-tag",{key:i.getValueKey(e),attrs:{closable:!i.selectDisabled,size:i.collapseTagSize,hit:e.hitState,type:"info","disable-transitions":""},on:{close:function(t){i.deleteTag(t,e)}}},[r("span",{staticClass:"el-select__tags-text"},[i._v(i._s(e.currentLabel))])])}),1),i.filterable?r("input",{directives:[{name:"model",rawName:"v-model",value:i.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[i.selectSize?"is-"+i.selectSize:""],style:{"flex-grow":"1",width:i.inputLength/(i.inputWidth-32)+"%","max-width":i.inputWidth-42+"px"},attrs:{type:"text",disabled:i.selectDisabled,autocomplete:i.autoComplete||i.autocomplete},domProps:{value:i.query},on:{focus:i.handleFocus,blur:function(t){i.softFocus=!1},click:function(t){t.stopPropagation()},keyup:i.managePlaceholder,keydown:[i.resetInputState,function(t){if(!("button"in t)&&i._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),i.navigateOptions("next")},function(t){if(!("button"in t)&&i._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),i.navigateOptions("prev")},function(t){return"button"in t||!i._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),i.selectOption(t)):null},function(t){if(!("button"in t)&&i._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),i.visible=!1},function(t){return"button"in t||!i._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?i.deletePrevTag(t):null}],compositionstart:i.handleComposition,compositionupdate:i.handleComposition,compositionend:i.handleComposition,input:[function(t){t.target.composing||(i.query=t.target.value)},i.debouncedQueryChange]}}):i._e()],1):i._e(),r("el-input",{ref:"reference",class:{"is-focus":i.visible},attrs:{type:"text",placeholder:i.currentPlaceholder,name:i.name,id:i.id,autocomplete:i.autoComplete||i.autocomplete,size:i.selectSize,disabled:i.selectDisabled,readonly:i.readonly,"validate-event":!1},on:{focus:i.handleFocus,blur:i.handleBlur},nativeOn:{keyup:function(t){return i.debouncedOnInputChange(t)},keydown:[function(t){if(!("button"in t)&&i._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),t.preventDefault(),i.navigateOptions("next")},function(t){if(!("button"in t)&&i._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),t.preventDefault(),i.navigateOptions("prev")},function(t){return"button"in t||!i._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),i.selectOption(t)):null},function(t){if(!("button"in t)&&i._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),i.visible=!1},function(t){if(!("button"in t)&&i._k(t.keyCode,"tab",9,t.key,"Tab"))return null;i.visible=!1}],paste:function(t){return i.debouncedOnInputChange(t)},mouseenter:function(t){i.inputHovering=!0},mouseleave:function(t){i.inputHovering=!1}},model:{value:i.selectedLabel,callback:function(t){i.selectedLabel=t},expression:"selectedLabel"}},[i.$slots.prefix?r("template",{slot:"prefix"},[i._t("prefix")],2):i._e(),r("template",{slot:"suffix"},[r("i",{directives:[{name:"show",rawName:"v-show",value:!i.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+i.iconClass]}),i.showClose?r("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:i.handleClearClick}}):i._e()])],2),r("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":i.handleMenuEnter,"after-leave":i.doDestroy}},[r("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:i.visible&&!1!==i.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":i.popperAppendToBody}},[r("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:0<i.options.length&&!i.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!i.allowCreate&&i.query&&0===i.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[i.showNewOption?r("el-option",{attrs:{value:i.query,created:""}}):i._e(),i._t("default")],2),i.emptyText&&(!i.allowCreate||i.loading||i.allowCreate&&0===i.options.length)?[i.$slots.empty?i._t("empty"):r("p",{staticClass:"el-select-dropdown__empty"},[i._v("\n          "+i._s(i.emptyText)+"\n        ")])]:i._e()],2)],1)],1)};r._withStripped=!0;var n=i(3),o=i.n(n),a=i(21),s=i.n(a),l=i(7),u=i.n(l),c=i(9),h=i.n(c),p=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":this.$parent.multiple},this.popperClass],style:{minWidth:this.minWidth}},[this._t("default")],2)};p._withStripped=!0;var f=i(5),d={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[i.n(f).a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var t=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",function(){t.$parent.visible&&t.updatePopper()}),this.$on("destroyPopper",this.destroyPopper)}},m=i(0),y=Object(m.a)(d,p,[],!1,null,null,null);y.options.__file="packages/select/src/select-dropdown.vue";var g=y.exports,v=i(29),_=i(26),b=i.n(_),x=i(19),w=i.n(x),S=i(14),C=i.n(S),E=i(11),T=i.n(E),k=i(15),M=i(12),P=i(27),A=i.n(P),L=i(4),I=i(33),O={mixins:[o.a,u.a,s()("reference"),{data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter(function(t){return t.visible}).every(function(t){return t.disabled})}},watch:{hoverIndex:function(t){var e=this;"number"==typeof t&&-1<t&&(this.hoverOption=this.options[t]||{}),this.options.forEach(function(t){t.hover=e.hoverOption===t})}},methods:{navigateOptions:function(t){var e=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===t?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===t&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var i=this.options[this.hoverIndex];!0!==i.disabled&&!0!==i.groupDisabled&&i.visible||this.navigateOptions(t),this.$nextTick(function(){return e.scrollToOption(e.hoverOption)})}}else this.visible=!0}}}],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(L.isIE)()&&!Object(L.isEdge)()&&!this.visible},showClose:function(){var t=this.multiple?Array.isArray(this.value)&&0<this.value.length:void 0!==this.value&&null!==this.value&&""!==this.value;return this.clearable&&!this.selectDisabled&&this.inputHovering&&t},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&0<this.options.length&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,t=this.options.filter(function(t){return!t.created}).some(function(t){return t.currentLabel===e.query});return this.filterable&&this.allowCreate&&""!==this.query&&!t},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return-1<["small","mini"].indexOf(this.selectSize)?"mini":"small"}},components:{ElInput:h.a,ElSelectMenu:g,ElOption:v.a,ElTag:b.a,ElScrollbar:w.a},directives:{Clickoutside:T.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(t){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,default:function(){return Object(M.t)("el.select.placeholder")}},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var t=this;this.$nextTick(function(){t.resetInputHeight()})},placeholder:function(t){this.cachedPlaceHolder=this.currentPlaceholder=t},value:function(t,e){this.multiple&&(this.resetInputHeight(),0<t.length||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(L.valueEquals)(t,e)||this.dispatch("ElFormItem","el.form.change",t)},visible:function(t){var e=this;t?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.broadcast("ElInput","inputSelect")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick(function(){e.$refs.input&&""===e.$refs.input.value&&0===e.selected.length&&(e.currentPlaceholder=e.cachedPlaceHolder)}),this.multiple||this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel))),this.$emit("visible-change",t)},options:function(){var t=this;if(!this.$isServer){this.$nextTick(function(){t.broadcast("ElSelectDropdown","updatePopper")}),this.multiple&&this.resetInputHeight();var e=this.$el.querySelectorAll("input");-1===[].indexOf.call(e,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(t){var e=t.target.value;if("compositionend"===t.type)this.isOnComposition=!1,this.handleQueryChange(e);else{var i=e[e.length-1]||"";this.isOnComposition=!Object(I.isKorean)(i)}},handleQueryChange:function(t){var e=this;if(this.previousQuery!==t&&!this.isOnComposition)if(null!==this.previousQuery||"function"!=typeof this.filterMethod&&"function"!=typeof this.remoteMethod){if(this.previousQuery=t,this.$nextTick(function(){e.visible&&e.broadcast("ElSelectDropdown","updatePopper")}),this.hoverIndex=-1,this.multiple&&this.filterable){var i=15*this.$refs.input.value.length+20;this.inputLength=this.collapseTags?Math.min(50,i):i,this.managePlaceholder(),this.resetInputHeight()}this.remote&&"function"==typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(t)):("function"==typeof this.filterMethod?this.filterMethod(t):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",t)),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}else this.previousQuery=t},scrollToOption:function(t){var e=Array.isArray(t)&&t[0]?t[0].$el:t.$el;if(this.$refs.popper&&e){var i=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");A()(i,e)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var t=this;this.$nextTick(function(){return t.scrollToOption(t.selected)})},emitChange:function(t){Object(L.valueEquals)(this.value,t)||this.$emit("change",t)},getOption:function(t){for(var e=void 0,i="[object object]"===Object.prototype.toString.call(t).toLowerCase(),r="[object null]"===Object.prototype.toString.call(t).toLowerCase(),n=this.cachedOptions.length-1;0<=n;n--){var o=this.cachedOptions[n];if(i?Object(L.getValueByPath)(o.value,this.valueKey)===Object(L.getValueByPath)(t,this.valueKey):o.value===t){e=o;break}}if(e)return e;var a={value:t,currentLabel:i||r?"":t};return this.multiple&&(a.hitState=!1),a},setSelected:function(){var e=this;if(!this.multiple){var t=this.getOption(this.value);return t.created?(this.createdLabel=t.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=t.currentLabel,this.selected=t,void(this.filterable&&(this.query=this.selectedLabel))}var i=[];Array.isArray(this.value)&&this.value.forEach(function(t){i.push(e.getOption(t))}),this.selected=i,this.$nextTick(function(){e.resetInputHeight()})},handleFocus:function(t){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.menuVisibleOnFocus=!0),this.$emit("focus",t))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(t){var e=this;setTimeout(function(){e.isSilentBlur?e.isSilentBlur=!1:e.$emit("blur",t)},50),this.softFocus=!1},handleClearClick:function(t){this.deleteSelected(t)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(t){if(Array.isArray(this.selected)){var e=this.selected[this.selected.length-1];if(e)return!0===t||!1===t?e.hitState=t:(e.hitState=!e.hitState,e.hitState)}},deletePrevTag:function(t){if(t.target.value.length<=0&&!this.toggleLastOptionHitState()){var e=this.value.slice();e.pop(),this.$emit("input",e),this.emitChange(e)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(t){8!==t.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var n=this;this.collapseTags&&!this.filterable||this.$nextTick(function(){if(n.$refs.reference){var t=n.$refs.reference.$el.childNodes,e=[].filter.call(t,function(t){return"INPUT"===t.tagName})[0],i=n.$refs.tags,r=n.initialInputHeight||40;e.style.height=0===n.selected.length?r+"px":Math.max(i?i.clientHeight+(i.clientHeight>r?6:0):0,r)+"px",n.visible&&!1!==n.emptyText&&n.broadcast("ElSelectDropdown","updatePopper")}})},resetHoverIndex:function(){var e=this;setTimeout(function(){e.multiple?0<e.selected.length?e.hoverIndex=Math.min.apply(null,e.selected.map(function(t){return e.options.indexOf(t)})):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)},300)},handleOptionSelect:function(t,e){var i=this;if(this.multiple){var r=this.value.slice(),n=this.getValueIndex(r,t.value);-1<n?r.splice(n,1):(this.multipleLimit<=0||r.length<this.multipleLimit)&&r.push(t.value),this.$emit("input",r),this.emitChange(r),t.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",t.value),this.emitChange(t.value),this.visible=!1;this.isSilentBlur=e,this.setSoftFocus(),this.visible||this.$nextTick(function(){i.scrollToOption(t)})},setSoftFocus:function(){this.softFocus=!0;var t=this.$refs.input||this.$refs.reference;t&&t.focus()},getValueIndex:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=arguments[1];if("[object object]"!==Object.prototype.toString.call(i).toLowerCase())return t.indexOf(i);var r=this.valueKey,n=-1;return t.some(function(t,e){return Object(L.getValueByPath)(t,r)===Object(L.getValueByPath)(i,r)&&(n=e,!0)}),n},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(t){t.stopPropagation();var e=this.multiple?[]:"";this.$emit("input",e),this.emitChange(e),this.visible=!1,this.$emit("clear")},deleteTag:function(t,e){var i=this.selected.indexOf(e);if(-1<i&&!this.selectDisabled){var r=this.value.slice();r.splice(i,1),this.$emit("input",r),this.emitChange(r),this.$emit("remove-tag",e.value)}t.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(t){-1<t&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(t,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){for(var t=!(this.hoverIndex=-1),e=this.options.length-1;0<=e;e--)if(this.options[e].created){t=!0,this.hoverIndex=e;break}if(!t)for(var i=0;i!==this.options.length;++i){var r=this.options[i];if(this.query){if(!r.disabled&&!r.groupDisabled&&r.visible){this.hoverIndex=i;break}}else if(r.itemSelected){this.hoverIndex=i;break}}},getValueKey:function(t){return"[object object]"!==Object.prototype.toString.call(t.value).toLowerCase()?t.value:Object(L.getValueByPath)(t.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.placeholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=C()(this.debounce,function(){e.onInputChange()}),this.debouncedQueryChange=C()(this.debounce,function(t){e.handleQueryChange(t.target.value)}),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var t=this;this.multiple&&Array.isArray(this.value)&&0<this.value.length&&(this.currentPlaceholder=""),Object(k.addResizeListener)(this.$el,this.handleResize);var e=this.$refs.reference;if(e&&e.$el){this.initialInputHeight=e.$el.getBoundingClientRect().height||{medium:36,small:32,mini:28}[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick(function(){e&&e.$el&&(t.inputWidth=e.$el.getBoundingClientRect().width)}),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(k.removeResizeListener)(this.$el,this.handleResize)}},D=Object(m.a)(O,r,[],!1,null,null,null);D.options.__file="packages/select/src/select.vue";var z=D.exports;z.install=function(t){t.component(z.name,z)};e.default=z}])},UShQ:function(t,e,i){"use strict";e.__esModule=!0,e.PopupManager=void 0;var r=o(i("i7/w")),n=o(i("f03z")),a=o(i("Syab")),s=o(i("5i1c")),l=i("WST1");function o(t){return t&&t.__esModule?t:{default:t}}var u=1,c=void 0;e.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+u++,a.default.register(this._popupId,this)},beforeDestroy:function(){a.default.deregister(this._popupId),a.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(t){var e=this;if(t){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,r.default.nextTick(function(){e.open()}))}else this.close()}},methods:{open:function(t){var e=this;this.rendered||(this.rendered=!0);var i=(0,n.default)({},this.$props||this,t);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var r=Number(i.openDelay);0<r?this._openTimer=setTimeout(function(){e._openTimer=null,e.doOpen(i)},r):this.doOpen(i)},doOpen:function(t){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var e=this.$el,i=t.modal,r=t.zIndex;if(r&&(a.default.zIndex=r),i&&(this._closing&&(a.default.closeModal(this._popupId),this._closing=!1),a.default.openModal(this._popupId,a.default.nextZIndex(),this.modalAppendToBody?void 0:e,t.modalClass,t.modalFade),t.lockScroll)){this.withoutHiddenClass=!(0,l.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,l.getStyle)(document.body,"paddingRight"),10)),c=(0,s.default)();var n=document.documentElement.clientHeight<document.body.scrollHeight,o=(0,l.getStyle)(document.body,"overflowY");0<c&&(n||"scroll"===o)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+c+"px"),(0,l.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(e).position&&(e.style.position="absolute"),e.style.zIndex=a.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var t=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var e=Number(this.closeDelay);0<e?this._closeTimer=setTimeout(function(){t._closeTimer=null,t.doClose()},e):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){a.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,l.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},e.PopupManager=a.default},VGZy:function(t,e,i){},VIiR:function(t,e,i){"use strict";e.__esModule=!0;var r=i("WST1");var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.beforeEnter=function(t){(0,r.addClass)(t,"collapse-transition"),t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.height="0",t.style.paddingTop=0,t.style.paddingBottom=0},t.prototype.enter=function(t){t.dataset.oldOverflow=t.style.overflow,0!==t.scrollHeight?t.style.height=t.scrollHeight+"px":t.style.height="",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom,t.style.overflow="hidden"},t.prototype.afterEnter=function(t){(0,r.removeClass)(t,"collapse-transition"),t.style.height="",t.style.overflow=t.dataset.oldOverflow},t.prototype.beforeLeave=function(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.height=t.scrollHeight+"px",t.style.overflow="hidden"},t.prototype.leave=function(t){0!==t.scrollHeight&&((0,r.addClass)(t,"collapse-transition"),t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0)},t.prototype.afterLeave=function(t){(0,r.removeClass)(t,"collapse-transition"),t.style.height="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom},t}();e.default={name:"ElCollapseTransition",functional:!0,render:function(t,e){var i=e.children;return t("transition",{on:new n},i)}}},VgtF:function(t,e,i){},W8MJ:function(t,e){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}},WOGj:function(t,e){t.exports=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=c[t]||t;for(var h=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],e=0;e<h.length;e++){var i=h[e].re,r=h[e].process,n=i.exec(t);if(n){var o=r(n);this.r=o[0],this.g=o[1],this.b=o[2],3<o.length&&(this.alpha=o[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.alpha=this.alpha<0?0:1<this.alpha||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i},this.getHelpXML=function(){for(var t=new Array,e=0;e<h.length;e++)for(var i=h[e].example,r=0;r<i.length;r++)t[t.length]=i[r];for(var n in c)t[t.length]=n;var o=document.createElement("ul");o.setAttribute("id","rgbcolor-examples");for(e=0;e<t.length;e++)try{var a=document.createElement("li"),s=new RGBColor(t[e]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+s.toHex()+"; color:"+s.toHex(),l.appendChild(document.createTextNode("test"));var u=document.createTextNode(" "+t[e]+" -> "+s.toRGB()+" -> "+s.toHex());a.appendChild(l),a.appendChild(u),o.appendChild(a)}catch(t){}return o}}},WST1:function(t,e,i){"use strict";e.__esModule=!0,e.getStyle=e.once=e.off=e.on=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.hasClass=d,e.addClass=function(t,e){if(!t)return;for(var i=t.className,r=(e||"").split(" "),n=0,o=r.length;n<o;n++){var a=r[n];a&&(t.classList?t.classList.add(a):d(t,a)||(i+=" "+a))}t.classList||(t.className=i)},e.removeClass=function(t,e){if(!t||!e)return;for(var i=e.split(" "),r=" "+t.className+" ",n=0,o=i.length;n<o;n++){var a=i[n];a&&(t.classList?t.classList.remove(a):d(t,a)&&(r=r.replace(" "+a+" "," ")))}t.classList||(t.className=c(r))},e.setStyle=function t(e,i,r){if(!e||!i)return;if("object"===(void 0===i?"undefined":o(i)))for(var n in i)i.hasOwnProperty(n)&&t(e,n,i[n]);else"opacity"===(i=h(i))&&u<9?e.style.filter=isNaN(r)?"":"alpha(opacity="+100*r+")":e.style[i]=r};var r,n=i("i7/w");var a=((r=n)&&r.__esModule?r:{default:r}).default.prototype.$isServer,s=/([\:\-\_]+(.))/g,l=/^moz([A-Z])/,u=a?0:Number(document.documentMode),c=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},h=function(t){return t.replace(s,function(t,e,i,r){return r?i.toUpperCase():i}).replace(l,"Moz$1")},p=e.on=!a&&document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)},f=e.off=!a&&document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)};e.once=function(e,i,r){p(e,i,function t(){r&&r.apply(this,arguments),f(e,i,t)})};function d(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):-1<(" "+t.className+" ").indexOf(" "+e+" ")}e.getStyle=u<9?function(e,i){if(!a){if(!e||!i)return null;"float"===(i=h(i))&&(i="styleFloat");try{switch(i){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(t){return 1}default:return e.style[i]||e.currentStyle?e.currentStyle[i]:null}}catch(t){return e.style[i]}}}:function(e,i){if(!a){if(!e||!i)return null;"float"===(i=h(i))&&(i="cssFloat");try{var t=document.defaultView.getComputedStyle(e,"");return e.style[i]||t?t[i]:null}catch(t){return e.style[i]}}}},"WX/U":function(t,e){t.exports=function(n,o,a,s){var l,u=0;return"boolean"!=typeof o&&(s=a,a=o,o=void 0),function(){var t=this,e=Number(new Date)-u,i=arguments;function r(){u=Number(new Date),a.apply(t,i)}s&&!l&&r(),l&&clearTimeout(l),void 0===s&&n<e?r():!0!==o&&(l=setTimeout(s?function(){l=void 0}:r,void 0===s?n-e:n))}}},X1wy:function(t,e){t.exports=f},XaGS:function(t,te,e){(function(t,e){var r="__lodash_hash_undefined__",b=1,g=2,i=9007199254740991,v="[object Arguments]",_="[object Array]",n="[object AsyncFunction]",x="[object Boolean]",w="[object Date]",S="[object Error]",o="[object Function]",a="[object GeneratorFunction]",C="[object Map]",E="[object Number]",s="[object Null]",T="[object Object]",l="[object Promise]",u="[object Proxy]",k="[object RegExp]",M="[object Set]",P="[object String]",A="[object Symbol]",c="[object Undefined]",h="[object WeakMap]",L="[object ArrayBuffer]",I="[object DataView]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d[v]=d[_]=d[L]=d[x]=d[I]=d[w]=d[S]=d[o]=d[C]=d[E]=d[T]=d[k]=d[M]=d[P]=d[h]=!1;var m="object"==typeof t&&t&&t.Object===Object&&t,y="object"==typeof self&&self&&self.Object===Object&&self,O=m||y||Function("return this")(),D=te&&!te.nodeType&&te,z=D&&"object"==typeof e&&e&&!e.nodeType&&e,F=z&&z.exports===D,R=F&&m.process,B=function(){try{return R&&R.binding&&R.binding("util")}catch(t){}}(),N=B&&B.isTypedArray;function j(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(e(t[i],i,t))return!0;return!1}function V(t){var i=-1,r=Array(t.size);return t.forEach(function(t,e){r[++i]=[e,t]}),r}function U(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}var $,q,W,G=Array.prototype,H=Function.prototype,Z=Object.prototype,X=O["__core-js_shared__"],K=H.toString,Y=Z.hasOwnProperty,J=($=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"",Q=Z.toString,tt=RegExp("^"+K.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=F?O.Buffer:void 0,it=O.Symbol,rt=O.Uint8Array,nt=Z.propertyIsEnumerable,ot=G.splice,at=it?it.toStringTag:void 0,st=Object.getOwnPropertySymbols,lt=et?et.isBuffer:void 0,ut=(q=Object.keys,W=Object,function(t){return q(W(t))}),ct=Bt(O,"DataView"),ht=Bt(O,"Map"),pt=Bt(O,"Promise"),ft=Bt(O,"Set"),dt=Bt(O,"WeakMap"),mt=Bt(Object,"create"),yt=Ut(ct),gt=Ut(ht),vt=Ut(pt),_t=Ut(ft),bt=Ut(dt),xt=it?it.prototype:void 0,wt=xt?xt.valueOf:void 0;function St(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Ct(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Et(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Tt(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Et;++e<i;)this.add(t[e])}function kt(t){var e=this.__data__=new Ct(t);this.size=e.size}function Mt(t,e){var i=Wt(t),r=!i&&qt(t),n=!i&&!r&&Gt(t),o=!i&&!r&&!n&&Jt(t),a=i||r||n||o,s=a?function(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}(t.length,String):[],l=s.length;for(var u in t)!e&&!Y.call(t,u)||a&&("length"==u||n&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Vt(u,l))||s.push(u);return s}function Pt(t,e){for(var i=t.length;i--;)if($t(t[i][0],e))return i;return-1}function At(t){return null==t?void 0===t?c:s:at&&at in Object(t)?function(t){var e=Y.call(t,at),i=t[at];try{var r=!(t[at]=void 0)}catch(t){}var n=Q.call(t);r&&(e?t[at]=i:delete t[at]);return n}(t):(e=t,Q.call(e));var e}function Lt(t){return Kt(t)&&At(t)==v}function It(t,e,i,r,n){return t===e||(null==t||null==e||!Kt(t)&&!Kt(e)?t!=t&&e!=e:function(t,e,i,r,n,o){var a=Wt(t),s=Wt(e),l=a?_:jt(t),u=s?_:jt(e),c=(l=l==v?T:l)==T,h=(u=u==v?T:u)==T,p=l==u;if(p&&Gt(t)){if(!Gt(e))return!1;c=!(a=!0)}if(p&&!c)return o||(o=new kt),a||Jt(t)?zt(t,e,i,r,n,o):function(t,e,i,r,n,o,a){switch(i){case I:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!o(new rt(t),new rt(e)));case x:case w:case E:return $t(+t,+e);case S:return t.name==e.name&&t.message==e.message;case k:case P:return t==e+"";case C:var s=V;case M:var l=r&b;if(s||(s=U),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=g,a.set(t,e);var c=zt(s(t),s(e),r,n,o,a);return a.delete(t),c;case A:if(wt)return wt.call(t)==wt.call(e)}return!1}(t,e,l,i,r,n,o);if(!(i&b)){var f=c&&Y.call(t,"__wrapped__"),d=h&&Y.call(e,"__wrapped__");if(f||d){var m=f?t.value():t,y=d?e.value():e;return o||(o=new kt),n(m,y,i,r,o)}}return!!p&&(o||(o=new kt),function(t,e,i,r,n,o){var a=i&b,s=Ft(t),l=s.length,u=Ft(e).length;if(l!=u&&!a)return!1;for(var c=l;c--;){var h=s[c];if(!(a?h in e:Y.call(e,h)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<l;){h=s[c];var m=t[h],y=e[h];if(r)var g=a?r(y,m,h,e,t,o):r(m,y,h,t,e,o);if(!(void 0===g?m===y||n(m,y,i,r,o):g)){f=!1;break}d||(d="constructor"==h)}if(f&&!d){var v=t.constructor,_=e.constructor;v!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(f=!1)}return o.delete(t),o.delete(e),f}(t,e,i,r,n,o))}(t,e,i,r,It,n))}function Ot(t){return!(!Xt(t)||(e=t,J&&J in e))&&(Ht(t)?tt:p).test(Ut(t));var e}function Dt(t){if(i=(e=t)&&e.constructor,r="function"==typeof i&&i.prototype||Z,e!==r)return ut(t);var e,i,r,n=[];for(var o in Object(t))Y.call(t,o)&&"constructor"!=o&&n.push(o);return n}function zt(t,e,r,n,o,a){var i=r&b,s=t.length,l=e.length;if(s!=l&&!(i&&s<l))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var c=-1,h=!0,p=r&g?new Tt:void 0;for(a.set(t,e),a.set(e,t);++c<s;){var f=t[c],d=e[c];if(n)var m=i?n(d,f,c,e,t,a):n(f,d,c,t,e,a);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!j(e,function(t,e){if(i=e,!p.has(i)&&(f===t||o(f,t,r,n,a)))return p.push(e);var i})){h=!1;break}}else if(f!==d&&!o(f,d,r,n,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function Ft(t){return i=Nt,r=Qt(e=t),Wt(e)?r:function(t,e){for(var i=-1,r=e.length,n=t.length;++i<r;)t[n+i]=e[i];return t}(r,i(e));var e,i,r}function Rt(t,e){var i,r,n=t.__data__;return("string"==(r=typeof(i=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?n["string"==typeof e?"string":"hash"]:n.map}function Bt(t,e){var i,r,n=(r=e,null==(i=t)?void 0:i[r]);return Ot(n)?n:void 0}St.prototype.clear=function(){this.__data__=mt?mt(null):{},this.size=0},St.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},St.prototype.get=function(t){var e=this.__data__;if(mt){var i=e[t];return i===r?void 0:i}return Y.call(e,t)?e[t]:void 0},St.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:Y.call(e,t)},St.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=mt&&void 0===e?r:e,this},Ct.prototype.clear=function(){this.__data__=[],this.size=0},Ct.prototype.delete=function(t){var e=this.__data__,i=Pt(e,t);return!(i<0||(i==e.length-1?e.pop():ot.call(e,i,1),--this.size,0))},Ct.prototype.get=function(t){var e=this.__data__,i=Pt(e,t);return i<0?void 0:e[i][1]},Ct.prototype.has=function(t){return-1<Pt(this.__data__,t)},Ct.prototype.set=function(t,e){var i=this.__data__,r=Pt(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this},Et.prototype.clear=function(){this.size=0,this.__data__={hash:new St,map:new(ht||Ct),string:new St}},Et.prototype.delete=function(t){var e=Rt(this,t).delete(t);return this.size-=e?1:0,e},Et.prototype.get=function(t){return Rt(this,t).get(t)},Et.prototype.has=function(t){return Rt(this,t).has(t)},Et.prototype.set=function(t,e){var i=Rt(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this},Tt.prototype.add=Tt.prototype.push=function(t){return this.__data__.set(t,r),this},Tt.prototype.has=function(t){return this.__data__.has(t)},kt.prototype.clear=function(){this.__data__=new Ct,this.size=0},kt.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},kt.prototype.get=function(t){return this.__data__.get(t)},kt.prototype.has=function(t){return this.__data__.has(t)},kt.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Ct){var r=i.__data__;if(!ht||r.length<199)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new Et(r)}return i.set(t,e),this.size=i.size,this};var Nt=st?function(e){return null==e?[]:(e=Object(e),function(t,e){for(var i=-1,r=null==t?0:t.length,n=0,o=[];++i<r;){var a=t[i];e(a,i,t)&&(o[n++]=a)}return o}(st(e),function(t){return nt.call(e,t)}))}:function(){return[]},jt=At;function Vt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||f.test(t))&&-1<t&&t%1==0&&t<e}function Ut(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $t(t,e){return t===e||t!=t&&e!=e}(ct&&jt(new ct(new ArrayBuffer(1)))!=I||ht&&jt(new ht)!=C||pt&&jt(pt.resolve())!=l||ft&&jt(new ft)!=M||dt&&jt(new dt)!=h)&&(jt=function(t){var e=At(t),i=e==T?t.constructor:void 0,r=i?Ut(i):"";if(r)switch(r){case yt:return I;case gt:return C;case vt:return l;case _t:return M;case bt:return h}return e});var qt=Lt(function(){return arguments}())?Lt:function(t){return Kt(t)&&Y.call(t,"callee")&&!nt.call(t,"callee")},Wt=Array.isArray;var Gt=lt||function(){return!1};function Ht(t){if(!Xt(t))return!1;var e=At(t);return e==o||e==a||e==n||e==u}function Zt(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=i}function Xt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Kt(t){return null!=t&&"object"==typeof t}var Yt,Jt=N?(Yt=N,function(t){return Yt(t)}):function(t){return Kt(t)&&Zt(t.length)&&!!d[At(t)]};function Qt(t){return null!=(e=t)&&Zt(e.length)&&!Ht(e)?Mt(t):Dt(t);var e}e.exports=function(t,e){return It(t,e)}}).call(this,e("yLpj"),e("YuTi")(t))},Xhqo:function(t,e,i){"use strict";var s=i("hwdV").Buffer,r=i(2);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var e,i,r,n=s.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,i=n,r=a,e.copy(i,r),a+=o.data.length,o=o.next;return n},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},Xrjk:function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i("j3ZU")),o=i("cWyK");e.default=function(t,r){return void 0===r&&(r={}),o.segmentReduce(t,function(t,e){var i=e.geometry.coordinates;return t+n.default(i[0],i[1],r)},0)}},YWdi:function(t,e,i){"use strict";var r,n;"function"==typeof Symbol&&Symbol.iterator;void 0===(n="function"==typeof(r=function(){var d=window,o={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",arrowOffset:0,modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function t(t,e,i){this._reference=t.jquery?t[0]:t,this.state={};var r=null==e,n=e&&"[object Object]"===Object.prototype.toString.call(e);return this._popper=r||n?this.parse(n?e:{}):e.jquery?e[0]:e,this._options=Object.assign({},o,i),this._options.modifiers=this._options.modifiers.map(function(t){if(-1===this._options.modifiersIgnored.indexOf(t))return"applyStyle"===t&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[t]||t}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),a(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function m(t){var e=t.style.display,i=t.style.visibility;t.style.display="block",t.style.visibility="hidden",t.offsetWidth;var r=d.getComputedStyle(t),n=parseFloat(r.marginTop)+parseFloat(r.marginBottom),o=parseFloat(r.marginLeft)+parseFloat(r.marginRight),a={width:t.offsetWidth+o,height:t.offsetHeight+n};return t.style.display=e,t.style.visibility=i,a}function u(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function y(t){var e=Object.assign({},t);return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function n(t,e){var i,r=0;for(i in t){if(t[i]===e)return r;r++}return null}function i(t,e){var i=d.getComputedStyle(t,null);return i[e]}function g(t){var e=t.offsetParent;return e!==d.document.body&&e?e:d.document.documentElement}function v(t){var e=t.parentNode;return e?e===d.document?d.document.body.scrollTop||d.document.body.scrollLeft?d.document.body:d.document.documentElement:-1!==["scroll","auto"].indexOf(i(e,"overflow"))||-1!==["scroll","auto"].indexOf(i(e,"overflow-x"))||-1!==["scroll","auto"].indexOf(i(e,"overflow-y"))?e:v(t.parentNode):t}function a(r,n){Object.keys(n).forEach(function(t){var e,i="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&""!==(e=n[t])&&!isNaN(parseFloat(e))&&isFinite(e)&&(i="px"),r.style[t]=n[t]+i})}function _(t){var e={width:t.offsetWidth,height:t.offsetHeight,left:t.offsetLeft,top:t.offsetTop};return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function s(t){var e=t.getBoundingClientRect(),i=-1!=navigator.userAgent.indexOf("MSIE"),r=i&&"HTML"===t.tagName?-t.scrollTop:e.top;return{left:e.left,top:r,right:e.right,bottom:e.bottom,width:e.right-e.left,height:e.bottom-r}}function l(t){for(var e=["","ms","webkit","moz","o"],i=0;i<e.length;i++){var r=e[i]?e[i]+t.charAt(0).toUpperCase()+t.slice(1):t;if(void 0!==d.document.body.style[r])return r}return null}return t.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[l("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},t.prototype.update=function(){var t={instance:this,styles:{}};t.placement=this._options.placement,t._originalPlacement=this._options.placement,t.offsets=this._getOffsets(this._popper,this._reference,t.placement),t.boundaries=this._getBoundaries(t,this._options.boundariesPadding,this._options.boundariesElement),t=this.runModifiers(t,this._options.modifiers),"function"==typeof this.state.updateCallback&&this.state.updateCallback(t)},t.prototype.onCreate=function(t){return t(this),this},t.prototype.onUpdate=function(t){return this.state.updateCallback=t,this},t.prototype.parse=function(t){var e={tagName:"div",classNames:["popper"],attributes:[],parent:d.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};t=Object.assign({},e,t);var i=d.document,r=i.createElement(t.tagName);if(a(r,t.classNames),s(r,t.attributes),"node"===t.contentType?r.appendChild(t.content.jquery?t.content[0]:t.content):"html"===t.contentType?r.innerHTML=t.content:r.textContent=t.content,t.arrowTagName){var n=i.createElement(t.arrowTagName);a(n,t.arrowClassNames),s(n,t.arrowAttributes),r.appendChild(n)}var o=t.parent.jquery?t.parent[0]:t.parent;if("string"==typeof o){if(1<(o=i.querySelectorAll(t.parent)).length&&console.warn("WARNING: the given `parent` query("+t.parent+") matched more than one element, the first one will be used"),0===o.length)throw"ERROR: the given `parent` doesn't exists!";o=o[0]}return 1<o.length&&o instanceof Element==0&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),o=o[0]),o.appendChild(r),r;function a(e,t){t.forEach(function(t){e.classList.add(t)})}function s(e,t){t.forEach(function(t){e.setAttribute(t.split(":")[0],t.split(":")[1]||"")})}},t.prototype._getPosition=function(t,e){return g(e),this._options.forceAbsolute?"absolute":function t(e){return e!==d.document.body&&("fixed"===i(e,"position")||(e.parentNode?t(e.parentNode):e))}(e)?"fixed":"absolute"},t.prototype._getOffsets=function(t,e,i){i=i.split("-")[0];var r={};r.position=this.state.position;var n="fixed"===r.position,o=function(t,e,i){var r=s(t),n=s(e);if(i){var o=v(e);n.top+=o.scrollTop,n.bottom+=o.scrollTop,n.left+=o.scrollLeft,n.right+=o.scrollLeft}return{top:r.top-n.top,left:r.left-n.left,bottom:r.top-n.top+r.height,right:r.left-n.left+r.width,width:r.width,height:r.height}}(e,g(t),n),a=m(t);return-1!==["right","left"].indexOf(i)?(r.top=o.top+o.height/2-a.height/2,r.left="left"===i?o.left-a.width:o.right):(r.left=o.left+o.width/2-a.width/2,r.top="top"===i?o.top-a.height:o.bottom),r.width=a.width,r.height=a.height,{popper:r,reference:o}},t.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),d.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var t=v(this._reference);t!==d.document.body&&t!==d.document.documentElement||(t=d),t.addEventListener("scroll",this.state.updateBound),this.state.scrollTarget=t}},t.prototype._removeEventListeners=function(){d.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement&&this.state.scrollTarget&&(this.state.scrollTarget.removeEventListener("scroll",this.state.updateBound),this.state.scrollTarget=null),this.state.updateBound=null},t.prototype._getBoundaries=function(t,e,i){var r,n,o,a={};if("window"===i){var s=d.document.body,l=d.document.documentElement;r=Math.max(s.scrollHeight,s.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight),a={top:0,right:Math.max(s.scrollWidth,s.offsetWidth,l.clientWidth,l.scrollWidth,l.offsetWidth),bottom:r,left:0}}else if("viewport"===i){var u=g(this._popper),c=v(this._popper),h=_(u),p="fixed"===t.offsets.popper.position?0:(o=c)==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):o.scrollTop,f="fixed"===t.offsets.popper.position?0:(n=c)==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):n.scrollLeft;a={top:0-(h.top-p),right:d.document.documentElement.clientWidth-(h.left-f),bottom:d.document.documentElement.clientHeight-(h.top-p),left:0-(h.left-f)}}else a=g(this._popper)===i?{top:0,left:0,right:i.clientWidth,bottom:i.clientHeight}:_(i);return a.left+=e,a.right-=e,a.top=a.top+e,a.bottom=a.bottom-e,a},t.prototype.runModifiers=function(i,t,e){var r=t.slice();return void 0!==e&&(r=this._options.modifiers.slice(0,n(this._options.modifiers,e))),r.forEach(function(t){var e;(e=t)&&"[object Function]"==={}.toString.call(e)&&(i=t.call(this,i))}.bind(this)),i},t.prototype.isModifierRequired=function(t,e){var i=n(this._options.modifiers,t);return!!this._options.modifiers.slice(0,i).filter(function(t){return t===e}).length},(t.prototype.modifiers={}).applyStyle=function(t){var e,i={position:t.offsets.popper.position},r=Math.round(t.offsets.popper.left),n=Math.round(t.offsets.popper.top);return this._options.gpuAcceleration&&(e=l("transform"))?(i[e]="translate3d("+r+"px, "+n+"px, 0)",i.top=0,i.left=0):(i.left=r,i.top=n),Object.assign(i,t.styles),a(this._popper,i),this._popper.setAttribute("x-placement",t.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&t.offsets.arrow&&a(t.arrowElement,t.offsets.arrow),t},t.prototype.modifiers.shift=function(t){var e=t.placement,i=e.split("-")[0],r=e.split("-")[1];if(r){var n=t.offsets.reference,o=y(t.offsets.popper),a={y:{start:{top:n.top},end:{top:n.top+n.height-o.height}},x:{start:{left:n.left},end:{left:n.left+n.width-o.width}}},s=-1!==["bottom","top"].indexOf(i)?"x":"y";t.offsets.popper=Object.assign(o,a[s][r])}return t},t.prototype.modifiers.preventOverflow=function(e){var t=this._options.preventOverflowOrder,i=y(e.offsets.popper),r={left:function(){var t=i.left;return i.left<e.boundaries.left&&(t=Math.max(i.left,e.boundaries.left)),{left:t}},right:function(){var t=i.left;return i.right>e.boundaries.right&&(t=Math.min(i.left,e.boundaries.right-i.width)),{left:t}},top:function(){var t=i.top;return i.top<e.boundaries.top&&(t=Math.max(i.top,e.boundaries.top)),{top:t}},bottom:function(){var t=i.top;return i.bottom>e.boundaries.bottom&&(t=Math.min(i.top,e.boundaries.bottom-i.height)),{top:t}}};return t.forEach(function(t){e.offsets.popper=Object.assign(i,r[t]())}),e},t.prototype.modifiers.keepTogether=function(t){var e=y(t.offsets.popper),i=t.offsets.reference,r=Math.floor;return e.right<r(i.left)&&(t.offsets.popper.left=r(i.left)-e.width),e.left>r(i.right)&&(t.offsets.popper.left=r(i.right)),e.bottom<r(i.top)&&(t.offsets.popper.top=r(i.top)-e.height),e.top>r(i.bottom)&&(t.offsets.popper.top=r(i.bottom)),t},t.prototype.modifiers.flip=function(n){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),n;if(n.flipped&&n.placement===n._originalPlacement)return n;var o=n.placement.split("-")[0],a=u(o),s=n.placement.split("-")[1]||"",l=[];return(l="flip"===this._options.flipBehavior?[o,a]:this._options.flipBehavior).forEach(function(t,e){if(o===t&&l.length!==e+1){o=n.placement.split("-")[0],a=u(o);var i=y(n.offsets.popper),r=-1!==["right","bottom"].indexOf(o);(r&&Math.floor(n.offsets.reference[o])>Math.floor(i[a])||!r&&Math.floor(n.offsets.reference[o])<Math.floor(i[a]))&&(n.flipped=!0,n.placement=l[e+1],s&&(n.placement+="-"+s),n.offsets.popper=this._getOffsets(this._popper,this._reference,n.placement).popper,n=this.runModifiers(n,this._options.modifiers,this._flip))}}.bind(this)),n},t.prototype.modifiers.offset=function(t){var e=this._options.offset,i=t.offsets.popper;return-1!==t.placement.indexOf("left")?i.top-=e:-1!==t.placement.indexOf("right")?i.top+=e:-1!==t.placement.indexOf("top")?i.left-=e:-1!==t.placement.indexOf("bottom")&&(i.left+=e),t},t.prototype.modifiers.arrow=function(t){var e=this._options.arrowElement,i=this._options.arrowOffset;if("string"==typeof e&&(e=this._popper.querySelector(e)),!e)return t;if(!this._popper.contains(e))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),t;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),t;var r={},n=t.placement.split("-")[0],o=y(t.offsets.popper),a=t.offsets.reference,s=-1!==["left","right"].indexOf(n),l=s?"height":"width",u=s?"top":"left",c=s?"left":"top",h=s?"bottom":"right",p=m(e)[l];a[h]-p<o[u]&&(t.offsets.popper[u]-=o[u]-(a[h]-p)),a[u]+p>o[h]&&(t.offsets.popper[u]+=a[u]+p-o[h]);var f=a[u]+(i||a[l]/2-p/2)-o[u];return f=Math.max(Math.min(o[l]-p-8,f),8),r[u]=f,r[c]="",t.offsets.arrow=r,t.arrowElement=e,t},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r){r=Object(r);for(var n=Object.keys(r),o=0,a=n.length;o<a;o++){var s=n[o],l=Object.getOwnPropertyDescriptor(r,s);void 0!==l&&l.enumerable&&(e[s]=r[s])}}}return e}}),t})?r.call(e,i,e,t):r)||(t.exports=n)},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},ZhHq:function(t,e,i){},Zni2:function(t,e){t.exports=a},a1gu:function(t,e,i){var r=i("cDf5"),n=i("PJYZ");t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?n(t):e}},a3zo:function(t,e,i){"use strict";e.__esModule=!0;var r=i("SJdT");e.default={methods:{t:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return r.t.apply(this,e)}}}},a8sL:function(t,e){t.exports=h},azA5:function(t,e,i){},bdgK:function(t,C,e){"use strict";e.r(C),function(t){var r=function(){if("undefined"!=typeof Map)return Map;function r(t,i){var r=-1;return t.some(function(t,e){return t[0]===i&&(r=e,!0)}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=r(this.__entries__,t),i=this.__entries__[e];return i&&i[1]},t.prototype.set=function(t,e){var i=r(this.__entries__,t);~i?this.__entries__[i][1]=e:this.__entries__.push([t,e])},t.prototype.delete=function(t){var e=this.__entries__,i=r(e,t);~i&&e.splice(i,1)},t.prototype.has=function(t){return!!~r(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,r=this.__entries__;i<r.length;i++){var n=r[i];t.call(e,n[1],n[0])}},t}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,e=void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),l="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(e):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},u=2;var n=["top","right","bottom","left","width","height","size","weight"],o="undefined"!=typeof MutationObserver,a=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,r=!1,n=0;function o(){i&&(i=!1,t()),r&&s()}function a(){l(o)}function s(){var t=Date.now();if(i){if(t-n<u)return;r=!0}else r=!(i=!0),setTimeout(a,e);n=t}return s}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),0<t.length},t.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),o?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;n.some(function(t){return!!~i.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),c=function(t,e){for(var i=0,r=Object.keys(e);i<r.length;i++){var n=r[i];Object.defineProperty(t,n,{value:e[n],enumerable:!1,writable:!1,configurable:!0})}return t},p=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||e},f=g(0,0,0,0);function d(t){return parseFloat(t)||0}function m(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.reduce(function(t,e){return t+d(i["border-"+e+"-width"])},0)}function s(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return f;var r,n=p(t).getComputedStyle(t),o=function(t){for(var e={},i=0,r=["top","right","bottom","left"];i<r.length;i++){var n=r[i],o=t["padding-"+n];e[n]=d(o)}return e}(n),a=o.left+o.right,s=o.top+o.bottom,l=d(n.width),u=d(n.height);if("border-box"===n.boxSizing&&(Math.round(l+a)!==e&&(l-=m(n,"left","right")+a),Math.round(u+s)!==i&&(u-=m(n,"top","bottom")+s)),(r=t)!==p(r).document.documentElement){var c=Math.round(l+a)-e,h=Math.round(u+s)-i;1!==Math.abs(c)&&(l-=c),1!==Math.abs(h)&&(u-=h)}return g(o.left,o.top,l,u)}var h="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof p(t).SVGGraphicsElement}:function(t){return t instanceof p(t).SVGElement&&"function"==typeof t.getBBox};function y(t){return i?h(t)?g(0,0,(e=t.getBBox()).width,e.height):s(t):f;var e}function g(t,e,i,r){return{x:t,y:e,width:i,height:r}}var v=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=y(this.target);return(this.contentRect_=t).width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),_=function(t,e){var i,r,n,o,a,s,l,u=(r=(i=e).x,n=i.y,o=i.width,a=i.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),c(l,{x:r,y:n,width:o,height:a,top:n,right:r+o,bottom:a+n,left:r}),l);c(this,{target:t,contentRect:u})},b=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof p(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new v(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof p(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new _(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return 0<this.activeObservations_.length},t}(),x="undefined"!=typeof WeakMap?new WeakMap:new r,w=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=a.getInstance(),r=new b(e,i,this);x.set(this,r)};["observe","unobserve","disconnect"].forEach(function(e){w.prototype[e]=function(){var t;return(t=x.get(this))[e].apply(t,arguments)}});var S=void 0!==e.ResizeObserver?e.ResizeObserver:w;C.default=S}.call(this,e("yLpj"))},cDf5:function(e,t){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return"function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?e.exports=r=function(t){return i(t)}:e.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)},r(t)}e.exports=r},cWyK:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var m=i("/rf6");function w(t,e,i){if(null!==t)for(var r,n,o,a,s,l,u,c,h=0,p=0,f=t.type,d="FeatureCollection"===f,m="Feature"===f,y=d?t.features.length:1,g=0;g<y;g++){s=(c=!!(u=d?t.features[g].geometry:m?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<s;v++){var _=0,b=0;if(null!==(a=c?u.geometries[v]:u)){l=a.coordinates;var x=a.type;switch(h=!i||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,g,_,b))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,g,_,b))return!1;p++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(n=0;n<l[r].length-h;n++){if(!1===e(l[r][n],p,g,_,b))return!1;p++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(n=b=0;n<l[r].length;n++){for(o=0;o<l[r][n].length-h;o++){if(!1===e(l[r][n][o],p,g,_,b))return!1;p++}b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===w(a.geometries[r],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function r(t,e){var i,r,n,o,a,s,l,u,c,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,m=f?t.features.length:1;for(i=0;i<m;i++){for(s=f?t.features[i].geometry:d?t.geometry:t,u=f?t.features[i].properties:d?t.properties:{},c=f?t.features[i].bbox:d?t.bbox:void 0,h=f?t.features[i].id:d?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,n=0;n<a;n++)if(null!==(o=l?s.geometries[n]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,c,h))return!1;p++}}function s(t,u){r(t,function(t,e,i,r,n){var o,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==u(m.feature(t,i,{bbox:r,id:n}),e,0)&&void 0}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var s=0;s<t.coordinates.length;s++){var l={type:o,coordinates:t.coordinates[s]};if(!1===u(m.feature(l,i),e,s))return!1}})}function n(t,d){s(t,function(a,s,l){var u=0;if(a.geometry){var t=a.geometry.type;if("Point"!==t&&"MultiPoint"!==t){var c,h=0,p=0,f=0;return!1!==w(a,function(t,e,i,r,n){if(void 0===c||h<s||p<r||f<n)return c=t,h=s,p=r,f=n,void(u=0);var o=m.lineString([c,t],a.properties);if(!1===d(o,s,l,n,u))return!1;u++,c=t})&&void 0}}})}function l(t,a){if(!t)throw new Error("geojson is required");s(t,function(t,e,i){if(null!==t.geometry){var r=t.geometry.type,n=t.geometry.coordinates;switch(r){case"LineString":if(!1===a(t,e,i,0,0))return!1;break;case"Polygon":for(var o=0;o<n.length;o++)if(!1===a(m.lineString(n[o],t.properties),e,i,o))return!1}}})}e.coordEach=w,e.coordReduce=function(t,o,a,e){var s=a;return w(t,function(t,e,i,r,n){s=0===e&&void 0===a?t:o(s,t,e,i,r,n)},e),s},e.propEach=o,e.propReduce=function(t,i,r){var n=r;return o(t,function(t,e){n=0===e&&void 0===r?t:i(n,t,e)}),n},e.featureEach=a,e.featureReduce=function(t,i,r){var n=r;return a(t,function(t,e){n=0===e&&void 0===r?t:i(n,t,e)}),n},e.coordAll=function(t){var e=[];return w(t,function(t){e.push(t)}),e},e.geomEach=r,e.geomReduce=function(t,o,a){var s=a;return r(t,function(t,e,i,r,n){s=0===e&&void 0===a?t:o(s,t,e,i,r,n)}),s},e.flattenEach=s,e.flattenReduce=function(t,r,n){var o=n;return s(t,function(t,e,i){o=0===e&&0===i&&void 0===n?t:r(o,t,e,i)}),o},e.segmentEach=n,e.segmentReduce=function(t,o,a){var s=a,l=!1;return n(t,function(t,e,i,r,n){s=!1===l&&void 0===a?t:o(s,t,e,i,r,n),l=!0}),s},e.lineEach=l,e.lineReduce=function(t,n,o){var a=o;return l(t,function(t,e,i,r){a=0===e&&void 0===o?t:n(a,t,e,i,r)}),a},e.findSegment=function(t,e){if(e=e||{},!m.isObject(e))throw new Error("options is invalid");var i,r=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,i=t.features[r].geometry;break;case"Feature":s=s||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var l=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),m.lineString([l[a],l[a+1]],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),m.lineString([l[o][a],l[o][a+1]],s,e);case"MultiLineString":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),m.lineString([l[n][a],l[n][a+1]],s,e);case"MultiPolygon":return n<0&&(n=l.length+n),o<0&&(o=l[n].length+o),a<0&&(a=l[n][o].length-a-1),m.lineString([l[n][o][a],l[n][o][a+1]],s,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!m.isObject(e))throw new Error("options is invalid");var i,r=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,i=t.features[r].geometry;break;case"Feature":s=s||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var l=i.coordinates;switch(i.type){case"Point":return m.point(l,s,e);case"MultiPoint":return n<0&&(n=l.length+n),m.point(l[n],s,e);case"LineString":return a<0&&(a=l.length+a),m.point(l[a],s,e);case"Polygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),m.point(l[o][a],s,e);case"MultiLineString":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),m.point(l[n][a],s,e);case"MultiPolygon":return n<0&&(n=l.length+n),o<0&&(o=l[n].length+o),a<0&&(a=l[n][o].length-a),m.point(l[n][o][a],s,e)}throw new Error("geojson is invalid")}},"dz+5":function(t,e){t.exports=s},"e/Qi":function(e,r,n){e.exports=function(){var D=function(t){return t};Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=this.length>>>0;for(e=+e||0,Math.abs(e)===1/0&&(e=0),e<0&&(e+=i)<0&&(e=0);e<i;e++)if(this[e]===t)return e;return-1});var e=function(e){this.objectID="",this.separator=" - ",this.legendSeparator=this.separator,this.method="",this.precision=0,this.precisionflag="auto",this.roundlength=2,this.is_uniqueValues=!1,this.debug=!1,this.silent=!1,this.bounds=Array(),this.ranges=Array(),this.inner_ranges=null,this.colors=Array(),this.counter=Array(),this.stat_sorted=null,this.stat_mean=null,this.stat_median=null,this.stat_sum=null,this.stat_max=null,this.stat_min=null,this.stat_pop=null,this.stat_variance=null,this.stat_stddev=null,this.stat_cov=null,this.log=function(t,e){1!=this.debug&&null==e||console.log(this.objectID+"(object id) :: "+t)},this.setBounds=function(t){this.log("Setting bounds ("+t.length+") : "+t.join()),this.bounds=Array(),this.bounds=t},this.setSerie=function(t){this.log("Setting serie ("+t.length+") : "+t.join()),this.serie=Array(),this.serie=t,this.resetStatistics(),this.setPrecision()},this.setColors=function(t){this.log("Setting color ramp ("+t.length+") : "+t.join()),this.colors=t},this.doCount=function(){if(!this._nodata()){var t=this.sorted();for(this.counter=new Array,i=0;i<this.bounds.length-1;i++)this.counter[i]=0;for(j=0;j<t.length;j++){var e=this.getClass(t[j]);this.counter[e]++}}},this.setPrecision=function(t){if(void 0!==t&&(this.precisionflag="manual",this.precision=t),"auto"==this.precisionflag)for(var e=0;e<this.serie.length;e++){if(isNaN(this.serie[e]+"")||-1==(this.serie[e]+"").toString().indexOf("."))var i=0;else var i=(this.serie[e]+"").split(".")[1].length;i>this.precision&&(this.precision=i)}20<this.precision&&(this.log("this.precision value ("+this.precision+') is greater than max value. Automatic set-up to 20 to prevent "Uncaught RangeError: toFixed()" when calling decimalFormat() method.'),this.precision=20),this.log("Calling setPrecision(). Mode : "+this.precisionflag+" - Decimals : "+this.precision),this.serie=this.decimalFormat(this.serie)},this.decimalFormat=function(t){for(var e,i=new Array,r=0;r<t.length;r++)e=t[r],!isNaN(parseFloat(e))&&isFinite(e)?i[r]=parseFloat(parseFloat(t[r]).toFixed(this.precision)):i[r]=t[r];return i},this.setRanges=function(){for(this.ranges=Array(),i=0;i<this.bounds.length-1;i++)this.ranges[i]=this.bounds[i]+this.separator+this.bounds[i+1]},this.min=function(){if(!this._nodata()){for(this.stat_min=this.serie[0],i=0;i<this.pop();i++)this.serie[i]<this.stat_min&&(this.stat_min=this.serie[i]);return this.stat_min}},this.max=function(){if(!this._nodata()){for(this.stat_max=this.serie[0],i=0;i<this.pop();i++)this.serie[i]>this.stat_max&&(this.stat_max=this.serie[i]);return this.stat_max}},this.sum=function(){if(!this._nodata()){if(null==this.stat_sum)for(this.stat_sum=0,i=0;i<this.pop();i++)this.stat_sum+=parseFloat(this.serie[i]);return this.stat_sum}},this.pop=function(){if(!this._nodata())return null==this.stat_pop&&(this.stat_pop=this.serie.length),this.stat_pop},this.mean=function(){if(!this._nodata())return null==this.stat_mean&&(this.stat_mean=parseFloat(this.sum()/this.pop())),this.stat_mean},this.median=function(){if(!this._nodata()){if(null==this.stat_median){this.stat_median=0;var t=this.sorted();t.length%2?this.stat_median=parseFloat(t[Math.ceil(t.length/2)-1]):this.stat_median=(parseFloat(t[t.length/2-1])+parseFloat(t[t.length/2]))/2}return this.stat_median}},this.variance=function(){if(round="undefined"==typeof round,!this._nodata()){if(null==this.stat_variance){for(var t=0,e=this.mean(),i=0;i<this.pop();i++)t+=Math.pow(this.serie[i]-e,2);this.stat_variance=t/this.pop(),1==round&&(this.stat_variance=Math.round(this.stat_variance*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))}return this.stat_variance}},this.stddev=function(t){if(t=void 0===t,!this._nodata())return null==this.stat_stddev&&(this.stat_stddev=Math.sqrt(this.variance()),1==t&&(this.stat_stddev=Math.round(this.stat_stddev*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))),this.stat_stddev},this.cov=function(t){if(t=void 0===t,!this._nodata())return null==this.stat_cov&&(this.stat_cov=this.stddev()/this.mean(),1==t&&(this.stat_cov=Math.round(this.stat_cov*Math.pow(10,this.roundlength))/Math.pow(10,this.roundlength))),this.stat_cov},this.resetStatistics=function(){this.stat_sorted=null,this.stat_mean=null,this.stat_median=null,this.stat_sum=null,this.stat_max=null,this.stat_min=null,this.stat_pop=null,this.stat_variance=null,this.stat_stddev=null,this.stat_cov=null},this._nodata=function(){if(0!=this.serie.length)return 0;if(!this.silent)throw new TypeError("Error. You should first enter a serie!");return this.log("[silent mode] Error. You should first enter a serie!",!0),1},this._hasNegativeValue=function(){for(i=0;i<this.serie.length;i++)if(this.serie[i]<0)return!0;return!1},this._hasZeroValue=function(){for(i=0;i<this.serie.length;i++)if(0===parseFloat(this.serie[i]))return!0;return!1},this.sorted=function(){return null==this.stat_sorted&&(0==this.is_uniqueValues?this.stat_sorted=this.serie.sort(function(t,e){return t-e}):this.stat_sorted=this.serie.sort(function(t,e){var i=t.toString().toLowerCase(),r=e.toString().toLowerCase();return i<r?-1:r<i?1:0})),this.stat_sorted},this.info=function(){if(!this._nodata()){var t="";return t+=D("Population")+" : "+this.pop()+" - ["+D("Min")+" : "+this.min()+" | "+D("Max")+" : "+this.max()+"]\n",t+=D("Mean")+" : "+this.mean()+" - "+D("Median")+" : "+this.median()+"\n",t+=D("Variance")+" : "+this.variance()+" - "+D("Standard deviation")+" : "+this.stddev()+" - "+D("Coefficient of variation")+" : "+this.cov()+"\n"}},this.setClassManually=function(e){if(!this._nodata()){if(e[0]===this.min()&&e[e.length-1]===this.max())return this.setBounds(e),this.setRanges(),this.method=D("manual classification")+" ("+(e.length-1)+" "+D("classes")+")",this.bounds;if(!this.silent)throw new TypeError(D("Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max()));this.log("[silent mode] "+t("Given bounds may not be correct! please check your input.\nMin value : "+this.min()+" / Max value : "+this.max()),!0)}},this.getClassEqInterval=function(t,e,r){if(!this._nodata()){var n=void 0===e?this.min():e,o=void 0===r?this.max():r,a=Array(),s=n,l=(o-n)/t;for(i=0;i<=t;i++)a[i]=s,s+=l;return a[t]=o,this.setBounds(a),this.setRanges(),this.method=D("eq. intervals")+" ("+t+" "+D("classes")+")",this.bounds}},this.getQuantiles=function(t){for(var e=this.sorted(),i=[],r=this.pop()/t,n=1;n<t;n++){var o=Math.round(n*r+.49);i.push(e[o-1])}return i},this.getClassQuantile=function(t){if(!this._nodata()){var e=this.sorted(),i=this.getQuantiles(t);return i.unshift(e[0]),i[e.length-1]!==e[e.length-1]&&i.push(e[e.length-1]),this.setBounds(i),this.setRanges(),this.method=D("quantile")+" ("+t+" "+D("classes")+")",this.bounds}},this.getClassStdDeviation=function(t,e){if(!this._nodata()){this.max(),this.min();var r=Array();if(t%2==1){var n=Math.floor(t/2),o=n+1;for(r[n]=this.mean()-this.stddev()/2,r[o]=this.mean()+this.stddev()/2,i=n-1;0<i;i--){var a=r[i+1]-this.stddev();r[i]=a}for(i=o+1;i<t;i++){var a=r[i-1]+this.stddev();r[i]=a}}else{var s=t/2;for(r[s]=this.mean(),i=s-1;0<i;i--){var a=r[i+1]-this.stddev();r[i]=a}for(i=s+1;i<t;i++){var a=r[i-1]+this.stddev();r[i]=a}}return r[0]=void 0===e?r[1]-this.stddev():this.min(),r[t]=void 0===e?r[t-1]+this.stddev():this.max(),this.setBounds(r),this.setRanges(),this.method=D("std deviation")+" ("+t+" "+D("classes")+")",this.bounds}},this.getClassGeometricProgression=function(t){if(!this._nodata()){if(!this._hasNegativeValue()&&!this._hasZeroValue()){var e=Array(),r=this.min(),n=this.max(),o=Math.log(n)/Math.LN10,a=Math.log(r)/Math.LN10,s=(o-a)/t;for(i=0;i<t;i++)0==i?e[i]=a:e[i]=e[i-1]+s;return(e=e.map(function(t){return Math.pow(10,t)})).push(this.max()),this.setBounds(e),this.setRanges(),this.method=D("geometric progression")+" ("+t+" "+D("classes")+")",this.bounds}if(!this.silent)throw new TypeError(D("geometric progression can't be applied with a serie containing negative or zero values."));this.log("[silent mode] "+D("geometric progression can't be applied with a serie containing negative or zero values."),!0)}},this.getClassArithmeticProgression=function(t){if(!this._nodata()){var e=0;for(i=1;i<=t;i++)e+=i;var r=Array(),n=this.min(),o=this.max(),a=(o-n)/e;for(i=0;i<=t;i++)0==i?r[i]=n:r[i]=r[i-1]+i*a;return this.setBounds(r),this.setRanges(),this.method=D("arithmetic progression")+" ("+t+" "+D("classes")+")",this.bounds}},this.getClassJenks=function(t){if(!this._nodata()){dataList=this.sorted();for(var e=[],i=0,r=dataList.length+1;i<r;i++){for(var n=[],o=0,a=t+1;o<a;o++)n.push(0);e.push(n)}for(var s=[],l=0,u=dataList.length+1;l<u;l++){for(var c=[],h=0,p=t+1;h<p;h++)c.push(0);s.push(c)}for(var f=1,d=t+1;f<d;f++){e[0][f]=1,s[0][f]=0;for(var m=1,y=dataList.length+1;m<y;m++)s[m][f]=1/0;var g=0}for(var v=2,_=dataList.length+1;v<_;v++){for(var b=0,x=0,w=0,S=1,C=v+1;S<C;S++){var E=v-S+1,T=parseFloat(dataList[E-1]);g=(x+=T*T)-(b+=T)*b/(w+=1);var k=E-1;if(0!=k)for(var M=2,P=t+1;M<P;M++)s[v][M]>=g+s[k][M-1]&&(e[v][M]=E,s[v][M]=g+s[k][M-1])}e[v][1]=1,s[v][1]=g}var A=dataList.length,L=[];for(l=0;l<=t;l++)L.push(0);L[t]=parseFloat(dataList[dataList.length-1]),L[0]=parseFloat(dataList[0]);for(var I=t;2<=I;){var O=parseInt(e[A][I]-2);L[I-1]=dataList[O],A=parseInt(e[A][I]-1),I-=1}return L[0]==L[1]&&(L[0]=0),this.setBounds(L),this.setRanges(),this.method=D("Jenks")+" ("+t+" "+D("classes")+")",this.bounds}},this.getClassUniqueValues=function(){if(!this._nodata()){this.is_uniqueValues=!0;var t=this.sorted(),e=Array();for(i=0;i<this.pop();i++)-1===e.indexOf(t[i])&&e.push(t[i]);return this.bounds=e,this.method=D("unique values"),e}},this.getClass=function(t){for(i=0;i<this.bounds.length;i++)if(1==this.is_uniqueValues){if(t==this.bounds[i])return i}else if(parseFloat(t)<=this.bounds[i+1])return i;return D("Unable to get value's class.")},this.getRanges=function(){return this.ranges},this.getRangeNum=function(t){var e,i;for(i=0;i<this.ranges.length;i++)if(e=this.ranges[i].split(/ - /),t<=parseFloat(e[1]))return i},this.getInnerRanges=function(){if(null!=this.inner_ranges)return this.inner_ranges;var t=new Array,e=this.sorted(),r=1;for(i=0;i<e.length;i++){if(0==i)var n=e[i];if(parseFloat(e[i])>parseFloat(this.bounds[r])){t[r-1]=""+n+this.separator+e[i-1];var n=e[i];r++}if(r==this.bounds.length-1)return t[r-1]=""+n+this.separator+e[e.length-1],this.inner_ranges=t,this.inner_ranges}},this.getSortedlist=function(){return this.sorted().join(", ")},this.getHtmlLegend=function(t,e,r,n,o,a){var s="",l=new Array;if(this.doCount(),ccolors=null!=t?t:this.colors,lg=null!=e?e:"Legend",getcounter=null!=r,fn=null!=n?n:function(t){return t},null==o&&(o="default"),"discontinuous"!=o||(this.getInnerRanges(),-1===this.counter.indexOf(0))){if("DESC"!==a&&(a="ASC"),!(ccolors.length<this.ranges.length)){if(0==this.is_uniqueValues)for(i=0;i<this.ranges.length;i++){!0===getcounter&&(s=' <span class="geostats-legend-counter">('+this.counter[i]+")</span>");var u=this.ranges[i].split(this.separator),c=parseFloat(u[0]).toFixed(this.precision),h=parseFloat(u[1]).toFixed(this.precision);if("distinct"==o&&0!=i&&("number"!=typeof(d=c)||parseFloat(d)!=parseInt(d,10)||isNaN(d)?(c=parseFloat(c)+1/Math.pow(10,this.precision),c=parseFloat(c).toFixed(this.precision)):(c=parseInt(c)+1,"manual"==this.precisionflag&&0!=this.precision&&(c=parseFloat(c).toFixed(this.precision)))),"discontinuous"==o)var u=this.inner_ranges[i].split(this.separator),c=parseFloat(u[0]).toFixed(this.precision),h=parseFloat(u[1]).toFixed(this.precision);var p=fn(c)+this.legendSeparator+fn(h),f='<div><div class="geostats-legend-block" style="background-color:'+ccolors[i]+'"></div> '+p+s+"</div>";l.push(f)}else for(i=0;i<this.bounds.length;i++){!0===getcounter&&(s=' <span class="geostats-legend-counter">('+this.counter[i]+")</span>");var p=fn(this.bounds[i]),f='<div><div class="geostats-legend-block" style="background-color:'+ccolors[i]+'"></div> '+p+s+"</div>";l.push(f)}var d;"DESC"===a&&l.reverse();var m='<div class="geostats-legend"><div class="geostats-legend-title">'+D(lg)+"</div>";for(i=0;i<l.length;i++)m+=l[i];return m+="</div>"}if(!this.silent)throw new TypeError(D("The number of colors should fit the number of ranges. Exit!"));this.log("[silent mode] "+D("The number of colors should fit the number of ranges. Exit!"),!0)}else{if(!this.silent)throw new TypeError(D("Geostats cannot apply 'discontinuous' mode to the getHtmlLegend() method because some classes are not populated.\nPlease switch to 'default' or 'distinct' modes. Exit!"));this.log("[silent mode] "+D("Geostats cannot apply 'discontinuous' mode to the getHtmlLegend() method because some classes are not populated.\nPlease switch to 'default' or 'distinct' modes. Exit!"),!0)}},this.objectID=(new Date).getUTCMilliseconds(),this.log("Creating new geostats object"),void 0!==e&&0<e.length?(this.serie=e,this.setPrecision(),this.log("Setting serie ("+e.length+") : "+e.join())):this.serie=Array(),this.getJenks=this.getClassJenks,this.getGeometricProgression=this.getClassGeometricProgression,this.getEqInterval=this.getClassEqInterval,this.getQuantile=this.getClassQuantile,this.getStdDeviation=this.getClassStdDeviation,this.getUniqueValues=this.getClassUniqueValues,this.getArithmeticProgression=this.getClassArithmeticProgression};return window.geostats=e}()},"eA/Y":function(t,e,i){"use strict";t.exports=o;var r=i("J78i"),n=i("Onz0");function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}n.inherits=i("P7XM"),n.inherits(o,r),o.prototype._transform=function(t,e,i){i(null,t)}},eg8l:function(t,e,i){},ez49:function(t,e,i){"use strict";var o,a=i("o97j");a.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */,t.exports=function(t,e){if(!a.canUseDOM||e&&!("addEventListener"in document))return!1;var i="on"+t,r=i in document;if(!r){var n=document.createElement("div");n.setAttribute(i,"return;"),r="function"==typeof n[i]}return!r&&o&&"wheel"===t&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}},f03z:function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){for(var e=1,i=arguments.length;e<i;e++){var r=arguments[e]||{};for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];void 0!==o&&(t[n]=o)}}return t}},f8Hn:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=79)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},3:function(t,e){t.exports=i("0BDH")},79:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[this._t("default")],2)};r._withStripped=!0;var n=i(3),o={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[i.n(n).a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(t){this.dispatch("ElFormItem","el.form.change",[t])}}},a=i(0),s=Object(a.a)(o,r,[],!1,null,null,null);s.options.__file="packages/checkbox/src/checkbox-group.vue";var l=s.exports;l.install=function(t){t.component(l.name,l)};e.default=l}})},fXKp:function(t,e,i){"use strict";var r=i("hwdV").Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"ï¿½";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"ï¿½";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"ï¿½"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function c(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}(e.StringDecoder=o).prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"ï¿½":e},o.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var n=a(e[r]);if(0<=n)return 0<n&&(t.lastNeed=n-1),n;if(--r<i||-2===n)return 0;if(0<=(n=a(e[r])))return 0<n&&(t.lastNeed=n-2),n;if(--r<i||-2===n)return 0;if(0<=(n=a(e[r])))return 0<n&&(2===n?n=0:t.lastNeed=n-3),n;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},gSIQ:function(t,e,i){"use strict";e.__esModule=!0,e.isEdge=e.isIE=e.coerceTruthyValueToArray=e.arrayFind=e.arrayFindIndex=e.escapeRegexpString=e.valueEquals=e.generateId=e.getValueByPath=void 0,e.noop=function(){},e.hasOwn=function(t,e){return a.call(t,e)},e.toObject=function(t){for(var e={},i=0;i<t.length;i++)t[i]&&s(e,t[i]);return e},e.getPropByPath=function(t,e,i){for(var r=t,n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),o=0,a=n.length;o<a-1&&(r||i);++o){var s=n[o];if(!(s in r)){if(i)throw new Error("please transfer a valid prop path to form item!");break}r=r[s]}return{o:r,k:n[o],v:r?r[n[o]]:null}};var r,n=i("i7/w"),o=(r=n)&&r.__esModule?r:{default:r};var a=Object.prototype.hasOwnProperty;function s(t,e){for(var i in e)t[i]=e[i];return t}e.getValueByPath=function(t,e){for(var i=(e=e||"").split("."),r=t,n=null,o=0,a=i.length;o<a;o++){var s=i[o];if(!r)break;if(o===a-1){n=r[s];break}r=r[s]}return n};e.generateId=function(){return Math.floor(1e4*Math.random())},e.valueEquals=function(t,e){if(t===e)return!0;if(!(t instanceof Array))return!1;if(!(e instanceof Array))return!1;if(t.length!==e.length)return!1;for(var i=0;i!==t.length;++i)if(t[i]!==e[i])return!1;return!0},e.escapeRegexpString=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return String(t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var l=e.arrayFindIndex=function(t,e){for(var i=0;i!==t.length;++i)if(e(t[i]))return i;return-1};e.arrayFind=function(t,e){var i=l(t,e);return-1!==i?t[i]:void 0},e.coerceTruthyValueToArray=function(t){return Array.isArray(t)?t:t?[t]:[]},e.isIE=function(){return!o.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},e.isEdge=function(){return!o.default.prototype.$isServer&&-1<navigator.userAgent.indexOf("Edge")}},"hE+I":function(t,e,i){var a,s,l=i("MXF5"),u=i("lsHq"),o=i("mxIc").isArray;function r(t){var e=Number(t);if(!isNaN(e))return e;var i=t.toLowerCase();return"true"===i||"false"!==i&&t}function c(t,e){var i;if(a.compact){if(!s[a[t+"Key"]]&&(o(a.alwaysArray)?-1!==a.alwaysArray.indexOf(a[t+"Key"]):a.alwaysArray)&&(s[a[t+"Key"]]=[]),s[a[t+"Key"]]&&!o(s[a[t+"Key"]])&&(s[a[t+"Key"]]=[s[a[t+"Key"]]]),t+"Fn"in a&&"string"==typeof e&&(e=a[t+"Fn"](e,s)),"instruction"===t&&("instructionFn"in a||"instructionNameFn"in a))for(i in e)if(e.hasOwnProperty(i))if("instructionFn"in a)e[i]=a.instructionFn(e[i],i,s);else{var r=e[i];delete e[i],e[a.instructionNameFn(i,r,s)]=r}o(s[a[t+"Key"]])?s[a[t+"Key"]].push(e):s[a[t+"Key"]]=e}else{s[a.elementsKey]||(s[a.elementsKey]=[]);var n={};if("instruction"===(n[a.typeKey]=t)){for(i in e)if(e.hasOwnProperty(i))break;n[a.nameKey]="instructionNameFn"in a?a.instructionNameFn(i,e,s):i,a.instructionHasAttributes?(n[a.attributesKey]=e[i][a.attributesKey],"instructionFn"in a&&(n[a.attributesKey]=a.instructionFn(n[a.attributesKey],i,s))):("instructionFn"in a&&(e[i]=a.instructionFn(e[i],i,s)),n[a.instructionKey]=e[i])}else t+"Fn"in a&&(e=a[t+"Fn"](e,s)),n[a[t+"Key"]]=e;a.addParent&&(n[a.parentKey]=s),s[a.elementsKey].push(n)}}function h(t){var e;if("attributesFn"in a&&t&&(t=a.attributesFn(t,s)),(a.trim||"attributeValueFn"in a||"attributeNameFn"in a||a.nativeTypeAttributes)&&t)for(e in t)if(t.hasOwnProperty(e)&&(a.trim&&(t[e]=t[e].trim()),a.nativeTypeAttributes&&(t[e]=r(t[e])),"attributeValueFn"in a&&(t[e]=a.attributeValueFn(t[e],e,s)),"attributeNameFn"in a)){var i=t[e];delete t[e],t[a.attributeNameFn(e,t[e],s)]=i}return t}function p(t){var e={};if(t.body&&("xml"===t.name.toLowerCase()||a.instructionHasAttributes)){for(var i,r=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(i=r.exec(t.body));)e[i[1]]=i[2]||i[3]||i[4];e=h(e)}if("xml"===t.name.toLowerCase()){if(a.ignoreDeclaration)return;s[a.declarationKey]={},Object.keys(e).length&&(s[a.declarationKey][a.attributesKey]=e),a.addParent&&(s[a.declarationKey][a.parentKey]=s)}else{if(a.ignoreInstruction)return;a.trim&&(t.body=t.body.trim());var n={};a.instructionHasAttributes&&Object.keys(e).length?(n[t.name]={},n[t.name][a.attributesKey]=e):n[t.name]=t.body,c("instruction",n)}}function f(t,e){var i;if("object"==typeof t&&(e=t.attributes,t=t.name),e=h(e),"elementNameFn"in a&&(t=a.elementNameFn(t,s)),a.compact){var r;if(i={},!a.ignoreAttributes&&e&&Object.keys(e).length)for(r in i[a.attributesKey]={},e)e.hasOwnProperty(r)&&(i[a.attributesKey][r]=e[r]);t in s||(o(a.alwaysArray)?-1===a.alwaysArray.indexOf(t):!a.alwaysArray)||(s[t]=[]),s[t]&&!o(s[t])&&(s[t]=[s[t]]),o(s[t])?s[t].push(i):s[t]=i}else s[a.elementsKey]||(s[a.elementsKey]=[]),(i={})[a.typeKey]="element",i[a.nameKey]=t,!a.ignoreAttributes&&e&&Object.keys(e).length&&(i[a.attributesKey]=e),a.alwaysChildren&&(i[a.elementsKey]=[]),s[a.elementsKey].push(i);i[a.parentKey]=s,s=i}function d(t){a.ignoreText||(t.trim()||a.captureSpacesBetweenElements)&&(a.trim&&(t=t.trim()),a.nativeType&&(t=r(t)),a.sanitize&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),c("text",t))}function m(t){a.ignoreComment||(a.trim&&(t=t.trim()),c("comment",t))}function y(t){var e=s[a.parentKey];a.addParent||delete s[a.parentKey],s=e}function g(t){a.ignoreCdata||(a.trim&&(t=t.trim()),c("cdata",t))}function v(t){a.ignoreDoctype||(t=t.replace(/^ /,""),a.trim&&(t=t.trim()),c("doctype",t))}function _(t){t.note=t}t.exports=function(t,e){var i,r=l.parser(!0,{}),n={};if(s=n,i=e,a=u.copyOptions(i),u.ensureFlagExists("ignoreDeclaration",a),u.ensureFlagExists("ignoreInstruction",a),u.ensureFlagExists("ignoreAttributes",a),u.ensureFlagExists("ignoreText",a),u.ensureFlagExists("ignoreComment",a),u.ensureFlagExists("ignoreCdata",a),u.ensureFlagExists("ignoreDoctype",a),u.ensureFlagExists("compact",a),u.ensureFlagExists("alwaysChildren",a),u.ensureFlagExists("addParent",a),u.ensureFlagExists("trim",a),u.ensureFlagExists("nativeType",a),u.ensureFlagExists("nativeTypeAttributes",a),u.ensureFlagExists("sanitize",a),u.ensureFlagExists("instructionHasAttributes",a),u.ensureFlagExists("captureSpacesBetweenElements",a),u.ensureAlwaysArrayExists(a),u.ensureKeyExists("declaration",a),u.ensureKeyExists("instruction",a),u.ensureKeyExists("attributes",a),u.ensureKeyExists("text",a),u.ensureKeyExists("comment",a),u.ensureKeyExists("cdata",a),u.ensureKeyExists("doctype",a),u.ensureKeyExists("type",a),u.ensureKeyExists("name",a),u.ensureKeyExists("elements",a),u.ensureKeyExists("parent",a),u.checkFnExists("doctype",a),u.checkFnExists("instruction",a),u.checkFnExists("cdata",a),u.checkFnExists("comment",a),u.checkFnExists("text",a),u.checkFnExists("instructionName",a),u.checkFnExists("elementName",a),u.checkFnExists("attributeName",a),u.checkFnExists("attributeValue",a),u.checkFnExists("attributes",a),a=a,r.opt={strictEntities:!0},r.onopentag=f,r.ontext=d,r.oncomment=m,r.onclosetag=y,r.onerror=_,r.oncdata=g,r.ondoctype=v,r.onprocessinginstruction=p,r.write(t).close(),n[a.elementsKey]){var o=n[a.elementsKey];delete n[a.elementsKey],n[a.elementsKey]=o,delete n.text}return n}},hQXD:function(t,e){t.exports=u},hwdV:function(t,e,i){var r=i("tjlA"),n=r.Buffer;function o(t,e){for(var i in t)e[i]=t[i]}function a(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(n,a),a.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},"i7/w":function(t,e){t.exports=r},i7wE:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=111)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},111:function(t,e,i){"use strict";i.r(e);var r={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String},methods:{handleClose:function(t){t.stopPropagation(),this.$emit("close",t)},handleClick:function(t){t.stopPropagation(),this.$emit("click",t)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(t){var e=t("span",{class:["el-tag",this.type?"el-tag--"+this.type:"",this.tagSize?"el-tag--"+this.tagSize:"",{"is-hit":this.hit}],style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&t("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?e:t("transition",{attrs:{name:"el-zoom-in-center"}},[e])}},n=i(0),o=Object(n.a)(r,void 0,void 0,!1,null,null,null);o.options.__file="packages/tag/src/tag.vue";var a=o.exports;a.install=function(t){t.component(a.name,a)};e.default=a}})},iWqV:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=59)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},13:function(t,e){t.exports=i("UShQ")},2:function(t,e){t.exports=i("WST1")},36:function(t,e){t.exports=i("xWqt")},59:function(t,e,i){"use strict";i.r(e);var r=i(6),s=i.n(r),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":t.handleAfterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[t.customClass,{"is-fullscreen":t.fullscreen}],style:{backgroundColor:t.background||""}},[i("div",{staticClass:"el-loading-spinner"},[t.spinner?i("i",{class:t.spinner}):i("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[i("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),t.text?i("p",{staticClass:"el-loading-text"},[t._v(t._s(t.text))]):t._e()])])])};n._withStripped=!0;var o={data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(t){this.text=t}}},a=i(0),l=Object(a.a)(o,n,[],!1,null,null,null);l.options.__file="packages/loading/src/loading.vue";var u=l.exports,c=i(2),h=i(13),p=i(36),f=i.n(p),d=s.a.extend(u),m={install:function(n){if(!n.prototype.$isServer){var u=function(i,r){r.value?n.nextTick(function(){r.modifiers.fullscreen?(i.originalPosition=Object(c.getStyle)(document.body,"position"),i.originalOverflow=Object(c.getStyle)(document.body,"overflow"),i.maskStyle.zIndex=h.PopupManager.nextZIndex(),Object(c.addClass)(i.mask,"is-fullscreen"),t(document.body,i,r)):(Object(c.removeClass)(i.mask,"is-fullscreen"),r.modifiers.body?(i.originalPosition=Object(c.getStyle)(document.body,"position"),["top","left"].forEach(function(t){var e="top"===t?"scrollTop":"scrollLeft";i.maskStyle[t]=i.getBoundingClientRect()[t]+document.body[e]+document.documentElement[e]-parseInt(Object(c.getStyle)(document.body,"margin-"+t),10)+"px"}),["height","width"].forEach(function(t){i.maskStyle[t]=i.getBoundingClientRect()[t]+"px"}),t(document.body,i,r)):(i.originalPosition=Object(c.getStyle)(i,"position"),t(i,i,r)))}):(f()(i.instance,function(t){i.domVisible=!1;var e=r.modifiers.fullscreen||r.modifiers.body?document.body:i;Object(c.removeClass)(e,"el-loading-parent--relative"),Object(c.removeClass)(e,"el-loading-parent--hidden"),i.instance.hiding=!1},300,!0),i.instance.visible=!1,i.instance.hiding=!0)},t=function(t,e,i){e.domVisible||"none"===Object(c.getStyle)(e,"display")||"hidden"===Object(c.getStyle)(e,"visibility")||(Object.keys(e.maskStyle).forEach(function(t){e.mask.style[t]=e.maskStyle[t]}),"absolute"!==e.originalPosition&&"fixed"!==e.originalPosition&&Object(c.addClass)(t,"el-loading-parent--relative"),i.modifiers.fullscreen&&i.modifiers.lock&&Object(c.addClass)(t,"el-loading-parent--hidden"),e.domVisible=!0,t.appendChild(e.mask),n.nextTick(function(){e.instance.hiding?e.instance.$emit("after-leave"):e.instance.visible=!0}),e.domInserted=!0)};n.directive("loading",{bind:function(t,e,i){var r=t.getAttribute("element-loading-text"),n=t.getAttribute("element-loading-spinner"),o=t.getAttribute("element-loading-background"),a=t.getAttribute("element-loading-custom-class"),s=i.context,l=new d({el:document.createElement("div"),data:{text:s&&s[r]||r,spinner:s&&s[n]||n,background:s&&s[o]||o,customClass:s&&s[a]||a,fullscreen:!!e.modifiers.fullscreen}});t.instance=l,t.mask=l.$el,t.maskStyle={},e.value&&u(t,e)},update:function(t,e){t.instance.setText(t.getAttribute("element-loading-text")),e.oldValue!==e.value&&u(t,e)},unbind:function(t,e){t.domInserted&&(t.mask&&t.mask.parentNode&&t.mask.parentNode.removeChild(t.mask),u(t,{value:!1,modifiers:e.modifiers})),t.instance&&t.instance.$destroy()}})}}},y=m,g=i(8),v=i.n(g),_=s.a.extend(u),b={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},x=void 0;_.prototype.originalPosition="",_.prototype.originalOverflow="",_.prototype.close=function(){var i=this;this.fullscreen&&(x=void 0),f()(this,function(t){var e=i.fullscreen||i.body?document.body:i.target;Object(c.removeClass)(e,"el-loading-parent--relative"),Object(c.removeClass)(e,"el-loading-parent--hidden"),i.$el&&i.$el.parentNode&&i.$el.parentNode.removeChild(i.$el),i.$destroy()},300),this.visible=!1};var w=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!s.a.prototype.$isServer){if("string"==typeof(t=v()({},b,t)).target&&(t.target=document.querySelector(t.target)),t.target=t.target||document.body,t.target!==document.body?t.fullscreen=!1:t.body=!0,t.fullscreen&&x)return x;var i,e,r,n,o=t.body?document.body:t.target,a=new _({el:document.createElement("div"),data:t});return e=o,r=a,n={},(i=t).fullscreen?(r.originalPosition=Object(c.getStyle)(document.body,"position"),r.originalOverflow=Object(c.getStyle)(document.body,"overflow"),n.zIndex=h.PopupManager.nextZIndex()):i.body?(r.originalPosition=Object(c.getStyle)(document.body,"position"),["top","left"].forEach(function(t){var e="top"===t?"scrollTop":"scrollLeft";n[t]=i.target.getBoundingClientRect()[t]+document.body[e]+document.documentElement[e]+"px"}),["height","width"].forEach(function(t){n[t]=i.target.getBoundingClientRect()[t]+"px"})):r.originalPosition=Object(c.getStyle)(e,"position"),Object.keys(n).forEach(function(t){r.$el.style[t]=n[t]}),"absolute"!==a.originalPosition&&"fixed"!==a.originalPosition&&Object(c.addClass)(o,"el-loading-parent--relative"),t.fullscreen&&t.lock&&Object(c.addClass)(o,"el-loading-parent--hidden"),o.appendChild(a.$el),s.a.nextTick(function(){a.visible=!0}),t.fullscreen&&(x=a),a}};e.default={install:function(t){t.use(y),t.prototype.$loading=w},directive:y,service:w}},6:function(t,e){t.exports=i("i7/w")},8:function(t,e){t.exports=i("f03z")}})},iizB:function(t,e){t.exports=n},j3ZU:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=i("AKIq"),h=i("/rf6");e.default=function(t,e,i){void 0===i&&(i={});var r=c.getCoord(t),n=c.getCoord(e),o=h.degreesToRadians(n[1]-r[1]),a=h.degreesToRadians(n[0]-r[0]),s=h.degreesToRadians(r[1]),l=h.degreesToRadians(n[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(l);return h.radiansToLength(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),i.units)}},jrfk:function(t,e){var o,a,s,l,u,c,h,p,f,d,m,y,g,v,_,b=!1;function i(){if(!b){b=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),i=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(y=/\b(iPhone|iP[ao]d)/.exec(t),g=/\b(iP[ao]d)/.exec(t),d=/Android/i.exec(t),v=/FBAN\/\w+;/i.exec(t),_=/Mobile/i.exec(t),m=!!/Win64/.exec(t),e){(o=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN)&&document&&document.documentMode&&(o=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);c=r?parseFloat(r[1])+4:o,a=e[2]?parseFloat(e[2]):NaN,s=e[3]?parseFloat(e[3]):NaN,l=e[4]?parseFloat(e[4]):NaN,u=l?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t))&&e[1]?parseFloat(e[1]):NaN:NaN}else o=a=s=u=l=NaN;if(i){if(i[1]){var n=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);h=!n||parseFloat(n[1].replace("_","."))}else h=!1;p=!!i[2],f=!!i[3]}else h=p=f=!1}}var r={ie:function(){return i()||o},ieCompatibilityMode:function(){return i()||o<c},ie64:function(){return r.ie()&&m},firefox:function(){return i()||a},opera:function(){return i()||s},webkit:function(){return i()||l},safari:function(){return r.webkit()},chrome:function(){return i()||u},windows:function(){return i()||p},osx:function(){return i()||h},linux:function(){return i()||f},iphone:function(){return i()||y},mobile:function(){return i()||y||g||d||_},nativeApp:function(){return i()||v},android:function(){return i()||d},ipad:function(){return i()||g}};t.exports=r},"kVK+":function(t,e){e.read=function(t,e,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=i?n-1:0,p=i?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-c)-1,f>>=-c,c+=s;0<c;o=256*o+t[e+h],h+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,i,r,n,o){var a,s,l,u=8*o-n-1,c=(1<<u)-1,h=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?p/l:p*Math.pow(2,1-h))*l&&(a++,l/=2),c<=a+h?(s=0,a=c):1<=a+h?(s=(e*l-1)*Math.pow(2,n),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));8<=n;t[i+f]=255&s,f+=d,s/=256,n-=8);for(a=a<<n|s,u+=n;0<u;t[i+f]=255&a,f+=d,a/=256,u-=8);t[i+f-d]|=128*m}},lSNA:function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},lm0R:function(t,e,i){"use strict";(function(s){!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var n,o,a=arguments.length;switch(a){case 0:case 1:return s.nextTick(t);case 2:return s.nextTick(function(){t.call(null,e)});case 3:return s.nextTick(function(){t.call(null,e,i)});case 4:return s.nextTick(function(){t.call(null,e,i,r)});default:for(n=new Array(a-1),o=0;o<n.length;)n[o++]=arguments[o];return s.nextTick(function(){t.apply(null,n)})}}}:t.exports=s}).call(this,i("8oxB"))},lsHq:function(t,e,i){var r=i("mxIc").isArray;t.exports={copyOptions:function(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i},ensureFlagExists:function(t,e){t in e&&"boolean"==typeof e[t]||(e[t]=!1)},ensureSpacesExists:function(t){"spaces"in t&&("number"==typeof t.spaces||"string"==typeof t.spaces)||(t.spaces=0)},ensureAlwaysArrayExists:function(t){"alwaysArray"in t&&("boolean"==typeof t.alwaysArray||r(t.alwaysArray))||(t.alwaysArray=!1)},ensureKeyExists:function(t,e){t+"Key"in e&&"string"==typeof e[t+"Key"]||(e[t+"Key"]=e.compact?"_"+t:t)},checkFnExists:function(t,e){return t+"Fn"in e}}},lwsE:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},mxIc:function(t,e){t.exports={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}}},nGy8:function(t,e){t.exports=c},nX6K:function(t,e,i){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){return function(o){for(var t=arguments.length,a=Array(1<t?t-1:0),e=1;e<t;e++)a[e-1]=arguments[e];return 1===a.length&&"object"===r(a[0])&&(a=a[0]),a&&a.hasOwnProperty||(a={}),o.replace(n,function(t,e,i,r){var n=void 0;return"{"===o[r-1]&&"}"===o[r+t.length]?i:null==(n=(0,s.hasOwn)(a,i)?a[i]:null)?"":n})}};var s=i("gSIQ"),n=/(%|)\{([0-9a-zA-Z_]+)\}/g},o97j:function(t,e,i){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=n},ozUZ:function(t,e,i){},p46w:function(r,n,o){var a,s;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(t){if(void 0===(s="function"==typeof(a=t)?a.call(n,o,n,r):a)||(r.exports=s),!0,r.exports=t(),!!0){var e=window.Cookies,i=window.Cookies=t();i.noConflict=function(){return window.Cookies=e,i}}}(function(){function m(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var r in i)e[r]=i[r]}return e}return function t(f){function d(t,e,i){var r;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(i=m({path:"/"},d.defaults,i)).expires){var n=new Date;n.setMilliseconds(n.getMilliseconds()+864e5*i.expires),i.expires=n}i.expires=i.expires?i.expires.toUTCString():"";try{r=JSON.stringify(e),/^[\{\[]/.test(r)&&(e=r)}catch(t){}e=f.write?f.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a]));return document.cookie=t+"="+e+o}t||(r={});for(var s=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,u=0;u<s.length;u++){var c=s[u].split("="),h=c.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var p=c[0].replace(l,decodeURIComponent);if(h=f.read?f.read(h,p):f(h,p)||h.replace(l,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(t){}if(t===p){r=h;break}t||(r[p]=h)}catch(t){}}return r}}return(d.set=d).get=function(t){return d.call(d,t)},d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(t,e){d(t,"",m(e,{expires:-1}))},d.withConverter=t,d}(function(){})})},pMSX:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=94)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},94:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-card",class:t.shadow?"is-"+t.shadow+"-shadow":"is-always-shadow"},[t.$slots.header||t.header?i("div",{staticClass:"el-card__header"},[t._t("header",[t._v(t._s(t.header))])],2):t._e(),i("div",{staticClass:"el-card__body",style:t.bodyStyle},[t._t("default")],2)])};r._withStripped=!0;var n={name:"ElCard",props:{header:{},bodyStyle:{},shadow:{type:String}}},o=i(0),a=Object(o.a)(n,r,[],!1,null,null,null);a.options.__file="packages/card/src/main.vue";var s=a.exports;s.install=function(t){t.component(s.name,s)};e.default=s}})},rUEw:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=49)}([function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},,function(t,e){t.exports=i("WST1")},,function(t,e){t.exports=i("gSIQ")},function(t,e){t.exports=i("6XTx")},function(t,e){t.exports=i("i7/w")},function(t,e){t.exports=i("a3zo")},function(t,e){t.exports=i("f03z")},,function(t,e){t.exports=i("K7XR")},function(t,e){t.exports=i("QX/b")},,function(t,e){t.exports=i("UShQ")},function(t,e){t.exports=i("DhVD")},function(t,e){t.exports=i("QBBo")},function(t,e){t.exports=i("3Nwd")},,,,,,,,function(t,e){t.exports=i("KZzr")},,function(t,e){t.exports=i("i7wE")},,,,,,,,function(t,e){t.exports=i("5i1c")},function(t,e){t.exports=i("f8Hn")},,,,,,,function(t,e){t.exports=i("wJiJ")},,,,,,,function(t,e,i){"use strict";i.r(e);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-table",class:[{"el-table--fit":e.fit,"el-table--striped":e.stripe,"el-table--border":e.border||e.isGroup,"el-table--hidden":e.isHidden,"el-table--group":e.isGroup,"el-table--fluid-height":e.maxHeight,"el-table--scrollable-x":e.layout.scrollX,"el-table--scrollable-y":e.layout.scrollY,"el-table--enable-row-hover":!e.store.states.isComplex,"el-table--enable-row-transition":0!==(e.store.states.data||[]).length&&(e.store.states.data||[]).length<100},e.tableSize?"el-table--"+e.tableSize:""],on:{mouseleave:function(t){e.handleMouseLeave(t)}}},[i("div",{ref:"hiddenColumns",staticClass:"hidden-columns"},[e._t("default")],2),e.showHeader?i("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"headerWrapper",staticClass:"el-table__header-wrapper"},[i("table-header",{ref:"tableHeader",style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"default-sort":e.defaultSort}})],1):e._e(),i("div",{ref:"bodyWrapper",staticClass:"el-table__body-wrapper",class:[e.layout.scrollX?"is-scrolling-"+e.scrollPosition:"is-scrolling-none"],style:[e.bodyHeight]},[i("table-body",{style:{width:e.bodyWidth},attrs:{context:e.context,store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.data&&0!==e.data.length?e._e():i("div",{ref:"emptyBlock",staticClass:"el-table__empty-block",style:{width:e.bodyWidth}},[i("span",{staticClass:"el-table__empty-text"},[e._t("empty",[e._v(e._s(e.emptyText||e.t("el.table.emptyText")))])],2)]),e.$slots.append?i("div",{ref:"appendWrapper",staticClass:"el-table__append-wrapper"},[e._t("append")],2):e._e()],1),e.showSummary?i("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&0<e.data.length,expression:"data && data.length > 0"},{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"footerWrapper",staticClass:"el-table__footer-wrapper"},[i("table-footer",{style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,"default-sort":e.defaultSort}})],1):e._e(),0<e.fixedColumns.length?i("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"fixedWrapper",staticClass:"el-table__fixed",style:[{width:e.layout.fixedWidth?e.layout.fixedWidth+"px":""},e.fixedHeight]},[e.showHeader?i("div",{ref:"fixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[i("table-header",{ref:"fixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,store:e.store}})],1):e._e(),i("div",{ref:"fixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[i("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"left",store:e.store,stripe:e.stripe,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"row-style":e.rowStyle}}),e.$slots.append?i("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?i("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&0<e.data.length,expression:"data && data.length > 0"}],ref:"fixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[i("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),0<e.rightFixedColumns.length?i("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"rightFixedWrapper",staticClass:"el-table__fixed-right",style:[{width:e.layout.rightFixedWidth?e.layout.rightFixedWidth+"px":"",right:e.layout.scrollY?(e.border?e.layout.gutterWidth:e.layout.gutterWidth||0)+"px":""},e.fixedHeight]},[e.showHeader?i("div",{ref:"rightFixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[i("table-header",{ref:"rightFixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,store:e.store}})],1):e._e(),i("div",{ref:"rightFixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[i("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"right",store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}})],1),e.showSummary?i("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&0<e.data.length,expression:"data && data.length > 0"}],ref:"rightFixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[i("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),0<e.rightFixedColumns.length?i("div",{ref:"rightFixedPatch",staticClass:"el-table__fixed-right-patch",style:{width:e.layout.scrollY?e.layout.gutterWidth+"px":"0",height:e.layout.headerHeight+"px"}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.resizeProxyVisible,expression:"resizeProxyVisible"}],ref:"resizeProxy",staticClass:"el-table__column-resize-proxy"})])};r._withStripped=!0;var n=i(16),o=i.n(n),a=i(14),s=i.n(a),l=i(15),u=i(42),c=i.n(u),h="undefined"!=typeof navigator&&-1<navigator.userAgent.toLowerCase().indexOf("firefox"),p={bind:function(t,e){var i,r;i=t,r=e.value,i&&i.addEventListener&&i.addEventListener(h?"DOMMouseScroll":"mousewheel",function(t){var e=c()(t);r&&r.apply(this,[t,e])})}},f=i(7),d=i.n(f),m=i(10),y=i.n(m),g=i(6),v=i.n(g),_=i(8),b=i.n(_),x=i(4),w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S=function(t){for(var e=t.target;e&&"HTML"!==e.tagName.toUpperCase();){if("TD"===e.tagName.toUpperCase())return e;e=e.parentNode}return null},C=function(t){return null!==t&&"object"===(void 0===t?"undefined":w(t))},E=function(r,t,n,o,a){if(!t&&!o&&(!a||Array.isArray(a)&&!a.length))return r;n="string"==typeof n?"descending"===n?-1:1:n&&n<0?-1:1;var i=o?null:function(e,i){return a?(Array.isArray(a)||(a=[a]),a.map(function(t){return"string"==typeof t?Object(x.getValueByPath)(e,t):t(e,i,r)})):("$key"!==t&&C(e)&&"$value"in e&&(e=e.$value),[C(e)?Object(x.getValueByPath)(e,t):e])};return r.map(function(t,e){return{value:t,index:e,key:i?i(t,e):null}}).sort(function(t,e){var i=function(t,e){if(o)return o(t.value,e.value);for(var i=0,r=t.key.length;i<r;i++){if(t.key[i]<e.key[i])return-1;if(t.key[i]>e.key[i])return 1}return 0}(t,e);return i||(i=t.index-e.index),i*n}).map(function(t){return t.value})},T=function(t,e){var i=null;return t.columns.forEach(function(t){t.id===e&&(i=t)}),i},k=function(t,e){var i=(e.className||"").match(/el-table_[^\s]+/gm);return i?T(t,i[0]):null},M=function(t,e){if(!t)throw new Error("row is required when get row identity");if("string"==typeof e){if(e.indexOf(".")<0)return t[e];for(var i=e.split("."),r=t,n=0;n<i.length;n++)r=r[i[n]];return r}if("function"==typeof e)return e.call(null,t)},P=function(t,e){var i=e.sortingColumn;return i&&"string"!=typeof i.sortable?E(t,e.sortProp,e.sortOrder,i.sortMethod,i.sortBy):t},A=function(t,i){var r={};return(t||[]).forEach(function(t,e){r[M(t,i)]={row:t,index:e}}),r},L=function(t,e,i){var r=!1,n=t.selection,o=n.indexOf(e);return void 0===i?r=(-1===o?n.push(e):n.splice(o,1),!0):i&&-1===o?(n.push(e),r=!0):!i&&-1<o&&(n.splice(o,1),r=!0),r},I=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("Table is required.");for(var i in this.table=t,this.states={rowKey:null,_columns:[],originColumns:[],columns:[],fixedColumns:[],rightFixedColumns:[],leafColumns:[],fixedLeafColumns:[],rightFixedLeafColumns:[],leafColumnsLength:0,fixedLeafColumnsLength:0,rightFixedLeafColumnsLength:0,isComplex:!1,filteredData:null,data:null,sortingColumn:null,sortProp:null,sortOrder:null,isAllSelected:!1,selection:[],reserveSelection:!1,selectable:null,currentRow:null,hoverRow:null,filters:{},expandRows:[],defaultExpandAll:!1,selectOnIndeterminate:!1},this._toggleAllSelection=s()(10,function(i){var t=i.data||[];if(0!==t.length){var e=this.states.selection,r=i.selectOnIndeterminate?!i.isAllSelected:!(i.isAllSelected||e.length),n=!1;t.forEach(function(t,e){i.selectable?i.selectable.call(null,t,e)&&L(i,t,r)&&(n=!0):L(i,t,r)&&(n=!0)});var o=this.table;n&&o.$emit("selection-change",e?e.slice():[]),o.$emit("select-all",e),i.isAllSelected=r}}),e)e.hasOwnProperty(i)&&this.states.hasOwnProperty(i)&&(this.states[i]=e[i])};I.prototype.mutations={setData:function(e,n){var o=this,t=e._data!==n;e._data=n,Object.keys(e.filters).forEach(function(t){var i=e.filters[t];if(i&&0!==i.length){var r=T(o.states,t);r&&r.filterMethod&&(n=n.filter(function(e){return i.some(function(t){return r.filterMethod.call(null,t,e,r)})}))}}),e.filteredData=n,e.data=P(n||[],e),this.updateCurrentRow();var r=e.rowKey;if(e.reserveSelection)if(r){var a=e.selection,s=A(a,r);e.data.forEach(function(t){var e=M(t,r),i=s[e];i&&(a[i.index]=t)}),this.updateAllSelected()}else console.warn("WARN: rowKey is required when reserve-selection is enabled.");else t?this.clearSelection():this.cleanSelection(),this.updateAllSelected();if(e.defaultExpandAll)this.states.expandRows=(e.data||[]).slice(0);else if(r){var i=A(this.states.expandRows,r),l=[],u=e.data,c=Array.isArray(u),h=0;for(u=c?u:u[Symbol.iterator]();;){var p;if(c){if(h>=u.length)break;p=u[h++]}else{if((h=u.next()).done)break;p=h.value}var f=p;i[M(f,r)]&&l.push(f)}this.states.expandRows=l}else this.states.expandRows=[];v.a.nextTick(function(){return o.table.updateScrollY()})},changeSortCondition:function(t,e){var i=this;t.data=P(t.filteredData||t._data||[],t),e&&e.silent||this.table.$emit("sort-change",{column:this.states.sortingColumn,prop:this.states.sortProp,order:this.states.sortOrder}),v.a.nextTick(function(){return i.table.updateScrollY()})},sort:function(r,t){var n=this,e=t.prop,i=t.order;e&&(r.sortProp=e,r.sortOrder=i||"ascending",v.a.nextTick(function(){for(var t=0,e=r.columns.length;t<e;t++){var i=r.columns[t];if(i.property===r.sortProp){i.order=r.sortOrder,r.sortingColumn=i;break}}r.sortingColumn&&n.commit("changeSortCondition")}))},filterChange:function(e,t){var n=this,i=t.column,r=t.values,o=t.silent,a=t.multi;r&&!Array.isArray(r)&&(r=[r]);var s={};a?i.forEach(function(t){e.filters[t.id]=r,s[t.columnKey||t.id]=r}):i.property&&(e.filters[i.id]=r,s[i.columnKey||i.id]=r);var l=e._data;Object.keys(e.filters).forEach(function(t){var i=e.filters[t];if(i&&0!==i.length){var r=T(n.states,t);r&&r.filterMethod&&(l=l.filter(function(e){return i.some(function(t){return r.filterMethod.call(null,t,e,r)})}))}}),e.filteredData=l,e.data=P(l,e),o||this.table.$emit("filter-change",s),v.a.nextTick(function(){return n.table.updateScrollY()})},insertColumn:function(t,e,i,r){var n=t._columns;r&&((n=r.children)||(n=r.children=[])),void 0!==i?n.splice(i,0,e):n.push(e),"selection"===e.type&&(t.selectable=e.selectable,t.reserveSelection=e.reserveSelection),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},removeColumn:function(t,e,i){var r=t._columns;i&&((r=i.children)||(r=i.children=[])),r&&r.splice(r.indexOf(e),1),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},setHoverRow:function(t,e){t.hoverRow=e},setCurrentRow:function(t,e){var i=t.currentRow;i!==(t.currentRow=e)&&this.table.$emit("current-change",e,i)},rowSelectedChanged:function(t,e){var i=L(t,e),r=t.selection;if(i){var n=this.table;n.$emit("selection-change",r?r.slice():[]),n.$emit("select",r,e)}this.updateAllSelected()},toggleAllSelection:function(t){this._toggleAllSelection(t)}};var O=function e(t){var i=[];return t.forEach(function(t){t.children?i.push.apply(i,e(t.children)):i.push(t)}),i};I.prototype.updateColumns=function(){var t=this.states,e=t._columns||[];t.fixedColumns=e.filter(function(t){return!0===t.fixed||"left"===t.fixed}),t.rightFixedColumns=e.filter(function(t){return"right"===t.fixed}),0<t.fixedColumns.length&&e[0]&&"selection"===e[0].type&&!e[0].fixed&&(e[0].fixed=!0,t.fixedColumns.unshift(e[0]));var i=e.filter(function(t){return!t.fixed});t.originColumns=[].concat(t.fixedColumns).concat(i).concat(t.rightFixedColumns);var r=O(i),n=O(t.fixedColumns),o=O(t.rightFixedColumns);t.leafColumnsLength=r.length,t.fixedLeafColumnsLength=n.length,t.rightFixedLeafColumnsLength=o.length,t.columns=[].concat(n).concat(r).concat(o),t.isComplex=0<t.fixedColumns.length||0<t.rightFixedColumns.length},I.prototype.isSelected=function(t){return-1<(this.states.selection||[]).indexOf(t)},I.prototype.clearSelection=function(){var t=this.states;t.isAllSelected=!1;var e=t.selection;t.selection.length&&(t.selection=[]),0<e.length&&this.table.$emit("selection-change",t.selection?t.selection.slice():[])},I.prototype.setExpandRowKeys=function(t){var i=[],e=this.states.data,r=this.states.rowKey;if(!r)throw new Error("[Table] prop row-key should not be empty.");var n=A(e,r);t.forEach(function(t){var e=n[t];e&&i.push(e.row)}),this.states.expandRows=i},I.prototype.toggleRowSelection=function(t,e){L(this.states,t,e)&&this.table.$emit("selection-change",this.states.selection?this.states.selection.slice():[])},I.prototype.toggleRowExpansion=function(t,e){(function(t,e,i){var r=!1,n=t.expandRows;if(void 0!==i){var o=n.indexOf(e);i?-1===o&&(n.push(e),r=!0):-1!==o&&(n.splice(o,1),r=!0)}else{var a=n.indexOf(e);-1===a?n.push(e):n.splice(a,1),r=!0}return r})(this.states,t,e)&&(this.table.$emit("expand-change",t,this.states.expandRows),this.scheduleLayout())},I.prototype.isRowExpanded=function(t){var e=this.states,i=e.expandRows,r=void 0===i?[]:i,n=e.rowKey;return n?!!A(r,n)[M(t,n)]:-1!==r.indexOf(t)},I.prototype.cleanSelection=function(){var e=this.states.selection||[],i=this.states.data,t=this.states.rowKey,r=void 0;if(t){r=[];var n=A(e,t),o=A(i,t);for(var a in n)n.hasOwnProperty(a)&&!o[a]&&r.push(n[a].row)}else r=e.filter(function(t){return-1===i.indexOf(t)});r.forEach(function(t){e.splice(e.indexOf(t),1)}),r.length&&this.table.$emit("selection-change",e?e.slice():[])},I.prototype.clearFilter=function(t){var e=this.states,i=this.table.$refs,r=i.tableHeader,n=i.fixedTableHeader,o=i.rightFixedTableHeader,a={};r&&(a=b()(a,r.filterPanels)),n&&(a=b()(a,n.filterPanels)),o&&(a=b()(a,o.filterPanels));var s=Object.keys(a);if(s.length)if("string"==typeof t&&(t=[t]),Array.isArray(t)){var l=t.map(function(t){return function(t,e){for(var i=null,r=0;r<t.columns.length;r++){var n=t.columns[r];if(n.columnKey===e){i=n;break}}return i}(e,t)});s.forEach(function(e){l.find(function(t){return t.id===e})&&(a[e].filteredValue=[])}),this.commit("filterChange",{column:l,value:[],silent:!0,multi:!0})}else s.forEach(function(t){a[t].filteredValue=[]}),e.filters={},this.commit("filterChange",{column:{},values:[],silent:!0})},I.prototype.clearSort=function(){var t=this.states;t.sortingColumn&&(t.sortingColumn.order=null,t.sortProp=null,t.sortOrder=null,this.commit("changeSortCondition",{silent:!0}))},I.prototype.updateAllSelected=function(){var t=this.states,e=t.selection,i=t.rowKey,r=t.selectable,n=t.data;if(n&&0!==n.length){var o=void 0;i&&(o=A(t.selection,i));for(var a,s=!0,l=0,u=0,c=n.length;u<c;u++){var h=n[u],p=r&&r.call(null,h,u);if(a=h,o?o[M(a,i)]:-1!==e.indexOf(a))l++;else if(!r||p){s=!1;break}}0===l&&(s=!1),t.isAllSelected=s}else t.isAllSelected=!1},I.prototype.scheduleLayout=function(t){t&&this.updateColumns(),this.table.debouncedUpdateLayout()},I.prototype.setCurrentRowKey=function(t){var e=this.states,i=e.rowKey;if(!i)throw new Error("[Table] row-key should not be empty.");var r=e.data||[],n=A(r,i)[t];e.currentRow=n?n.row:null},I.prototype.updateCurrentRow=function(){var t=this.states,e=this.table,i=t.data||[],r=t.currentRow;if(-1===i.indexOf(r)){if(t.rowKey&&r){for(var n=null,o=0;o<i.length;o++){var a=i[o];if(a&&a[t.rowKey]===r[t.rowKey]){n=a;break}}if(n)return void(t.currentRow=n)}t.currentRow=null,t.currentRow!==r&&e.$emit("current-change",null,r)}},I.prototype.commit=function(t){var e=this.mutations;if(!e[t])throw new Error("Action not found: "+t);for(var i=arguments.length,r=Array(1<i?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];e[t].apply(this,[this.states].concat(r))};var D=I,z=i(34),F=i.n(z);var R=function(){function i(t){for(var e in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.observers=[],this.table=null,this.store=null,this.columns=null,this.fit=!0,this.showHeader=!0,this.height=null,this.scrollX=!1,this.scrollY=!1,this.bodyWidth=null,this.fixedWidth=null,this.rightFixedWidth=null,this.tableHeight=null,this.headerHeight=44,this.appendHeight=0,this.footerHeight=44,this.viewportHeight=null,this.bodyHeight=null,this.fixedBodyHeight=null,this.gutterWidth=F()(),t)t.hasOwnProperty(e)&&(this[e]=t[e]);if(!this.table)throw new Error("table is required for Table Layout");if(!this.store)throw new Error("store is required for Table Layout")}return i.prototype.updateScrollY=function(){var t=this.height;if("string"==typeof t||"number"==typeof t){var e=this.table.bodyWrapper;if(this.table.$el&&e){var i=e.querySelector(".el-table__body");this.scrollY=i.offsetHeight>this.bodyHeight}}},i.prototype.setHeight=function(t){var e=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"height";if(!v.a.prototype.$isServer){var r=this.table.$el;if("string"==typeof t&&/^\d+$/.test(t)&&(t=Number(t)),this.height=t,!r&&(t||0===t))return v.a.nextTick(function(){return e.setHeight(t,i)});"number"==typeof t?(r.style[i]=t+"px",this.updateElsHeight()):"string"==typeof t&&(r.style[i]=t,this.updateElsHeight())}},i.prototype.setMaxHeight=function(t){return this.setHeight(t,"max-height")},i.prototype.updateElsHeight=function(){var t=this;if(!this.table.$ready)return v.a.nextTick(function(){return t.updateElsHeight()});var e=this.table.$refs,i=e.headerWrapper,r=e.appendWrapper,n=e.footerWrapper;if(this.appendHeight=r?r.offsetHeight:0,!this.showHeader||i){var o=this.headerHeight=this.showHeader?i.offsetHeight:0;if(this.showHeader&&0<i.offsetWidth&&0<(this.table.columns||[]).length&&o<2)return v.a.nextTick(function(){return t.updateElsHeight()});var a=this.tableHeight=this.table.$el.clientHeight;if(null!==this.height&&(!isNaN(this.height)||"string"==typeof this.height)){var s=this.footerHeight=n?n.offsetHeight:0;this.bodyHeight=a-o-s+(n?1:0)}this.fixedBodyHeight=this.scrollX?this.bodyHeight-this.gutterWidth:this.bodyHeight;var l=!this.table.data||0===this.table.data.length;this.viewportHeight=this.scrollX?a-(l?0:this.gutterWidth):a,this.updateScrollY(),this.notifyObservers("scrollable")}},i.prototype.getFlattenColumns=function(){var e=[];return this.table.columns.forEach(function(t){t.isColumnGroup?e.push.apply(e,t.columns):e.push(t)}),e},i.prototype.updateColumnsWidth=function(){if(!v.a.prototype.$isServer){var t=this.fit,e=this.table.$el.clientWidth,i=0,r=this.getFlattenColumns(),n=r.filter(function(t){return"number"!=typeof t.width});if(r.forEach(function(t){"number"==typeof t.width&&t.realWidth&&(t.realWidth=null)}),0<n.length&&t){r.forEach(function(t){i+=t.width||t.minWidth||80});var o=this.scrollY?this.gutterWidth:0;if(i<=e-o){this.scrollX=!1;var a=e-o-i;if(1===n.length)n[0].realWidth=(n[0].minWidth||80)+a;else{var s=a/n.reduce(function(t,e){return t+(e.minWidth||80)},0),l=0;n.forEach(function(t,e){if(0!==e){var i=Math.floor((t.minWidth||80)*s);l+=i,t.realWidth=(t.minWidth||80)+i}}),n[0].realWidth=(n[0].minWidth||80)+a-l}}else this.scrollX=!0,n.forEach(function(t){t.realWidth=t.minWidth});this.bodyWidth=Math.max(i,e),this.table.resizeState.width=this.bodyWidth}else r.forEach(function(t){t.width||t.minWidth?t.realWidth=t.width||t.minWidth:t.realWidth=80,i+=t.realWidth}),this.scrollX=e<i,this.bodyWidth=i;var u=this.store.states.fixedColumns;if(0<u.length){var c=0;u.forEach(function(t){c+=t.realWidth||t.width}),this.fixedWidth=c}var h=this.store.states.rightFixedColumns;if(0<h.length){var p=0;h.forEach(function(t){p+=t.realWidth||t.width}),this.rightFixedWidth=p}this.notifyObservers("columns")}},i.prototype.addObserver=function(t){this.observers.push(t)},i.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);-1!==e&&this.observers.splice(e,1)},i.prototype.notifyObservers=function(e){var i=this;this.observers.forEach(function(t){switch(e){case"columns":t.onColumnsChange(i);break;case"scrollable":t.onScrollableChange(i);break;default:throw new Error("Table Layout don't have event "+e+".")}})},i}(),B=i(2),N=i(24),j=i.n(N),V={created:function(){this.tableLayout.addObserver(this)},destroyed:function(){this.tableLayout.removeObserver(this)},computed:{tableLayout:function(){var t=this.layout;if(!t&&this.table&&(t=this.table.layout),!t)throw new Error("Can not find table layout.");return t}},mounted:function(){this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout)},updated:function(){this.__updated__||(this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout),this.__updated__=!0)},methods:{onColumnsChange:function(){var t=this.$el.querySelectorAll("colgroup > col");if(t.length){var e=this.tableLayout.getFlattenColumns(),i={};e.forEach(function(t){i[t.id]=t});for(var r=0,n=t.length;r<n;r++){var o=t[r],a=o.getAttribute("name"),s=i[a];s&&o.setAttribute("width",s.realWidth||s.width)}}},onScrollableChange:function(t){for(var e=this.$el.querySelectorAll("colgroup > col[name=gutter]"),i=0,r=e.length;i<r;i++){e[i].setAttribute("width",t.scrollY?t.gutterWidth:"0")}for(var n=this.$el.querySelectorAll("th.gutter"),o=0,a=n.length;o<a;o++){var s=n[o];s.style.width=t.scrollY?t.gutterWidth+"px":"0",s.style.display=t.scrollY?"":"none"}}}},U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$={name:"ElTableBody",mixins:[V],components:{ElCheckbox:o.a,ElTooltip:j.a},props:{store:{required:!0},stripe:Boolean,context:{},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:String,highlight:Boolean},render:function(s){var l=this,u=this.columns.map(function(t,e){return l.isColumnHidden(e)});return s("table",{class:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[s("colgroup",[this._l(this.columns,function(t){return s("col",{attrs:{name:t.id}})})]),s("tbody",[this._l(this.data,function(o,a){return[s("tr",{style:l.rowStyle?l.getRowStyle(o,a):null,key:l.table.rowKey?l.getKeyOfRow(o,a):a,on:{dblclick:function(t){return l.handleDoubleClick(t,o)},click:function(t){return l.handleClick(t,o)},contextmenu:function(t){return l.handleContextMenu(t,o)},mouseenter:function(t){return l.handleMouseEnter(a)},mouseleave:function(t){return l.handleMouseLeave()}},class:[l.getRowClass(o,a)]},[l._l(l.columns,function(t,e){var i=l.getSpan(o,t,a,e),r=i.rowspan,n=i.colspan;return r&&n?s("td",{style:l.getCellStyle(a,e,o,t),class:l.getCellClass(a,e,o,t),attrs:{rowspan:r,colspan:n},on:{mouseenter:function(t){return l.handleCellMouseEnter(t,o)},mouseleave:l.handleCellMouseLeave}},[t.renderCell.call(l._renderProxy,s,{row:o,column:t,$index:a,store:l.store,_self:l.context||l.table.$vnode.context},u[e])]):""})]),l.store.isRowExpanded(o)?s("tr",[s("td",{attrs:{colspan:l.columns.length},class:"el-table__expanded-cell"},[l.table.renderExpanded?l.table.renderExpanded(s,{row:o,$index:a,store:l.store}):""])]):""]}).concat(s("el-tooltip",{attrs:{effect:this.table.tooltipEffect,placement:"top",content:this.tooltipContent},ref:"tooltip"}))])])},computed:{table:function(){return this.$parent},data:function(){return this.store.states.data},columnsCount:function(){return this.store.states.columns.length},leftFixedLeafCount:function(){return this.store.states.fixedLeafColumnsLength},rightFixedLeafCount:function(){return this.store.states.rightFixedLeafColumnsLength},leftFixedCount:function(){return this.store.states.fixedColumns.length},rightFixedCount:function(){return this.store.states.rightFixedColumns.length},columns:function(){return this.store.states.columns}},data:function(){return{tooltipContent:""}},created:function(){this.activateTooltip=s()(50,function(t){return t.handleShowPopper()})},methods:{getKeyOfRow:function(t,e){var i=this.table.rowKey;return i?M(t,i):e},isColumnHidden:function(t){return!0===this.fixed||"left"===this.fixed?t>=this.leftFixedLeafCount:"right"===this.fixed?t<this.columnsCount-this.rightFixedLeafCount:t<this.leftFixedLeafCount||t>=this.columnsCount-this.rightFixedLeafCount},getSpan:function(t,e,i,r){var n=1,o=1,a=this.table.spanMethod;if("function"==typeof a){var s=a({row:t,column:e,rowIndex:i,columnIndex:r});Array.isArray(s)?(n=s[0],o=s[1]):"object"===(void 0===s?"undefined":U(s))&&(n=s.rowspan,o=s.colspan)}return{rowspan:n,colspan:o}},getRowStyle:function(t,e){var i=this.table.rowStyle;return"function"==typeof i?i.call(null,{row:t,rowIndex:e}):i},getRowClass:function(t,e){var i=["el-table__row"];this.table.highlightCurrentRow&&t===this.store.states.currentRow&&i.push("current-row"),e===this.store.states.hoverRow&&i.push("hover-row"),this.stripe&&e%2==1&&i.push("el-table__row--striped");var r=this.table.rowClassName;return"string"==typeof r?i.push(r):"function"==typeof r&&i.push(r.call(null,{row:t,rowIndex:e})),-1<this.store.states.expandRows.indexOf(t)&&i.push("expanded"),i.join(" ")},getCellStyle:function(t,e,i,r){var n=this.table.cellStyle;return"function"==typeof n?n.call(null,{rowIndex:t,columnIndex:e,row:i,column:r}):n},getCellClass:function(t,e,i,r){var n=[r.id,r.align,r.className];this.isColumnHidden(e)&&n.push("is-hidden");var o=this.table.cellClassName;return"string"==typeof o?n.push(o):"function"==typeof o&&n.push(o.call(null,{rowIndex:t,columnIndex:e,row:i,column:r})),n.join(" ")},handleCellMouseEnter:function(t,e){var i=this.table,r=S(t);if(r){var n=k(i,r),o=i.hoverState={cell:r,column:n,row:e};i.$emit("cell-mouse-enter",o.row,o.column,o.cell,t)}var a=t.target.querySelector(".cell");if(Object(B.hasClass)(a,"el-tooltip")&&a.childNodes.length){var s=document.createRange();if(s.setStart(a,0),s.setEnd(a,a.childNodes.length),(s.getBoundingClientRect().width+((parseInt(Object(B.getStyle)(a,"paddingLeft"),10)||0)+(parseInt(Object(B.getStyle)(a,"paddingRight"),10)||0))>a.offsetWidth||a.scrollWidth>a.offsetWidth)&&this.$refs.tooltip){var l=this.$refs.tooltip;this.tooltipContent=r.innerText||r.textContent,l.referenceElm=r,l.$refs.popper&&(l.$refs.popper.style.display="none"),l.doDestroy(),l.setExpectedState(!0),this.activateTooltip(l)}}},handleCellMouseLeave:function(t){var e=this.$refs.tooltip;if(e&&(e.setExpectedState(!1),e.handleClosePopper()),S(t)){var i=this.table.hoverState||{};this.table.$emit("cell-mouse-leave",i.row,i.column,i.cell,t)}},handleMouseEnter:function(t){this.store.commit("setHoverRow",t)},handleMouseLeave:function(){this.store.commit("setHoverRow",null)},handleContextMenu:function(t,e){this.handleEvent(t,e,"contextmenu")},handleDoubleClick:function(t,e){this.handleEvent(t,e,"dblclick")},handleClick:function(t,e){this.store.commit("setCurrentRow",e),this.handleEvent(t,e,"click")},handleEvent:function(t,e,i){var r=this.table,n=S(t),o=void 0;n&&(o=k(r,n))&&r.$emit("cell-"+i,e,o,n,t),r.$emit("row-"+i,e,o,t)},handleExpandClick:function(t,e){e.stopPropagation(),this.store.toggleRowExpansion(t)}}},q=i(26),W=i.n(q),G=function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("transition",{attrs:{name:"el-zoom-in-top"}},[i.multiple?r("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:i.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:i.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[r("div",{staticClass:"el-table-filter__content"},[r("el-scrollbar",{attrs:{"wrap-class":"el-table-filter__wrap"}},[r("el-checkbox-group",{staticClass:"el-table-filter__checkbox-group",model:{value:i.filteredValue,callback:function(t){i.filteredValue=t},expression:"filteredValue"}},i._l(i.filters,function(t){return r("el-checkbox",{key:t.value,attrs:{label:t.value}},[i._v(i._s(t.text))])}),1)],1)],1),r("div",{staticClass:"el-table-filter__bottom"},[r("button",{class:{"is-disabled":0===i.filteredValue.length},attrs:{disabled:0===i.filteredValue.length},on:{click:i.handleConfirm}},[i._v(i._s(i.t("el.table.confirmFilter")))]),r("button",{on:{click:i.handleReset}},[i._v(i._s(i.t("el.table.resetFilter")))])])]):r("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:i.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:i.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[r("ul",{staticClass:"el-table-filter__list"},[r("li",{staticClass:"el-table-filter__list-item",class:{"is-active":void 0===i.filterValue||null===i.filterValue},on:{click:function(t){i.handleSelect(null)}}},[i._v(i._s(i.t("el.table.clearFilter")))]),i._l(i.filters,function(e){return r("li",{key:e.value,staticClass:"el-table-filter__list-item",class:{"is-active":i.isActive(e)},attrs:{label:e.value},on:{click:function(t){i.handleSelect(e.value)}}},[i._v(i._s(e.text))])})],2)])])};G._withStripped=!0;var H=i(5),Z=i.n(H),X=i(13),K=i(11),Y=i.n(K),J=[];!v.a.prototype.$isServer&&document.addEventListener("click",function(i){J.forEach(function(t){var e=i.target;t&&t.$el&&(e===t.$el||t.$el.contains(e)||t.handleOutsideClick&&t.handleOutsideClick(i))})});var Q=function(t){t&&J.push(t)},tt=function(t){-1!==J.indexOf(t)&&J.splice(t,1)},et=i(35),it=i.n(et),rt={name:"ElTableFilterPanel",mixins:[Z.a,d.a],directives:{Clickoutside:Y.a},components:{ElCheckbox:o.a,ElCheckboxGroup:it.a},props:{placement:{type:String,default:"bottom-end"}},customRender:function(t){return t("div",{class:"el-table-filter"},[t("div",{class:"el-table-filter__content"}),t("div",{class:"el-table-filter__bottom"},[t("button",{on:{click:this.handleConfirm}},[this.t("el.table.confirmFilter")]),t("button",{on:{click:this.handleReset}},[this.t("el.table.resetFilter")])])])},methods:{isActive:function(t){return t.value===this.filterValue},handleOutsideClick:function(){var t=this;setTimeout(function(){t.showPopper=!1},16)},handleConfirm:function(){this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleReset:function(){this.filteredValue=[],this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleSelect:function(t){null!=(this.filterValue=t)?this.confirmFilter(this.filteredValue):this.confirmFilter([]),this.handleOutsideClick()},confirmFilter:function(t){this.table.store.commit("filterChange",{column:this.column,values:t}),this.table.store.updateAllSelected()}},data:function(){return{table:null,cell:null,column:null}},computed:{filters:function(){return this.column&&this.column.filters},filterValue:{get:function(){return(this.column.filteredValue||[])[0]},set:function(t){this.filteredValue&&(null!=t?this.filteredValue.splice(0,1,t):this.filteredValue.splice(0,1))}},filteredValue:{get:function(){return this.column&&this.column.filteredValue||[]},set:function(t){this.column&&(this.column.filteredValue=t)}},multiple:function(){return!this.column||this.column.filterMultiple}},mounted:function(){var e=this;this.popperElm=this.$el,this.referenceElm=this.cell,this.table.bodyWrapper.addEventListener("scroll",function(){e.updatePopper()}),this.$watch("showPopper",function(t){e.column&&(e.column.filterOpened=t),t?Q(e):tt(e)})},watch:{showPopper:function(t){!0===t&&parseInt(this.popperJS._popper.style.zIndex,10)<X.PopupManager.zIndex&&(this.popperJS._popper.style.zIndex=X.PopupManager.nextZIndex())}}},nt=i(0),ot=Object(nt.a)(rt,G,[],!1,null,null,null);ot.options.__file="packages/table/src/filter-panel.vue";var at=ot.exports,st=function(t){var n=1;t.forEach(function(t){t.level=1,function e(i,t){if(t&&(i.level=t.level+1,n<i.level&&(n=i.level)),i.children){var r=0;i.children.forEach(function(t){e(t,i),r+=t.colSpan}),i.colSpan=r}else i.colSpan=1}(t)});for(var e=[],i=0;i<n;i++)e.push([]);return function e(t){var i=[];return t.forEach(function(t){t.children?(i.push(t),i.push.apply(i,e(t.children))):i.push(t)}),i}(t).forEach(function(t){t.children?t.rowSpan=1:t.rowSpan=n-t.level+1,e[t.level-1].push(t)}),e},lt={name:"ElTableHeader",mixins:[V],render:function(n){var o=this,t=this.store.states.originColumns,e=st(t,this.columns),i=1<e.length;return i&&(this.$parent.isGroup=!0),n("table",{class:"el-table__header",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[n("colgroup",[this._l(this.columns,function(t){return n("col",{attrs:{name:t.id}})}),this.hasGutter?n("col",{attrs:{name:"gutter"}}):""]),n("thead",{class:[{"is-group":i,"has-gutter":this.hasGutter}]},[this._l(e,function(i,r){return n("tr",{style:o.getHeaderRowStyle(r),class:o.getHeaderRowClass(r)},[o._l(i,function(e,t){return n("th",{attrs:{colspan:e.colSpan,rowspan:e.rowSpan},on:{mousemove:function(t){return o.handleMouseMove(t,e)},mouseout:o.handleMouseOut,mousedown:function(t){return o.handleMouseDown(t,e)},click:function(t){return o.handleHeaderClick(t,e)},contextmenu:function(t){return o.handleHeaderContextMenu(t,e)}},style:o.getHeaderCellStyle(r,t,i,e),class:o.getHeaderCellClass(r,t,i,e),key:e.id},[n("div",{class:["cell",e.filteredValue&&0<e.filteredValue.length?"highlight":"",e.labelClassName]},[e.renderHeader?e.renderHeader.call(o._renderProxy,n,{column:e,$index:t,store:o.store,_self:o.$parent.$vnode.context}):e.label,e.sortable?n("span",{class:"caret-wrapper",on:{click:function(t){return o.handleSortClick(t,e)}}},[n("i",{class:"sort-caret ascending",on:{click:function(t){return o.handleSortClick(t,e,"ascending")}}}),n("i",{class:"sort-caret descending",on:{click:function(t){return o.handleSortClick(t,e,"descending")}}})]):"",e.filterable?n("span",{class:"el-table__column-filter-trigger",on:{click:function(t){return o.handleFilterClick(t,e)}}},[n("i",{class:["el-icon-arrow-down",e.filterOpened?"el-icon-arrow-up":""]})]):""])])}),o.hasGutter?n("th",{class:"gutter"}):""])})])])},props:{fixed:String,store:{required:!0},border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},components:{ElCheckbox:o.a,ElTag:W.a},computed:{table:function(){return this.$parent},isAllSelected:function(){return this.store.states.isAllSelected},columnsCount:function(){return this.store.states.columns.length},leftFixedCount:function(){return this.store.states.fixedColumns.length},rightFixedCount:function(){return this.store.states.rightFixedColumns.length},leftFixedLeafCount:function(){return this.store.states.fixedLeafColumnsLength},rightFixedLeafCount:function(){return this.store.states.rightFixedLeafColumnsLength},columns:function(){return this.store.states.columns},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},created:function(){this.filterPanels={}},mounted:function(){var t=this.defaultSort,e=t.prop,i=t.order;this.store.commit("sort",{prop:e,order:i})},beforeDestroy:function(){var t=this.filterPanels;for(var e in t)t.hasOwnProperty(e)&&t[e]&&t[e].$destroy(!0)},methods:{isCellHidden:function(t,e){for(var i=0,r=0;r<t;r++)i+=e[r].colSpan;var n=i+e[t].colSpan-1;return!0===this.fixed||"left"===this.fixed?n>=this.leftFixedLeafCount:"right"===this.fixed?i<this.columnsCount-this.rightFixedLeafCount:n<this.leftFixedLeafCount||i>=this.columnsCount-this.rightFixedLeafCount},getHeaderRowStyle:function(t){var e=this.table.headerRowStyle;return"function"==typeof e?e.call(null,{rowIndex:t}):e},getHeaderRowClass:function(t){var e=[],i=this.table.headerRowClassName;return"string"==typeof i?e.push(i):"function"==typeof i&&e.push(i.call(null,{rowIndex:t})),e.join(" ")},getHeaderCellStyle:function(t,e,i,r){var n=this.table.headerCellStyle;return"function"==typeof n?n.call(null,{rowIndex:t,columnIndex:e,row:i,column:r}):n},getHeaderCellClass:function(t,e,i,r){var n=[r.id,r.order,r.headerAlign,r.className,r.labelClassName];0===t&&this.isCellHidden(e,i)&&n.push("is-hidden"),r.children||n.push("is-leaf"),r.sortable&&n.push("is-sortable");var o=this.table.headerCellClassName;return"string"==typeof o?n.push(o):"function"==typeof o&&n.push(o.call(null,{rowIndex:t,columnIndex:e,row:i,column:r})),n.join(" ")},toggleAllSelection:function(t){t.stopPropagation(),this.store.commit("toggleAllSelection")},handleFilterClick:function(t,e){t.stopPropagation();var i=t.target,r="TH"===i.tagName?i:i.parentNode;r=r.querySelector(".el-table__column-filter-trigger")||r;var n=this.$parent,o=this.filterPanels[e.id];o&&e.filterOpened?o.showPopper=!1:(o||(o=new v.a(at),this.filterPanels[e.id]=o,e.filterPlacement&&(o.placement=e.filterPlacement),o.table=n,o.cell=r,o.column=e,!this.$isServer&&o.$mount(document.createElement("div"))),setTimeout(function(){o.showPopper=!0},16))},handleHeaderClick:function(t,e){!e.filters&&e.sortable?this.handleSortClick(t,e):e.filterable&&!e.sortable&&this.handleFilterClick(t,e),this.$parent.$emit("header-click",e,t)},handleHeaderContextMenu:function(t,e){this.$parent.$emit("header-contextmenu",e,t)},handleMouseDown:function(o,a){var s=this;if(!this.$isServer&&!(a.children&&0<a.children.length)&&this.draggingColumn&&this.border){this.dragging=!0,this.$parent.resizeProxyVisible=!0;var l=this.$parent,t=l.$el.getBoundingClientRect().left,u=this.$el.querySelector("th."+a.id),e=u.getBoundingClientRect(),r=e.left-t+30;Object(B.addClass)(u,"noclick"),this.dragState={startMouseLeft:o.clientX,startLeft:e.right-t,startColumnLeft:e.left-t,tableLeft:t};var c=l.$refs.resizeProxy;c.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var h=function(t){var e=t.clientX-s.dragState.startMouseLeft,i=s.dragState.startLeft+e;c.style.left=Math.max(r,i)+"px"};document.addEventListener("mousemove",h),document.addEventListener("mouseup",function t(){if(s.dragging){var e=s.dragState,i=e.startColumnLeft,r=e.startLeft,n=parseInt(c.style.left,10)-i;a.width=a.realWidth=n,l.$emit("header-dragend",a.width,r-i,a,o),s.store.scheduleLayout(),document.body.style.cursor="",s.dragging=!1,s.draggingColumn=null,s.dragState={},l.resizeProxyVisible=!1}document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",t),document.onselectstart=null,document.ondragstart=null,setTimeout(function(){Object(B.removeClass)(u,"noclick")},0)})}},handleMouseMove:function(t,e){if(!(e.children&&0<e.children.length)){for(var i=t.target;i&&"TH"!==i.tagName;)i=i.parentNode;if(e&&e.resizable&&!this.dragging&&this.border){var r=i.getBoundingClientRect(),n=document.body.style;12<r.width&&r.right-t.pageX<8?(n.cursor="col-resize",Object(B.hasClass)(i,"is-sortable")&&(i.style.cursor="col-resize"),this.draggingColumn=e):this.dragging||(n.cursor="",Object(B.hasClass)(i,"is-sortable")&&(i.style.cursor="pointer"),this.draggingColumn=null)}}},handleMouseOut:function(){this.$isServer||(document.body.style.cursor="")},toggleOrder:function(t){var e=t.order,i=t.sortOrders;if(""===e)return i[0];var r=i.indexOf(e||null);return i[r>i.length-2?0:r+1]},handleSortClick:function(t,e,i){t.stopPropagation();for(var r=e.order===i?null:i||this.toggleOrder(e),n=t.target;n&&"TH"!==n.tagName;)n=n.parentNode;if(n&&"TH"===n.tagName&&Object(B.hasClass)(n,"noclick"))Object(B.removeClass)(n,"noclick");else if(e.sortable){var o=this.store.states,a=o.sortProp,s=void 0,l=o.sortingColumn;(l!==e||l===e&&null===l.order)&&(l&&(l.order=null),a=(o.sortingColumn=e).property),r?s=e.order=r:(s=e.order=null,a=o.sortingColumn=null),o.sortProp=a,o.sortOrder=s,this.store.commit("changeSortCondition")}}},data:function(){return{draggingColumn:null,dragging:!1,dragState:{}}}},ut={name:"ElTableFooter",mixins:[V],render:function(i){var a=this,s=[];return this.summaryMethod?s=this.summaryMethod({columns:this.columns,data:this.store.states.data}):this.columns.forEach(function(e,t){if(0!==t){var i=a.store.states.data.map(function(t){return Number(t[e.property])}),r=[],n=!0;i.forEach(function(t){if(!isNaN(t)){n=!1;var e=(""+t).split(".")[1];r.push(e?e.length:0)}});var o=Math.max.apply(null,r);s[t]=n?"":i.reduce(function(t,e){var i=Number(e);return isNaN(i)?t:parseFloat((t+e).toFixed(Math.min(o,20)))},0)}else s[t]=a.sumText}),i("table",{class:"el-table__footer",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[i("colgroup",[this._l(this.columns,function(t){return i("col",{attrs:{name:t.id}})}),this.hasGutter?i("col",{attrs:{name:"gutter"}}):""]),i("tbody",{class:[{"has-gutter":this.hasGutter}]},[i("tr",[this._l(this.columns,function(t,e){return i("td",{attrs:{colspan:t.colSpan,rowspan:t.rowSpan},class:[t.id,t.headerAlign,t.className||"",a.isCellHidden(e,a.columns,t)?"is-hidden":"",t.children?"":"is-leaf",t.labelClassName]},[i("div",{class:["cell",t.labelClassName]},[s[e]])])}),this.hasGutter?i("th",{class:"gutter"}):""])])])},props:{fixed:String,store:{required:!0},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},computed:{table:function(){return this.$parent},isAllSelected:function(){return this.store.states.isAllSelected},columnsCount:function(){return this.store.states.columns.length},leftFixedCount:function(){return this.store.states.fixedColumns.length},leftFixedLeafCount:function(){return this.store.states.fixedLeafColumnsLength},rightFixedLeafCount:function(){return this.store.states.rightFixedLeafColumnsLength},rightFixedCount:function(){return this.store.states.rightFixedColumns.length},columns:function(){return this.store.states.columns},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},methods:{isCellHidden:function(t,e,i){if(!0===this.fixed||"left"===this.fixed)return t>=this.leftFixedLeafCount;if("right"!==this.fixed)return!(this.fixed||!i.fixed)||(t<this.leftFixedCount||t>=this.columnsCount-this.rightFixedCount);for(var r=0,n=0;n<t;n++)r+=e[n].colSpan;return r<this.columnsCount-this.rightFixedLeafCount}}},ct=1,ht={name:"ElTable",mixins:[d.a,y.a],directives:{Mousewheel:p},props:{data:{type:Array,default:function(){return[]}},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],context:{},showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0}},components:{TableHeader:lt,TableFooter:ut,TableBody:$,ElCheckbox:o.a},methods:{getMigratingConfig:function(){return{events:{expand:"expand is renamed to expand-change"}}},setCurrentRow:function(t){this.store.commit("setCurrentRow",t)},toggleRowSelection:function(t,e){this.store.toggleRowSelection(t,e),this.store.updateAllSelected()},toggleRowExpansion:function(t,e){this.store.toggleRowExpansion(t,e)},clearSelection:function(){this.store.clearSelection()},clearFilter:function(t){this.store.clearFilter(t)},clearSort:function(){this.store.clearSort()},handleMouseLeave:function(){this.store.commit("setHoverRow",null),this.hoverState&&(this.hoverState=null)},updateScrollY:function(){this.layout.updateScrollY(),this.layout.updateColumnsWidth()},handleFixedMousewheel:function(t,e){var i=this.bodyWrapper;if(0<Math.abs(e.spinY)){var r=i.scrollTop;e.pixelY<0&&0!==r&&t.preventDefault(),0<e.pixelY&&i.scrollHeight-i.clientHeight>r&&t.preventDefault(),i.scrollTop+=Math.ceil(e.pixelY/5)}else i.scrollLeft+=Math.ceil(e.pixelX/5)},handleHeaderFooterMousewheel:function(t,e){var i=e.pixelX,r=e.pixelY;Math.abs(i)>=Math.abs(r)&&(t.preventDefault(),this.bodyWrapper.scrollLeft+=e.pixelX/5)},bindEvents:function(){var t=this.$refs,i=t.headerWrapper,r=t.footerWrapper,n=this.$refs,o=this;this.bodyWrapper.addEventListener("scroll",function(){i&&(i.scrollLeft=this.scrollLeft),r&&(r.scrollLeft=this.scrollLeft),n.fixedBodyWrapper&&(n.fixedBodyWrapper.scrollTop=this.scrollTop),n.rightFixedBodyWrapper&&(n.rightFixedBodyWrapper.scrollTop=this.scrollTop);var t=this.scrollWidth-this.offsetWidth-1,e=this.scrollLeft;o.scrollPosition=t<=e?"right":0===e?"left":"middle"}),this.fit&&Object(l.addResizeListener)(this.$el,this.resizeListener)},resizeListener:function(){if(this.$ready){var t=!1,e=this.$el,i=this.resizeState,r=i.width,n=i.height,o=e.offsetWidth;r!==o&&(t=!0);var a=e.offsetHeight;(this.height||this.shouldUpdateHeight)&&n!==a&&(t=!0),t&&(this.resizeState.width=o,this.resizeState.height=a,this.doLayout())}},doLayout:function(){this.layout.updateColumnsWidth(),this.shouldUpdateHeight&&this.layout.updateElsHeight()},sort:function(t,e){this.store.commit("sort",{prop:t,order:e})},toggleAllSelection:function(){this.store.commit("toggleAllSelection")}},created:function(){var t=this;this.tableId="el-table_"+ct++,this.debouncedUpdateLayout=s()(50,function(){return t.doLayout()})},computed:{tableSize:function(){return this.size||(this.$ELEMENT||{}).size},bodyWrapper:function(){return this.$refs.bodyWrapper},shouldUpdateHeight:function(){return this.height||this.maxHeight||0<this.fixedColumns.length||0<this.rightFixedColumns.length},selection:function(){return this.store.states.selection},columns:function(){return this.store.states.columns},tableData:function(){return this.store.states.data},fixedColumns:function(){return this.store.states.fixedColumns},rightFixedColumns:function(){return this.store.states.rightFixedColumns},bodyWidth:function(){var t=this.layout,e=t.bodyWidth,i=t.scrollY,r=t.gutterWidth;return e?e-(i?r:0)+"px":""},bodyHeight:function(){return this.height?{height:this.layout.bodyHeight?this.layout.bodyHeight+"px":""}:this.maxHeight?{"max-height":(this.showHeader?this.maxHeight-this.layout.headerHeight-this.layout.footerHeight:this.maxHeight-this.layout.footerHeight)+"px"}:{}},fixedBodyHeight:function(){if(this.height)return{height:this.layout.fixedBodyHeight?this.layout.fixedBodyHeight+"px":""};if(this.maxHeight){var t=this.layout.scrollX?this.maxHeight-this.layout.gutterWidth:this.maxHeight;return this.showHeader&&(t-=this.layout.headerHeight),{"max-height":(t-=this.layout.footerHeight)+"px"}}return{}},fixedHeight:function(){return this.maxHeight?this.showSummary?{bottom:0}:{bottom:this.layout.scrollX&&this.data.length?this.layout.gutterWidth+"px":""}:this.showSummary?{height:this.layout.tableHeight?this.layout.tableHeight+"px":""}:{height:this.layout.viewportHeight?this.layout.viewportHeight+"px":""}}},watch:{height:{immediate:!0,handler:function(t){this.layout.setHeight(t)}},maxHeight:{immediate:!0,handler:function(t){this.layout.setMaxHeight(t)}},currentRowKey:function(t){this.store.setCurrentRowKey(t)},data:{immediate:!0,handler:function(t){var e=this;this.store.commit("setData",t),this.$ready&&this.$nextTick(function(){e.doLayout()})}},expandRowKeys:{immediate:!0,handler:function(t){t&&this.store.setExpandRowKeys(t)}}},destroyed:function(){this.resizeListener&&Object(l.removeResizeListener)(this.$el,this.resizeListener)},mounted:function(){var e=this;this.bindEvents(),this.store.updateColumns(),this.doLayout(),this.resizeState={width:this.$el.offsetWidth,height:this.$el.offsetHeight},this.store.states.columns.forEach(function(t){t.filteredValue&&t.filteredValue.length&&e.store.commit("filterChange",{column:t,values:t.filteredValue,silent:!0})}),this.$ready=!0},data:function(){var t=new D(this,{rowKey:this.rowKey,defaultExpandAll:this.defaultExpandAll,selectOnIndeterminate:this.selectOnIndeterminate});return{layout:new R({store:t,table:this,fit:this.fit,showHeader:this.showHeader}),store:t,isHidden:!1,renderExpanded:null,resizeProxyVisible:!1,resizeState:{width:null,height:null},isGroup:!1,scrollPosition:"left"}}},pt=Object(nt.a)(ht,r,[],!1,null,null,null);pt.options.__file="packages/table/src/table.vue";var ft=pt.exports;ft.install=function(t){t.component(ft.name,ft)};e.default=ft}])},rXFu:function(O,t,D){"use strict";(function(t,y){var g=D("lm0R");O.exports=p;var a,v=D("49sm");p.ReadableState=o;D("+qE3").EventEmitter;var _=function(t,e){return t.listeners(e).length},n=D("QpuX"),u=D("hwdV").Buffer,c=t.Uint8Array||function(){};var e=D("Onz0");e.inherits=D("P7XM");var i=D(1),b=void 0;b=i&&i.debuglog?i.debuglog("stream"):function(){};var s,l=D("Xhqo"),r=D("RoFp");e.inherits(p,n);var h=["error","close","destroy","pause","resume"];function o(t,e){t=t||{};var i=e instanceof(a=a||D("sZro"));this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,n=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(n||0===n)?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=D("fXKp").StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function p(t){if(a=a||D("sZro"),!(this instanceof p))return new p(t);this._readableState=new o(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),n.call(this)}function f(t,e,i,r,n){var o,a,s,l=t._readableState;null===e?(l.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,w(t)}(t,l)):(n||(o=function(t,e){var i;r=e,u.isBuffer(r)||r instanceof c||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var r;return i}(l,e)),o?t.emit("error",o):l.objectMode||e&&0<e.length?("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===u.prototype||(a=e,e=u.from(a)),r?l.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):d(t,l,e,!0):l.ended?t.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!i?(e=l.decoder.write(e),l.objectMode||0!==e.length?d(t,l,e,!1):C(t,l)):d(t,l,e,!1))):r||(l.reading=!1));return!(s=l).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function d(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&w(t)),C(t,e)}Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),p.prototype.destroy=r.destroy,p.prototype._undestroy=r.undestroy,p.prototype._destroy=function(t,e){this.push(null),e(t)},p.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),i=!0),f(this,t,e,!1,i)},p.prototype.unshift=function(t){return f(this,t,null,!0,!1)},p.prototype.isPaused=function(){return!1===this._readableState.flowing},p.prototype.setEncoding=function(t){return s||(s=D("fXKp").StringDecoder),this._readableState.decoder=new s(t),this._readableState.encoding=t,this};var m=8388608;function x(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=(m<=(i=t)?i=m:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var i}function w(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(b("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?g.nextTick(S,t):S(t))}function S(t){b("emit readable"),t.emit("readable"),M(t)}function C(t,e){e.readingMore||(e.readingMore=!0,g.nextTick(E,t,e))}function E(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(b("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function T(t){b("readable nexttick read 0"),t.read(0)}function k(t,e){e.reading||(b("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),M(t),e.flowing&&!e.reading&&t.read(0)}function M(t){var e=t._readableState;for(b("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,r=1,n=i.data;t-=n.length;for(;i=i.next;){var o=i.data,a=t>o.length?o.length:t;if(a===o.length?n+=o:n+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i).data=o.slice(a);break}++r}return e.length-=r,n}(t,e):function(t,e){var i=u.allocUnsafe(t),r=e.head,n=1;r.data.copy(i),t-=r.data.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(i,i.length-t,0,a),0===(t-=a)){a===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r).data=o.slice(a);break}++n}return e.length-=n,i}(t,e);return r}(t,e.buffer,e.decoder),i);var i}function A(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,g.nextTick(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function I(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}p.prototype.read=function(t){b("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return b("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?A(this):w(this),null;if(0===(t=x(t,e))&&e.ended)return 0===e.length&&A(this),null;var r,n=e.needReadable;return b("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&b("length less than watermark",n=!0),e.ended||e.reading?b("reading or ended",n=!1):n&&(b("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=x(i,e))),null===(r=0<t?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&A(this)),null!==r&&this.emit("data",r),r},p.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},p.prototype.pipe=function(i,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=i;break;case 1:n.pipes=[n.pipes,i];break;default:n.pipes.push(i)}n.pipesCount+=1,b("pipe count=%d opts=%j",n.pipesCount,t);var e=(!t||!1!==t.end)&&i!==y.stdout&&i!==y.stderr?a:m;function o(t,e){b("onunpipe"),t===r&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,b("cleanup"),i.removeListener("close",f),i.removeListener("finish",d),i.removeListener("drain",l),i.removeListener("error",p),i.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",h),u=!0,!n.awaitDrain||i._writableState&&!i._writableState.needDrain||l())}function a(){b("onend"),i.end()}n.endEmitted?g.nextTick(e):r.once("end",e),i.on("unpipe",o);var s,l=(s=r,function(){var t=s._readableState;b("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&_(s,"data")&&(t.flowing=!0,M(s))});i.on("drain",l);var u=!1;var c=!1;function h(t){b("ondata"),(c=!1)!==i.write(t)||c||((1===n.pipesCount&&n.pipes===i||1<n.pipesCount&&-1!==I(n.pipes,i))&&!u&&(b("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,c=!0),r.pause())}function p(t){b("onerror",t),m(),i.removeListener("error",p),0===_(i,"error")&&i.emit("error",t)}function f(){i.removeListener("finish",d),m()}function d(){b("onfinish"),i.removeListener("close",f),m()}function m(){b("unpipe"),r.unpipe(i)}return r.on("data",h),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?v(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(i,"error",p),i.once("close",f),i.once("finish",d),i.emit("pipe",r),n.flowing||(b("pipe resume"),r.resume()),i},p.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)r[o].emit("unpipe",this,i);return this}var a=I(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},p.prototype.addListener=p.prototype.on=function(t,e){var i=n.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&w(this):g.nextTick(T,this))}return i},p.prototype.resume=function(){var t,e,i=this._readableState;return i.flowing||(b("resume"),i.flowing=!0,t=this,(e=i).resumeScheduled||(e.resumeScheduled=!0,g.nextTick(k,t,e))),this},p.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this},p.prototype.wrap=function(e){var i=this,r=this._readableState,n=!1;for(var t in e.on("end",function(){if(b("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),e.on("data",function(t){(b("wrapped data"),r.decoder&&(t=r.decoder.write(t)),r.objectMode&&null==t)||(r.objectMode||t&&t.length)&&(i.push(t)||(n=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<h.length;o++)e.on(h[o],this.emit.bind(this,h[o]));return this._read=function(t){b("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(p.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),p._fromList=P}).call(this,D("yLpj"),D("8oxB"))},sO7R:function(t,e,i){},sZro:function(t,e,i){"use strict";var r=i("lm0R"),n=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=h;var o=i("Onz0");o.inherits=i("P7XM");var a=i("rXFu"),s=i("3BRs");o.inherits(h,a);for(var l=n(s.prototype),u=0;u<l.length;u++){var c=l[u];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},stYL:function(t,e,i){"use strict";e.__esModule=!0,e.default={el:{colorpicker:{confirm:"OK",clear:"Clear"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:""},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"}}}},t9FE:function(t,e,i){(function(i){function r(t){try{if(!i.localStorage)return!1}catch(t){return!1}var e=i.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var i=!1;return function(){if(!i){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}}).call(this,i("yLpj"))},tDEs:function(t,e,i){},tcIR:function(t,e,i){},tjUo:function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"dark",function(){return Gt}),n.d(i,"light",function(){return Ht});var o={};n.r(o),n.d(o,"WebMap",function(){return Re}),n.d(o,"LayerList",function(){return je}),n.d(o,"Pan",function(){return Te}),n.d(o,"Zoom",function(){return Fe}),n.d(o,"Scale",function(){return Le}),n.d(o,"Chart",function(){return oi}),n.d(o,"Map",function(){return ai}),n.d(o,"MiniMap",function(){return ci}),n.d(o,"Measure",function(){return Si}),n.d(o,"Search",function(){return ki}),n.d(o,"Legend",function(){return Pi}),n.d(o,"Query",function(){return zi}),n.d(o,"Indicator",function(){return Fi}),n.d(o,"Text",function(){return Ri}),n.d(o,"TimeText",function(){return Bi}),n.d(o,"Progress",function(){return Ni}),n.d(o,"Icon",function(){return ji}),n.d(o,"LiquidFill",function(){return $i}),n.d(o,"WebScene",function(){return Wi}),n.d(o,"RasterLayer",function(){return Zi}),n.d(o,"VectorTileLayer",function(){return Xi}),n.d(o,"MapvLayer",function(){return Yi}),n.d(o,"DeckglLayer",function(){return tr}),n.d(o,"DataFlowLayer",function(){return ir}),n.d(o,"EchartsLayer",function(){return ar}),n.d(o,"HeatmapLayer",function(){return lr}),n.d(o,"ClusterLayer",function(){return cr}),n.d(o,"RanksymbolThemeLayer",function(){return pr}),n.d(o,"LabelThemeLayer",function(){return dr}),n.d(o,"RangeThemeLayer",function(){return yr}),n.d(o,"UniqueThemeLayer",function(){return vr}),n.d(o,"GraphThemeLayer",function(){return br}),n.d(o,"OpenFile",function(){return Lr}),n.d(o,"GeojsonLayer",function(){return Mr});var r={};n.r(r),n.d(r,"AddressMatchParameter",function(){return Ir}),n.d(r,"iPortalDataParameter",function(){return Ai}),n.d(r,"RestDataParameter",function(){return Li}),n.d(r,"RestMapParameter",function(){return Ii}),n.d(r,"CircleStyle",function(){return Or}),n.d(r,"FillStyle",function(){return Dr}),n.d(r,"LineStyle",function(){return zr}),n.d(r,"HeatMapStyle",function(){return Fr});var a={};n.r(a),n.d(a,"EchartsDataService",function(){return ri}),n.d(a,"FileReaderUtil",function(){return Er}),n.d(a,"iPortalDataService",function(){return Xe}),n.d(a,"iServerRestService",function(){return Ze}),n.d(a,"formatter",function(){return ii});n("vk/3"),n("RQ3N");var s=n("iWqV"),l=n.n(s),u=(n("D7fx"),n("9SnE")),c=n.n(u),h=(n("9Plv"),n("wsxZ")),p=n.n(h),f=(n("eg8l"),n("D2yo")),d=n.n(f),m=(n("azA5"),n("woQv")),y=n.n(m),g=(n("VGZy"),n("7N9w")),v=n.n(g),_=(n("OKBm"),n("rUEw")),b=n.n(_),x=(n("EMu8"),n("8606")),w=n.n(x),S=(n("sO7R"),n("0YDX")),C=n.n(S),E=(n("ozUZ"),n("wLtx")),T=n.n(E),k=(n("ZhHq"),n("53J1")),M=n.n(k),P=(n("Hxq+"),n("TkuN")),A=n.n(P),L=(n("tcIR"),n("IM8Y")),I=n.n(L),O=(n("uODI"),n("pMSX")),D=n.n(O),z=(n("VgtF"),n("3Nwd")),F=n.n(z),R=(n("GVEf"),n("7t/g")),B=n.n(R),N=n("i7/w"),j=n.n(N),V=new j.a({mapCache:{},webMapCache:{},getMap:function(t){return this.mapCache[t]},getAllMaps:function(){return this.mapCache},setMap:function(t,e){this.mapCache[t]=e},getWebMap:function(t){return this.webMapCache[t]},getAllWebMap:function(){return this.webMapCache},setWebMap:function(t,e){this.webMapCache[t]=e},getAllWebMapSource:function(){var t=this.getAllWebMap(),e=[];for(var i in t){var r=t[i].map.style._layers;for(var n in r)"raster"!==r[n].type&&e.push(r[n].source)}return e}}),U=n("MVZn"),$=n.n(U);
/*!
 * vue-i18n v8.8.2 
 * (c) 2019 kazuya kawaguchi
 * Released under the MIT License.
 */
function q(t,e){"undefined"!=typeof console&&(console.warn("[vue-i18n] "+t),e&&console.warn(e.stack))}function W(t){return null!==t&&"object"==typeof t}var G=Object.prototype.toString,H="[object Object]";function Z(t){return G.call(t)===H}function X(t){return null==t}function K(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=null,r=null;return 1===t.length?W(t[0])||Array.isArray(t[0])?r=t[0]:"string"==typeof t[0]&&(i=t[0]):2===t.length&&("string"==typeof t[0]&&(i=t[0]),(W(t[1])||Array.isArray(t[1]))&&(r=t[1])),{locale:i,params:r}}function Y(t){return JSON.parse(JSON.stringify(t))}var J=Object.prototype.hasOwnProperty;function Q(t){for(var e,i,r=arguments,n=Object(t),o=1;o<arguments.length;o++){var a=r[o];if(null!=a){var s=void 0;for(s in a)e=a,i=s,J.call(e,i)&&(W(a[s])?n[s]=Q(n[s],a[s]):n[s]=a[s])}}return n}function tt(e,i){if(e===i)return!0;var t=W(e),r=W(i);if(!t||!r)return!t&&!r&&String(e)===String(i);try{var n=Array.isArray(e),o=Array.isArray(i);if(n&&o)return e.length===i.length&&e.every(function(t,e){return tt(t,i[e])});if(n||o)return!1;var a=Object.keys(e),s=Object.keys(i);return a.length===s.length&&a.every(function(t){return tt(e[t],i[t])})}catch(t){return!1}}var et,it={beforeCreate:function(){var e=this.$options;if(e.i18n=e.i18n||(e.__i18n?{}:null),e.i18n)if(e.i18n instanceof Tt){if(e.__i18n)try{var i={};e.__i18n.forEach(function(t){i=Q(i,JSON.parse(t))}),Object.keys(i).forEach(function(t){e.i18n.mergeLocaleMessage(t,i[t])})}catch(t){0}this._i18n=e.i18n,this._i18nWatcher=this._i18n.watchI18nData(),this._i18n.subscribeDataChanging(this),this._subscribing=!0}else if(Z(e.i18n)){if(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Tt&&(e.i18n.root=this.$root,e.i18n.formatter=this.$root.$i18n.formatter,e.i18n.fallbackLocale=this.$root.$i18n.fallbackLocale,e.i18n.silentTranslationWarn=this.$root.$i18n.silentTranslationWarn,e.i18n.silentFallbackWarn=this.$root.$i18n.silentFallbackWarn,e.i18n.pluralizationRules=this.$root.$i18n.pluralizationRules,e.i18n.preserveDirectiveContent=this.$root.$i18n.preserveDirectiveContent),e.__i18n)try{var r={};e.__i18n.forEach(function(t){r=Q(r,JSON.parse(t))}),e.i18n.messages=r}catch(t){0}this._i18n=new Tt(e.i18n),this._i18nWatcher=this._i18n.watchI18nData(),this._i18n.subscribeDataChanging(this),this._subscribing=!0,(void 0===e.i18n.sync||e.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale())}else 0;else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Tt?(this._i18n=this.$root.$i18n,this._i18n.subscribeDataChanging(this),this._subscribing=!0):e.parent&&e.parent.$i18n&&e.parent.$i18n instanceof Tt&&(this._i18n=e.parent.$i18n,this._i18n.subscribeDataChanging(this),this._subscribing=!0)},beforeDestroy:function(){if(this._i18n){var t=this;this.$nextTick(function(){t._subscribing&&(t._i18n.unsubscribeDataChanging(t),delete t._subscribing),t._i18nWatcher&&(t._i18nWatcher(),t._i18n.destroyVM(),delete t._i18nWatcher),t._localeWatcher&&(t._localeWatcher(),delete t._localeWatcher),t._i18n=null})}}},rt={name:"i18n",functional:!0,props:{tag:{type:String,default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(t,e){var i=e.props,r=e.data,n=e.children,o=e.parent.$i18n;if(n=(n||[]).filter(function(t){return t.tag||(t.text=t.text.trim())}),!o)return n;var a=i.path,s=i.locale,l={},u=i.places||{},c=(Array.isArray(u)?u.length:Object.keys(u).length,n.every(function(t){if(t.data&&t.data.attrs){var e=t.data.attrs.place;return void 0!==e&&""!==e}}));return Array.isArray(u)?u.forEach(function(t,e){l[e]=t}):Object.keys(u).forEach(function(t){l[t]=u[t]}),n.forEach(function(t,e){var i=c?""+t.data.attrs.place:""+e;l[i]=t}),t(i.tag,r,o.i(a,s,l))}};function nt(t,e,i){st(t,i)&&lt(t,e,i)}function ot(t,e,i,r){if(st(t,i)){var n,o,a=i.context.$i18n;if(n=t,o=i.context,n._locale!==o.$i18n.locale||!tt(e.value,e.oldValue)||!tt(t._localeMessage,a.getLocaleMessage(a.locale)))lt(t,e,i)}}function at(t,e,i,r){if(i.context){var n=i.context.$i18n||{};e.modifiers.preserve||n.preserveDirectiveContent||(t.textContent=""),t._vt=void 0,delete t._vt,t._locale=void 0,delete t._locale,t._localeMessage=void 0,delete t._localeMessage}else q("Vue instance does not exists in VNode context")}function st(t,e){var i=e.context;return i?!!i.$i18n||(q("VueI18n instance does not exists in Vue instance"),!1):(q("Vue instance does not exists in VNode context"),!1)}function lt(t,e,i){var r,n,o=function(t){var e,i,r,n;"string"==typeof t?e=t:Z(t)&&(e=t.path,i=t.locale,r=t.args,n=t.choice);return{path:e,locale:i,args:r,choice:n}}(e.value),a=o.path,s=o.locale,l=o.args,u=o.choice;if(a||s||l)if(a){var c=i.context;t._vt=t.textContent=u?(r=c.$i18n).tc.apply(r,[a,u].concat(ut(s,l))):(n=c.$i18n).t.apply(n,[a].concat(ut(s,l))),t._locale=c.$i18n.locale,t._localeMessage=c.$i18n.getLocaleMessage(c.$i18n.locale)}else q("`path` is required in v-t directive");else q("value type not supported")}function ut(t,e){var i=[];return t&&i.push(t),e&&(Array.isArray(e)||Z(e))&&i.push(e),i}function ct(t){ct.installed=!0;var e;(et=t).version&&Number(et.version.split(".")[0]);(e=et).prototype.hasOwnProperty("$i18n")||Object.defineProperty(e.prototype,"$i18n",{get:function(){return this._i18n}}),e.prototype.$t=function(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];var r=this.$i18n;return r._t.apply(r,[t,r.locale,r._getMessages(),this].concat(e))},e.prototype.$tc=function(t,e){for(var i=[],r=arguments.length-2;0<r--;)i[r]=arguments[r+2];var n=this.$i18n;return n._tc.apply(n,[t,n.locale,n._getMessages(),this,e].concat(i))},e.prototype.$te=function(t,e){var i=this.$i18n;return i._te(t,i.locale,i._getMessages(),e)},e.prototype.$d=function(t){for(var e,i=[],r=arguments.length-1;0<r--;)i[r]=arguments[r+1];return(e=this.$i18n).d.apply(e,[t].concat(i))},e.prototype.$n=function(t){for(var e,i=[],r=arguments.length-1;0<r--;)i[r]=arguments[r+1];return(e=this.$i18n).n.apply(e,[t].concat(i))},et.mixin(it),et.directive("t",{bind:nt,update:ot,unbind:at}),et.component(rt.name,rt),et.config.optionMergeStrategies.i18n=function(t,e){return void 0===e?t:e}}var ht=function(){this._caches=Object.create(null)};ht.prototype.interpolate=function(t,e){if(!e)return[t];var i=this._caches[t];return i||(i=function(t){var e=[],i=0,r="";for(;i<t.length;){var n=t[i++];if("{"===n){r&&e.push({type:"text",value:r});var o=r="";for(n=t[i++];void 0!==n&&"}"!==n;)o+=n,n=t[i++];var a="}"===n,s=pt.test(o)?"list":a&&ft.test(o)?"named":"unknown";e.push({value:o,type:s})}else"%"===n?"{"!==t[i]&&(r+=n):r+=n}return r&&e.push({type:"text",value:r}),e}(t),this._caches[t]=i),function(t,e){var i=[],r=0,n=Array.isArray(e)?"list":W(e)?"named":"unknown";if("unknown"===n)return i;for(;r<t.length;){var o=t[r];switch(o.type){case"text":i.push(o.value);break;case"list":i.push(e[parseInt(o.value,10)]);break;case"named":"named"===n&&i.push(e[o.value]);break;case"unknown":0}r++}return i}(i,e)};var pt=/^(?:\d)+/,ft=/^(?:\w)+/;var dt=[];dt[0]={ws:[0],ident:[3,0],"[":[4],eof:[7]},dt[1]={ws:[1],".":[2],"[":[4],eof:[7]},dt[2]={ws:[2],ident:[3,0],0:[3,0],number:[3,0]},dt[3]={ident:[3,0],0:[3,0],number:[3,0],ws:[1,1],".":[2,1],"[":[4,1],eof:[7,1]},dt[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],eof:8,else:[4,0]},dt[5]={"'":[4,0],eof:8,else:[5,0]},dt[6]={'"':[4,0],eof:8,else:[6,0]};var mt=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function yt(t){if(null==t)return"eof";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}function gt(t){var e,i,r,n=t.trim();return("0"!==t.charAt(0)||!isNaN(t))&&(r=n,mt.test(r)?(i=(e=n).charCodeAt(0))!==e.charCodeAt(e.length-1)||34!==i&&39!==i?e:e.slice(1,-1):"*"+n)}var vt=function(){this._cache=Object.create(null)};vt.prototype.parsePath=function(t){var e=this._cache[t];return e||(e=function(e){var t,i,r,n,o,a,s,l=[],u=-1,c=0,h=0,p=[];function f(){var t=e[u+1];if(5===c&&"'"===t||6===c&&'"'===t)return u++,r="\\"+t,p[0](),!0}for(p[1]=function(){void 0!==i&&(l.push(i),i=void 0)},p[0]=function(){void 0===i?i=r:i+=r},p[2]=function(){p[0](),h++},p[3]=function(){if(0<h)h--,c=4,p[0]();else{if(h=0,!1===(i=gt(i)))return!1;p[1]()}};null!==c;)if("\\"!==(t=e[++u])||!f()){if(n=yt(t),8===(o=(s=dt[c])[n]||s.else||8))return;if(c=o[0],(a=p[o[1]])&&(r=void 0===(r=o[2])?t:r,!1===a()))return;if(7===c)return l}}(t))&&(this._cache[t]=e),e||[]},vt.prototype.getPathValue=function(t,e){if(!W(t))return null;var i=this.parsePath(e);if(0===i.length)return null;for(var r=i.length,n=t,o=0;o<r;){var a=n[i[o]];if(void 0===a)return null;n=a,o++}return n};var _t,bt=["style","currency","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","localeMatcher","formatMatcher"],xt=/(?:@(?:\.[a-z]+)?:(?:[\w\-_|.]+|\([\w\-_|.]+\)))/g,wt=/^@(?:\.([a-z]+))?:/,St=/[()]/g,Ct={upper:function(t){return t.toLocaleUpperCase()},lower:function(t){return t.toLocaleLowerCase()}},Et=new ht,Tt=function(t){var i=this;void 0===t&&(t={}),!et&&"undefined"!=typeof window&&window.Vue&&ct(window.Vue);var e=t.locale||"en-US",r=t.fallbackLocale||"en-US",n=t.messages||{},o=t.dateTimeFormats||{},a=t.numberFormats||{};this._vm=null,this._formatter=t.formatter||Et,this._missing=t.missing||null,this._root=t.root||null,this._sync=void 0===t.sync||!!t.sync,this._fallbackRoot=void 0===t.fallbackRoot||!!t.fallbackRoot,this._silentTranslationWarn=void 0!==t.silentTranslationWarn&&!!t.silentTranslationWarn,this._silentFallbackWarn=void 0!==t.silentFallbackWarn&&!!t.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new vt,this._dataListeners=[],this._preserveDirectiveContent=void 0!==t.preserveDirectiveContent&&!!t.preserveDirectiveContent,this.pluralizationRules=t.pluralizationRules||{},this._exist=function(t,e){return!(!t||!e)&&(!!i._path.getPathValue(t,e)||!!t[e])},this._initVM({locale:e,fallbackLocale:r,messages:n,dateTimeFormats:o,numberFormats:a})},kt={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0}};Tt.prototype._initVM=function(t){var e=et.config.silent;et.config.silent=!0,this._vm=new et({data:t}),et.config.silent=e},Tt.prototype.destroyVM=function(){this._vm.$destroy()},Tt.prototype.subscribeDataChanging=function(t){this._dataListeners.push(t)},Tt.prototype.unsubscribeDataChanging=function(t){!function(t,e){if(t.length){var i=t.indexOf(e);if(-1<i)t.splice(i,1)}}(this._dataListeners,t)},Tt.prototype.watchI18nData=function(){var e=this;return this._vm.$watch("$data",function(){for(var t=e._dataListeners.length;t--;)et.nextTick(function(){e._dataListeners[t]&&e._dataListeners[t].$forceUpdate()})},{deep:!0})},Tt.prototype.watchLocale=function(){if(!this._sync||!this._root)return null;var e=this._vm;return this._root.$i18n.vm.$watch("locale",function(t){e.$set(e,"locale",t),e.$forceUpdate()},{immediate:!0})},kt.vm.get=function(){return this._vm},kt.messages.get=function(){return Y(this._getMessages())},kt.dateTimeFormats.get=function(){return Y(this._getDateTimeFormats())},kt.numberFormats.get=function(){return Y(this._getNumberFormats())},kt.locale.get=function(){return this._vm.locale},kt.locale.set=function(t){this._vm.$set(this._vm,"locale",t)},kt.fallbackLocale.get=function(){return this._vm.fallbackLocale},kt.fallbackLocale.set=function(t){this._vm.$set(this._vm,"fallbackLocale",t)},kt.missing.get=function(){return this._missing},kt.missing.set=function(t){this._missing=t},kt.formatter.get=function(){return this._formatter},kt.formatter.set=function(t){this._formatter=t},kt.silentTranslationWarn.get=function(){return this._silentTranslationWarn},kt.silentTranslationWarn.set=function(t){this._silentTranslationWarn=t},kt.silentFallbackWarn.get=function(){return this._silentFallbackWarn},kt.silentFallbackWarn.set=function(t){this._silentFallbackWarn=t},kt.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},kt.preserveDirectiveContent.set=function(t){this._preserveDirectiveContent=t},Tt.prototype._getMessages=function(){return this._vm.messages},Tt.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},Tt.prototype._getNumberFormats=function(){return this._vm.numberFormats},Tt.prototype._warnDefault=function(t,e,i,r,n){if(!X(i))return i;if(this._missing){var o=this._missing.apply(null,[t,e,r,n]);if("string"==typeof o)return o}else 0;return e},Tt.prototype._isFallbackRoot=function(t){return!t&&!X(this._root)&&this._fallbackRoot},Tt.prototype._isSilentFallback=function(t){return this._silentFallbackWarn&&(this._isFallbackRoot()||t!==this.fallbackLocale)},Tt.prototype._interpolate=function(t,e,i,r,n,o,a){if(!e)return null;var s,l=this._path.getPathValue(e,i);if(Array.isArray(l)||Z(l))return l;if(X(l)){if(!Z(e))return null;if("string"!=typeof(s=e[i]))return null}else{if("string"!=typeof l)return null;s=l}return(0<=s.indexOf("@:")||0<=s.indexOf("@."))&&(s=this._link(t,e,s,r,"raw",o,a)),this._render(s,n,o,i)},Tt.prototype._link=function(t,e,i,r,n,o,a){var s=i,l=s.match(xt);for(var u in l)if(l.hasOwnProperty(u)){var c=l[u],h=c.match(wt),p=h[0],f=h[1],d=c.replace(p,"").replace(St,"");if(a.includes(d))return s;a.push(d);var m=this._interpolate(t,e,d,r,"raw"===n?"string":n,"raw"===n?void 0:o,a);if(this._isFallbackRoot(m)){if(!this._root)throw Error("unexpected error");var y=this._root.$i18n;m=y._translate(y._getMessages(),y.locale,y.fallbackLocale,d,r,n,o)}m=this._warnDefault(t,d,m,r,Array.isArray(o)?o:[o]),Ct.hasOwnProperty(f)&&(m=Ct[f](m)),a.pop(),s=m?s.replace(c,m):s}return s},Tt.prototype._render=function(t,e,i,r){var n=this._formatter.interpolate(t,i,r);return n||(n=Et.interpolate(t,i,r)),"string"===e?n.join(""):n},Tt.prototype._translate=function(t,e,i,r,n,o,a){var s=this._interpolate(e,t[e],r,n,o,a,[r]);return X(s)&&X(s=this._interpolate(i,t[i],r,n,o,a,[r]))?null:s},Tt.prototype._t=function(t,e,i,r){for(var n,o=[],a=arguments.length-4;0<a--;)o[a]=arguments[a+4];if(!t)return"";var s=K.apply(void 0,o),l=s.locale||e,u=this._translate(i,l,this.fallbackLocale,t,r,"string",s.params);if(this._isFallbackRoot(u)){if(!this._root)throw Error("unexpected error");return(n=this._root).$t.apply(n,[t].concat(o))}return this._warnDefault(l,t,u,r,o)},Tt.prototype.t=function(t){for(var e,i=[],r=arguments.length-1;0<r--;)i[r]=arguments[r+1];return(e=this)._t.apply(e,[t,this.locale,this._getMessages(),null].concat(i))},Tt.prototype._i=function(t,e,i,r,n){var o=this._translate(i,e,this.fallbackLocale,t,r,"raw",n);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(t,e,n)}return this._warnDefault(e,t,o,r,[n])},Tt.prototype.i=function(t,e,i){return t?("string"!=typeof e&&(e=this.locale),this._i(t,e,this._getMessages(),null,i)):""},Tt.prototype._tc=function(t,e,i,r,n){for(var o,a=[],s=arguments.length-5;0<s--;)a[s]=arguments[s+5];if(!t)return"";void 0===n&&(n=1);var l={count:n,n:n},u=K.apply(void 0,a);return u.params=Object.assign(l,u.params),a=null===u.locale?[u.params]:[u.locale,u.params],this.fetchChoice((o=this)._t.apply(o,[t,e,i,r].concat(a)),n)},Tt.prototype.fetchChoice=function(t,e){if(!t&&"string"!=typeof t)return null;var i=t.split("|");return i[e=this.getChoiceIndex(e,i.length)]?i[e].trim():t},Tt.prototype.getChoiceIndex=function(t,e){var i,r;return this.locale in this.pluralizationRules?this.pluralizationRules[this.locale].apply(this,[t,e]):(i=t,r=e,i=Math.abs(i),2===r?i?1<i?1:0:1:i?Math.min(i,2):0)},Tt.prototype.tc=function(t,e){for(var i,r=[],n=arguments.length-2;0<n--;)r[n]=arguments[n+2];return(i=this)._tc.apply(i,[t,this.locale,this._getMessages(),null,e].concat(r))},Tt.prototype._te=function(t,e,i){for(var r=[],n=arguments.length-3;0<n--;)r[n]=arguments[n+3];var o=K.apply(void 0,r).locale||e;return this._exist(i[o],t)},Tt.prototype.te=function(t,e){return this._te(t,this.locale,this._getMessages(),e)},Tt.prototype.getLocaleMessage=function(t){return Y(this._vm.messages[t]||{})},Tt.prototype.setLocaleMessage=function(t,e){this._vm.$set(this._vm.messages,t,e)},Tt.prototype.mergeLocaleMessage=function(t,e){this._vm.$set(this._vm.messages,t,Q(this._vm.messages[t]||{},e))},Tt.prototype.getDateTimeFormat=function(t){return Y(this._vm.dateTimeFormats[t]||{})},Tt.prototype.setDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,e)},Tt.prototype.mergeDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,Q(this._vm.dateTimeFormats[t]||{},e))},Tt.prototype._localizeDateTime=function(t,e,i,r,n){var o=e,a=r[o];if((X(a)||X(a[n]))&&(a=r[o=i]),X(a)||X(a[n]))return null;var s=a[n],l=o+"__"+n,u=this._dateTimeFormatters[l];return u||(u=this._dateTimeFormatters[l]=new Intl.DateTimeFormat(o,s)),u.format(t)},Tt.prototype._d=function(t,e,i){if(!i)return new Intl.DateTimeFormat(e).format(t);var r=this._localizeDateTime(t,e,this.fallbackLocale,this._getDateTimeFormats(),i);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(t,i,e)}return r||""},Tt.prototype.d=function(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];var r=this.locale,n=null;return 1===e.length?"string"==typeof e[0]?n=e[0]:W(e[0])&&(e[0].locale&&(r=e[0].locale),e[0].key&&(n=e[0].key)):2===e.length&&("string"==typeof e[0]&&(n=e[0]),"string"==typeof e[1]&&(r=e[1])),this._d(t,r,n)},Tt.prototype.getNumberFormat=function(t){return Y(this._vm.numberFormats[t]||{})},Tt.prototype.setNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,e)},Tt.prototype.mergeNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,Q(this._vm.numberFormats[t]||{},e))},Tt.prototype._localizeNumber=function(t,e,i,r,n,o){var a=e,s=r[a];if((X(s)||X(s[n]))&&(s=r[a=i]),X(s)||X(s[n]))return null;var l,u=s[n];if(o)l=new Intl.NumberFormat(a,Object.assign({},u,o));else{var c=a+"__"+n;(l=this._numberFormatters[c])||(l=this._numberFormatters[c]=new Intl.NumberFormat(a,u))}return l.format(t)},Tt.prototype._n=function(t,e,i,r){if(!Tt.availabilities.numberFormat)return"";if(!i)return(r?new Intl.NumberFormat(e,r):new Intl.NumberFormat(e)).format(t);var n=this._localizeNumber(t,e,this.fallbackLocale,this._getNumberFormats(),i,r);if(this._isFallbackRoot(n)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(t,Object.assign({},{key:i,locale:e},r))}return n||""},Tt.prototype.n=function(t){for(var r=[],e=arguments.length-1;0<e--;)r[e]=arguments[e+1];var i=this.locale,n=null,o=null;return 1===r.length?"string"==typeof r[0]?n=r[0]:W(r[0])&&(r[0].locale&&(i=r[0].locale),r[0].key&&(n=r[0].key),o=Object.keys(r[0]).reduce(function(t,e){var i;return bt.includes(e)?Object.assign({},t,((i={})[e]=r[0][e],i)):t},null)):2===r.length&&("string"==typeof r[0]&&(n=r[0]),"string"==typeof r[1]&&(i=r[1])),this._n(t,i,n,o)},Object.defineProperties(Tt.prototype,kt),Object.defineProperty(Tt,"availabilities",{get:function(){if(!_t){var t="undefined"!=typeof Intl;_t={dateTimeFormat:t&&void 0!==Intl.DateTimeFormat,numberFormat:t&&void 0!==Intl.NumberFormat}}return _t}}),Tt.install=ct,Tt.version="8.8.2";var Mt=Tt,Pt=n("p46w"),At=n.n(Pt),Lt=n("SJdT"),It=n.n(Lt),Ot=n("stYL"),Dt=n.n(Ot),zt=$()({},Dt.a,{warning:{},success:{},info:{},error:{},commontypes:{restData:"SuperMap Rest Data",restMap:"SuperMap Rest Map",addressMatch:"SuperMap AddressMatch",iportalData:"SuperMap iPortal Data",onlineLocalSearch:"SuperMap Online Local Search"},zoom:{},chart:{},layerList:{title:"Layers"},miniMap:{},pan:{},scale:{},webmap:{},legend:{themeField:"themefield",title:"legend",top:"top",bottom:"bottom"},map:{},search:{noResult:"The result of the search is empty!",noKey:"Search keywords cannot be empty. Please enter your search criteria.",inputPlaceHolder:"Find an address or location",attribute:"Attributes",attributeValue:"Attribute value"},query:{query:"Query",queryJob:"Task",queryReuslt:"Result",attributeCondition:"Attribute Condition",spatialFilter:"Space Filter",mapBounds:"Returns the features of the map's full extent",currentMapBounds:"Returns the features in the current map bounds",applicate:"Applicate",noResult:"No result",resultAlreadyExists:"The current query result already exists!",querying:"In the query",attribute:"Attribute",attributeValue:"Attribute Value",noResults:"The result of the query is empty!",queryFailed:"Query failed!",seviceNotSupport:"This service does not support queries!"},openFile:{fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",fileTypeUnsupported:"File format is not supported!",openFileFail:"Failed to open fileï¼"}}),Ft=n("8NkQ"),Rt=n.n(Ft),Bt=$()({},Rt.a,{warning:{},success:{},info:{},error:{},commontypes:{restData:"SuperMap Rest æ°æ®æå¡",restMap:"SuperMap Rest å°å¾æå¡",addressMatch:"SuperMap å°åå¹éæå¡",iportalData:"SuperMap iPortal æ°æ®",onlineLocalSearch:"SuperMap Online æ¬å°æç´¢"},zoom:{},chart:{},layerList:{title:"å¾å±"},miniMap:{},pan:{},scale:{},webmap:{},legend:{themeField:"ä¸é¢å­æ®µ",title:"å¾ä¾",top:"æé«",bottom:"æä½",noMatchLayer:"æ²¡æå¹éçå¾å±"},measure:{mapMeasure:"å°å¾éç®",measureResult:"æµéç»æ",kilometers:"åç±³",miles:"è±é",meters:"ç±³",yards:"ç ",feet:"è±å°º",squarekilometers:"å¹³æ¹åç±³",squaremiles:"å¹³æ¹è±é",squaremeters:"å¹³æ¹ç±³",squareyards:"å¹³æ¹ç ",squarefeet:"å¹³æ¹è±å°º",distance:"è·ç¦»",area:"é¢ç§¯"},map:{},search:{noResult:"æ¥è¯¢ç»æä¸ºç©ºï¼",noKey:"æç´¢å³é®å­ä¸è½ä¸ºç©ºï¼è¯·è¾å¥æç´¢æ¡ä»¶ã",inputPlaceHolder:"æ¥æ¾å°åæå°ç¹",attribute:"å±æ§",attributeValue:"å±æ§å¼"},query:{query:"æ¥è¯¢",queryJob:"ä»»å¡",queryReuslt:"ç»æ",attributeCondition:"å±æ§æ¡ä»¶",spatialFilter:"ç©ºé´è¿æ»¤å¨",mapBounds:"è¿åå°å¾å¨å¾èå´çè¦ç´ ",currentMapBounds:"è¿åå½åå°å¾èå´åçè¦ç´ ",applicate:"åºç¨",noResult:"æ ç»æ",resultAlreadyExists:"å½åæ¥è¯¢ç»æå·²ç»å­å¨!",querying:"æ¥è¯¢ä¸­",attribute:"å±æ§",attributeValue:"å±æ§å¼",noResults:"æ¥è¯¢ç»æä¸ºç©ºï¼",queryFailed:"æ¥è¯¢å¤±è´¥!",seviceNotSupport:"æ­¤æå¡ä¸æ¯ææ¥è¯¢ï¼"},openFile:{fileSizeExceeded:"æä»¶å¤§å°è¶éï¼æä»¶å¤§å°ä¸å¾è¶è¿ 10Mï¼",fileTypeUnsupported:"ä¸æ¯æè¯¥æä»¶æ ¼å¼ï¼",openFileFail:"æå¼æä»¶å¤±è´¥ï¼",openFileSuccess:"æå¼æä»¶æå!",selectFile:"éæ©æä»¶"}}),Nt=n("zT9C"),jt=n.n(Nt);j.a.prototype.hasOwnProperty("$i18n")||Object.defineProperty(j.a.prototype,"$i18n",{get:function(){return Ut}}),j.a.use(Mt);var Vt={en:$()({},zt),zh:$()({},Bt)},Ut=new Mt({locale:function(){var t=At.a.get("language");t||(t="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage);if(t){if(0===t.indexOf("zh"))return"zh";if(0===t.indexOf("en"))return"en"}return"zh"}(),fallbackLocale:"zh",messages:Vt});function $t(t){Ut.mergeLocaleMessage(Ut.locale,t)}It.a.i18n(function(t,e){return Ut.t(t,e)});var qt={en:jt()(zt),zh:jt()(Bt)},Wt=Ut;var Gt=n("MaZv"),Ht=n("26Y8"),Zt=n("lwsE"),Xt=n.n(Zt),Kt=n("W8MJ"),Yt=n.n(Kt),Jt=n("a1gu"),Qt=n.n(Jt),te=n("Nsbk"),ee=n.n(te),ie=n("7W2i"),re=n.n(ie),ne=n("iizB"),oe=n.n(ne),ae=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this))).map=t,e}return re()(i,t),i}(oe.a.Evented),se=function t(){Xt()(this,t)},le=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this))).id=t.source,e.sourceLayerList={},e.layers=[],e.type=null,e}return re()(i,t),Yt()(i,[{key:"addLayer",value:function(t,e){e?(this.sourceLayerList[e]||(this.sourceLayerList[e]=[]),this.sourceLayerList[e].push(t)):this.sourceLayerList=void 0,this.layers.push(t),this.type=t.type,[t.visibility,this.visibility].includes("visible")?this.visibility="visible":this.visibility="none"}}]),i}(se),ue=function(t){function i(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Xt()(this,i),(t=Qt()(this,ee()(i).call(this))).id=e.id,t.maxzoom=e.maxzoom,t.minzoom=e.minzoom,t.source=e.source,t.type=e.type,t.visibility=e.visibility,t}return re()(i,t),i}(se),ce=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this))).map=t.map,e.style=e.map.getStyle(),e.layers=e.map.getStyle().layers,e.detailLayers=null,e.sourceList={},e._initLayers(),e._initSource(),e}return re()(i,t),Yt()(i,[{key:"getSourceList",value:function(){return this.sourceList}},{key:"getLegendStyle",value:function(t){return t?this.sourceList[t]?this.sourceList[t].style:"":(Object.values(this.sourceList)||[]).filter(function(t){return!!t.style})}},{key:"getLayers",value:function(){return this.detailLayers}},{key:"getLayersBySourceLayer",value:function(t,e){return this.sourceList[t].sourceLayerList[e]}},{key:"getSourceLayersBySource",value:function(t){return this.sourceList[t].sourceLayerList}},{key:"addSourceStyle",value:function(t,e){this.sourceList[t]&&(this.sourceList[t].style=e)}},{key:"_initLayers",value:function(){var e=this;this.layers&&(this.detailLayers=this.layers.map(function(t){return e.map.getLayer(t.id)}))}},{key:"_initSource",value:function(){var e=this;this.detailLayers&&this.detailLayers.forEach(function(t){e.sourceList[t.source]||(e.sourceList[t.source]=new le({source:t.source})),e.sourceList[t.source].addLayer(new ue(t),t.sourceLayer)})}}]),i}(se),he=function(t){return t.forEach(function(t){if("Polygon"===t.geometry.type){var e=t.geometry.coordinates;if(1<e.length){var i=[];e.forEach(function(t){i.push([t])}),t.geometry.coordinates=i,t.geometry.type="MultiPolygon"}}}),t},pe=(n("P09a"),n("e/Qi"),n("xRo1")),fe=n.n(pe),de=n("ATId"),me=n.n(de),ye=n("1PTm"),ge=n.n(ye),ve=["559082264.0287178","279541132.0143589","139770566.0071794","69885283.00358972","34942641.50179486","17471320.75089743","8735660.375448715","4367830.1877224357","2183915.093862179","1091957.546931089","545978.7734655447","272989.7734655447","272989.3867327723","136494.6933663862","68247.34668319309","34123.67334159654","17061.83667079827","8530.918335399136","4265.459167699568","2132.729583849784"],_e=["5.590822640287176E8","2.795411320143588E8","1.397705660071794E8","6.98852830035897E7","3.494264150179485E7","1.7471320750897426E7","8735660.375448713","4367830.187724357","2183915.0938621783","1091957.5469310891","545978.7734655446","272989.3867327723","136494.69336638614","68247.34668319307","34123.673341596535","17061.836670798268","8530.918335399134"],be=["GoogleCRS84Quad","GoogleMapsCompatible"],xe=function(t){function r(t,e){var i;return Xt()(this,r),(i=Qt()(this,ee()(r).call(this))).mapId=t,e=e||{},i.serverUrl=e.serverUrl||"http://www.supermapol.com",i.accessToken=e.accessToken,i.accessKey=e.accessKey,i.withCredentials=e.withCredentials||!1,i.target=e.target||"map",i.excludePortalProxyUrl=e.excludePortalProxyUrl,i.legendList={},i._createWebMap(),i}return re()(r,t),Yt()(r,[{key:"resize",value:function(){this.map.resize()}},{key:"setMapId",value:function(t){this.mapId=t,this._createWebMap()}},{key:"setWebMapOptions",value:function(t){var e=t.serverUrl,i=t.accessToken,r=t.accessKey,n=t.withCredentials,o=t.excludePortalProxyUrl;e&&(this.serverUrl=e),i&&(this.accessToken=i),r&&(this.accessKey=r),n&&(this.withCredentials=n),o&&(this.excludePortalProxyUrl=o),this._createWebMap()}},{key:"setServerUrl",value:function(t){this.serverUrl=t,this._createWebMap()}},{key:"setMapOptions",value:function(t){var e=t.center,i=t.zoom,r=t.maxBounds,n=t.minZoom,o=t.maxZoom,a=t.isWorldCopy,s=t.bearing,l=t.pitch;e&&e.length&&this.map.setCenter(e),i&&this.map.setZoom(i),r&&this.map.setMaxBounds(r),n&&this.map.setMinZoom(n),o&&this.map.setMaxZoom(o),a&&this.map.setRenderWorldCopies(a),s&&this.map.setBearing(s),l&&this.map.setPitch(l)}},{key:"_createWebMap",value:function(){var t=this.serverUrl.split("");"/"!==t[t.length-1]&&(this.serverUrl+="/");var e=this.serverUrl+"web/maps/"+this.mapId+"/map";(this.accessToken||this.accessKey)&&(e+="token="+this.accessToken);var i="getUrlResource.json?url=";if(this.excludePortalProxyUrl&&-1<this.serverUrl.indexOf(i)){var r=this.serverUrl.split(i);1<r.length&&(e=r[0]+i+this.serverUrl+"web/maps/"+this.mapId+"/map.json")}this._getMapInfo(e)}},{key:"_createMap",value:function(t){var e=[],i=t.layers;i&&0<i.length&&i.forEach(function(t){t.labelStyle&&e.push(t.labelStyle.fontFamily)},this),e.push("'supermapol-icons'");var r=e.join(","),n=t.center,o=t.level||0;o=0===o?0:o-1,n||(n=[0,0]),"EPSG:3857"===this.baseProjection&&(n=this._unproject([n.x,n.y])),n=new oe.a.LngLat(n.x,n.y),this.map=new oe.a.Map({container:this.target,center:n,zoom:o,style:{version:8,sources:{},layers:[]},crs:this.baseProjection,localIdeographFontFamily:r||"",renderWorldCopies:!1}),this.fire("mapinitialized",{map:this.map})}},{key:"_getMapInfo",value:function(t){var i=this,e=-1===t.indexOf(".json")?"".concat(t,".json"):t;SuperMap.FetchRequest.get(e,null,{withCredentials:this.withCredentials}).then(function(t){return t.json()}).then(function(t){i.baseProjection=t.projection,i.mapParams={title:t.title,description:t.description};if(!(i.baseProjection in{"EPSG:4490":"EPSG:4490","EPSG:4214":"EPSG:4214","EPSG:4610":"EPSG:4610","EPSG:3857":"EPSG:3857","EPSG:4326":"EPSG:4326"}))throw Error("ä¸æ¯æå½åå°å¾çåæ ç³»");i._createMap(t,i.mapSetting);var e=t.layers;i.map.on("load",function(){i._addBaseMap(t),e&&0!==e.length?i._addLayers(e):i._sendMapToUser(0,0)})}).catch(function(t){i.fire("getmapinfofailed",{error:t})})}},{key:"_addBaseMap",value:function(t){this._createBaseLayer(t)}},{key:"_createBaseLayer",value:function(t){var e=t.baseLayer||t,i=e.layerType;(-1<i.indexOf("TIANDITU_VEC")||-1<i.indexOf("TIANDITU_IMG")||-1<i.indexOf("TIANDITU_TER"))&&(i=i.substr(0,12));var r;switch(i){case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":this._createTiandituLayer(t);break;case"BING":this._createBingLayer(e.name);break;case"WMS":this._createWMSLayer(e);break;case"WMTS":this._createWMTSLayer(e);break;case"TILE":case"SUPERMAP_REST":this._createDynamicTiledLayer(e);break;case"CLOUD":case"CLOUD_BLACK":case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":r={CLOUD:"http://t2.supermapcloud.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:"http://t3.supermapcloud.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"http://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0",GOOGLE_CN:"https://mt{0-3}.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"http://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"http://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"http://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"http://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}[i],this._createXYZLayer(e,r)}}},{key:"_createTiandituLayer",value:function(t){var e=this._getTiandituUrl(t),i=t.baseLayer.layerType,r=Boolean(t.baseLayer.labelLayerVisible),n=e.labelUrl,o=e.tiandituUrl;this._addBaselayer(o,"tianditu-layers-"+i),r&&this._addBaselayer([n],"tianditu-label-layers-"+i)}},{key:"_createWMTSLayer",value:function(i){var r=this,n=this._getWMTSUrl(i);this._filterWMTSIsMatched(i,function(t,e){t&&r._addBaselayer([n],"wmts-layers"+i.name,0,e)})}},{key:"_filterWMTSIsMatched",value:function(l,u){var c=this,h=!1,p=22,t=l.url;SuperMap.FetchRequest.get(t,null,{withCredentials:!1,withoutFormatSuffix:!0}).then(function(t){return t.text()}).then(function(t){for(var e=fe.a||window.convert,i=JSON.parse(e.xml2json(t,{compact:!0,spaces:4})).Capabilities.Contents.TileMatrixSet,r=0;r<i.length;r++)if(i[r]["ows:Identifier"]&&i[r]["ows:Identifier"]._text===l.tileMatrixSet)if(be.includes(i[r].WellKnownScaleSet._text))h=!0;else{if(!i[r].WellKnownScaleSet||"Custom"!==i[r].WellKnownScaleSet._text)throw Error("ä¸æ¯æä¼ å¥ç TileMatrixSet");for(var n=[],o="EPSG:3857"===c.map.crs?ve:_e,a=0,s=o.length;a<s&&i[r].TileMatrix[a]&&o[a]===i[r].TileMatrix[a].ScaleDenominator._text;a++)n.push(o[a]);if(p=n.length-1,0===n.length)throw Error("ä¸æ¯æä¼ å¥ç TileMatrixSet");h=!0}u(h,p)}).catch(function(t){c.fire("getwmtsinfofailed",{error:t,map:c.map})})}},{key:"_createBingLayer",value:function(t){this.addLayer(["http://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadkey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z"],"bing-layers-"+t)}},{key:"_createXYZLayer",value:function(t,e){var i=[];if("OSM"===t.layerType){for(var r=e.match(/\w\-\w/g)[0],n=r[0],o=r[2],a="",s=97;s<123;s++)a+=String.fromCharCode(s);for(var l=a.split(""),u=l.indexOf(n),c=l.indexOf(o),h=l.slice(u,c+1),p=0;p<h.length;p++){var f=e.replace(/{\w\-\w}/g,h[p]);i.push(f)}}else if("GOOGLE_CN"===t.layerType)for(var d=e.match(/\d\-\d/g)[0],m=d[0],y=d[2],g=m;g<=y;g++){var v=e.replace(/{\d\-\d}/g,g);i.push(v)}else i=[e];this._addBaselayer(i,"XYZ-layers-"+t.name)}},{key:"_createDynamicTiledLayer",value:function(t){var e=t.url+"/zxyTileImage.png?z={z}&x={x}&y={y}";this.map.setCRS&&"EPSG:3857"!==this.baseProjection&&(e=t.url+"/image.png?viewBounds={viewBounds}&width={width}&height={height}"),this._addBaselayer([e],"tile-layers-"+t.name)}},{key:"_createWMSLayer",value:function(t){var e=this._getWMSUrl(t);this._addBaselayer([e],"WMS-layers-"+t.name)}},{key:"_createVectorLayer",value:function(t,e){var i=t.style,r=t.featureType,n=t.layerID,o=t.visible,a={};a.style=this._transformStyleToMapBoxGl(i,r),a.layout={visibility:o};var s={type:"geojson",data:{type:"FeatureCollection",features:e}};this._addOverlayToMap(r,s,n,a),"POLYGON"===r&&i.strokeColor&&this._addStrokeLineForPoly(i,s,n+"-strokeLine",o)}},{key:"_getTiandituUrl",value:function(t){for(var e=/t0/gi,i={},r=t.baseLayer.layerType.split("_")[1].toLowerCase(),n=Boolean(t.baseLayer.labelLayerVisible),o="http://t0.tianditu.com/{layer}_{proj}/wmts?",a=o,s="EPSG:4326"===this.baseProjection?"c":"w",l={service:"WMTS",request:"GetTile",style:"default",version:"1.0.0",layer:r,tilematrixSet:s,format:"tiles",width:256,height:256},u=(o+=this._getParamString(l,o)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",r).replace("{proj}",s),c=[],h=0;h<8;h++)c.push(u.replace(e,"t".concat(h)));if(i.tiandituUrl=c,n){var p={vec:"cva",ter:"cta",img:"cia"}[r];l.layer=p,a=(a+=this._getParamString(l,a)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",p).replace("{proj}",s);for(var f=[],d=0;d<8;d++)f.push(a.replace(e,"t".concat(d)));i.labelUrl=f}return i}},{key:"_getWMSUrl",value:function(t){var e=t.url,i=(e=e.split("?")[0]).split("/"),r={service:"WMS",request:"GetMap",layers:i[i.length-1],styles:"",format:"image/png",transparent:"true",version:"1.1.1",width:256,height:256,srs:this.baseProjection},n="EPSG:4326"===this.baseProjection?"{bbox-epsg-4326}":"{bbox-epsg-3857}";return e+=this._getParamString(r,e)+"&bbox=".concat(n)}},{key:"_addLayers",value:function(t){var r,u=this;this.layers=t;var c=0,h=t.length;t.forEach(function(s,l){if(s.dataSource&&s.dataSource.serverId||"MARKER"===s.layerType){var t=s.dataSource?s.dataSource.serverId:s.serverId,e="".concat(u.serverUrl,"web/datas/").concat(t,"/content.json?pageSize=9999999&currentPage=1");t&&SuperMap.FetchRequest.get(e,null,{withCredentials:u.withCredentials}).then(function(t){return t.json()}).then(function(t){if(!1===t.succeed)return c++,u._sendMapToUser(c,h),void u.fire("getlayerdatasourcefailed",{error:t.error,layer:s,map:u.map});t.type&&("JSON"===t.type||"GEOJSON"===t.type?(t.content=JSON.parse(t.content.trim()),r=u._formatGeoJSON(t.content,s)):"EXCEL"!==t.type&&"CSV"!==t.type||(r=u._excelData2Feature(t.content,s)),u._addLayer(s,r,l),c++,u._sendMapToUser(c,h))}).catch(function(t){c++,u._sendMapToUser(c,h),u.fire("getlayerdatasourcefailed",{error:t,layer:s,map:u.map})})}else if("SUPERMAP_REST"===s.layerType||"TILE"===s.layerType||"WMS"===s.layerType||"WMTS"===s.layerType)u._createBaseLayer(s),c++,u._sendMapToUser(c,h);else if(s.dataSource&&"REST_DATA"===s.dataSource.type){var i=s.dataSource;u._getFeatureBySQL(i.url,[i.dataSourseName||s.name],function(t){r=u._parseGeoJsonData2Feature({allDatas:{features:t.result.features.features},fileCode:s.projection,featureProjection:u.baseProjection}),u._addLayer(s,r,l),c++,u._sendMapToUser(c,h)},function(t){c++,u._sendMapToUser(c,h),u.fire("getlayerdatasourcefailed",{error:t,layer:s,map:u.map})})}else s.dataSource&&"REST_MAP"===s.dataSource.type&&s.dataSource.url&&u._queryFeatureBySQL(s.dataSource.url,s.dataSource.layerName,"smid=1",null,null,function(t){var e=t&&t.result.recordsets,i=e&&e[0],r=i.fields;if(i&&r){var n=[];for(var o in r){var a=r[o];0===a.indexOf("Sm")&&"SmID"!==a||n.push(a)}u._getFeatures(n,s,function(t){u._addLayer(s,t,l),c++,u._sendMapToUser(c,h)},function(t){c++,u.fire("getlayerdatasourcefailed",{error:t,layer:s,map:u.map})})}},function(t){u.fire("getlayerdatasourcefailed",{error:t,layer:s,map:u.map})})},this)}},{key:"_getFeatures",value:function(t,e,r,i){var n=this,o=e.dataSource,a=e.projection;this._queryFeatureBySQL(o.url,o.layerName,null,t,null,function(t){var e=t.result.recordsets[0].features.features,i=n._parseGeoJsonData2Feature({allDatas:{features:e},fileCode:a,featureProjection:n.baseProjection},"JSON");r(i)},function(t){i(t)})}},{key:"_addLayer",value:function(t,e,i){var r=t.layerType;t.layerID=r+"-"+t.name+"-"+i,t.visible=t.visible?"visible":"none",e[0]&&"Polygon"===e[0].geometry.type&&(e=he(e)),t.style&&t.filterCondition&&"RANGE"!==r&&"UNIQUE"!==r&&(e=this._getFiterFeatures(t.filterCondition,e)),"VECTOR"===r?"POINT"===t.featureType?"SYMBOL_POINT"===t.style.type?this._createSymbolLayer(t,e):this._createGraphicLayer(t,e):this._createVectorLayer(t,e):"UNIQUE"===r?this._createUniqueLayer(t,e):"RANGE"===r?this._createRangeLayer(t,e):"HEAT"===r?this._createHeatLayer(t,e):"MARKER"===r&&this._createMarkerLayer(t,e),t.labelStyle&&t.labelStyle.labelField&&this._addLabelLayer(t,e)}},{key:"_addLabelLayer",value:function(t,e){var i=t.labelStyle;this.map.addLayer({id:t.layerID+"label",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:e}},paint:{"text-color":i.fill},layout:{"text-field":"{".concat(i.labelField,"}"),"text-size":parseFloat(i.fontSize)||12,"text-offset":i.offsetX?[i.offsetX/10||0,i.offsetY/10||0]:[0,-1.5],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:t.visible}})}},{key:"_createSymbolLayer",value:function(t,e){document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map");var i=t.style,r=t.style.unicode,n=String.fromCharCode(parseInt(r.replace(/^&#x/,""),16)),o=t.layerID;this.map.addSource(o+"-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:o,type:"symbol",source:o+"-source",paint:{"text-color":i.fillColor},layout:{"text-field":n,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:t.visible}}),this.map.getSource(o+"-source").setData({type:"FeatureCollection",features:e})}},{key:"_createGraphicLayer",value:function(n,t){var o=this,a=n.style,e={},s=n.layerID,l={type:"geojson",data:{type:"FeatureCollection",features:t}};if("IMAGE_POINT"===a.type){var i=a.imageInfo,r=i.img;r&&r.src||(i.url=this.serverUrl+i.url),this.map.loadImage(i.url||r.src,function(t,e){t&&console.log(t);var i=2*Number.parseFloat((a.radius/e.height).toFixed(2));o.map.addImage("imageIcon",e),o.map.addLayer({id:s,type:"symbol",source:l,layout:{"icon-image":"imageIcon","icon-size":i,visibility:n.visible}})})}else if("SVG_POINT"===a.type){var u=a.url;this.svgDiv||(this.svgDiv=document.createElement("div"),document.body.appendChild(this.svgDiv)),this._getCanvasFromSVG(u,this.svgDiv,function(r){var t=r.toDataURL("img/png");t&&o.map.loadImage(t,function(t,e){t&&console.log(t);var i=Number.parseFloat((a.radius/r.width).toFixed(2));o.map.addImage("imageIcon",e),o.map.addLayer({id:s,type:"symbol",source:l,layout:{"icon-image":"imageIcon","icon-size":i,visibility:n.visible}})},o)})}else e.style=this._transformStyleToMapBoxGl(a,n.featureType),e.layout={visibility:n.visible},this._addOverlayToMap("POINT",l,s,e)}},{key:"getSourceListModel",value:function(){return this.sourceListModel}},{key:"_createUniqueLayer",value:function(t,e){var i=this._getUniqueStyleGroup(t,e);e=this._getFiterFeatures(t.filterCondition,e);var r=t.style,n={},o=t.themeSetting.themeField,a=t.featureType,s=["match",["get","index"]],l=t.layerID;e.forEach(function(e){i.forEach(function(t){t.value===e.properties[o]&&s.push(e.properties.index,t.color)})}),s.push("#ffffff"),this._initLegendConfigInfo(t,i),n.style=this._transformStyleToMapBoxGl(r,a,s);var u=t.visible;n.layout={visibility:u};var c={type:"geojson",data:{type:"FeatureCollection",features:e}};this._addOverlayToMap(a,c,l,n),"POLYGON"===a&&r.strokeColor&&this._addStrokeLineForPoly(r,c,l+"-strokeLine",u)}},{key:"_getUniqueStyleGroup",value:function(t,e){var r=t.featureType,n=t.style,i=t.themeSetting,o=i.themeField,a=i.colors,s=[],l=i.customSettings;for(var u in e){var c=e[u].properties[o],h=!1;for(var p in s)if(s[p]===c){h=!0;break}h||s.push(c)}var f=a||this.defaultParameters.colors;f=SuperMap.ColorsPickerUtil.getGradientColors(f,s.length);var d=[];return s.forEach(function(t,e){var i=f[e];t in l&&(i=l[t]),"LINE"===r?n.strokeColor=i:n.fillColor=i,d.push({color:i,value:t})},this),d}},{key:"_getWMTSUrl",value:function(t){var e={service:"WMTS",request:"GetTile",version:"1.0.0",style:"default",layer:t.layer,tilematrixSet:t.tileMatrixSet,format:"image/png"},i=t.url;return i+=this._getParamString(e,i)+"&tilematrix={z}&tilerow={y}&tilecol={x}"}},{key:"_createMarkerLayer",value:function(u,t){var c=this;t&&t.forEach(function(t){var e=t.geometry.type.toUpperCase(),i=t.dv_v5_markerStyle;"POINT"===e&&i.text&&(e="TEXT");var r=c.setFeatureInfo(t);t.properties.useStyle=i,t.properties.featureInfo=r,"POINT"===e&&i.src&&-1===i.src.indexOf("http://")&&-1===i.src.indexOf("https://")&&(i.src=c.serverUrl+i.src);var n={type:"geojson",data:t},o=t.properties.index,a=e+"-"+o;if("POINT"===e&&i.src&&i.src.indexOf("svg")<=-1&&c.map.loadImage(i.src,function(t,e){t&&console.log(t),c.map.addImage(o+"",e),c.map.addLayer({id:a,type:"symbol",source:n,layout:{"icon-image":o+"","icon-size":i.scale,visibility:u.visible}})},c),"POINT"===e&&i.src&&-1<i.src.indexOf("svg")&&(c.svgDiv||(c.svgDiv=document.createElement("div"),document.body.appendChild(c.svgDiv)),c._getCanvasFromSVG(i.src,c.svgDiv,function(t){var e=t.toDataURL("img/png");e&&c.map.loadImage(e,function(t,e){t&&console.log(t),c.map.addImage(o+"",e),c.map.addLayer({id:a,type:"symbol",source:n,layout:{"icon-image":o+"","icon-size":i.scale,visibility:u.visible}})},c)})),!i.src){var s={layout:{}};"LINESTRING"===e&&i.lineCap&&(e="LINE",s.layout={"line-cap":i.lineCap});var l=u.visible;s.layout.visibility=l,s.style=c._transformStyleToMapBoxGl(i,e),c._addOverlayToMap(e,n,a,s),"POLYGON"===e&&i.strokeColor&&c._addStrokeLineForPoly(i,n,a+"-strokeLine",l)}},this)}},{key:"setFeatureInfo",value:function(t){var e,i=t.dv_v5_markerInfo;if(!i||!i.dataViz_title)return i;e=i;var r=t.properties;for(var n in e)r[n]&&(e[n]=r[n],delete r[n]);return e}},{key:"_createHeatLayer",value:function(t,e){var i=t.themeSetting,r={};r.gradient=i.colors.slice(),r.radius=parseInt(i.radius);var n=i.customSettings;for(var o in n)r.gradient[o]=n[o];i.weight&&this._changeWeight(e,i.weight);var a=["interpolate",["linear"],["heatmap-density"]],s=(1/r.gradient.length).toFixed(2);r.gradient.forEach(function(t,e){a.push(e*s),0===e&&(t=oe.a.supermap.Util.hexToRgba(t,0)),a.push(t)}),this._initLegendConfigInfo(t,r.gradient);var l={"heatmap-color":a,"heatmap-radius":i.radius+15,"heatmap-intensity":{base:1,stops:[[0,.8],[22,1]]}};if(e[0].weight&&4<=e.length){var u=[];e.forEach(function(t){u.push(t.weight)});var c=SuperMap.ArrayStatistic.getMax(u),h=SuperMap.ArrayStatistic.getMin(u);l["heatmap-weight"]=["interpolate",["linear"],["get","weight"],h,0,c,1]}this.map.addLayer({id:t.layerID,type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:e}},paint:l})}},{key:"_changeWeight",value:function(t,i){this.fieldMaxValue={},this._getMaxValue(t,i);var r=this.fieldMaxValue[i];t.forEach(function(t){var e=t.properties[i];t.weight=e/r})}},{key:"_getMaxValue",value:function(t,e){var i,r=[],n=e;this.fieldMaxValue[n]||(t.forEach(function(t){(i=t.properties)&&parseFloat(i[n])&&r.push(parseFloat(i[n]))}),this.fieldMaxValue[n]=SuperMap.ArrayStatistic.getArrayStatistic(r,"Maximum"))}},{key:"_createRangeLayer",value:function(t,e){var r=t.themeSetting.themeField,i=t.style,n=t.featureType,o=this._getRangeStyleGroup(t,e),a={type:"geojson",data:{type:"FeatureCollection",features:e=this._getFiterFeatures(t.filterCondition,e)}},s=["match",["get","index"]];e.forEach(function(t){for(var e=parseFloat(t.properties[r]),i=0;i<o.length;i++)o[i].start<=e&&e<o[i].end&&s.push(t.properties.index,o[i].color);!e&&s.push(t.properties.index,"rgba(0, 0, 0, 0)")},this),s.push("rgba(0, 0, 0, 0)"),this._initLegendConfigInfo(t,o);var l={layout:{}};"LINE"===n&&i.lineCap&&(l.layout={"line-cap":i.lineCap});var u=t.visible;l.layout.visibility=u,l.style=this._transformStyleToMapBoxGl(i,n,s);var c=t.layerID;this._addOverlayToMap(n,a,c,l),"POLYGON"===n&&i.strokeColor&&this._addStrokeLineForPoly(i,a,c+"-strokeline",u)}},{key:"_getFiterFeatures",value:function(t,e){if(!t)return e;for(var i=ge.a||window.jsonsql,r="select * from json where ("+this._replaceFilterCharacter(t)+")",n=[],o=0;o<e.length;o++){var a=e[o],s=!1;try{s=i.query(r,{properties:a.properties})}catch(t){continue}s&&0<s.length&&n.push(a)}return n}},{key:"_replaceFilterCharacter",value:function(t){return t=t.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"_getRangeStyleGroup",value:function(t,e){var i,r=t.featureType,n=t.style,o=[],a=t.themeSetting,s=a.customSettings,l=a.themeField,u=a.segmentCount;e.forEach(function(t){(i=t.properties||t.get("Properties"))?i[l]&&oe.a.supermap.Util.isNumber(i[l])&&o.push(parseFloat(i[l])):t.get(l)&&oe.a.supermap.Util.isNumber(t.get(l))&&t.get(l)&&o.push(parseFloat(t.get(l)))},this);var c=SuperMap.ArrayStatistic.getArraySegments(o,a.segmentMethod,u);if(c){var h=u;for(var p in i&&c[0]===c[i.length-1]&&(h=1,c.length=2),c){var f=c[p];f=0===p?Math.floor(100*f)/100:Math.ceil(100*f)/100+.1,c[p]=Number(f.toFixed(2))}for(var d=a.colors,m=0;m<h;m++)m in s&&(s[m].segment.start&&(c[m]=s[m].segment.start),s[m].segment.end&&(c[m+1]=s[m].segment.end));for(var y=[],g=0;g<h;g++){var v=d[g];g in s&&s[g].color&&(v=s[g].color),"LINE"===r?n.strokeColor=v:n.fillColor=v;var _=c[g],b=c[g+1],x=JSON.parse(JSON.stringify(n));y.push({style:x,color:v,start:_,end:b})}return y}}},{key:"_formatGeoJSON",value:function(t){var e=t.features;return e.forEach(function(t,e){t.properties.index=e}),e}},{key:"_excelData2Feature",value:function(t){for(var e=t.colTitles,i=-1,r=-1,n=0,o=e.length;n<o;n++)this._isXField(e[n])&&(i=n),this._isYField(e[n])&&(r=n);for(var a=[],s=0,l=t.rows.length;s<l;s++){var u=t.rows[s],c=Number(u[i]),h=Number(u[r]),p={};for(var f in t.colTitles){p[t.colTitles[f]]=t.rows[s][f]}p.index=s+"";var d={type:"Feature",geometry:{type:"Point",coordinates:[c,h]},properties:p};a.push(d)}return a}},{key:"_sendMapToUser",value:function(t,e){if(t===e){for(var i in this.sourceListModel=new ce({map:this.map}),this.legendList)this.sourceListModel.addSourceStyle(i,this.legendList[i]);this.fire("addlayerssucceeded",{map:this.map,mapparams:this.mapParams,layers:this.layers})}}},{key:"_unproject",value:function(t){for(var e=180/Math.PI,i=Math.exp(-t[1]/6378137),r=Math.PI/2-2*Math.atan(i),n=0,o=.1;n<15&&1e-7<Math.abs(o);n++)1,r+=o=Math.PI/2-2*Math.atan(1*i)-r;return{x:t[0]*e/6378137,y:r*e}}},{key:"_getParamString",value:function(t,e,i){var r=[];for(var n in t)r.push((i?n.toUpperCase():n)+"="+t[n]);return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}},{key:"_isXField",value:function(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"ç»åº¦"===e||"ä¸ç»"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e}},{key:"_isYField",value:function(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"çº¬åº¦"===e||"åçº¬"===e||"latitude"===e||"lat"===e}},{key:"_transformStyleToMapBoxGl",value:function(t,e,i){var r={};"POINT"!==t.type&&"BASIC_POINT"!==t.type&&"POINT"!==e||"LINE"===e?"LINE"===e?r={strokeWidth:"line-width",strokeColor:"line-color",strokeOpacity:"line-opacity"}:"POLYGON"===e&&(r={fillColor:"fill-color",fillOpacity:"fill-opacity",strokeColor:"fill-outline-color"}):r={fillColor:"circle-color",strokeWidth:"circle-stroke-width",fillOpacity:"circle-opacity",radius:"circle-radius",strokeColor:"circle-stroke-color",strokeOpacity:"circle-stroke-opacity"};var n={};for(var o in t)r[o]&&(n[r[o]]=t[o]);return i&&(n["circle-color"]?n["circle-color"]=i:n["line-color"]?n["line-color"]=i:n["fill-color"]=i),t.lineDash&&"solid"!==t.lineDash&&"LINE"===e&&(n["line-dasharray"]=this._dashStyle(t)),n}},{key:"_dashStyle",value:function(t){if(!t)return[];var e=t.strokeDashstyle||t.lineDash;switch(e){case"solid":return[];case"dot":return[1,4];case"dash":return[4,4];case"dashdot":return[4,4,1,4];case"longdash":return[8,4];case"longdashdot":return[8,4,1,4];default:return e?SuperMap.Util.isArray(e)?e:(e=SuperMap.String.trim(e).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"_getCanvasFromSVG",value:function(t,e,i){var r=document.createElement("canvas");r.id="dataviz-canvas-"+oe.a.supermap.Util.newGuid(8),r.style.display="none",e.appendChild(r),(window.canvg?window.canvg:me.a)(r.id,t,{ignoreMouse:!0,ignoreAnimation:!0,renderCallback:function(){300<r.width||300<r.height||i(r)},forceRedraw:function(){return!1}})}},{key:"_addOverlayToMap",value:function(t,e,i,r){"circle"!==(t={POINT:"circle",LINE:"line",POLYGON:"fill"}[t])&&"line"!==t&&"fill"!==t||this.map.addLayer({id:i,type:t,source:e,paint:r.style,layout:r.layout||{}})}},{key:"_addBaselayer",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:22;this.map.addLayer({id:e,type:"raster",source:{type:"raster",tiles:t,tileSize:256},minzoom:i,maxzoom:r})}},{key:"_addStrokeLineForPoly",value:function(t,e,i,r){var n={};n.style=this._transformStyleToMapBoxGl(t,"LINE"),n.layout={visibility:r},this._addOverlayToMap("LINE",e,i,n)}},{key:"_parseGeoJsonData2Feature",value:function(t){for(var e=t.allDatas.features,i=[],r=0,n=e.length;r<n;r++){var o=e[r],a=o.geometry.coordinates;"Point"===e[r].geometry.type&&e[r].properties&&(e[r].properties.lon=a[0],e[r].properties.lat=a[1]),o.properties.index=r+"",i.push(o)}return i}},{key:"_getFeatureBySQL",value:function(t,e,i,r){var n,o;n=new SuperMap.FilterParameter({name:e.join().replace(":","@"),attributeFilter:"SMID > 0"}),o=new SuperMap.GetFeaturesBySQLParameters({queryParameter:n,datasetNames:e,fromIndex:0,toIndex:1e5,returnContent:!0});var a={eventListeners:{processCompleted:function(t){i&&i(t)},processFailed:function(t){r&&r(t)}}};new SuperMap.GetFeaturesBySQLService(t,a).processAsync(o)}},{key:"_queryFeatureBySQL",value:function(t,e,i,r,n,o,a,s,l,u){var c,h;c=new SuperMap.FilterParameter({name:e,attributeFilter:i}),r&&(c.fields=r);var p={queryParams:[c]};u&&(p.queryOption=SuperMap.QueryOption.ATTRIBUTE),s&&(p.startRecord=s),l&&(p.expectCount=l),n&&(p.prjCoordSys={epsgCode:n}),h=new SuperMap.QueryBySQLParameters(p),new oe.a.supermap.QueryService(t).queryBySQL(h,function(t){"processCompleted"===t.type?o(t):a(t)})}},{key:"_initLegendConfigInfo",value:function(t,e){this.legendList[t.layerID]||(this.legendList[t.layerID]={layerType:t.layerType,featureType:t.featureType,layerId:t.layerID,themeField:"HEAT"===t.layerType?t.themeSetting.weight:t.themeSetting.themeField,styleGroup:e})}}]),r}(ae),we=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this))).map=t||null,e}return re()(i,t),Yt()(i,[{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(t){this.map.panBy(t)}}]),i}(ae);var Se={props:{mapTarget:{type:String}},computed:{getMapTarget:function(){return this.mapTarget||this.$parent&&this.$parent.target||V.firstMapTarget}},mounted:function(){var i=this,r=this.getMapTarget||V.firstMapTarget;V.$options.getMap(r)?this.loadMap(r):V.$on("initMap-".concat(r),function(t,e){V.$options.setMap(r,t),e&&V.$options.setWebMap(r,e),i.loadMap(r)})},loaded:function(){},methods:{loadMap:function(t){var e,i,r,n,o=this;this.map=V.$options.getMap(t),this.webmap=V.$options.getWebMap(t),i="loaded",(n=(e=this).constructor.options).mixins&&n.mixins.forEach(function(t){t[i]&&t[i].call(e,e.$options.name,r)}),n[i]&&n[i].call(e,r),this.$nextTick(function(){o.$emit("loaded")})}}},Ce={props:{position:{type:String,default:"top-left",validator:function(t){return["top-left","top-right","bottom-left","bottom-right"].includes(t)}}},watch:{position:function(){this.remove(this.map),this.addTo(this.map)}},mounted:function(){var e=this;if(this.parentIsWebMapOrMap=["smwebmap","smmap"].includes(this.$parent.$options.name&&this.$parent.$options.name.toLowerCase()),this.filterDelayLoad=!["smwebmap","smmap","smminimap"].includes(this.$options.name&&this.$options.name.toLowerCase()),this.$el&&this.parentIsWebMapOrMap){this.filterDelayLoad&&(this.isShow=!1,this.$el.style&&(this.$el.style.display="none"));var t=this.$parent.target||V.firstMapTarget;V.$on("initMap-".concat(t),function(t){e.addTo(t),e.filterDelayLoad&&(e.isShow=!0,e.$el.style&&(e.$el.style.display="block"))})}},methods:{control:function(){var t=this;return{onAdd:function(){return t.$el},onRemove:function(){return t.map}}},addTo:function(t){(this.map=t).addControl(this.control(),this.position),this.$el.classList.add("mapboxgl-ctrl")},remove:function(t){t.removeControl(this.control())}}};function Ee(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}var Te=Ee({name:"SmPan",mixins:[Se,Ce],props:{panLength:{type:Number,default:200}},data:function(){return{center:null,panImgClass:"sm-widget-pan--default",mapboxglClass:""}},methods:{panToCenter:function(){this.lnglat=this.center,this.panTo(this.lnglat)},panToLeft:function(){this.panBy([-this.panLength,0])},panToRight:function(){this.panBy([this.panLength,0])},panToTop:function(){this.panBy([0,-this.panLength])},panToBottom:function(){this.panBy([0,this.panLength])},panTo:function(t){this.panViewModel.panTo(t)},panBy:function(t){this.panViewModel.panBy(t)},setPanImg:function(){this.panImgClass="sm-widget-pan--default"},setPanWestImg:function(){this.panImgClass="sm-widget-pan--west"},setPanEastImg:function(){this.panImgClass="sm-widget-pan--east"},setPanNorthImg:function(){this.panImgClass="sm-widget-pan--north"},setPanSouthImg:function(){this.panImgClass="sm-widget-pan--south"}},loaded:function(){this.parentIsWebMapOrMap&&(this.mapboxglClass="mapboxgl-ctrl"),this.panViewModel=new we(this.map),this.center=this.map.getCenter(),this.lnglat=this.center}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["sm-widget-pan",t.panImgClass,t.mapboxglClass]},[i("div",{staticClass:"sm-widget-pan__center",on:{click:t.panToCenter}}),t._v(" "),i("div",{staticClass:"sm-widget-pan__icon is-left",on:{click:t.panToLeft,mouseleave:t.setPanImg,mouseenter:t.setPanWestImg}}),t._v(" "),i("div",{staticClass:"sm-widget-pan__icon is-right",on:{click:t.panToRight,mouseleave:t.setPanImg,mouseenter:t.setPanEastImg}}),t._v(" "),i("div",{staticClass:"sm-widget-pan__icon is-top",on:{click:t.panToTop,mouseleave:t.setPanImg,mouseenter:t.setPanNorthImg}}),t._v(" "),i("div",{staticClass:"sm-widget-pan__icon is-bottom",on:{click:t.panToBottom,mouseleave:t.setPanImg,mouseenter:t.setPanSouthImg}})])},[],!1,null,null,null).exports,ke={props:{background:{type:String,default:"rgba(255,255,255,0.6)"},textColor:{type:String,default:"#333"}},watch:{background:function(t){this.backgroundData=t},textColor:function(t){this.textColorsData=t}},data:function(){return{backgroundData:this.background,textColorsData:this.textColor,colorGroupsData:["#3fb1e3","#6be6c1","#626c91","#a0a7e6","#c4ebad","#96dee8"]}},mounted:function(){var e=this;V.$on("change-theme",function(t){e.backgroundData=t.background,e.textColorsData=t.textColor,e.colorGroupsData=t.colorGroup,e.$emit("themeStyle")})},computed:{getBackgroundStyle:function(){return{background:this.backgroundData}},getTextColorStyle:function(){return{color:this.textColorsData}},getBackground:function(){return this.backgroundData},getTextColor:function(){return this.textColorsData}},methods:{getColorStyle:function(t){return{color:this.colorGroupsData[t]}},getColor:function(t){return this.colorGroupsData[t]}}},Me=n("PJYZ"),Pe=n.n(Me),Ae=function(t){function r(t,e){var i;return Xt()(this,r),(i=Qt()(this,ee()(r).call(this)))._mainMap=t,i.onMoveEvt=i.onMoveEvt.bind(Pe()(i)),i._mainMap.on("move",i.onMoveEvt),e=e||{},i.options={unit:e.unit||"metric",maxWidth:e.maxWidth||100},i}return re()(r,t),Yt()(r,[{key:"onMoveEvt",value:function(){this.updateScale(this._mainMap,this.options)}},{key:"setUnit",value:function(t){this.options.unit=t,this.updateScale(this._mainMap,this.options)}},{key:"updateScale",value:function(t,e){var i=e&&e.maxWidth||100,r=t._container.clientHeight/2,n=this._getDistance(t.unproject([0,r]),t.unproject([i,r]));if(e&&"imperial"===e.unit){var o=3.2808*n;if(5280<o){var a=o/5280;this._setScale(i,a,"mi")}else this._setScale(i,o,"ft")}else if(e&&"nautical"===e.unit){var s=n/1852;this._setScale(i,s,"nm")}else this._setScale(i,n,"m")}},{key:"_setScale",value:function(t,e,i){var r=this._getRoundNum(e),n=r/e;"m"===i&&1e3<=r&&(r/=1e3,i="km");var o="".concat(t*n,"px"),a=r+i;this.fire("scaleupdated",{containerWidth:o,containerContent:a})}},{key:"_getDistance",value:function(t,e){var i=Math.PI/180,r=t.lat*i,n=e.lat*i,o=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((e.lng-t.lng)*i);return 6371e3*Math.acos(Math.min(o,1))}},{key:"_getDecimalRoundNum",value:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}},{key:"_getRoundNum",value:function(t){var e=Math.pow(10,"".concat(Math.floor(t)).length-1),i=t/e;return e*(i=10<=i?10:5<=i?5:3<=i?3:2<=i?2:1<=i?1:this._getDecimalRoundNum(i))}}]),r}(ae),Le=Ee({name:"SmScale",mixins:[Se,ke,Ce],props:{unit:{type:String,default:"metric",validator:function(t){return["imperial","metric","nautical"].includes(t)}},maxWidth:{type:Number,default:100}},data:function(){return{width:null,content:null}},computed:{scaleStyle:function(){return{width:this.width}}},methods:{inlitializeScale:function(t){var e=new Ae(t);this.scaleViewModel=e,this.updateContainer(),e.onMoveEvt()},updateContainer:function(){var e=this;this.scaleViewModel.on("scaleupdated",function(t){e.width=t.containerWidth,e.content=t.containerContent})}},loaded:function(){this.inlitializeScale(this.map)}},function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"sm-widget-scale",style:[this.scaleStyle,this.getColorStyle(0)]},[this._v(this._s(this.content))])},[],!1,null,null,null).exports,Ie=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this))).map=t||null,e._initVM(),e}return re()(i,t),Yt()(i,[{key:"_initVM",value:function(){var e=this;this.map.on("wheel",function(t){e._wheelEventFires(t)})}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(t){this.map.setZoom(t)}},{key:"wheelEventOn",value:function(e){this.on("mouseWheel",function(t){e()})}},{key:"_wheelEventFires",value:function(t){this.fire("mouseWheel",{result:t})}}]),i}(ae),Oe={EXCEL:"EXCEL",CSV:"CSV",ISERVER:"ISERVER",GEOJSON:"GEOJSON",JSON:"JSON",SHP:"SHP",ZIP:"ZIP"},De={fileMaxSize:10485760},ze={getDateTime:function(t,e){var i=new Date,r=i.getFullYear(),n=i.getMonth()+1;n=n<10?"0"+n:n;var o=i.getDate();o=o<10?"0"+o:o;var a=i.getHours();a=a<10?"0"+a:a;var s=i.getMinutes();s=s<10?"0"+s:s;var l=i.getSeconds();l=l<10?"0"+l:l;var u=i.getDay();if(u=this.getWeek(u),"time"===t){var c=r+"å¹´"+n+"æ"+o+"æ¥",h=c+" "+a+"æ¶"+s+"å"+l+"ç§",p=h+" "+u;switch("en-US"===window.lang&&(h=a+":"+s+":"+l+" "+(c=o+"-"+n+"-"+r),p=a+":"+s+":"+l+" "+u+" "+c),e){case"date":return c;case"date+second":return h;case"date+second+week":return p}}else if("chart"===t){var f=a+":"+s+":"+l,d=a+":"+s,m=n+"-"+o;switch(e){case"second":return f;case"minute":return d;case"date":return m}}},getWeek:function(t){switch(t){case 0:return"en-US"===window.lang?"Sunday":"æææ¥";case 1:return"en-US"===window.lang?"Monday":"ææä¸";case 2:return"en-US"===window.lang?"Tuesday":"ææäº";case 3:return"en-US"===window.lang?"Wednesday":"ææä¸";case 4:return"en-US"===window.lang?"Thursday":"ææå";case 5:return"en-US"===window.lang?"Friday":"ææäº";case 6:return"en-US"===window.lang?"Saturday":"ææå­"}},getFileType:function(t){return/^.*\.(?:xls|xlsx)$/i.test(t)?Oe.EXCEL:/^.*\.(?:csv)$/i.test(t)?Oe.CSV:/^.*\.(?:geojson|json)$/i.test(t)?Oe.GEOJSON:/^.*\.(?:shp)$/i.test(t)?Oe.SHP:null}},Fe=Ee({name:"SmZoom",mixins:[Se,Ce,ke],props:{showZoomSlider:{type:Boolean,default:!1}},data:function(){return{zoomPosition:0,min:0,max:22,activeZoomMode:""}},computed:{activieBgColor:function(){var t,e,i=this.getColorStyle(0).color;return{backgroundColor:(t=this.getColorStyle(0).color,e=.3,"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+e+")"),borderColor:i}}},mounted:function(){this.changeSliderStyle()},updated:function(){this.changeSliderStyle()},methods:{sliderChange:function(){this.setZoom(this.zoomPosition)},zoomIn:function(t){this.activeZoomMode="zoomInBtn",Math.round(this.zoomPosition)<this.max&&(this.zoomPosition+=1,this.ZoomViewModel.zoomIn())},zoomOut:function(t){this.activeZoomMode="zoomOutBtn",Math.round(this.zoomPosition)>this.min&&(this.zoomPosition-=1,this.ZoomViewModel.zoomOut())},getMaxZoom:function(){return this.ZoomViewModel.getMaxZoom()},getMinZoom:function(){return this.ZoomViewModel.getMinZoom()},getZoom:function(){return this.ZoomViewModel.getZoom()},setZoom:function(t){return this.ZoomViewModel.setZoom(t)},changeSliderStyle:function(){var t=document.querySelector(".el-slider__bar"),e=document.querySelector(".el-slider__button");t&&(t.style.backgroundColor=this.getColorStyle(0).color),e&&(e.style.borderColor=this.getColorStyle(0).color)}},loaded:function(){var t=this;this.ZoomViewModel=new Ie(this.map),this.min=this.getMinZoom(),this.max=this.getMaxZoom(),this.zoomPosition=Math.ceil(this.getZoom()),this.ZoomViewModel.wheelEventOn(function(){t.zoomPosition=Math.ceil(t.getZoom())})}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sm-widget-zoom"},[i("div",{staticClass:"sm-widget-zoom__buttons",style:[e.getBackgroundStyle,e.getTextColorStyle]},[i("el-button",{staticClass:"sm-widget-zoom__button",style:"zoomInBtn"===e.activeZoomMode?[e.getColorStyle(0),e.activieBgColor]:"",attrs:{icon:"el-icon-plus"},on:{click:e.zoomIn}}),e._v(" "),i("el-button",{staticClass:"sm-widget-zoom__button",style:"zoomOutBtn"===e.activeZoomMode?[e.getColorStyle(0),e.activieBgColor]:"",attrs:{icon:"el-icon-minus"},on:{click:e.zoomOut}})],1),e._v(" "),e.showZoomSlider?i("el-slider",{staticClass:"sm-widget-zoom__slider",style:e.getColorStyle(0),attrs:{min:e.min,max:e.max,vertical:"",height:"200px"},on:{change:e.sliderChange},model:{value:e.zoomPosition,callback:function(t){e.zoomPosition=t},expression:"zoomPosition"}}):e._e()],1)},[],!1,null,null,null).exports,Re=Ee({name:"SmWebMap",viewModelProps:["mapId","serverUrl","mapOptions"],components:{Pan:Te,Scale:Le,Zoom:Fe},mixins:[{viewModelProps:null,mounted:function(){this.$options.viewModelProps&&this.watchViewModelOptions(this.$options.viewModelProps)},methods:{setViewModel:function(t){this.viewModel=t},watchViewModelOptions:function(t){var e=this;t.map(function(r){e.$watch(r,function(t,e){var i="set"+r.replace(r[0],r[0].toUpperCase());this.viewModel&&this.viewModel[i](t)},{deep:!0})})},resize:function(){this.viewModel&&this.viewModel.resize&&this.viewModel.resize()}}}],props:{mapId:{type:String,required:!0},target:{type:String,default:"map"},serverUrl:{type:String,default:"http://www.supermapol.com"},accessToken:{type:String},accessKey:{type:String},withCredentials:{type:Boolean,default:!1},excludePortalProxyUrl:{type:Boolean},mapOptions:{type:Object,default:function(){return{}}},panControl:{type:Object},scaleControl:{type:Object},zoomControl:{type:Object}},computed:{getMapTarget:function(){return this.target}},created:function(){V.firstMapTarget||(V.firstMapTarget=this.target)},mounted:function(){this.initializeWebMap(),this.registerEvents()},methods:{initializeWebMap:function(){var t=this.$props,e=t.target,i=t.serverUrl,r=t.accessToken,n=t.accessKey,o=t.withCredentials,a=t.excludePortalProxyUrl;this.viewModel=new xe(this.mapId,{target:e,serverUrl:i,accessToken:r,accessKey:n,withCredentials:o,excludePortalProxyUrl:a})},registerEvents:function(){var e=this;this.viewModel.on("addlayerssucceeded",function(t){V.$emit("initMap-".concat(e.target),t.map,e.viewModel),e.$emit("load",{map:t.map})}),this.viewModel.on("getmapfailed",function(t){e.$emit("get-map-failed",{error:t.error})}),this.viewModel.on("getlayerdatasourcefailed",function(t){e.$emit("get-layer-datasource-failed",{error:t.error,layer:t.layer,map:t.map})})}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sm-widget-map",attrs:{id:t.target}},[t._t("default"),t._v(" "),t.panControl?i("Pan",{attrs:{position:t.panControl.position}}):t._e(),t._v(" "),t.scaleControl?i("Scale",{attrs:{position:t.scaleControl.position}}):t._e(),t._v(" "),t.zoomControl?i("Zoom",{attrs:{"show-zoom-slider":t.zoomControl.zoomWithSlider,position:t.zoomControl.position}}):t._e()],2)},[],!1,null,null,null).exports,Be={components:{"sm-card":Ee({name:"SmCard",mixins:[ke],props:{iconPosition:{type:String,default:"top-left"},iconClass:{type:String},autoRotate:{type:Boolean,default:!1},headerName:{type:String},collapsed:{type:Boolean,default:!1}},data:function(){return{isShow:!0,transform:null}},computed:{getCardStyle:function(){return this.iconClass||this.headerName?this.getBackgroundStyle:{background:"transparent"}},iconStyle:function(){return{transform:this.transform}},position:function(){var t=this.$parent.$parent&&["smwebmap","smmap"].includes(this.$parent.$parent.$options.name&&this.$parent.$parent.$options.name.toLowerCase());return this.headerName&&!t?"top-left":this.iconPosition},rotateDeg:function(){return{"top-right":["rotate(-45deg)","rotate(135deg)"],"top-left":["rotate(-135deg)","rotate(45deg)"],"bottom-left":["rotate(-135deg)","rotate(45deg)"],"bottom-right":["rotate(-45deg)","rotate(135deg)"]}}},methods:{iconClicked:function(){this.autoRotate&&(this.transform=this.rotateDeg[this.position][this.isShow?0:1]),this.isShow=!this.isShow}}},function(){var t,e,i,r=this,n=r.$createElement,o=r._self._c||n;return o("div",{staticClass:"sm-widget-card"},[r.iconClass?o("div",{class:(t={},t["sm-widget-card__icon"]=!0,t["is-"+r.position]=!0,t["is-click-"+(r.isShow?"out":"in")]=!0,t["is-header"]=r.headerName,t),style:[r.getBackgroundStyle,r.getTextColorStyle],on:{click:r.iconClicked}},[o("div",{class:(e={},e[r.iconClass]=!0,e["is-auto-rotate"]=r.autoRotate,e["sm-widget-card__widget-icon"]=!0,e),style:[r.iconStyle]})]):r._e(),r._v(" "),o("transition",{attrs:{name:"sm-widget-zoom-in"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:r.isShow,expression:"isShow"}],class:(i={},i["sm-widget-card__content"]=!0,i["is-header"]=r.headerName,i["is-"+r.position]=!0,i["is-icon"]=r.iconClass,i),style:[r.getCardStyle]},[r.headerName?o("div",{staticClass:"sm-widget-card__header",style:[r.getBackgroundStyle,r.getTextColorStyle]},[o("span",{staticClass:"sm-widget-card__header-name"},[r._v(r._s(r.headerName))])]):r._e(),r._v(" "),r._t("default")],2)])],1)},[],!1,null,null,null).exports},data:function(){return{isShow:!0}},props:{position:{type:String,default:"top-left",validator:function(t){return["top-left","top-right","bottom-left","bottom-right"].includes(t)}},iconClass:{type:String},autoRotate:{type:Boolean,default:!1},headerName:{type:String},collapsed:{type:Boolean,default:!1}}},Ne=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this,t))).sourceList={},e._init(),e}return re()(i,t),Yt()(i,[{key:"_init",value:function(){this.map.on("styledata",this._updateLayers.bind(this))}},{key:"_updateLayers",value:function(t){this.fire("layersUpdated")}},{key:"initLayerList",value:function(){return this.sourceListModel=new ce({map:this.map}),this.sourceList=this.sourceListModel.getSourceList(),this.sourceList}},{key:"changeLayerVisible",value:function(t,e,i){var r=this;this.sourceListModel.getLayersBySourceLayer(e,t).forEach(function(t){r.map.setLayoutProperty(t.id,"visibility",r.changeVisibility(i))})}},{key:"changeVisibility",value:function(t){return"visible"===t?"none":"visible"}},{key:"changeLayerGroupVisibility",value:function(t,e){var i=this,r=this.sourceListModel.getSourceLayersBySource(t);if(r)for(var n in r)r[n].forEach(function(t){i.map.setLayoutProperty(t.id,"visibility",i.changeVisibility(e))});else{var o=!0,a=!1,s=void 0;try{for(var l,u=this.sourceList[t].layers[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;this.map.setLayoutProperty(c.id,"visibility",this.changeVisibility(e))}}catch(t){a=!0,s=t}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}}}}]),i}(ae),je=Ee({name:"SmLayerList",filters:{isVisible:function(t){return"visible"===t}},mixins:[Se,Ce,ke,Be],props:{iconClass:{type:String,default:"smwidgets-icons-layer-style"},headerName:{type:String,default:"å¾å±"}},data:function(){return{sourceList:{},disabledStyle:{color:"#c0c4cc"}}},updated:function(){this.changCheckStyle()},methods:{handleCollapseChange:function(){this.changCheckStyle()},changCheckStyle:function(){var r=this;this.$el.querySelectorAll(".el-checkbox__input").forEach(function(t){var e=t.childNodes[0],i=t.parentNode.childNodes[1];t.classList.contains("is-checked")?(e.style.borderColor=r.getColorStyle(0).color,e.style.backgroundColor=r.getColorStyle(0).color,i.style.color=r.getColorStyle(0).color):(e.style.borderColor="#DCDFE6",e.style.backgroundColor="#fff",i.style.color=r.getTextColor)})},toggleVisibility:function(t,e,i){var r=this;this.layerListViewModel&&this.layerListViewModel.changeLayerVisible(t,e,i),setTimeout(function(){r.changCheckStyle()},0)},addNewLayer:function(){this.layerListViewModel.addNewLayer()},deleteLayer:function(){this.layerListViewModel.deleteLayer()},toggleLayerGroupVisibility:function(t,e){this.layerListViewModel&&this.layerListViewModel.changeLayerGroupVisibility(t,e)},getDisabledStyle:function(){!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return{color:"#c0c4cc"}}},loaded:function(){var t=this;!this.parentIsWebMapOrMap&&this.$el.classList.add("layer-list-container"),this.layerListViewModel=new Ne(this.map),this.sourceList=this.layerListViewModel.initLayerList(),this.layerListViewModel.on("layersUpdated",function(){t.sourceList=t.layerListViewModel.initLayerList()})}},function(){var n=this,t=n.$createElement,o=n._self._c||t;return o("sm-card",{directives:[{name:"show",rawName:"v-show",value:n.isShow,expression:"isShow"}],staticClass:"sm-widget-layer-list",attrs:{"icon-class":n.iconClass,"icon-position":n.position,"header-name":n.headerName,"auto-rotate":n.autoRotate,collapsed:n.collapsed}},[o("el-card",{staticClass:"sm-widget-layer-list__el-card",style:[n.getBackgroundStyle]},[o("div",{staticClass:"sm-widget-layer-list__content"},n._l(n.sourceList,function(e,r,t){return o("el-collapse",{key:t,staticClass:"sm-widget-layer-list__collapse",on:{change:n.handleCollapseChange}},["object"==typeof e.sourceLayerList?o("el-collapse-item",{staticClass:"sm-widget-layer-list__collapseitem",style:[n.getTextColorStyle]},[o("template",{slot:"title"},[o("div",{style:"visible"===e.visibility?n.getTextColorStyle:n.getDisabledStyle()},[o("i",{staticClass:"el-icon-view",style:"visible"===e.visibility?n.getColorStyle(0):n.getDisabledStyle(!1),on:{click:function(t){t.stopPropagation(),n.toggleLayerGroupVisibility(r,e.visibility)}}}),n._v(" "),o("span",[n._v(n._s(r))])])]),n._v(" "),n._l(e.sourceLayerList,function(e,i,t){return o("el-checkbox",{key:t,attrs:{value:n._f("isVisible")(e[0].visibility)},on:{change:function(t){n.toggleVisibility(i,r,e[0].visibility)}}},[n._v(n._s(i))])})],2):o("el-card",{staticClass:"sm-widget-layer-list__elcarditem",style:[n.getTextColorStyle]},[o("i",{class:["el-icon-view","visible"===e.visibility?"visible":"none"],style:"visible"===e.visibility?n.getColorStyle(0):n.getDisabledStyle(!1),on:{click:function(t){t.stopPropagation(),n.toggleLayerGroupVisibility(r,e.visibility)}}}),n._v(" "),o("div",{staticClass:"sm-widget-layer-list__layergroupname add-ellipsis",style:"visible"===e.visibility?n.getTextColorStyle:n.getDisabledStyle()},[n._v(n._s(r))])])],1)}))])],1)},[],!1,null,null,null).exports,Ve=n("Zni2"),Ue=n.n(Ve),$e=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"rgba(255, 255, 255, 0.6)",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"#333",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["#3fb1e3","#6be6c1","#626c91","#a0a7e6","#c4ebad","#96dee8"];return{color:i,backgroundColor:t,textStyle:{},title:{textStyle:{color:e},subtextStyle:{color:"#999999"}},line:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"3"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:"2"}},lineStyle:{normal:{width:"3"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#cccccc"},emphasis:{barBorderWidth:0,barBorderColor:"#cccccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#cccccc"},emphasis:{borderWidth:0,borderColor:"#cccccc"}},radius:"63%"},scatter:{itemStyle:{normal:{borderWidth:0,borderColor:"#cccccc"},emphasis:{borderWidth:0,borderColor:"#cccccc"}}},boxplot:{itemStyle:{normal:{borderWidth:0,borderColor:"#cccccc"},emphasis:{borderWidth:0,borderColor:"#cccccc"}}},parallel:{itemStyle:{normal:{borderWidth:0,borderColor:"#cccccc"},emphasis:{borderWidth:0,borderColor:"#cccccc"}}},sankey:{itemStyle:{normal:{borderWidth:0,borderColor:"#cccccc"},emphasis:{borderWidth:0,borderColor:"#cccccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#cccccc"},emphasis:{borderWidth:0,borderColor:"#cccccc"}}},gauge:{axisLine:{lineStyle:{color:[[.2,i[0]],[.8,i[1]],[1,i[2]]]}},itemStyle:{normal:{borderWidth:0,borderColor:"#cccccc"},emphasis:{borderWidth:0,borderColor:"#cccccc"}}},candlestick:{itemStyle:{normal:{color:"#e6a0d2",color0:"transparent",borderColor:"#e6a0d2",borderColor0:"#3fb1e3",borderWidth:"2"}}},graph:{itemStyle:{normal:{borderWidth:0,borderColor:"#cccccc"}},lineStyle:{normal:{width:"1",color:"#cccccc"}},symbolSize:"8",symbol:"emptyCircle",smooth:!1,color:i,label:{normal:{textStyle:{color:"#ffffff"}}}},map:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#aaaaaa",borderWidth:.5},emphasis:{areaColor:"rgba(63,177,227,0.25)",borderColor:"#3fb1e3",borderWidth:1}},label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"rgb(63,177,227)"}}}},geo:{itemStyle:{normal:{areaColor:"#eeeeee",borderColor:"#aaaaaa",borderWidth:.5},emphasis:{areaColor:"rgba(63,177,227,0.25)",borderColor:"#3fb1e3",borderWidth:1}},label:{normal:{textStyle:{color:"#ffffff"}},emphasis:{textStyle:{color:"rgb(63,177,227)"}}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:e}},axisTick:{show:!0,lineStyle:{color:e}},axisLabel:{show:!0,rotate:-45,interval:"auto",textStyle:{color:e}},splitLine:{show:!1,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}},nameTextStyle:{fontSize:14}},valueAxis:{axisLine:{show:!0,lineStyle:{color:e}},axisTick:{show:!0,lineStyle:{color:e}},axisLabel:{show:!0,rotate:45,interval:"auto",textStyle:{color:e}},splitLine:{show:!1,lineStyle:{color:["#eeeeee"]}},splitArea:{show:!0},nameTextStyle:{fontSize:14}},logAxis:{axisLine:{show:!0,lineStyle:{color:e}},axisTick:{show:!1,lineStyle:{color:e}},axisLabel:{show:!0,textStyle:{color:e}},splitLine:{show:!0,lineStyle:{color:[e]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:e}},axisTick:{show:!1,lineStyle:{color:e}},axisLabel:{show:!0,textStyle:{color:e}},splitLine:{show:!0,lineStyle:{color:[e]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.05)","rgba(200,200,200,0.02)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:e}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},timeline:{lineStyle:{color:"#626c91",width:1},itemStyle:{normal:{color:"#626c91",borderWidth:1},emphasis:{color:"#626c91"}},controlStyle:{normal:{color:"#626c91",borderColor:"#626c91",borderWidth:.5},emphasis:{color:"#626c91",borderColor:"#626c91",borderWidth:.5}},checkpointStyle:{color:"#3fb1e3",borderColor:"rgba(63,177,227,0.15)"},label:{normal:{textStyle:{color:"#626c91"}},emphasis:{textStyle:{color:"#626c91"}}}},visualMap:{color:i},dataZoom:{backgroundColor:"rgba(255,255,255,0)",dataBackgroundColor:"rgba(222,222,222,1)",fillerColor:"rgba(114,230,212,0.25)",handleColor:"#cccccc",handleSize:"100%",textStyle:{color:e}},markPoint:{label:{normal:{textStyle:{color:e}},emphasis:{textStyle:{color:e}}}}}},qe=n("9csQ"),We=n.n(qe),Ge=n("RIqP"),He=n.n(Ge),Ze=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this))).url=t,e}return re()(i,t),Yt()(i,[{key:"getData",value:function(i){var r=this;if(!this._checkUrl(this.url))return null;SuperMap.FetchRequest.get(this.url).then(function(t){return t.json()}).then(function(t){if(t.datasetInfo){var e={dataSourceName:t.datasetInfo.dataSourceName,datasetName:t.datasetInfo.name,mapName:t.name};r._getDatasetInfoSucceed(e,i)}}).catch(function(t){r.fire("getdatafailed",t)})}},{key:"_getDatasetInfoSucceed",value:function(t,e){var i=this.url,r=i.indexOf("rest");if(0<r){var n=i.indexOf("/",r+5),o=i.substring(r+5,n);if("maps"===o){var a=i.indexOf("/",n+1),s=i.substring(n+1,a);t.dataUrl=i.substring(0,r+4)+"/maps/"+s,this.getMapFeatures(t,e)}else"data"===o&&(t.dataUrl=i.substring(0,r+4)+"/data",this.getDataFeatures(t,e))}}},{key:"getMapFeatures",value:function(t,e){var i=this,r=t.dataUrl,n=t.mapName;e.name=n,e.keyWord?this._getRestMapFields(r,n,function(t){e.attributeFilter=i._getAttributeFilterByKeywords(t,e.keyWord),i._getMapFeatureBySql(r,e)}):this._getMapFeatureBySql(r,e)}},{key:"getDataFeatures",value:function(t,e){var i=this,r=t.datasetName,n=t.dataSourceName,o=t.dataUrl;if(e.name=r+"@"+n,e.datasetNames=[n+":"+r],e.keyWord){var a=o+"/datasources/".concat(n,"/datasets/").concat(r,"/fields.rjson");this._getRestDataFields(a,function(t){e.attributeFilter=i._getAttributeFilterByKeywords(t,e.keyWord),i._getDataFeaturesBySql(o,e)})}else this._getDataFeaturesBySql(o,e)}},{key:"_getMapFeatureBySql",value:function(t,e){var i;i=new SuperMap.QueryBySQLParameters({queryParams:[{name:e.name,attributeFilter:e.attributeFilter}],expectCount:e.maxFeatures}),new SuperMap.QueryBySQLService(t,{eventListeners:{processCompleted:this._getFeaturesSucceed.bind(this),processFailed:function(){}}}).processAsync(i)}},{key:"_getDataFeaturesBySql",value:function(t,e){var i;i=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{name:e.name,attributeFilter:e.attributeFilter},datasetNames:e.datasetNames,fromIndex:0,toIndex:e.maxFeatures-1}),new SuperMap.GetFeaturesBySQLService(t,{eventListeners:{processCompleted:this._getFeaturesSucceed.bind(this),processFailed:function(){}}}).processAsync(i)}},{key:"_getFeaturesSucceed",value:function(t){var e,i,r;if(t.result&&t.result.recordsets){var n=t.result.recordsets[0];this.features=n.features,(e=this.features.features)&&0<e.length?(i=n.fieldCaptions,r=n.fieldTypes):this.fire("featureisempty",{results:t})}else if(t.result)if(this.features=t.result.features,i=[],r=[],(e=this.features.features)&&0<e.length){var o=this.features.features[0];for(var a in o.properties)i.push(a),r.push(this._getDataType(o.properties[a]))}else this.fire("featureisempty",{results:t});else this.fire("getdatafailed",{results:t});var s={features:e,fieldCaptions:i,fieldTypes:r,fieldValues:[]};for(var l in i){var u=[];for(var c in e){var h=e[c],p=s.fieldCaptions[l],f=h.properties[p];u.push(f)}s.fieldValues.push(u)}this.fire("getdatasucceeded",s)}},{key:"_getRestDataFields",value:function(t,i){SuperMap.FetchRequest.get(t).then(function(t){return t.json()}).then(function(t){var e=t.fieldNames;i(e)}).catch(function(t){console.log(t)})}},{key:"_getRestMapFields",value:function(t,e,i){var r=new SuperMap.QueryBySQLParameters({queryParams:{name:e,attributeFilter:"SMID=0"}});new oe.a.supermap.QueryService(t).queryBySQL(r,function(t){var e;t.result&&(e=t.result.recordsets[0].fields),e&&i(e)})}},{key:"_getAttributeFilterByKeywords",value:function(i,r){var n="";return i.forEach(function(t,e){n+=e!==i.length-1?"".concat(t," LIKE '%").concat(r,"%' ")+"OR ":"".concat(t," LIKE '%").concat(r,"%'")},this),n}},{key:"_checkUrl",value:function(t){return!(""===t||!this._isMatchUrl(t))}},{key:"_isMatchUrl",value:function(t){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(t)}},{key:"_isDate",value:function(t){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(t)}},{key:"_getDataType",value:function(t){if(null!=t&&""!==t){if(this._isDate(t))return"DATE";if(this._isNumber(t))return"NUMBER"}return"STRING"}},{key:"_isNumber",value:function(t){var e=Number(t);return 0===e||!isNaN(e)}}]),i}(oe.a.Evented),Xe=function(t){function r(t,e){var i;return Xt()(this,r),(i=Qt()(this,ee()(r).call(this))).url=t,i.withCredentials=e||!1,i.iserverService=new Ze(t,e),i.iserverService.on("getdatasucceeded",function(t){i.fire("getdatasucceeded",t)}),i.iserverService.on("getdatafailed",function(t){i.fire("getdatafailed",t)}),i.iserverService.on("featureisempty",function(t){i.fire("featureisempty",t)}),i}return re()(r,t),Yt()(r,[{key:"getData",value:function(i){var r=this,n=this.url;SuperMap.FetchRequest.get(n,null,{withCredentials:this.withCredentials}).then(function(t){return t.json()}).then(function(t){var e;!1!==t.succeed?t.dataItemServices&&0<t.dataItemServices.length?(t.dataItemServices.forEach(function(t){"RESTDATA"===t.serviceType&&"PUBLISHED"===t.serviceStatus?e=t:"RESTMAP"===t.serviceType&&"PUBLISHED"===t.serviceStatus?e=t:r._getDatafromContent(n,i)},r),r._getDatafromRest(e.serviceType,e.address,i)):r._getDatafromContent(n,i):r.fire("getdatafailed",{data:t})}).catch(function(t){console.log(t),r.fire("getdatafailed",{error:t})})}},{key:"_getDatafromRest",value:function(t,e,i){var r=this,n=this.withCredentials;if("RESTDATA"===t){var o,a,s="".concat(e,"/data/datasources");SuperMap.FetchRequest.get(s,null,{withCredentials:n}).then(function(t){return t.json()}).then(function(t){o=t.datasourceNames[0],s="".concat(e,"/data/datasources/").concat(o,"/datasets"),SuperMap.FetchRequest.get(s,null,{withCredentials:n}).then(function(t){return t.json()}).then(function(t){a=t.datasetNames[0],r.iserverService.getDataFeatures({datasetName:a,dataSourceName:o,dataUrl:s.split("/datasources")[0]},i)}).catch(function(t){console.log(t),r.fire("getdatafailed",{error:t})})})}else{var l,u,c,h="".concat(e,"/maps");SuperMap.FetchRequest.get(h,null).then(function(t){return t.json()}).then(function(t){l=t[0].name,c=t[0].path,h=h="".concat(e,"/maps/").concat(l,"/layers"),SuperMap.FetchRequest.get(h,null).then(function(t){return t.json()}).then(function(t){return u=t[0].subLayers.layers[0].caption,r.iserverService.getMapFeatures({mapName:u,dataUrl:c},i),u}).catch(function(t){console.log(t),r.fire("getdatafailed",{error:t})})}).catch(function(t){console.log(t),r.fire("getdatafailed",{error:t})})}}},{key:"_getDatafromContent",value:function(t,r){var n=this,o={};t+="/content.json?pageSize=9999999&currentPage=1",SuperMap.FetchRequest.get(t,null,{withCredentials:this.withCredentials}).then(function(t){return t.json()}).then(function(t){if(!1!==t.succeed){if(t.type){if("JSON"===t.type||"GEOJSON"===t.type){if(t.content=JSON.parse(t.content.trim()),!t.content.features)return void console.log("JSON æ ¼å¼è§£æå¤±è´¥ï¼");var e=n._formatGeoJSON(t.content,r);o.features={type:t.content.type,features:e}}else if("EXCEL"===t.type||"CSV"===t.type){var i=n._excelData2Feature(t.content,r);o.features={type:"FeatureCollection",features:i}}n.iserverService._getFeaturesSucceed({result:o})}}else n.fire("getdatafailed",{data:t})}).catch(function(t){console.log(t),n.fire("getdatafailed",{error:t})})}},{key:"_formatGeoJSON",value:function(t,e){var i=t.features;return e&&0<e.maxFeatures&&(i=i.slice(0,e.maxFeatures)),i.forEach(function(t,e){t.properties.index=e}),i}},{key:"_excelData2Feature",value:function(t,e){for(var i=t.colTitles,r=-1,n=-1,o=0,a=i.length;o<a;o++)SuperMap.Widgets.FileReaderUtil.isXField(i[o])&&(r=o),SuperMap.Widgets.FileReaderUtil.isYField(i[o])&&(n=o);var s=[],l=t.rows.length;e&&0<e.maxFeatures&&(l=e.maxFeatures);for(var u=0;u<l;u++){var c=t.rows[u],h=Number(c[r]),p=Number(c[n]),f={};for(var d in t.colTitles){f[t.colTitles[d]]=t.rows[u][d]}f.index=u+"";var m={type:"Feature",geometry:{type:"Point",coordinates:[h,p]},properties:f};s.push(m)}return s}}]),r}(oe.a.Evented),Ke=n("CeSn"),Ye=n.n(Ke),Je=n("XaGS"),Qe=n.n(Je),ti=n("w1NJ"),ei=n.n(ti),ii={reservedDecimal:function(t,e){return Number(t).toFixed(e)},clearNumberComma:function(t){return t.replace&&(t=t.replace(/,/g,"")),t}},ri=function(){function i(t,e){Xt()(this,i),t.type=t.type||"iServer",t.withCredentials=t.withCredentials||!1,this.dataset=t,this.datasetOptions=e,this.dataCache=null,this.axisDatas=[],this.serieDatas=[],this.gridAxis={},this.radarAxis={},this.radarMax=0}return Yt()(i,[{key:"getDataOption",value:function(){var r=this;return new Promise(function(i,e){r._requestData(r.dataset).then(function(t){r._setData(t);var e=r.formatChartData(r.datasetOptions,t);i(e)}).catch(function(t){e(t)})})}},{key:"formatChartData",value:function(t){var r=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.dataCache;this._clearChartCache(),this._setDatasetOptions(t),t.forEach(function(t){var e=r._fieldsData(n,t),i=r._createDataOption(e,t);r._createAxisData(e,t),r.serieDatas.push(i)});var e=this.gridAxis,i=this.radarAxis,o=this.serieDatas;return $()({},e,i,{series:o})}},{key:"_setDatasetOptions",value:function(t){this.datasetOptions=t}},{key:"_setData",value:function(t){t&&(this.dataCache=t)}},{key:"_clearChartCache",value:function(){this.axisDatas=[],this.serieDatas=[],this.gridAxis={}}},{key:"_requestData",value:function(r){return new Promise(function(e,i){var t;r&&("iServer"===r.type?t=new Ze(r.url,r.withCredentials):"iPortal"===r.type&&(t=new Xe(r.url,r.withCredentials)),t.getData(r.queryInfo),t.on("getdatafailed",function(t){i(t)}),t.on("getdatasucceeded",function(t){e(t)}))})}},{key:"_createDataOption",value:function(t,e){var i=e.seriesType,r=t.xData,n=t.yData,o={type:i,name:e.yField,data:[]};if("pie"===i)n.forEach(function(t,e){o.data.push({value:t,name:r[e]})});else if("radar"===i){var a=He()(n);o.data.push({value:He()(n),name:e.yField});var s=ei()(a);this.radarMax=Math.max(s,this.radarMax)}else o.data=He()(n),e.isStack&&(o.stack="0");return o}},{key:"_createAxisData",value:function(t,e){var i,r=e.seriesType,n=t.xData,o=[];if("radar"===r){var a=this.radarMax;n.forEach(function(t){o.push({text:t,max:a})}),this.radarAxis={radar:{indicator:o}},i=this.radarAxis}else if("bar"===r||"line"===r||"scatter"===r){var s=He()(n);this.gridAxis.xAxis||(this.gridAxis.xAxis=[],this.gridAxis.yAxis={}),0!==this.gridAxis.xAxis.length&&Qe()(s,this.gridAxis.xAxis[0].data)||this.gridAxis.xAxis.push({data:s}),i=this.gridAxis}else i={};return i}},{key:"_fieldsData",value:function(t,e){var i,r,n,o,a,s,l;return n=(i=t.fieldCaptions).indexOf(e.xField),o=i.indexOf(e.yField),r=t.fieldValues[o],l=e.isStastic?(a=this._getUniqFieldDatas(t,n),s=this._stasticXData(a),this._stasticYData(r,a)):(s=this._getFieldDatas(t,n),He()(r)),{xData:s,yData:l}}},{key:"_stasticXData",value:function(t){return Object.keys(t)}},{key:"_stasticYData",value:function(i,t){var e=[];for(var r in t){var n=0;t[r].forEach(function(t){var e=ii.clearNumberComma(i[t]);n+=Ye()(e)}),e.push(n)}return e}},{key:"_getUniqFieldDatas",value:function(t,e){var i=this._getFieldDatas(t,e),r={};return i&&i.forEach(function(t,e){r[t]?r[t].push(e):r[t]=[e]}),r}},{key:"_getFieldDatas",value:function(t,e){return t.fieldValues[e]}}]),i}(),ni=["legendselectchanged","legendselected","legendunselected","legendscroll","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected","rendered","finished","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],oi=Ee({name:"SmChart",components:{"v-chart":Ue.a},mixins:[Ce,ke,Be],props:{iconClass:{type:String,default:"smwidgets-icons-attribute"},dataset:{type:Object,default:function(){return null}},datasetOptions:{type:Array,default:function(){return null}},options:{type:Object,default:function(){return{}}},autoresize:{type:Boolean,default:!0},theme:{type:[Object,String]},initOptions:{type:Object},group:{type:String},manualUpdate:{type:Boolean,default:!1}},data:function(){return{chartId:We()("".concat(this.$options.name.toLowerCase(),"-")),smChart:null,chartTheme:$e(),echartOptions:{},echartsDataService:null,datasetChange:!1,dataSeriesCache:{}}},computed:{width:function(){return this.smChart&&this.smChart.width},height:function(){return this.smChart&&this.smChart.height},computedOptions:function(){return this.smChart&&this.smChart.computedOptions},_chartStyle:function(){return{width:"100%",height:this.headerName?"calc(100% - 30px)":"100%"}},_isRequestData:function(){return this.dataset&&this.datasetOptions}},watch:{theme:function(){this.chartTheme=null},dataset:function(){this._setEchartOptions(this.dataset,this.datasetOptions,this.options),this.datasetChange=!0},datasetOptions:function(){this.datasetChange?this.datasetChange=!1:this.echartsDataService&&this._changeChartData(this.echartsDataService,this.datasetOptions,this.options)},options:function(){this.echartOptions=Object.assign({},this.dataSeriesCache,this.options)},width:function(){return this.smChart&&this.smChart.width},height:function(){return this.smChart&&this.smChart.height},computedOptions:function(){return this.smChart&&this.smChart.computedOptions}},mounted:function(){var i=this,t=this.chartId;this.smChart=this.$refs[t];var r=this._getEchart();ni.forEach(function(e){r.$on(e,function(t){i.$emit(e,t)})}),this.$on("themeStyle",function(){i.chartTheme=$e(i.backgroundData,i.textColorsData,i.colorGroupsData)}),this._isRequestData&&this._setEchartOptions(this.dataset,this.datasetOptions,this.options)},methods:{_setEchartOptions:function(t,e,i){var r=this;this.echartsDataService=new ri(t,e),this.echartsDataService.getDataOption().then(function(t){r.dataSeriesCache=Object.assign({},t),r.echartOptions=Object.assign({},t,i)})},_changeChartData:function(t,e,i){var r=t.formatChartData(e);this.dataSeriesCache=Object.assign({},r),this.echartOptions=Object.assign({},r,i)},_getEchart:function(){return this.smChart},mergeOptions:function(t,e,i){this._delegateMethod("mergeOptions",t,e,i)},appendData:function(t){this._delegateMethod("appendData",t)},resize:function(t){this._delegateMethod("resize",t)},dispatchAction:function(t){this._delegateMethod("dispatchAction",t)},convertToPixel:function(t,e){return this._delegateMethod("convertToPixel",t,e)},convertFromPixel:function(t,e){return this._delegateMethod("convertFromPixel",t,e)},containPixel:function(t,e){return this._delegateMethod("containPixel",t,e)},showLoading:function(t,e){this._delegateMethod("showLoading",t,e)},hideLoading:function(){this._delegateMethod("hideLoading")},getDataURL:function(t){return this._delegateMethod("getDataURL",t)},getConnectedDataURL:function(t){return this._delegateMethod("getConnectedDataURL",t)},clear:function(){this._delegateMethod("clear")},dispose:function(){this._delegateMethod("dispose")},_delegateMethod:function(t){for(var e,i=arguments.length,r=new Array(1<i?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return(e=this.smChart)[t].apply(e,r)}},connect:function(t){Ue.a&&Ue.a.connect(t)},disconnect:function(t){Ue.a&&Ue.a.disConnect(t)},registerMap:function(t,e,i){Ue.a&&Ue.a.registerMap(t,e,i)},registerTheme:function(t,e){Ue.a&&Ue.a.registerTheme(t,e)},graphic:Ue.a&&Ue.a.graphic},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("sm-card",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"sm-widget-chart",attrs:{"icon-class":t.iconClass,"icon-position":t.position,"header-name":t.headerName,"auto-rotate":t.autoRotate,collapsed:t.collapsed}},[i("v-chart",{ref:t.chartId,style:t._chartStyle,attrs:{id:t.chartId,options:t._isRequestData&&t.echartOptions||t.options,autoresize:t.autoresize,initOptions:t.initOptions,group:t.group,"manual-update":t.manualUpdate,theme:t.theme||t.chartTheme}})],1)},[],!1,null,null,null).exports,ai=Ee({name:"SmMap",props:{target:{type:String,default:"map"},mapOptions:{type:Object,default:function(){return{}}}},computed:{getMapTarget:function(){return this.target}},created:function(){V.firstMapTarget||(V.firstMapTarget=this.target)},mounted:function(){var t=this.initializeMap();this.registerEvents(t)},methods:{initializeMap:function(){return this.mapOptions.container=this.target,this.map=new oe.a.Map(this.mapOptions),this.map},registerEvents:function(t){var e=this;t.on("load",function(){V.$emit("initMap-".concat(e.target),t),e.$emit("load",{map:t})})}}},function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"sm-widget-map",attrs:{id:this.target}},[this._t("default")],2)},[],!1,null,null,null).exports,si=n("cDf5"),li=n.n(si),ui=function(t){function r(t,e){var i;return Xt()(this,r),(i=Qt()(this,ee()(r).call(this))).options={id:"mapboxgl-minimap",zoomAdjust:null,bounds:"parent",lineColor:"#08F",lineWidth:1,lineOpacity:1,fillColor:"#F80",fillOpacity:.25,dragPan:!1,scrollZoom:!1,boxZoom:!1,dragRotate:!1,keyboard:!1,doubleClickZoom:!1,touchZoomRotate:!1},i._container=t,i._ticking=!1,i._lastMouseMoveEvent=null,i._parentMap=e,i._isDragging=!1,i._isCursorOverFeature=!1,i._previousPoint=[0,0],i._currentPoint=[0,0],i._trackingRectCoordinates=[[[],[],[],[],[]]],i.initializeMiniMap(),i}return re()(r,t),Yt()(r,[{key:"initializeMiniMap",value:function(){var t=this;this._miniMap=new oe.a.Map({attributionControl:!1,container:this._container,style:this._parentMap.getStyle(),zoom:1,center:[0,0],renderWorldCopies:!1}),this._miniMap.on("load",function(){t.fire("minimapinitialized",{miniMap:t._miniMap}),t.loadMiniMap()})}},{key:"loadMiniMap",value:function(){var e=this.options,t=this._parentMap,i=this._miniMap;["dragPan","scrollZoom","boxZoom","dragRotate","keyboard","doubleClickZoom","touchZoomRotate"].forEach(function(t){!0!==e[t]&&i[t].disable()}),"function"==typeof e.zoomAdjust?this.options.zoomAdjust=e.zoomAdjust.bind(this):null===e.zoomAdjust&&(this.options.zoomAdjust=this._zoomAdjust.bind(this)),"parent"===e.bounds&&(e.bounds=t.getBounds()),"object"===li()(e.bounds)&&i.fitBounds(e.bounds,{duration:50});var r=i.getBounds();this._convertBoundsToPoints(r),this._addRectLayers(),this._update(),t.on("move",this._update.bind(this)),t.on("styledata",this._setStyle.bind(this)),i.on("mousemove",this._mouseMove.bind(this)),i.on("mousedown",this._mouseDown.bind(this)),i.on("mouseup",this._mouseUp.bind(this)),this._miniMapCanvas=i.getCanvasContainer(),this._miniMapCanvas.addEventListener("wheel",this._preventDefault),this._miniMapCanvas.addEventListener("mousewheel",this._preventDefault)}},{key:"_mouseDown",value:function(t){this._isCursorOverFeature&&(this._isDragging=!0,this._previousPoint=this._currentPoint,this._currentPoint=[t.lngLat.lng,t.lngLat.lat]),this.fire("minimapmousedown",{result:t})}},{key:"_mouseMove",value:function(t){this._ticking=!1;var e=this._miniMap.queryRenderedFeatures(t.point,{layers:["trackingRectFill"]});if(this._isCursorOverFeature&&0<e.length||(this._isCursorOverFeature=0<e.length,this._miniMapCanvas.style.cursor=this._isCursorOverFeature?"move":""),this._isDragging){this._previousPoint=this._currentPoint,this._currentPoint=[t.lngLat.lng,t.lngLat.lat];var i=[this._previousPoint[0]-this._currentPoint[0],this._previousPoint[1]-this._currentPoint[1]],r=this._moveTrackingRect(i);this._parentMap.fitBounds(r,{duration:80,noMoveStart:!0})}this.fire("minimapmousemoved",{result:t})}},{key:"_mouseUp",value:function(t){this._isDragging=!1,this._ticking=!1,this.fire("minimapmouseup",{result:t})}},{key:"_moveTrackingRect",value:function(t){var e=this._trackingRect,i=e._data,r=i.properties.bounds;if(r)return r._ne.lat-=t[1],r._ne.lng-=t[0],r._sw.lat-=t[1],r._sw.lng-=t[0],this._convertBoundsToPoints(r),e.setData(i),r}},{key:"_setTrackingRectBounds",value:function(t){var e=this._trackingRect,i=e._data;i.properties.bounds=t,this._convertBoundsToPoints(t),e.setData(i)}},{key:"_convertBoundsToPoints",value:function(t){var e=t._ne,i=t._sw,r=this._trackingRectCoordinates;e=this._handleBounds(e),i=this._handleBounds(i),r[0][0][0]=e.lng,r[0][0][1]=e.lat,r[0][1][0]=i.lng,r[0][1][1]=e.lat,r[0][2][0]=i.lng,r[0][2][1]=i.lat,r[0][3][0]=e.lng,r[0][3][1]=i.lat,r[0][4][0]=e.lng,r[0][4][1]=e.lat}},{key:"_update",value:function(t){if(!this._isDragging){var e=this._parentMap.getBounds();this._setTrackingRectBounds(e),"function"==typeof this.options.zoomAdjust&&this.options.zoomAdjust(),this.fire("minimapupdated",{result:t})}}},{key:"_zoomAdjust",value:function(){var t=this._miniMap,e=this._parentMap,i=parseFloat(e.getZoom());t.setCenter(e.getCenter());var r=0<i-5?i-5:1;t.setZoom(r)}},{key:"_preventDefault",value:function(t){t.preventDefault()}},{key:"_handleBounds",value:function(t){return 180<t.lng?t.lng=180:t.lng<-180&&(t.lng=-180),90<t.lat?t.lat=90:t.lat<-90&&(t.lat=-90),t}},{key:"_setStyle",value:function(){this._miniMap.setStyle(this._parentMap.getStyle()),this._addRectLayers(),this._update()}},{key:"_addRectLayers",value:function(){var t=this.options;this._miniMap.addSource("trackingRect",{type:"geojson",data:{type:"Feature",properties:{name:"trackingRect"},geometry:{type:"Polygon",coordinates:this._trackingRectCoordinates}}}),this._miniMap.addLayer({id:"trackingRectOutline",type:"line",source:"trackingRect",layout:{},paint:{"line-color":t.lineColor,"line-width":t.lineWidth,"line-opacity":t.lineOpacity}}),this._miniMap.addLayer({id:"trackingRectFill",type:"fill",source:"trackingRect",layout:{},paint:{"fill-color":t.fillColor,"fill-opacity":t.fillOpacity}}),this._trackingRect=this._miniMap.getSource("trackingRect")}}]),r}(ae),ci=Ee({name:"SmMiniMap",mixins:[Se,Ce,Be],props:{iconClass:{type:String,default:"el-icon-back"},autoRotate:{type:Boolean,default:!0}},mounted:function(){this.icon=this.$el.children[0],this.iconClass&&this.icon&&(this.icon.style.visibility="hidden")},loaded:function(){var t=this;this.$el.classList.add("sm-widget-minimap"),this.viewModel=new ui(this.$el.querySelector("#miniMap")||this.$el,this.map),this.iconClass&&this.icon&&this.viewModel.on("minimapinitialized",function(){t.icon.style.visibility="visible"})}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("sm-card",{attrs:{id:!t.iconClass&&!t.headerName&&"miniMap","icon-class":t.iconClass,"icon-position":t.position,"header-name":t.headerName,"auto-rotate":t.autoRotate,collapsed:t.collapsed}},[i("div",{attrs:{id:(t.iconClass||t.headerName)&&"miniMap"}})])},[],!1,null,null,null).exports,hi=n("dz+5"),pi=n.n(hi),fi=n("Xrjk"),di=n.n(fi),mi=n("O3R+"),yi=n.n(mi),gi=n("SPBs"),vi=n.n(gi),_i=n("/rf6"),bi=n("4ZJM"),xi=n.n(bi),wi=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this))).tipNodes=[],e.cacheLengthUnitList=[],e.cachePolygonUnit={},e.mode=null,e.result="",e.activeMode="",e.map=t.map,e._addDrawControl(),e.isEditing=!0,e}return re()(i,t),Yt()(i,[{key:"openDraw",value:function(t,e){this._initDraw(),this._resetEvent(),this.mode=t,this.activeMode=t,this.activeUnit=e,this.isEditing=!0,this.draw.changeMode(t),this.measureNodeDistanceBind=this._measureNodeDistance.bind(this),this.map.on("mousedown",this.measureNodeDistanceBind)}},{key:"closeDraw",value:function(){this.isEditing=!1,this.ids=null,this._initDraw(),this._resetEvent(),this.activeMode=null,this.draw.trash(),this.map.off("mousedown",this.continueDrawBind)}},{key:"updateUnit",value:function(t){if(0!==this.tipNodes.length){for(var e=1;e<this.tipNodes.length;e++){var i=Object(_i.convertLength)(this.cacheLengthUnitList[e-1].value,this.cacheLengthUnitList[e-1].unit,t);if(i=this._getFormatResult(i),this.cacheLengthUnitList[e-1].value=i,this.cacheLengthUnitList[e-1].unit=t,"draw_line_string"===this.activeMode){var r=Wt.t("measure.".concat(t));this.tipNodes[e]&&this.tipNodes[e].setText("".concat(i," ").concat(r))}}this.result&&(this.result=Object(_i.convertLength)(this.result,this.activeUnit,t))}else if(this.cachePolygonUnit.value&&this.cachePolygonUnit.unit){var n=Object(_i.convertArea)(this.cachePolygonUnit.value,this.cachePolygonUnit.unit,t),o=Wt.t("measure.square".concat(t));this.tipHoverDiv&&this.tipHoverDiv.setText("".concat(n," ").concat(o)),this.result&&(this.result=Object(_i.convertArea)(this.result,this.activeUnit,t))}this.result&&this.fire("update-unit",{result:this._getFormatResult(this.result)}),this.activeUnit=t}},{key:"_addDrawControl",value:function(){this.draw=new pi.a({displayControlsDefault:!1,controls:{line_string:!0,trash:!1},styles:[{id:"gl-draw-line",type:"line",filter:["all",["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#D20C0C","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#D20C0C","fill-outline-color":"#D20C0C","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#D20C0C","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-halo-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#FFF"}},{id:"gl-draw-polygon-and-line-vertex-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#D20C0C"}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","$type","LineString"],["==","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":3}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","$type","Polygon"],["==","mode","static"]],paint:{"fill-color":"#000","fill-outline-color":"#000","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","$type","Polygon"],["==","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#000","line-width":3}}]}),this.map.addLayer(this.draw),this.map.on("draw.create",this._finishDraw.bind(this)),this.map.on("draw.modechange",this._resetDraw.bind(this))}},{key:"_resetDraw",value:function(t){this.isEditing&&(this.map.off("mousemove",this.popupFollowMouseBind),this.ids=this.draw.getSelectedIds(),this.draw.changeMode(this.mode),this.continueDrawBind=this._continueDraw.bind(this),this.map.on("mousedown",this.continueDrawBind),this.measureNodeDistanceBind=this._measureNodeDistance.bind(this),this.map.on("mousedown",this.measureNodeDistanceBind),this.fire("measure-finished",{result:this._getFormatResult(this.result)}))}},{key:"_initDraw",value:function(){this.ids?this.draw.delete(this.ids):this.draw.deleteAll(),this.measureNodes=[],this.tipNodes.length&&this.tipNodes.map(function(t){return t.remove()}),this.tipNodes=[],this.cacheLengthUnitList=[],this.result=0,this.fire("measure-start",{result:this._getFormatResult(this.result)})}},{key:"_continueDraw",value:function(t){this._initDraw(),this._resetEvent(!1),this.map.off("mousedown",this.continueDrawBind)}},{key:"_finishDraw",value:function(t){switch(this.time=null,this.map.off("mousedown",this.measureNodeDistanceBind),this.activeMode){case"draw_line_string":var e=di()(t.features[0],"kilometers");this.result=Object(_i.convertLength)(e,"kilometers",this.activeUnit),this._resetEvent();break;case"draw_polygon":var i=yi()(t.features[0]);this.result=Object(_i.convertArea)(i,"meters",this.activeUnit),this._resetEvent(!0,!1,this.result,t.features[0])}this.fire("measure-finished",{result:this._getFormatResult(this.result)})}},{key:"_measureNodeDistance",value:function(t){var e=t.lngLat,i=[e.lng,e.lat];this.isOpenMoveEvent&&(this.popupFollowMouseBind=this._popupFollowMouse.bind(this),this.map.on("mousemove",this.popupFollowMouseBind),this.isOpenMoveEvent=!1),this.measureNodes.push(i),"draw_line_string"===this.activeMode&&this._renderPopupTip(t),this.draw.getAll().features.length||(this._resetEvent(),this.activeMode=null)}},{key:"_popupFollowMouse",value:function(t){var e=t.lngLat,i=[e.lng,e.lat],r=this.tipHoverDiv;r||(r=new xi.a.Popup({closeButton:!1,closeOnClick:!1})),r.setLngLat(i);var n,o=[].concat(this.measureNodes,[i]),a=this._toGeoJSON("draw_line_string"===this.activeMode?o:[o],"draw_line_string"===this.activeMode?"LineString":"Polygon");switch(this.activeMode){case"draw_line_string":var s=di()(a,"kilometers");this.result=Object(_i.convertLength)(s,"kilometers",this.activeUnit);break;case"draw_polygon":var l=yi()(a);this.result=Object(_i.convertArea)(l,"meters",this.activeUnit)}"draw_line_string"===this.activeMode?n=Wt.t("measure.".concat(this.activeUnit)):"draw_polygon"===this.activeMode&&(n=Wt.t("measure.square".concat(this.activeUnit))),r.setText("".concat(this._getFormatResult(this.result)," ").concat(n)),r.addTo(this.map),this.cachePolygonUnit.value=this.result,this.cachePolygonUnit.unit=this.activeUnit,this.tipHoverDiv=r}},{key:"_renderPopupTip",value:function(t){var e=t.lngLat,i=e.lng,r=e.lat,n=new xi.a.Popup({closeButton:!1,closeOnClick:!1});if(n.setLngLat([i,r]),1<this.measureNodes.length){var o,a=this._toGeoJSON(this.measureNodes,"LineString"),s=di()(a,"kilometers"),l=Object(_i.convertLength)(s,"kilometers",this.activeUnit);"draw_line_string"===this.activeMode?o=Wt.t("measure.".concat(this.activeUnit)):"draw_polygon"===this.activeMode&&(o=Wt.t("measure.square".concat(this.activeUnit)));var u="".concat(this._getFormatResult(l)," ").concat(o);this.cacheLengthUnitList.push({value:this._getFormatResult(l),unit:this.activeUnit}),n.setText(u)}else n.setText("èµ·ç¹");n&&n.addTo(this.map),this.tipNodes.push(n)}},{key:"_resetEvent",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0;if(this.isOpenMoveEvent=!0,this.map.off("mousemove",this.popupFollowMouseBind),t&&this.map.off("mousedown",this.measureNodeDistanceBind),e)this.tipHoverDiv&&this.tipHoverDiv.remove(),this.tipHoverDiv=null;else{var n=vi()(r),o=Wt.t("measure.square".concat(this.activeUnit));i=this._getFormatResult(i),this.tipHoverDiv.setLngLat(n.geometry.coordinates).setText("".concat(i," ").concat(o))}}},{key:"_getFormatResult",value:function(t){return ii.reservedDecimal(t||this.result,4)}},{key:"_toGeoJSON",value:function(t,e){return{type:"Feature",geometry:{type:e,coordinates:t}}}}]),i}(ae),Si=(n("vdDi"),Ee({name:"SmMeasure",mixins:[Se,Ce,ke,Be],props:{iconClass:{type:String,default:"smwidgets-icons-measure"},headerName:{type:String,default:"éç®"},showUnitSelect:{type:Boolean,default:!0},distanceDefaultUnit:{type:String,default:"kilometers"},areaDefaultUnit:{type:String,default:"kilometers"}},data:function(){return{unitOptions:{draw_line_string:{kilometers:this.$t("measure.kilometers"),miles:this.$t("measure.miles"),meters:this.$t("measure.meters"),feet:this.$t("measure.feet"),yards:this.$t("measure.yards")},draw_polygon:{kilometers:this.$t("measure.squarekilometers"),miles:this.$t("measure.squaremiles"),meters:this.$t("measure.squaremeters"),feet:this.$t("measure.squarefeet"),yards:this.$t("measure.squareyards")}},modeGroups:[{mode:"draw_line_string",title:this.$t("measure.distance"),iconClass:"smwidgets-icons-line-layer"},{mode:"draw_polygon",title:this.$t("measure.area"),iconClass:"smwidgets-icons-polygon-layer"}],activeMode:"",result:"",activeDistanceUnit:this.distanceDefaultUnit,activeAreaUnit:this.areaDefaultUnit,modeUnitMap:{draw_line_string:"activeDistanceUnit",draw_polygon:"activeAreaUnit"}}},computed:{getUnitOptions:function(){return this.unitOptions[this.activeMode]||[]},getResult:function(){return this.result?"".concat(this.result," ").concat(this.getUnitLabel):""},getUnitLabel:function(){return this.getUnitOptions[this[this.modeUnitMap[this.activeMode]]]},getAreaSelect:function(){return"draw_polygon"===this.activeMode&&this.showUnitSelect},getDistanceSelect:function(){return"draw_line_string"===this.activeMode&&this.showUnitSelect}},watch:{distanceDefaultUnit:function(t){this.activeDistanceUnit=t},areaDefaultUnit:function(t){this.activeAreaUnit=t}},mounted:function(){this.changeSelectInputStyle()},loaded:function(){var i=this;this.viewModel=new wi({map:this.map}),this.viewModel.on("measure-finished",function(t){var e=t.result;i.result=e}),this.viewModel.on("measure-start",function(t){t.result;i.result=""}),this.viewModel.on("update-unit",function(t){var e=t.result;i.result=e})},updated:function(){this.changeSelectInputStyle()},methods:{changeSelectInputStyle:function(){var t=this.$el.querySelector(".el-input__inner");t&&(t.style.borderColor=this.getTextColor,t.style.color=this.getTextColor,t.style.backgroundColor=this.getBackground)},changeChosenStyle:function(t){var e=this.$el.querySelector(".el-select-dropdown__item.selected");e&&(e.style.color=t?this.getColorStyle(0).color:"#606266")},changeMeasureMode:function(t){var e=this[this.modeUnitMap[t]];this.map.loaded()&&(this.activeMode!==t?(this.viewModel.openDraw(t,e),this.activeMode=t):(this.viewModel.closeDraw(),this.activeMode=null))},updateUnit:function(t){this.viewModel.updateUnit(t)}}},function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("sm-card",{directives:[{name:"show",rawName:"v-show",value:i.isShow,expression:"isShow"}],staticClass:"sm-widget-measure",attrs:{"icon-class":i.iconClass,"icon-position":i.position,"header-name":i.headerName,"auto-rotate":i.autoRotate,collapsed:i.collapsed}},[r("div",{staticClass:"sm-widget-measure__panel",style:[i.getBackgroundStyle,i.getTextColorStyle]},[r("div",{staticClass:"sm-widget-measure__panelContent"},[i._l(i.modeGroups,function(e){return r("span",{key:e.mode,class:{"sm-widget-measure__modeIcon":!0,"sm-widget-measure__iconActive":i.activeMode===e.mode},style:i.activeMode===e.mode?i.getColorStyle(0):"",attrs:{title:e.title},on:{click:function(t){i.changeMeasureMode(e.mode)}}},[r("i",{class:e.iconClass})])}),i._v(" "),r("el-select",{directives:[{name:"show",rawName:"v-show",value:i.getDistanceSelect,expression:"getDistanceSelect"}],staticClass:"sm-widget-measure__unit",attrs:{placeholder:"è¯·éæ©",size:"mini","popper-append-to-body":!1},on:{change:i.updateUnit,"visible-change":i.changeChosenStyle},model:{value:i.activeDistanceUnit,callback:function(t){i.activeDistanceUnit=t},expression:"activeDistanceUnit"}},i._l(i.getUnitOptions,function(t,e,i){return r("el-option",{key:i,attrs:{label:t,value:e}})})),i._v(" "),r("el-select",{directives:[{name:"show",rawName:"v-show",value:i.getAreaSelect,expression:"getAreaSelect"}],staticClass:"sm-widget-measure__unit",attrs:{placeholder:"è¯·éæ©",size:"mini","popper-append-to-body":!1},on:{change:i.updateUnit,"visible-change":i.changeChosenStyle},model:{value:i.activeAreaUnit,callback:function(t){i.activeAreaUnit=t},expression:"activeAreaUnit"}},i._l(i.getUnitOptions,function(t,e,i){return r("el-option",{key:i,attrs:{label:t,value:e}})})),i._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!i.showUnitSelect&&i.activeMode,expression:"!showUnitSelect && activeMode"}],staticClass:"sm-widget-measure__unit sm-widget-measure__default"},[i._v(i._s(i.getUnitLabel))])],2),i._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:i.getResult,expression:"getResult"}],staticClass:"sm-widget-measure__calculateResult",style:i.getTextColorStyle},[r("div",{staticClass:"sm-widget-measure__calcuTitle"},[i._v(i._s(i.$t("measure.measureResult")))]),i._v(" "),r("div",{staticClass:"sm-widget-measure__result"},[i._v(i._s(i.getResult))])])])])},[],!1,null,null,null).exports),Ci=function(t){function r(t,e){var i;return Xt()(this,r),(i=Qt()(this,ee()(r).call(this))).options=e||{},i.searchTaskId=0,i.options.cityGeoCodingConfig={addressUrl:"http://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"},t?(i.map=t,i.searchtType=["layerNames","onlineLocalSearch","restMap","restData","iportalData","addressMatch"],i):Qt()(i,new Error("Cannot find map"))}return re()(r,t),Yt()(r,[{key:"search",value:function(t){var i=this;this.searchCount=0,this.searchResult=[],this.keyWord=t,this.maxFeatures=100<=parseInt(this.options.maxFeatures)?100:parseInt(this.options.maxFeatures)||8,this.searchtType.forEach(function(t){if(i.options[t])if("onlineLocalSearch"===t&&i.options[t].enable)i.searchCount+=1;else if("onlineLocalSearch"!==t){var e=i.options[t].length;i.searchCount+=e}},this);var e=$()({},this.options),r=e.layerNames,n=e.onlineLocalSearch,o=e.restMap,a=e.restData,s=e.iportalData,l=e.addressMatch;return r&&this._searchFromLayer(r),n.enable&&this._searchFromPOI(n),o&&this._searchFromRestMap(o),a&&this._searchFromRestData(a),s&&this._searchFromIportal(s),l&&this._searchFromAddressMatch(l),this.searchTaskId}},{key:"getFeatureInfo",value:function(t,a,e){var s=0<a.indexOf("ï¼")?a.split("ï¼")[1].trim():a;s="null"===s?a.split("ï¼")[0].trim():s;var l={info:[]};return t.forEach(function(t){e===t.source&&t.result.forEach(function(t){var e,i,r=t.properties||t,n=r.address||t.filterAttribute.filterAttributeValue||r.name;if(n.trim()===s)if(i="MultiPolygon"===(e=t.geometry||[t.location.x,t.location.y]).type||"Polygon"===e.type||"LineString"===e.type?vi()(t).geometry.coordinates:e.coordinates||e,l.coordinates=i,a.indexOf("ï¼")<0)l.info.push({attribute:"å°å",attributeValue:n});else for(var o in t.properties)t.properties[o]&&l.info.push({attribute:o,attributeValue:t.properties[o]})})},this),l}},{key:"addMarker",value:function(t,e){var i=new oe.a.Popup({className:"attributePopup",closeOnClick:!1}).setLngLat(t).setHTML(e.innerHTML).addTo(this.map),r=(new oe.a.Marker).setLngLat(t).setPopup(i).addTo(this.map);return this.map.flyTo({center:t}),r}},{key:"_searchFromLayer",value:function(t){var n=this;setTimeout(function(){t.forEach(function(t){var e=n.map.getSource(t);if(e){var i=jt()(e._data.features),r=n._getFeaturesByKeyWord(n.keyWord,i);n._searchFeaturesSucceed(r.slice(0,n.maxFeatures),t)}else n._searchFeaturesFailed("The ".concat(t," does not exist"))},n)},0)}},{key:"_searchFeaturesFailed",value:function(t){this.searchCount--,this.fire("searchfailed"+this.searchTaskId,{error:t}),this.fire("searchfailed",{error:t}),console.log(t)}},{key:"_searchFeaturesSucceed",value:function(t,e){0<t.length&&this.searchResult.push({source:e,result:t}),this.searchCount--,0===this.searchCount&&this.fire("searchsucceeded"+this.searchTaskId,{result:this.searchResult})&&(this.searchTaskId+=1),0===this.searchCount&&this.fire("searchsucceeded",{result:this.searchResult})}},{key:"_searchFromPOI",value:function(t){var i=this;this.geoCodeParam={pageSize:this.options.pageSize||10,pageNum:this.options.pageNum||1,city:t.city},this.geoCodeParam.keyWords=this.keyWord;var e=this._getSearchUrl(this.geoCodeParam);SuperMap.FetchRequest.get(e).then(function(t){return t.json()}).then(function(t){if(t.error||0===t.poiInfos.length)i._searchFeaturesFailed("search from POI failed");else if(t.poiInfos){var e=i._dataToGeoJson(t.poiInfos,i.geoCodeParam);i._searchFeaturesSucceed(e.slice(0,i.maxFeatures),"Online æ¬å°æç´¢")}}).catch(function(t){i._searchFeaturesFailed(t)})}},{key:"_searchFromRestMap",value:function(t){var r=this;t.forEach(function(i){var t=new Ze(i.url);t.on("getdatafailed",function(t){r._searchFeaturesFailed(t)}),t.on("featureisempty",function(t){r.searchCount--,r.fire("searchresultisempty",t),console.log(t)}),t.on("getdatasucceeded",function(t){if(t.features){var e=r._getFeaturesByKeyWord(r.keyWord,t.features);r._searchFeaturesSucceed(e,i.name||"Rest Map Search")}}),t.getMapFeatures({dataUrl:i.url,mapName:i.layerName},{maxFeatures:r.maxFeatures,keyWord:r.keyWord})},this)}},{key:"_searchFromRestData",value:function(t){var n=this;t.forEach(function(i){var t=new Ze(i.url);t.on("getdatafailed",function(t){n._searchFeaturesFailed(t)}),t.on("featureisempty",function(t){n.searchCount--,n.fire("searchresultisempty",t),console.log(t)}),t.on("getdatasucceeded",function(t){if(t.features&&0<t.features.length){var e=n._getFeaturesByKeyWord(n.keyWord,t.features);n._searchFeaturesSucceed(e,i.name||"Rest Data Search")}else n.searchCount--});var e=i.dataName[0].split(":")[0],r=i.dataName[0].split(":")[1];t.getDataFeatures({datasetName:r,dataSourceName:e,dataUrl:i.url},{maxFeatures:n.maxFeatures,keyWord:n.keyWord})},this)}},{key:"_searchFromIportal",value:function(t){var r=this;t.forEach(function(i){var t=new Xe(i.url,i.withCredentials||!1);t.on("getdatafailed",function(t){r._searchFeaturesFailed(t)}),t.on("featureisempty",function(t){r.searchCount--,r.fire("searchresultisempty",t),console.log(t)}),t.on("getdatasucceeded",function(t){if(t.features){var e=r._getFeaturesByKeyWord(r.keyWord,t.features);r._searchFeaturesSucceed(e,i.name||"Rest Map Search")}}),t.getData({keyWord:r.keyWord})},this)}},{key:"_searchFromAddressMatch",value:function(t){var r=this;t.forEach(function(e){r.addressMatchService=new oe.a.supermap.AddressMatchService(e.url);var t={address:r.keyWord,fromIndex:0,toIndex:r.maxFeatures,maxReturn:r.maxFeatures,prjCoordSys:"{epsgcode:4326}"},i=new SuperMap.GeoCodingParameter(t);r.addressMatchService.code(i,function(t){0<t.result.length?r._searchFeaturesSucceed(t.result,e.name||"Address Match Search"):r._searchFeaturesFailed(t)})},this)}},{key:"_dataToGeoJson",value:function(t,e){for(var i=[],r=0;r<t.length;r++){var n={type:"Feature",geometry:{type:"Point",coordinates:[t[r].location.x,t[r].location.y]},properties:{name:t[r].name||e.keyWords,address:t[r].formatedAddress||t[r].address},filterAttribute:{filterAttributeName:t[r].name||e.keyWords,filterAttributeValue:t[r].formatedAddress||t[r].address},filterVal:"".concat(t[r].name||e.keyWords,"ï¼").concat(t[r].formatedAddress||t[r].address)};i.push(n)}return i}},{key:"_getSearchUrl",value:function(t){return this.options.cityGeoCodingConfig.addressUrl+".json?keywords=".concat(t.keyWords,"&city=").concat(t.city||"åäº¬å¸","&pageSize=").concat(t.pageSize,"&pageNum=").concat(t.pageNum,"&key=").concat(this.options.cityGeoCodingConfig.key)}},{key:"_getFeaturesByKeyWord",value:function(t,e){var i=this,o=[],a=new RegExp(t.toLowerCase()),s=this._getAttributeNames(e);return e.forEach(function(r){if(!r.properties)return null;var n=r.properties;s.forEach(function(t){if(n[t]&&a.test(n[t].toString().toLowerCase())){var e=t,i=n[t];r.filterAttribute||(r.filterAttribute={filterAttributeName:e,filterAttributeValue:i},r.filterVal="".concat(e,"ï¼").concat(i),o.push(r))}},i)}),o}},{key:"_getAttributeNames",value:function(t){var e=[],i=t[0].properties;return i&&Object.keys(i).forEach(function(t){e.push(t)},this),e}}]),r}(ae),Ei={name:"SmTabelPopup",props:{state:{type:Object}}},Ti=(n("ws4L"),Ee(Ei,function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"sm-table-popup"},[i("el-table",{attrs:{data:this.state.data,"max-height":300}},this._l(this.state.columns,function(t,e){return i("el-table-column",{key:e,attrs:{prop:t.prop,width:t.width||150,label:t.label}})}))],1)},[],!1,null,null,null).exports),ki=Ee({name:"SmSearch",mixins:[Ce,Se,ke],props:{maxFeatures:{type:[Number,String],default:8},layerNames:{type:Array},onlineLocalSearch:{type:Object,default:function(){return{enable:!0,city:"åäº¬å¸"}}},restMap:{type:Array},restData:{type:Array},iportalData:{type:Array},addressMatch:{type:Array}},data:function(){return{searchKey:null,searchResult:[]}},computed:{getResultLength:function(){return 0<this.searchResult.length}},mounted:function(){this.changeSearchInputStyle()},loaded:function(){this.viewModel=new Ci(this.map,this.$props),this.oldSearchTaskId=null,this.inputKeypressEvent()},updated:function(){this.changeSearchInputStyle();var t=this.$el.querySelectorAll(".sm-widget-search__panel li"),e=!0,i=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.style.color=this.getTextColor}}catch(t){i=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}},methods:{changeSearchInputStyle:function(){var t=this.$el.querySelector(".el-input__inner");t.style.backgroundColor=this.getBackground,t.style.color=this.getTextColor},changeChosenResultStyle:function(t){t.target.style.color=this.getColorStyle(0).color},resetChosenResultStyle:function(t){t.target.style.color=this.getTextColor},clearResult:function(){this.$message.closeAll(),this.searchResult=[],this.marker&&this.marker.remove()&&(this.marker=null);var t=this.$el.querySelector(".el-input__icon");t.classList.add("el-icon-search"),t.classList.remove("el-icon-loading")},searchButtonClicked:function(){this.search()},inputKeypressEvent:function(){var e=this;this.$el.querySelector("input").onkeypress=function(t){13===t.which&&(!e.searchKey&&e.search(),e.$el.querySelector("input").onchange=function(){e.search()})}},search:function(t){this.clearResult();var e=this.$props,i=e.layerNames,r=e.onlineLocalSearch,n=e.restMap,o=e.restData,a=e.iportalData,s=e.addressMatch;if(i&&0<i.length||r.enable||n&&0<n.length||o&&0<o.length||a&&0<a.length||s&&0<s.length)if(t||this.searchKey){this.searchTaskId=this.viewModel.search(t||this.searchKey),this.regiterEvents();var l=this.$el.querySelector(".el-input__icon");l.classList.remove("el-icon-search"),l.classList.add("el-icon-loading")}else this.$message({showClose:!0,message:this.$t("search.noKey"),type:"warning",duration:1e3});else this.$message({showClose:!0,message:"è¯·è®¾ç½®æç´¢æºï¼",type:"warning",duration:1e3})},inputValueCleared:function(){this.clearResult()},searchResultListClicked:function(t){var e=t.target.innerHTML;this.marker&&this.marker.remove(),this.marker=null,this.linkageFeature(e,t.target)},linkageFeature:function(t,e){var i=this,r=e.parentElement.parentElement.previousElementSibling.innerHTML,n=this.viewModel.getFeatureInfo(this.searchResult,t,r);if(1<=n.info.length){var o={columns:[{label:this.$t("search.attribute"),prop:"attribute",width:80},{label:this.$t("search.attributeValue"),prop:"attributeValue",minWidth:100}],data:n.info},a=new(j.a.extend(Ti))({propsData:{state:o}}).$mount();this.$nextTick(function(){i.marker=i.viewModel.addMarker(n.coordinates,a.$el)})}},regiterEvents:function(){var i=this;1<=this.searchKey&&this.viewModel.off("searchsucceeded"+(this.searchTaskId-1)),this.viewModel.on("searchsucceeded"+this.searchTaskId,function(t){i.$emit("search-succeeded",{searchResult:t.result}),i.searchResult=t.result;var e=i.$el.querySelector(".el-input__icon");e.classList.add("el-icon-search"),e.classList.remove("el-icon-loading"),i.searchResult.length<1&&i.$message({showClose:!0,message:i.$t("search.noResult"),type:"warning",duration:1e3})}),this.viewModel.on("searchfailed",function(t){i.$emit("search-failed",t)})}}},function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("div",{staticClass:"sm-widget-search",style:[i.getTextColorStyle]},[r("div",{staticClass:"sm-widget-search__input"},[r("el-input",{staticClass:"sm-widget-search__el-input",attrs:{placeholder:i.$t("search.inputPlaceHolder"),clearable:""},on:{clear:i.inputValueCleared},model:{value:i.searchKey,callback:function(t){i.searchKey=t},expression:"searchKey"}},[r("div",{staticClass:"el-input__icon el-icon-search",style:i.getColorStyle(0),attrs:{slot:"prefix"},on:{click:i.searchButtonClicked},slot:"prefix"})])],1),i._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:i.getResultLength,expression:"getResultLength"}],staticClass:"sm-widget-search__result",style:[i.getBackgroundStyle]},i._l(i.searchResult,function(t,e){return r("div",{key:e,staticClass:"sm-widget-search__panel"},[t.source?r("span",{staticClass:"sm-widget-search__panel-header",style:i.getColorStyle(0)},[i._v(i._s(t.source))]):i._e(),i._v(" "),t.result?r("div",{staticClass:"sm-widget-search__panel-body"},[r("ul",i._l(t.result,function(t,e){return r("li",{key:e,attrs:{title:t.filterVal||t.address},on:{click:i.searchResultListClicked,mouseenter:i.changeChosenResultStyle,mouseleave:i.resetChosenResultStyle}},[i._v(i._s(t.filterVal||t.address))])}))]):i._e()])}))])},[],!1,null,null,null).exports,Mi=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this,t))).webmap=t,e.sourceListModel=e.webmap.getSourceListModel(),e}return re()(i,t),Yt()(i,[{key:"getStyle",value:function(t){return this.sourceListModel.getLegendStyle(t)}}]),i}(ae),Pi=Ee({name:"SmLegend",filters:{selectLayerType:function(t){return{POLYGON:"smwidgets-icons-polygon-layer",POINT:"smwidgets-icons-point-layer",LINE:"smwidgets-icons-line-layer"}[t]}},mixins:[Se,Ce,ke,Be],props:{iconClass:{type:String,default:"smwidgets-icons-layer-style"},autoRotate:{type:Boolean,default:!1},collapsed:{type:Boolean,default:!1},layerNames:{type:Array,required:!0},isShowTitle:{type:Boolean,default:!1},isShowField:{type:Boolean,default:!1},mode:{type:String,default:"simple",validator:function(t){return["simple","panel"].includes(t)}}},data:function(){return{legendList:{},activeLegend:[1],themeStyle:{}}},computed:{getTitleColor:function(){return{color:this.colorGroupsData[1]}},noBorder:function(){return"simple"===this.mode?{background:"transparent","box-shadow":"none"}:{}}},methods:{},loaded:function(){var i=this,r=new Mi(this.webmap);this.layerNames.forEach(function(t){var e=r.getStyle(t);if(!e)throw new Error(i.$t("legend.noMatchLayer"));i.legendList[t]||i.$set(i.legendList,t,e)}),this.$el.querySelector(".sm-widget-card__content").style.width="200px"}},function(){var r=this,t=r.$createElement,n=r._self._c||t;return n("sm-card",{directives:[{name:"show",rawName:"v-show",value:r.isShow,expression:"isShow"}],staticClass:"sm-widget-legend",style:[r.noBorder],attrs:{"icon-class":"simple"===r.mode?"":r.iconClass,"icon-position":r.position,"header-name":"simple"===r.mode?"":r.headerName,"auto-rotate":r.autoRotate,collapsed:r.collapsed}},[n("el-card",{style:["simple"!==r.mode?[r.getBackgroundStyle,r.getTextColorStyle,{border:0,borderRadius:0}]:{border:0,borderRadius:0,background:"transparent"}]},["panel"===r.mode||1<r.layerNames.length&&"simple"!==r.mode?n("el-collapse",{staticClass:"sm-widget-legend__table",model:{value:r.activeLegend,callback:function(t){r.activeLegend=t},expression:"activeLegend"}},r._l(r.legendList,function(i,t,e){return n("el-collapse-item",{key:e,attrs:{name:e+1}},[n("template",{slot:"title"},[n("div",{staticClass:"sm-widget-legend__title",style:[r.getColorStyle(0)]},[r._v(r._s(i.layerId))])]),r._v(" "),r.isShowField?n("div",{staticClass:"sm-widget-legend__themefield add-ellipsis",style:[r.getColorStyle(0)]},[r._v(r._s(r.$t("legend.themeField"))+":"+r._s(i.themeField))]):r._e(),r._v(" "),"UNIQUE"===i.layerType?n("div",[n("ul",{staticClass:"sm-widget-legend__point"},r._l(i.styleGroup,function(t,e){return n("li",{key:e,staticClass:"sm-widget-legend__item"},[n("i",{class:r._f("selectLayerType")(i.featureType),style:{color:t.color}}),r._v(" "),n("span",{staticClass:"sm-widget-legend__field-value"},[r._v(r._s(t.value))])])}))]):r._e(),r._v(" "),"HEAT"===i.layerType?n("div",[n("div",{staticClass:"sm-widget-legend__heat",style:{background:"linear-gradient(to top,"+i.styleGroup.join(",")+")"}},[n("span",{staticClass:"sm-widget-legend__top"},[n("i",{staticClass:"el-icon-caret-left"}),r._v("\n              "+r._s(r.$t("legend.top"))+"\n            ")]),r._v(" "),n("span",{staticClass:"sm-widget-legend__bottom"},[n("i",{staticClass:"el-icon-caret-left"}),r._v("\n              "+r._s(r.$t("legend.bottom"))+"\n            ")])])]):r._e(),r._v(" "),"RANGE"===i.layerType?n("div",[n("div",{staticClass:"sm-widget-legend__range"},r._l(i.styleGroup,function(t,e){return n("div",{key:e,staticClass:"sm-widget-legend__range-item",style:{background:t.color}},[n("span",{staticClass:"add-ellipsis"},[n("i",{staticClass:"el-icon-caret-left"}),r._v("\n                "+r._s(t.start)+"-"+r._s(t.end)+"\n              ")])])}))]):r._e()],2)})):"simple"===r.mode||1===r.layerNames.length?r._l(r.legendList,function(i,t,e){return n("div",{key:e,staticClass:"sm-widget-legend__noBorder"},[r.isShowTitle?n("div",{staticClass:"sm-widget-legend__title",style:[r.getColorStyle(0)]},[r._v(r._s(i.layerId))]):r._e(),r._v(" "),r.isShowField?n("div",{staticClass:"sm-widget-legend__themefield add-ellipsis",style:[r.getColorStyle(0)]},[r._v(r._s(r.$t("legend.themeField"))+":"+r._s(i.themeField))]):r._e(),r._v(" "),"UNIQUE"===i.layerType?n("div",[n("ul",{staticClass:"sm-widget-legend__point"},r._l(i.styleGroup,function(t,e){return n("li",{key:e,staticClass:"sm-widget-legend__item"},[n("i",{class:r._f("selectLayerType")(i.featureType),style:{color:t.color}}),r._v(" "),n("span",{staticClass:"sm-widget-legend__field-value"},[r._v(r._s(t.value))])])}))]):r._e(),r._v(" "),"HEAT"===i.layerType?n("div",[n("div",{staticClass:"sm-widget-legend__heat",style:{background:"linear-gradient(to top,"+i.styleGroup.join(",")+")"}},[n("span",{staticClass:"sm-widget-legend__top"},[n("i",{staticClass:"el-icon-caret-left"}),r._v("\n            "+r._s(r.$t("legend.top"))+"\n          ")]),r._v(" "),n("span",{staticClass:"sm-widget-legend__bottom"},[n("i",{staticClass:"el-icon-caret-left"}),r._v("\n            "+r._s(r.$t("legend.bottom"))+"\n          ")])])]):r._e(),r._v(" "),"RANGE"===i.layerType?n("div",[n("div",{staticClass:"sm-widget-legend__range"},r._l(i.styleGroup,function(t,e){return n("div",{key:e,staticClass:"sm-widget-legend__range-item",style:{background:t.color}},[n("span",{staticClass:"add-ellipsis"},[n("i",{staticClass:"el-icon-caret-left"}),r._v("\n              "+r._s(t.start)+"-"+r._s(t.end)+"\n            ")])])}))]):r._e()])}):r._e()],2)],1)},[],!1,null,null,null).exports,Ai=function t(e){Xt()(this,t),this.url=e.url,this.attributeFilter=e.attributeFilter||null,this.name=e.name||Wt.t("commontypes.iportalData")},Li=function t(e){Xt()(this,t),this.url=e.url,this.dataName=e.dataName,this.attributeFilter=e.attributeFilter||null,this.name=e.name||Wt.t("commontypes.restData")},Ii=function t(e){Xt()(this,t),this.url=e.url,this.layerName=e.layerName,this.attributeFilter=e.attributeFilter||null,this.name=e.name||Wt.t("commontypes.restMap")},Oi=function(t){function r(t,e){var i;return Xt()(this,r),(i=Qt()(this,ee()(r).call(this))).map=t,i.options=e||{},i.maxFeatures=i.options.maxFeatures||200,i.layerStyle=e.layerStyle||{},i}return re()(r,t),Yt()(r,[{key:"query",value:function(t,e){this.queryParameter=t,this.strokeLayerID&&this.map.removeLayer(this.strokeLayerID),this.layerID&&this.map.getLayer(this.layerID)&&this.map.removeLayer(this.layerID),"currentMapBounds"===(this.queryBounds=e)&&(this.bounds=this.map.getBounds()),this.queryResult=null,t instanceof Ai?this._queryByIportalData(t):t instanceof Li?this._queryByRestData(t):t instanceof Ii&&this._queryByRestMap(t)}},{key:"_queryByRestMap",value:function(e){var i=this;if(this.bounds){var t=new SuperMap.QueryByBoundsParameters({queryParams:{name:e.layerName,attributeFilter:e.attributeFilter},bounds:this.bounds,startRecord:0,expectCount:this.maxFeatures});new oe.a.supermap.QueryService(e.url).queryByBounds(t,function(t){i._mapQuerySucceed(t,e)})}else{var r=new SuperMap.QueryBySQLParameters({queryParams:{name:e.layerName,attributeFilter:e.attributeFilter},startRecord:0,expectCount:this.maxFeatures});new oe.a.supermap.QueryService(e.url).queryBySQL(r,function(t){i._mapQuerySucceed(t,e)})}}},{key:"_queryByRestData",value:function(e){var i=this;if(this.bounds){var t=new SuperMap.GetFeaturesByBoundsParameters({attributeFilter:e.attributeFilter,datasetNames:e.dataName,bounds:this.bounds,fromIndex:0,toIndex:this.maxFeatures-1});new oe.a.supermap.FeatureService(e.url).getFeaturesByBounds(t,function(t){i._dataQuerySucceed(t,e)})}else{var r=new SuperMap.GetFeaturesBySQLParameters({queryParameter:{attributeFilter:e.attributeFilter},datasetNames:e.dataName,fromIndex:0,toIndex:this.maxFeatures-1});new oe.a.supermap.FeatureService(e.url).getFeaturesBySQL(r,function(t){i._dataQuerySucceed(t,e)})}}},{key:"_mapQuerySucceed",value:function(t,e){var i=t.result;if(i&&0!==i.totalCount){var r=i.recordsets[0].features.features;0<r.length&&(this.queryResult={name:e.name,result:r}),this._addResultLayer(this.queryResult),this.fire("querysucceeded",{result:this.queryResult})}else i&&0===i.totalCount?this.fire("queryfailed",{message:Wt.t("query.noResults")}):this.fire("queryfailed",{message:Wt.t("query.queryFailed")})}},{key:"_dataQuerySucceed",value:function(t,e){var i=t.result;if(i&&0!==i.totalCount){var r=i.features.features;0<r.length&&(this.queryResult={name:e.name,result:r}),this._addResultLayer(this.queryResult),this.fire("querysucceeded",{result:this.queryResult})}else i&&0===i.totalCount?this.fire("queryfailed",{message:Wt.t("query.noResults")}):this.fire("queryfailed",{message:Wt.t("query.queryFailed")})}},{key:"_queryByIportalData",value:function(i){var r=this,t=i.url,e=i.withCredentials||!1;SuperMap.FetchRequest.get(t,null,{withCredentials:e}).then(function(t){return t.json()}).then(function(t){var e;!1!==t.succeed?t.dataItemServices&&0<t.dataItemServices.length?(t.dataItemServices.forEach(function(t){"RESTDATA"===t.serviceType&&"PUBLISHED"===t.serviceStatus?e=t:"RESTMAP"===t.serviceType&&"PUBLISHED"===t.serviceStatus?e=t:r.fire("queryfailed",{message:Wt.t("query.seviceNotSupport")})},r),r._getDatafromRest(e.serviceType,e.address,i)):r.fire("queryfailed",{message:Wt.t("query.seviceNotSupport")}):r.queryCount--}).catch(function(t){r.fire("queryfailed",{message:t}),console.log(t)})}},{key:"_getDatafromRest",value:function(t,e,i){var r=this,n=i.withCredentials||!1;if("RESTDATA"===t){var o,a,s="".concat(e,"/data/datasources");SuperMap.FetchRequest.get(s,null,{withCredentials:n}).then(function(t){return t.json()}).then(function(t){o=t.datasourceNames[0],s="".concat(e,"/data/datasources/").concat(o,"/datasets"),SuperMap.FetchRequest.get(s,null,{withCredentials:n}).then(function(t){return t.json()}).then(function(t){a=t.datasetNames[0],r._queryByRestData({dataName:[o+":"+a],url:"".concat(e,"/data"),name:i.name,attributeFilter:i.attributeFilter})}).catch(function(t){r.fire("queryfailed",{message:t}),console.log(t)})}).catch(function(t){r.fire("queryfailed",{message:t}),console.log(t)})}else{var l,u,c,h="".concat(e,"/maps");SuperMap.FetchRequest.get(h,null,{withCredentials:n}).then(function(t){return t.json()}).then(function(t){l=t[0].name,c=t[0].path,h=h="".concat(e,"/maps/").concat(l,"/layers"),SuperMap.FetchRequest.get(h,null,{withCredentials:n}).then(function(t){return t.json()}).then(function(t){return u=t[0].subLayers.layers[0].caption,r._queryByRestMap({layerName:u,url:c,name:i.name,attributeFilter:i.attributeFilter}),u}).catch(function(t){r.fire("queryfailed",{message:t}),console.log(t)})}).catch(function(t){r.fire("queryfailed",{message:t}),console.log(t)})}}},{key:"_addResultLayer",value:function(){this.layerID=this.queryParameter.name+(new Date).getTime();var t=this.queryResult.result[0].geometry.type,e={type:"geojson",data:{type:"FeatureCollection",features:this.queryResult.result}};this._addOverlayToMap(t,e,this.layerID)}},{key:"getFilterFeature",value:function(t){for(var e,i=this.queryResult.result,r=0;r<i.length;r++){if(t===(i[r].properties.SmID||i[r].properties.SMID)){e=this._getFeatrueInfo(i[r]);break}}return this.map.flyTo({center:e.coordinates}),e}},{key:"_getFeatrueInfo",value:function(t){var e,i={},r=t.geometry;for(var n in e="MultiPolygon"===r.type||"Polygon"===r.type||"LineString"===r.type||"MultiLineString"===r.type?vi()(t).geometry.coordinates:r.coordinates,i.coordinates=e,i.info=[],t.properties)t.properties[n]&&i.info.push({attribute:n,attributeValue:t.properties[n]});return i}},{key:"getPopupFeature",value:function(){var r=this;this.map.on("click",this.layerID,function(t){var e=t.features[0],i=r._getFeatrueInfo(e);r.fire("getfeatureinfosucceeded",{featureInfo:i})})}},{key:"addPopup",value:function(t,e){return(new oe.a.Popup).setLngLat(t).setHTML(e.innerHTML).addTo(this.map)}},{key:"_addOverlayToMap",value:function(t,e,i){if("circle"===(t={Point:"circle",LineString:"line",MultiLineString:"line",Polygon:"fill",MultiPolygon:"fill"}[t])||"line"===t||"fill"===t){var r=this.layerStyle[t];this.map.addLayer({id:i,type:t,source:e,paint:r&&r.paint||{circle:{"circle-color":"#409eff","circle-opacity":.6,"circle-radius":8,"circle-stroke-width":2,"circle-stroke-color":"#409eff","circle-stroke-opacity":1},line:{"line-width":3,"line-color":"#409eff","line-opacity":1},fill:{"fill-color":"#409eff","fill-opacity":.6,"fill-outline-color":"#409eff"}}[t],layout:r&&r.layout||{}})}if("fill"===t){this.strokeLayerID=i+"-StrokeLine";var n=this.layerStyle.stokeLine,o=n&&n.paint||{"line-width":3,"line-color":"#409eff","line-opacity":1};this.map.addLayer({id:this.strokeLayerID,type:"line",source:e,paint:o,layout:n&&n.layout||{}})}}}]),r}(ae),Di=function(t,e){var i=!0;return t.forEach(function(t){t instanceof e||(i=!1)}),i},zi=Ee({name:"SmQuery",mixins:[Se,Ce,ke,Be],props:{iconClass:{type:String,default:"smwidgets-icons-search"},headerName:{type:String,default:"æ¥è¯¢"},maxFeatures:{type:Number,default:200},layerStyle:{type:Object,default:function(){return{line:new Nr.commontypes.LineStyle({"line-width":3,"line-color":"#409eff","line-opacity":1}),circle:new Nr.commontypes.CircleStyle({"circle-color":"#409eff","circle-opacity":.6,"circle-radius":8,"circle-stroke-width":2,"circle-stroke-color":"#409eff","circle-stroke-opacity":1}),fill:new Nr.commontypes.FillStyle({"fill-color":"#409eff","fill-opacity":.6,"fill-outline-color":"#409eff"}),stokeLine:new Nr.commontypes.LineStyle({"line-width":3,"line-color":"#409eff","line-opacity":1})}}},iportalData:{type:Array,validator:function(t){return Di(t,Ai)}},restData:{type:Array,validator:function(t){return Di(t,Li)}},restMap:{type:Array,validator:function(t){return Di(t,Ii)}}},data:function(){return{isHidden:!1,message:null,value:"mapBounds",selectOptions:[{label:this.$t("query.currentMapBounds"),value:"currentMapBounds"},{label:this.$t("query.mapBounds"),value:"mapBounds"}],queryResult:null,activeTab:"job"}},computed:{jobInfos:function(){var e=this,i=[];return Object.keys(this.$props).forEach(function(t){"iportalData"!==t&&"restData"!==t&&"restMap"!==t||e.$props[t]&&e.$props[t].forEach(function(t){t.name&&i.push(t)},e)},this),i}},loaded:function(){this.viewModel=new Oi(this.map,this.$props),this.resultButton=this.$el.querySelector(".sm-widget-query__result-button"),this.jobButton=this.$el.querySelector(".sm-widget-query__job-button"),this.resultInfoContainer=this.$el.querySelector(".sm-widget-query__result-info"),this.jobInfoContainer=this.$el.querySelector(".sm-widget-query__job-info"),this.registerEvents()},updated:function(){this.changeSelectInputStyle(),this.changeLoadingStyle();var t=this.$el.querySelectorAll(".sm-widget-query__result-body li"),e=!0,i=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.style.color=this.getTextColor}}catch(t){i=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}},methods:{queryButtonClicked:function(t,e){this.$message.closeAll(),this.jobInfo!==t||this.selectValue!==e?(this.queryResult=null,this.popup&&this.popup.remove()&&(this.popup=null),this.loadingInstance=this.$loading.service({target:this.resultInfoContainer,fullscreen:!1,text:this.$t("query.querying"),background:"transparent"}),this.jobButton.classList.add("disabled"),this.resultButtonClicked(),this.$el.querySelector(".sm-widget-query__no-result").classList.add("hidden"),this.jobInfo=t,this.selectValue=e,this.query(this.jobInfo,this.selectValue),this.changeLoadingStyle()):this.$message({showClose:!0,message:this.$t("query.resultAlreadyExists"),type:"warning",duration:1e3})},changeLoadingStyle:function(){var t=this.$el.querySelector(".sm-widget-query__result-info .path"),e=this.$el.querySelector(".sm-widget-query__result-info .el-loading-text");t&&(t.style.stroke=this.getColorStyle(0).color),e&&(e.style.color=this.getColorStyle(0).color)},query:function(t,e){this.viewModel.query(t,e)},jobButtonClicked:function(){this.activeTab="job",this.resultButton.classList.remove("is-active"),this.jobButton.classList.add("is-active"),this.jobInfoContainer.classList.remove("hidden"),this.resultInfoContainer.classList.add("hidden")},resultButtonClicked:function(){this.activeTab="result",this.jobButton.classList.remove("is-active"),this.resultButton.classList.add("is-active"),this.resultInfoContainer.classList.remove("hidden"),this.jobInfoContainer.classList.add("hidden")},jobInfoClicked:function(t){var e,i=t.target.className;"smwidgets-icons-preview"===i||"sm-widget-query__job-info-name"===i||"smwidgets-icons-legend-unfold"===i?(e=t.target.parentNode.parentNode,t.stopPropagation()):(e=t.target.parentNode,t.preventDefault());var r=e.querySelector(".sm-widget-query__job-info-body").classList,n=e.querySelector(".sm-widget-query__job-info-header").children[2];r.contains("hidden")?(r.remove("hidden"),n.classList.add("smwidgets-icons-legend-fold"),n.classList.remove("smwidgets-icons-legend-unfold"),this.chosenPanelNode=e,this.changeSelectInputStyle()):(r.add("hidden"),n.classList.add("smwidgets-icons-legend-unfold"),n.classList.remove("smwidgets-icons-legend-fold"),this.chosenPanelNode=null)},changeSelectInputStyle:function(){var t=this.chosenPanelNode&&this.chosenPanelNode.querySelector(".el-input__inner");t&&(t.style.borderColor=this.getTextColor,t.style.color=this.getTextColor,t.style.backgroundColor="transparent")},changeChosenStyle:function(t){var e=this.chosenPanelNode&&this.chosenPanelNode.querySelector(".el-select-dropdown__item.selected");e&&(e.style.color=t?this.getColorStyle(0).color:"#606266")},changeChosenResultStyle:function(t){t.target.style.color=this.getColorStyle(0).color},resetChosenResultStyle:function(t){t.target.style.color=this.getTextColor},queryResultListClicked:function(t){this.popup&&this.popup.remove()&&(this.popup=null);var e=t.target.innerHTML,i=this.viewModel.getFilterFeature(e.split("ï¼")[1].trim());this.addPopup(i)},registerEvents:function(){var e=this;this.viewModel.on("querysucceeded",function(t){e.$el.querySelector(".sm-widget-query__no-result").classList.remove("hidden"),e.queryResult=t.result,e.viewModel.getPopupFeature(),e.addPopupToFeature(),e.loadingInstance.close(),e.jobButton.classList.remove("disabled"),e.$emit("query-succeeded",t)}),this.viewModel.on("queryfailed",function(t){e.$el.querySelector(".sm-widget-query__no-result").classList.remove("hidden"),e.$message({showClose:!0,message:t.message,type:"warning",duration:1e3}),e.loadingInstance.close(),e.jobButton.classList.remove("disabled"),e.$emit("query-failed",t)})},addPopupToFeature:function(){var i=this;this.viewModel.on("getfeatureinfosucceeded",function(t){var e=t.featureInfo;i.addPopup(e)})},addPopup:function(t){var e=this;this.popup&&this.popup.remove()&&(this.popup=null);var i=j.a.extend(Ti);if(1<=t.info.length){var r=new i({propsData:{state:{columns:[{label:this.$t("query.attribute"),prop:"attribute",width:80},{label:this.$t("query.attributeValue"),prop:"attributeValue",minWidth:100}],data:t.info}}}).$mount();this.$nextTick(function(){e.popup=e.viewModel.addPopup(t.coordinates,r.$el)})}},changeHoverStyle:function(t){t.target.style.color=this.getColorStyle(0).color},resetHoverStyle:function(t){t.target.style.color=this.getTextColorStyle.color}}},function(){var i=this,t=i.$createElement,r=i._self._c||t;return r("sm-card",{directives:[{name:"show",rawName:"v-show",value:i.isShow,expression:"isShow"}],staticClass:"sm-widget-query",attrs:{"icon-class":i.iconClass,"icon-position":i.position,"header-name":i.headerName,"auto-rotate":i.autoRotate,collapsed:i.collapsed}},[r("div",{staticClass:"sm-widget-query__body",style:[i.getBackgroundStyle,i.getTextColorStyle]},[r("div",{staticClass:"sm-widget-query__choose-panel clearfix"},[r("div",{staticClass:"sm-widget-query__job-button is-active",style:"job"===i.activeTab?i.getColorStyle(0):"",attrs:{title:i.$t("query.queryJob")},on:{click:i.jobButtonClicked}},[i._v(i._s(i.$t("query.queryJob")))]),i._v(" "),r("div",{staticClass:"sm-widget-query__result-button",style:"result"===i.activeTab?i.getColorStyle(0):"",attrs:{title:i.$t("query.queryReuslt")},on:{click:i.resultButtonClicked}},[i._v(i._s(i.$t("query.queryReuslt")))])]),i._v(" "),r("div",{staticClass:"sm-widget-query__job-info"},i._l(i.jobInfos,function(e,t){return r("div",{directives:[{name:"show",rawName:"v-show",value:0<i.jobInfos.length,expression:"jobInfos.length > 0"}],key:t,staticClass:"sm-widget-query__job-info-panel"},[e.name?r("div",{staticClass:"sm-widget-query__job-info-header",style:i.getTextColorStyle,on:{click:i.jobInfoClicked,mouseleave:i.resetHoverStyle,mouseenter:i.changeHoverStyle}},[r("span",{staticClass:"smwidgets-icons-preview"}),i._v(" "),r("span",{staticClass:"sm-widget-query__job-info-name"},[i._v(i._s(e.name))]),i._v(" "),r("div",{staticClass:"smwidgets-icons-legend-unfold"})]):i._e(),i._v(" "),e.attributeFilter?r("div",{staticClass:"sm-widget-query__job-info-body hidden"},[r("div",{staticClass:"sm-widget-query__attribute"},[r("div",[i._v(i._s(i.$t("query.attributeCondition")))]),i._v(" "),r("div",{staticClass:"sm-widget-query__attribute-name",style:i.getColorStyle(0)},[i._v(i._s(e.attributeFilter))])]),i._v(" "),r("div",{staticClass:"sm-widget-query__spatial-filter"},[r("div",[i._v(i._s(i.$t("query.spatialFilter")))]),i._v(" "),r("el-select",{staticClass:"sm-widget-query__el-select",attrs:{size:"mini","popper-append-to-body":!1},on:{"visible-change":i.changeChosenStyle},model:{value:i.value,callback:function(t){i.value=t},expression:"value"}},i._l(i.selectOptions,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),i._v(" "),r("div",{staticClass:"sm-widget-query__query-button"},[r("el-button",{staticClass:"sm-widget-query__el-button",style:{backgroundColor:i.getColorStyle(0).color,color:i.getTextColor},attrs:{type:"primary",size:"mini"},on:{click:function(t){i.queryButtonClicked(e,i.value)}}},[i._v(i._s(i.$t("query.applicate")))])],1)]):i._e()])})),i._v(" "),r("div",{staticClass:"sm-widget-query__result-info hidden"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!i.queryResult,expression:"!queryResult"}],staticClass:"sm-widget-query__no-result"},[i._v(i._s(i.$t("query.noResult")))]),i._v(" "),i.queryResult?r("span",{staticClass:"sm-widget-query__result-header",style:i.getColorStyle(0)},[i._v(i._s(i.queryResult.name))]):i._e(),i._v(" "),i.queryResult?r("div",{staticClass:"sm-widget-query__result-body"},[r("ul",i._l(i.queryResult.result,function(t,e){return r("li",{key:e,attrs:{title:"SmIDï¼"+(t.properties.SmID||t.properties.SMID)},on:{click:i.queryResultListClicked,mouseenter:i.changeChosenResultStyle,mouseleave:i.resetChosenResultStyle}},[i._v(i._s("SmIDï¼"+(t.properties.SmID||t.properties.SMID)))])}))]):i._e()])])])},[],!1,null,null,null).exports,Fi=Ee({name:"SmIndicator",mixins:[Ce,ke],props:{title:{type:String,default:"ææ æ é¢"},unit:{type:String,default:"åä½"},indicatorColor:{type:String},num:{type:[Number,String],default:0}},computed:{numberSymbol:function(){var t=this.num;return this.isNumber(parseFloat(this.num))&&(t=this.addNumberSymbol(this.num)),t},indicatorStyle:function(){return this.indicatorColor&&{color:this.indicatorColor}||this.getColorStyle(0)}},methods:{addNumberSymbol:function(t){var e=(t=t.toString()).lastIndexOf("."),i=t,r="";return 0<e&&(i=t.substring(0,e),r=t.substring(e)),t=(i=i.replace(/(\d{1,3})(?=(\d{3})+$)/g,"$1,"))+r,/\.0+$/.test(r)&&(t=i),t},isNumber:function(t){return/^\d+$/.test(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sm-widget-indicator",style:[t.getBackgroundStyle]},[i("div",{staticClass:"sm-widget-indicator__head"},[i("span",{staticClass:"sm-widget-indicator__title",style:[t.getTextColorStyle]},[t._v(t._s(t.title))])]),t._v(" "),i("div",{staticClass:"sm-widget-indicator__content"},[i("span",{staticClass:"sm-widget-indicator__num",style:[t.indicatorStyle]},[t._v(t._s(t.numberSymbol))]),t._v(" "),i("span",{staticClass:"sm-widget-indicator__unit",style:[t.getTextColorStyle]},[t._v(t._s(t.unit))])])])},[],!1,null,null,null).exports,Ri=Ee({name:"SmText",mixins:[Ce,ke],props:{fontStyle:{type:Object},title:{type:String}},computed:{formatFontStyle:function(){var t=JSON.parse(JSON.stringify(this.fontStyle));return t.fontSize&&(t.fontSize=parseFloat(t.fontSize)+"px"),t.lineHeight&&(t.lineHeight=parseFloat(t.lineHeight)+"px"),t.textIndent&&(t.textIndent=parseFloat(t.textIndent)+"px"),t}}},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sm-widget-text",style:[this.getBackgroundStyle,this.formatFontStyle,this.getTextColorStyle]},[e("span",[this._v(this._s(this.title))])])},[],!1,null,null,null).exports,Bi=Ee({name:"SmTimeText",mixins:[Ce,ke],props:{timeType:{type:String,default:"date"},fontStyle:{type:Object}},data:function(){return{time:"",timeInterval:null}},computed:{timeParam:function(){var t=JSON.parse(JSON.stringify(this.fontStyle));return t.fontSize&&(t.fontSize=parseFloat(t.fontSize)+"px"),this.initTime(this.timeType),t}},destroyed:function(){clearInterval(this.timeInterval)},methods:{initTime:function(t){var e=this;clearInterval(this.timeInterval),this.time=ze.getDateTime("time",t),this.timeInterval=setInterval(function(){e.time=ze.getDateTime("time",t)},1e3)}}},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sm-widget-time-text",style:[this.timeParam,this.getBackgroundStyle,this.getTextColorStyle]},[e("span",[this._v(this._s(this.time))])])},[],!1,null,null,null).exports,Ni=Ee({name:"SmProgress",mixins:[Ce,ke],props:{percentage:{type:[Number,String],required:!0},type:{type:String,default:"line"},strokeWidth:{type:[Number,String],default:10},status:{type:String},color:{type:String},showText:{type:Boolean,default:!0}},data:function(){return{curColor:"",circleWidth:110}},watch:{color:{handler:function(){this.curColor=this.color}},colorGroupsData:{handler:function(){this.curColor=this.getColor(0)}},textColorsData:{handler:function(){this.progressTextNode&&(this.progressTextNode.style.color=this.getTextColor)}}},loaded:function(){var t=this;this.curColor=this.color||this.getColor(0),this.progressTextNode=this.$el.querySelector(".el-progress__text"),this.progressTextNode.style.color=this.getTextColor,this.$nextTick(function(){t.circleWidth=Math.min(t.$el.parentNode.offsetWidth,t.$el.parentNode.offsetHeight)}),window.addEventListener("resize",function(){t.circleWidth=Math.min(t.$el.parentNode.offsetWidth,t.$el.parentNode.offsetHeight)})}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sm-widget-progress"},[i("el-progress",{attrs:{percentage:parseFloat(t.percentage),type:t.type,"stroke-width":parseFloat(t.strokeWidth),"show-text":t.showText,width:"circle"===t.type?parseFloat(t.circleWidth):null,color:t.curColor,status:t.status}})],1)},[],!1,null,null,null).exports,ji=Ee({name:"SmIcon",mixins:[Ce,ke],props:{className:{type:String,default:"info"},size:{type:[String,Number]},color:{type:String},weight:{type:String},background:{type:String}},computed:{iconStyle:function(){return{fontSize:parseFloat(this.size)+"px",fontWeight:this.weight}},iconColor:function(){return this.color&&{color:this.color}||this.getColorStyle(0)},iconBackground:function(){return this.background&&{background:this.background}||this.getBackgroundStyle}}},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sm-widget-icon"},[e("i",{class:"el-icon-"+this.className,style:[this.iconStyle,this.iconBackground,this.iconColor]})])},[],!1,null,null,null).exports,Vi=n("Fk5u"),Ui=n.n(Vi),$i=(n("hQXD"),Ee({name:"SmLiquidFill",mixins:[Ce,ke],props:{value:{type:Number,default:0},waveCount:{type:Number,default:1},fontSize:{type:Number},waveColor:{type:String},borderColor:{type:String},labelColor:{type:String,default:"#626c91"},backgroundColor:{type:String},insideLabelColor:{type:String,default:"#fff"},waveAnimation:{type:Boolean,default:!1}},data:function(){return{waveColorData:"",labelColorData:"",borderColorData:"",backgroundColorData:"",size:"140px"}},computed:{calcData:function(){for(var t=[],e=0;e<this.waveCount;e++)t.push(this.value-.05*e);return t}},mounted:function(){this.initializeChart()},methods:{resize:function(){this.chart&&this.chart.resize()},initializeChart:function(){var e=this;Object.keys(this.$props).forEach(function(t){e.$watch(t,function(){e.updateChart()})}),this.chart=Ui.a.init(this.$refs.chart),this.updateChart(),this.$on("themeStyle",function(){e.waveColorData=e.getColor(0),e.labelColorData=e.getTextColor,e.borderColorData=e.getColor(0),e.backgroundColorData=e.getBackground,e.updateChart(!0)}),window.addEventListener("resize",function(){e.chart.resize()})},updateChart:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]||(this.waveColorData=this.waveColor||this.getColor(0),this.labelColorData=this.labelColor||this.getTextColor,this.borderColorData=this.borderColor||this.waveColorData,this.backgroundColorData=this.backgroundColor||this.getBackground),this.chart.setOption({series:[{color:[this.waveColorData],type:"liquidFill",waveAnimation:this.waveAnimation,animation:!1,radius:"95%",data:this.calcData,label:{fontSize:this.fontSize,color:this.labelColorData,insideColor:this.insideLabelColor},backgroundStyle:{color:this.backgroundColorData},itemStyle:{shadowColor:"#fff"},outline:{borderDistance:3,itemStyle:{borderColor:this.borderColorData,borderWidth:3,shadowBlur:0,shadowColor:"#fff"}}}]})}}},function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"chart",staticClass:"sm-widget-liquidFill",attrs:{id:"chart"}})},[],!1,null,null,null).exports),qi=function(t){function o(t,e,i,r){var n;return Xt()(this,o),(n=Qt()(this,ee()(o).call(this))).scanEffect=i||{},n.serviceUrl=e,n.sceneId=t,n.navigation=r||!0,0<=n.serviceUrl.indexOf("iserver")?(n.sceneUrl=n.serviceUrl,n.createScene()):n.getSceneInfo(),n}return re()(o,t),Yt()(o,[{key:"getSceneInfo",value:function(){var o=this;SuperMap.FetchRequest.get(this.serviceUrl+".json").then(function(t){return t.json()}).then(function(t){console.log(t);var e=t.thumbnail,i=t.name,r=t.url,n=t.id;o.sceneInfo={thumbnail:e,name:i,url:r,id:n},o.sceneUrl=r,o.checkPrivate(t)})}},{key:"checkPrivate",value:function(t){var e=t.authorizeSetting,i=t.url,r=t.content;i||(this.sceneUrl=JSON.parse(r).layers[0].url);var n=!1;e.map(function(t){"USER"===t.entityType&&"GUEST"===t.entityName&&(n=!0)}),n?this.createScene():this.fire("sceneisprivate")}},{key:"getSceneParam",value:function(){return{type:"Scene",nls:"scene",title:this.sceneInfo&&this.sceneInfo.name||"Scene",id:(new Date).getTime(),sceneUrl:this.sceneUrl,position:null,fullScreen:!0,scanEffect:{status:this.scanEffect.status||!1,type:this.scanEffect.type||this.scanEffect.status&&"circle"||"noScan",centerPostion:null,_period:this.scanEffect.period||2e3,speed:this.scanEffect.speed||500,color:null},style:{height:"1080px",width:"1920px",left:"0px",top:"0px"}}}},{key:"createScene",value:function(){var n=this,o=this.getSceneParam(),t=o.sceneUrl;t=t.slice(0,t.indexOf("/rest/realspace")+15),this.sceneViewer=new Cesium.Viewer(this.sceneId,{infobox:!1,navigation:this.navigation}),this.fire("createsceneviewersucceeded"),this.scene=this.sceneViewer.scene,this.scene.fxaa=!0,this.scene.skyAtmosphere.show=!1;var a=this.scene,e=a.open(t);Cesium.when.all(e,function(){var r=a.camera;a.camera.setView({destination:Cesium.Cartesian3(r.position.x,r.position.y,r.position.z),orientation:{heading:r.heading,pitch:r.pitch,roll:r.roll}}),new Cesium.ScreenSpaceEventHandler(a.canvas).setInputAction(function(t){if(o.positopn=new Cesium.Cartesian3(r.position.x,r.position.y,r.position.z),n.heightLight=!0,o.scanEffect.status){var e=t.position,i=a.pickPosition(e);n.scene.scanEffect.centerPostion=i,o.scanEffect.centerPostion=i,n.tooltipIsVisable=!0}},Cesium.ScreenSpaceEventType.LEFT_CLICK),o.scanEffect.status&&setTimeout(function(){n.startScan(o.scanEffect.type)},3e3),n.sceneParam=o})}},{key:"startScan",value:function(t){var e=this.scene.camera;this.scene.scanEffect.show=!1,this.scene.scanEffect.mode="line"===t?Cesium.ScanEffectMode.LINE:Cesium.ScanEffectMode.CIRCLE,this.sceneParam.scanEffect.centerPostion?this.scene.scanEffect.centerPostion=this.sceneParam.scanEffect.centerPostion:(this.sceneParam.scanEffect.centerPostion=new Cesium.Cartesian3(e.position.x,e.position.y,e.position.z),this.scene.scanEffect.centerPostion=new Cesium.Cartesian3(e.position.x,e.position.y,e.position.z)),this.scene.scanEffect.color=Cesium.Color.CORNFLOWERBLUE,this.scene.scanEffect._period=this.sceneParam.scanEffect._period,this.scene.scanEffect.speed=this.sceneParam.scanEffect.speed,this.scene.scanEffect.show=!0}}]),o}(ae),Wi=Ee({name:"SmWebScene",props:{sceneUrl:{type:String,required:!0},scanEffect:{type:Object},navigation:{type:Boolean,default:!0}},data:function(){return{tooltipIsVisable:!0}},computed:{sceneId:function(){return"scene"+parseInt(100*Math.random())}},mounted:function(){this.createdScene()},beforeDestroy:function(){this.sceneViewer=null},methods:{createdScene:function(){var t=this;this.sceneViewModel=new qi(this.sceneId,this.sceneUrl,this.scanEffect,this.navigation),this.sceneViewModel.on("createsceneviewersucceeded",function(){t.sceneViewer=t.sceneViewModel.sceneViewer}),this.sceneViewModel.on("sceneisprivate",function(){t.$message.closeAll(),t.$message({showClose:!0,message:"å½åæå¡å¹¶æªå¬å¼",type:"error",duration:1e3})})}}},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sm-widget-web-scene"},[e("div",{staticClass:"sm-widget-web-scene__wrap",attrs:{id:this.sceneId}})])},[],!1,null,null,null).exports,Gi={name:"LayerMixin",props:{layerId:{type:String,default:function(){return We()("".concat(this.$options.name.toLowerCase(),"-"))}}},methods:{move:function(t){this.map.moveLayer(this.layerId,t)},remove:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.layerId;this.map.removeLayer(t)},setLayoutProperty:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.layerId,e=1<arguments.length?arguments[1]:void 0,i=2<arguments.length?arguments[2]:void 0;this.map.setLayoutProperty(t,e,i)}}},Hi=function(t){function b(t,e){var i;Xt()(this,b),i=Qt()(this,ee()(b).call(this,t));var r=e.name,n=e.tileSize,o=e.mapUrl,a=e.tiles,s=e.bounds,l=e.minZoom,u=void 0===l?0:l,c=e.maxZoom,h=void 0===c?22:c,p=e.attribution,f=e.scheme,d=void 0===f?"xyz":f,m=e.visible,y=void 0===m||m,g=e.opacity,v=void 0===g?1:g,_=e.before;return i.name=r,i.tileSize=n,i.mapUrl=o,i.tiles=a,i.bounds=s,i.minZoom=u,i.maxZoom=h,i.attribution=p,i.scheme=d,i.opacity=v,i.visibility=y?"visible":"none",i.before=_,i.rasterSource="",i._init(),i}return re()(b,t),Yt()(b,[{key:"_init",value:function(){this.mapUrl?this._addRestMapLayer():this._addLayer()}},{key:"_addRestMapLayer",value:function(){var i=this;new oe.a.supermap.MapService(this.mapUrl).getMapInfo(function(t){i.name||(i.name=t.name),!i.tileSize&&t.viewer&&(i.tileSize=t.viewer.width);var e=t.bounds;!i.bounds&&e&&(i.bounds=[e.left,e.bottom,e.right,e.top]),i.rasterSource="iserver",i.tiles=[i.mapUrl],i._addLayer(t)})}},{key:"_addLayer",value:function(){this.map.addLayer({id:this.name||"raster-layer-".concat((new Date).getTime()),type:"raster",layout:{visibility:this.visibility},paint:{"raster-opacity":this.opacity},source:{bounds:this.bounds||[-180,-85.051129,180,85.051129],type:"raster",tileSize:this.tileSize||256,tiles:this.tiles,rasterSource:this.rasterSource,minzoom:this.minZoom,maxzoom:this.maxZoom,scheme:this.scheme}},this.before)}}]),b}(ae),Zi=Ee({name:"SmRasterLayer",mixins:[Se,Gi],props:{name:{type:String},tileSize:{type:Number},mapUrl:{type:String},tiles:{type:Array},bounds:{type:Array},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},attribution:{type:String},scheme:{type:String,default:"xyz",validator:function(t){return-1!==["xyz","tms"].indexOf(t)}},visible:{type:Boolean,default:!0},opacity:{type:Number,default:1,validator:function(t){return 0<=t&&t<=1}},before:{type:String}},loaded:function(){this.viewModel=new Hi(this.map,this.$props)},render:function(){}},void 0,void 0,!1,null,null,null).exports,Xi=Ee({name:"SmVectorTileLayer",mixins:[Se,Gi],props:{styleOptions:{type:[String,Object]},before:{type:String}},loaded:function(){this.map.addStyle&&this.map.addStyle(this.styleOptions,this.before)},render:function(){}},void 0,void 0,!1,null,null,null).exports,Ki=(n("nGy8"),function(t){function a(t,e){var i;Xt()(this,a),i=Qt()(this,ee()(a).call(this,t));var r=e.dataSet,n=e.mapvOptions,o=e.layerId;return i.dataSet=r,i.mapvOptions=n.layerId?n:$()({},n,{layerId:o}),i._init(),i}return re()(a,t),Yt()(a,[{key:"_init",value:function(){this.dataSet&&this.mapvOptions&&this._addMapvLayer()}},{key:"_addMapvLayer",value:function(){var t=new oe.a.supermap.MapvLayer("",this.dataSet,this.mapvOptions);this.map.addLayer(t)}}]),a}(ae)),Yi=Ee({name:"SmMapvLayer",mixins:[Se,Gi],props:{dataSet:{type:Object,default:function(){return{}}},mapvOptions:{type:Object,default:function(){return{}}}},loaded:function(){this.viewModel=new Ki(this.map,this.$props)},render:function(){}},void 0,void 0,!1,null,null,null).exports,Ji=(n("a8sL"),function(t){function a(t,e){var i;Xt()(this,a),i=Qt()(this,ee()(a).call(this,t));var r=e.layerTypeId,n=e.deckglOptions,o=e.layerId;return i.layerTypeId=r,n.data=n.data||[],n.layerId=n.layerId||o,i.deckglOptions=n,i._init(),i}return re()(a,t),Yt()(a,[{key:"_init",value:function(){this.layerTypeId&&this.deckglOptions&&this._addDeckglLayer()}},{key:"_addDeckglLayer",value:function(){var t=new oe.a.supermap.DeckglLayer(this.layerTypeId,this.deckglOptions);this.map.addLayer(t)}}]),a}(ae)),Qi=["scatter-plot","path-layer","polygon-layer","arc-layer","hexagon-layer","screen-grid-layer"],tr=Ee({name:"SmDeckglLayer",mixins:[Se,Gi],props:{layerTypeId:{type:String,required:!0,validator:function(e){return-1<Qi.findIndex(function(t){return t===e})}},deckglOptions:{type:Object,default:function(){return{data:[]}}}},loaded:function(){var e=this;-1<Qi.findIndex(function(t){return t===e.layerTypeId})&&(this.viewModel=new Ji(this.map,this.$props))},render:function(){}},void 0,void 0,!1,null,null,null).exports,er=function(t){function n(t,e,i){var r;if(Xt()(this,n),r=Qt()(this,ee()(n).call(this)),!e)throw new Error("serviceUrl is requierd");if(!t)throw new Error("map is requierd");return r.options=i||{},r.map=t,r.serviceUrl=e,r.sourceID=i.layerId||"dataFlow"+(new Date).getTime(),r.layerStyle=i.layerStyle||{},r.options.registerToken&&SuperMap.SecurityManager.registerToken(r.serviceUrl,r.options.registerToken),r._initializeDataFlow(),r}return re()(n,t),Yt()(n,[{key:"setExcludeField",value:function(t){return this.dataService.setExcludeField(t),this.options.excludeField=t,this}},{key:"setGeometry",value:function(t){return this.dataService.setGeometry(t),this.options.geometry=t,this}},{key:"_initializeDataFlow",value:function(){var e=this,t=new oe.a.supermap.DataFlowService(this.serviceUrl,{geometry:this.options.geometry,excludeField:this.options.excludeField}).initSubscribe();t.on("subscribeSocketConnected",function(t){e.fire("subscribesucceeded",t)}),t.on("subscribeSocketError",function(t){e.fire("subscribefailed",t)}),t.on("messageSucceeded",function(t){e._addLayer(t)}),this.dataService=t}},{key:"_addLayer",value:function(t){if(t.featureResult){var i=t.featureResult,e=i.geometry.type,r=this.layerStyle;if(this.map.getSource(this.sourceID)){var n=jt()(this.map.getSource(this.sourceID)._data.features),o=!1;n.map(function(t,e){t.properties.id===i.properties.id&&(o=!0,n[e]=i)}),o||n.push(i),this.map.getSource(this.sourceID).setData({type:"FeatureCollection",features:n}),this.fire("dataupdated",{data:i,map:this.map})}else this.map.addSource(this.sourceID,{type:"geojson",data:{type:"FeatureCollection",features:[i]}}),"Point"===e?this.map.addLayer({id:this.sourceID,type:"circle",paint:r.circle&&r.circle.paint||{"circle-radius":6,"circle-color":"red"},layout:r.circle&&r.circle.layout||{},source:this.sourceID}):"MultiPolygon"===e||"Polygon"===e?this.map.addLayer({id:this.sourceID,type:"fill",paint:r.fill&&r.fill.paint||{"fill-color":"red","fill-opacity":1},layout:r.fill&&r.fill.layout||{},source:this.sourceID}):"LineString"!==e&&"Line"!==e&&"MultiLineString"!==e||this.map.addLayer({id:this.sourceID,type:"line",paint:r.line&&r.line.paint||{"line-width":5,"line-color":"red","line-opacity":1},layout:r.line&&r.line.layout||{},source:this.sourceID})}}}]),n}(ae),ir=Ee({name:"SmDataFlowLayer",mixins:[Se,Gi],props:{serviceUrl:{type:String,required:!0},registerToken:{type:String},geometry:{type:Object},excludeField:{type:Object},layerStyle:{type:Object,default:function(){return{line:new Nr.commontypes.LineStyle,circle:new Nr.commontypes.CircleStyle,fill:new Nr.commontypes.FillStyle}}}},loaded:function(){var t=JSON.parse(JSON.stringify(this.$props));delete t.serviceUrl,this.dataFlowLayerViewModel=new er(this.map,this.serviceUrl,$()({},t)),this.registerEvents()},methods:{registerEvents:function(){var e=this;this.dataFlowLayerViewModel.on("subscribefailed",function(t){e.$message({showClose:!0,message:"æ°æ®è®¢éå¤±è´¥ï¼",type:"error",duration:1e3}),e.$emit("subscribe-failed",t)}),this.dataFlowLayerViewModel.on("subscribesucceeded",function(t){e.$emit("subscribe-succeeded",t)}),this.dataFlowLayerViewModel.on("dataupdated",function(t){e.$emit("data-updated",t)})}},render:function(){}},void 0,void 0,!1,null,null,null).exports,rr=n("RT2P"),nr=n.n(rr),or=function(t){function r(t,e){var i;if(Xt()(this,r),i=Qt()(this,ee()(r).call(this)),!e)throw new Error("echarts options is requierd");if(!t)throw new Error("map is requierd");return i.map=t,i.options=e,i._initializeEchartsLayer(),i}return re()(r,t),Yt()(r,[{key:"_initializeEchartsLayer",value:function(){window.echarts=Ui.a;var t=new nr.a(this.map);t.chart.setOption(this.options),this.fire("echartslayeraddsucceeded",{layer:t}),this.echartslayer=t}}]),r}(ae),ar=Ee({name:"SmEchartsLayer",mixins:[Se],props:{options:{type:Object,required:!0,validator:function(t){return"{}"!==JSON.stringify(t)}}},loaded:function(){this.viewModel=new or(this.map,this.options)},render:function(){}},void 0,void 0,!1,null,null,null).exports,sr=function(t){function o(t,e,i){var r;if(Xt()(this,o),r=Qt()(this,ee()(o).call(this)),!t)throw new Error("map is requierd");i=i||{},r.map=t,r.data=e,r.layerId=i.layerId||"heatmap"+(new Date).getTime();var n=i.layerStyle;return r.paint=n&&n.paint,r.layout=n&&n.layout,r._initializeHeatMapLayer(),r}return re()(o,t),Yt()(o,[{key:"_initializeHeatMapLayer",value:function(){this.map.addSource(this.layerId,{type:"geojson",data:this.data}),this.map.addLayer({id:this.layerId,type:"heatmap",source:this.layerId,maxzoom:9,paint:this.paint||{"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]},layout:this.layout||{}}),this.fire("heatmaplayeraddsucceeded",{map:this.map})}}]),o}(ae),lr=Ee({name:"SmHeatmapLayer",mixins:[Se,Gi],props:{data:{type:Object,required:!0},layerStyle:{type:Object,default:function(){return new Nr.commontypes.HeatMapStyle}}},loaded:function(){this.viewModel=new sr(this.map,this.data,{layerId:this.layerId,layerStyle:this.layerStyle})},render:function(){}},void 0,void 0,!1,null,null,null).exports,ur=function(t){function n(t,e,i){var r;if(Xt()(this,n),(r=Qt()(this,ee()(n).call(this))).options=i||{},!t)throw new Error("map is requierd");if(!e)throw new Error("data is requierd");return r.map=t,r.data=e,r.layerId=i.layerId||"clusterLayer"+(new Date).getTime(),r._initializeClusterLayer(),r}return re()(n,t),Yt()(n,[{key:"_initializeClusterLayer",value:function(){var r=this;this.map.addSource(this.layerId,{type:"geojson",data:this.data,cluster:!0,clusterMaxZoom:this.options.maxZoom||14,clusterRadius:this.options.radius||50}),this.map.addLayer({id:this.layerId,type:"circle",source:this.layerId,filter:["has","point_count"],paint:this.options.clusteredPointStyle&&this.options.clusteredPointStyle.paint||{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),this.map.addLayer({id:"count_"+this.layerId,type:"symbol",source:this.layerId,filter:["has","point_count"],layout:this.options.clusteredPointTextLayout||{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),this.map.addLayer({id:"unclustered_point"+this.layerId,type:"circle",source:this.layerId,filter:["!",["has","point_count"]],paint:this.options.unclusteredPointStyle&&this.options.unclusteredPointStyle.paint||{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),this.fire("addcusterlayersucceeded",{map:this.map}),this.map.on("click",this.layerId,function(t){var i=r.map.queryRenderedFeatures(t.point,{layers:[r.layerId]}),e=i[0].properties.cluster_id;r.map.getSource(r.layerId).getClusterExpansionZoom(e,function(t,e){t||r.map.easeTo({center:i[0].geometry.coordinates,zoom:e})})}),this.map.on("mouseenter",this.layerId,function(){r.map.getCanvas().style.cursor="pointer"}),this.map.on("mouseleave",this.layerId,function(){r.map.getCanvas().style.cursor=""})}}]),n}(ae),cr=Ee({name:"SmClusterLayer",mixins:[Se,Gi],props:{data:{type:Object,required:!0},radius:{type:Number,default:50},maxZoom:{type:Number,default:14},clusteredPointStyle:{type:Object,default:function(){return new Nr.commontypes.CircleStyle({"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]})}},unclusteredPointStyle:{type:Object,default:function(){return new Nr.commontypes.CircleStyle({"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"})}},clusteredPointTextLayout:{type:Object}},loaded:function(){var t=JSON.parse(JSON.stringify(this.$props));delete t.data,this.viewModel=new ur(this.map,this.data,$()({},t))},render:function(){}},void 0,void 0,!1,null,null,null).exports,hr=function(t){function l(t,e){var i;Xt()(this,l),i=Qt()(this,ee()(l).call(this,t));var r=e.layerName,n=e.themeLayerOptions,o=e.symbolType,a=e.layerId,s=e.layerFeatures;return i.map=t,i.layerName=r||a,i.symbolType=o||"Circle",i.themeLayerOptions=n,i.layerId=a,i.layerFeatures=s||[],i._init(),i}return re()(l,t),Yt()(l,[{key:"_init",value:function(){this.themeLayer=new oe.a.supermap.RankSymbolThemeLayer(this.layerName,this.symbolType,this.themeLayerOptions),this.map.addLayer(this.themeLayer),this.themeLayer.addFeatures(this.layerFeatures)}}]),l}(ae),pr=Ee({name:"SmRanksymbolThemeLayer",mixins:[Se,Gi],props:{symbolType:{type:String,required:!0},layerName:{type:String,required:!0},themeLayerOptions:{type:Object,default:function(){return{}}},addLayerSucceededCallback:{type:Function},layerFeatures:{type:Array,required:!0}},loaded:function(){this.viewModel=new hr(this.map,this.$props),this.addLayerSucceededCallback&&this.addLayerSucceededCallback(this.viewModel.themeLayer,this.map)},render:function(){}},void 0,void 0,!1,null,null,null).exports,fr=function(t){function s(t,e){var i;Xt()(this,s),i=Qt()(this,ee()(s).call(this,t));var r=e.layerName,n=e.themeLayerOptions,o=e.layerId,a=e.layerFeatures;return i.map=t,i.layerName=r||o,i.themeLayerOptions=n,i.layerId=o,i.layerFeatures=a||[],i._init(),i}return re()(s,t),Yt()(s,[{key:"_init",value:function(){this.themeLayer=new oe.a.supermap.LabelThemeLayer(this.layerName,this.themeLayerOptions),this.map.addLayer(this.themeLayer),this.themeLayer.addFeatures(this.layerFeatures)}}]),s}(ae),dr=Ee({name:"SmLabelThemeLayer",mixins:[Se,Gi],props:{layerName:{type:String,required:!0},themeLayerOptions:{type:Object,default:function(){return{}}},addLayerSucceededCallback:{type:Function},layerFeatures:{type:Array,required:!0}},loaded:function(){this.viewModel=new fr(this.map,this.$props),this.addLayerSucceededCallback&&this.addLayerSucceededCallback(this.viewModel.themeLayer,this.map)},render:function(){}},void 0,void 0,!1,null,null,null).exports,mr=function(t){function s(t,e){var i;Xt()(this,s),i=Qt()(this,ee()(s).call(this,t));var r=e.layerName,n=e.themeLayerOptions,o=e.layerId,a=e.layerFeatures;return i.map=t,i.layerName=r||o,i.themeLayerOptions=n,i.layerId=o,i.layerFeatures=a||[],i._init(),i}return re()(s,t),Yt()(s,[{key:"_init",value:function(){this.themeLayer=new oe.a.supermap.RangeThemeLayer(this.layerName,this.themeLayerOptions),this.map.addLayer(this.themeLayer),this.themeLayer.addFeatures(this.layerFeatures)}}]),s}(ae),yr=Ee({name:"SmRangeThemeLayer",mixins:[Se,Gi],props:{layerName:{type:String,required:!0},themeLayerOptions:{type:Object,default:function(){return{}}},addLayerSucceededCallback:{type:Function},layerFeatures:{type:Array,required:!0}},loaded:function(){this.viewModel=new mr(this.map,this.$props),this.addLayerSucceededCallback&&this.addLayerSucceededCallback(this.viewModel.themeLayer,this.map)},render:function(){}},void 0,void 0,!1,null,null,null).exports,gr=function(t){function s(t,e){var i;Xt()(this,s),i=Qt()(this,ee()(s).call(this,t));var r=e.layerName,n=e.themeLayerOptions,o=e.layerId,a=e.layerFeatures;return i.map=t,i.layerName=r||o,i.themeLayerOptions=n,i.layerId=o,i.layerFeatures=a||[],i._init(),i}return re()(s,t),Yt()(s,[{key:"_init",value:function(){this.themeLayer=new oe.a.supermap.UniqueThemeLayer(this.layerName,this.themeLayerOptions),this.map.addLayer(this.themeLayer),this.themeLayer.addFeatures(this.layerFeatures)}}]),s}(ae),vr=Ee({name:"SmUniqueThemeLayer",mixins:[Se,Gi],props:{layerName:{type:String,required:!0},themeLayerOptions:{type:Object,default:function(){return{}}},addLayerSucceededCallback:{type:Function},layerFeatures:{type:Array,required:!0}},loaded:function(){this.viewModel=new gr(this.map,this.$props),this.addLayerSucceededCallback&&this.addLayerSucceededCallback(this.viewModel.themeLayer,this.map)},update:function(){console.log(this.layerFeatures)},render:function(){}},void 0,void 0,!1,null,null,null).exports,_r=function(t){function l(t,e){var i;Xt()(this,l),i=Qt()(this,ee()(l).call(this,t));var r=e.layerName,n=e.themeLayerOptions,o=e.chartsType,a=e.layerId,s=e.layerFeatures;return i.map=t,i.layerName=r||a,i.chartsType=o||"Bar",i.themeLayerOptions=n,i.layerId=a,i.layerFeatures=s||{},i._init(),i}return re()(l,t),Yt()(l,[{key:"_init",value:function(){this.themeLayer=new oe.a.supermap.GraphThemeLayer(this.layerName,this.chartsType,this.themeLayerOptions),this.map.addLayer(this.themeLayer),this.themeLayer.addFeatures(this.layerFeatures)}}]),l}(ae),br=Ee({name:"SmGraphThemeLayer",mixins:[Se,Gi],props:{chartsType:{type:String,required:!0},layerName:{type:String,required:!0},themeLayerOptions:{type:Object,default:function(){return{}}},addLayerSucceededCallback:{type:Function},layerFeatures:{type:Object,required:!0}},loaded:function(){this.viewModel=new _r(this.map,this.$props),this.addLayerSucceededCallback&&this.addLayerSucceededCallback(this.viewModel.themeLayer,this.map)},render:function(){}},void 0,void 0,!1,null,null,null).exports,xr=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this))).fileTypes=Oe,e.fileConfig=De,e.loadFileObject=t&&t.loadFileObject?t.loadFileObject:[],e}return re()(i,t),Yt()(i,[{key:"set",value:function(t,e){this[t]=e}},{key:"get",value:function(t){return this[t]}}]),i}(se),wr=n("X1wy"),Sr=n.n(wr),Cr=n("4v0n"),Er={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(t,e,i,r,n){Oe.JSON===t||Oe.GEOJSON===t?this.readTextFile(e,i,r,n):Oe.EXCEL===t||Oe.CSV===t?this.readXLSXFile(e,i,r,n):Oe.SHP===t&&this.readShpFile(e,i,r,n)},readTextFile:function(t,e,i,r){var n=new FileReader;n.onloadend=function(t){e&&e.call(r,t.target.result)},n.onerror=function(t){i&&i.call(r,t)},this.rAT?n.readAsText(t.file,"utf-8"):n.readAsBinaryString(t.file)},readXLSXFile:function(t,o,a,s){var e=new FileReader;e.onloadend=function(t){var e=new Uint8Array(t.target.result),i=Sr.a.read(e,{type:"array"});try{if(i&&i.SheetNames&&0<i.SheetNames.length){var r=i.SheetNames[0],n=Sr.a.utils.sheet_to_csv(i.Sheets[r]);o&&o.call(s,n)}}catch(t){a&&a.call(s,t)}},e.onerror=function(t){a&&a.call(s,t)},this.rABF&&e.readAsArrayBuffer(t.file)},readShpFile:function(t,e,i,n){var r=new FileReader;r.onloadend=function(t){var r=[];Object(Cr.open)(t.target.result).then(function(i){i.read().then(function t(e){if(!e.done)return r.push(e.value),i.read().then(t)}).then(function(){e.call(n,r)})}).catch(function(t){return console.error(t.stack)})},r.onerror=function(t){i&&i.call(n,t)},this.rABF&&r.readAsArrayBuffer(t.file)},processDataToGeoJson:function(t,e,i,r,n){var o=null;if("EXCEL"===t||"CSV"===t)o=this.processExcelDataToGeoJson(e),o=Array.isArray(o)?this.toGeoJSON(o):o;else{if("JSON"!==t&&"GEOJSON"!==t&&"SHP"!==t&&"ZIP"!==t)return void(r&&r.call(n,"æ°æ®æ ¼å¼åéè¯¯"));var a=e;if("string"==typeof(a=Array.isArray(a)?this.toGeoJSON(a):a)&&(a=JSON.parse(a)),"ISERVER"===a.type)o=a.data.recordsets[0].features;else{if("FeatureCollection"!==a.type)return void(r&&r.call(n,"ä¸æ¯æçæ°æ®"));o=a}}if(o.features[0]){var s=o.features[0].geometry.type;"Polygon"!==s&&"MultiPolygon"!==s||(o.features=he(o.features))}i&&i.call(n,o)},toGeoJSON:function(t){return{type:"FeatureCollection",features:t}},processExcelDataToGeoJson:function(t){for(var e=this.string2Csv(t),i=e.colTitles,r=-1,n=-1,o=0,a=i.length;o<a;o++)this.isXField(i[o])&&(r=o),this.isYField(i[o])&&(n=o);for(var s=[],l=0,u=e.rows.length;l<u;l++){var c=e.rows[l],h=Number(c[r]),p=Number(c[n]),f={};for(var d in e.colTitles){f[e.colTitles[d]]=e.rows[l][d]}var m={type:"Feature",geometry:{type:"Point",coordinates:[h,p]},properties:f};s.push(m)}return s},isXField:function(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"ç»åº¦"===e||"ä¸ç»"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e||"xåæ "===e},isYField:function(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"çº¬åº¦"===e||"åçº¬"===e||"latitude"===e||"lat"===e||"yåæ "===e},string2Csv:function(t,e){var i=t.split("\n"),r={};r.colTitles=e?[]:i[0].split(","),r.rows=[];for(var n=e?0:1;n<i.length;n++)i[n]&&r.rows.push(i[n].split(","));return r}},Tr=function(t){function i(t){var e;return Xt()(this,i),(e=Qt()(this,ee()(i).call(this,t))).fileModel=new xr,e}return re()(i,t),Yt()(i,[{key:"readFile",value:function(t){var e=t.target,i=e.files[0],r=e.value,n=i.name,o=ze.getFileType(n);if(!o)return this.fire("errorfileformat",{messageType:"failure",message:Wt.t("openFile.fileTypeUnsupported")}),!1;""!==n&&(this.fileModel.set("loadFileObject",{file:i,filePath:r,fileName:n,fileType:o}),this._readData())}},{key:"_readData",value:function(){var e=this,i=this,r=this.fileModel.loadFileObject.fileType;Er.readFile(r,{file:this.fileModel.loadFileObject.file,path:this.fileModel.loadFileObject.filePath},function(t){Er.processDataToGeoJson(r,t,function(t){t&&e.fire("openfilesucceeded",{result:t,layerName:e.fileModel.loadFileObject.fileName.split(".")[0]})},function(t){i.fire("openfilefailed",{messageType:"failure",message:t})},e)},function(){i.fire("openfilefailed",{messageType:"failure",message:Wt.t("openFile.openFileFail")})},this)}}]),i}(ae),kr=function(t){function a(t,e){var i;Xt()(this,a),i=Qt()(this,ee()(a).call(this,t));var r=e.layerStyle,n=e.data,o=e.layerId;return i.data=n,i.layerStyle=r,i.layerId=o,i._addLayer(),i}return re()(a,t),Yt()(a,[{key:"_addLayer",value:function(){var t=this._transformType(this.data.features[0].geometry.type),e=this.layerStyle,i=e.paint,r=e.layout;this.map.addLayer({id:this.layerId,type:t,source:{type:"geojson",data:this.data},layout:r,paint:i})}},{key:"_transformType",value:function(t){return{Point:"circle",Polygon:"fill",LineString:"line",MultiPolygon:"fill"}[t]}}]),a}(ae),Mr=Ee({name:"SmGeojsonLayer",mixins:[Se,Gi],props:{layerStyle:{type:Object},data:{type:Object}},loaded:function(){this.viewModel=new kr(this.map,this.$props)},render:function(){}},void 0,void 0,!1,null,null,null).exports,Pr=n("QJ+7"),Ar=n.n(Pr),Lr=Ee({name:"SmOpenFile",mixins:[ke,Ce,Se],props:{iconClass:{type:String,default:"smwidgets-icons-layer-style"},fitBounds:{type:Boolean,default:!0},addToMap:{type:Boolean,default:!0},text:{type:String,default:"æå¼æä»¶"},notify:{type:Boolean,default:!0},layerStyle:{type:Object},clearLastLayer:{type:Boolean,default:!1},accept:{type:Array,default:function(){return[".json",".geojson",".csv",".xlsx",".xls",".shp","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"]}}},data:function(){return{transformType:{Point:"circle",Polygon:"fill",LineString:"line",MultiPolygon:"fill"},mapboxglClass:"",prevLayerId:""}},methods:{fileSelect:function(t){this.viewModel&&this.viewModel.readFile(t)},getUniqueId:function(){return We()("layer-".concat(this.$options.name.toLowerCase(),"-"))}},loaded:function(){var n=this;this.parentIsWebMapOrMap&&(this.mapboxglClass="mapboxgl-ctrl"),this.viewModel=new Tr,this.viewModel.on("openfilefailed",function(t){n.notify&&n.$message({message:t.message,type:"error"}),n.$emit("open-file-failed",t)}),this.viewModel.on("errorfileformat",function(t){n.notify&&n.$message({message:t.message,type:"error"}),n.$emit("error-file-format",t)}),this.viewModel.on("openfilesucceeded",function(t){var e=n.getUniqueId();if(n.clearLastLayer&&(n.prevLayerId&&n.map.removeLayer(n.prevLayerId),n.prevLayerId=e),n.addToMap){var i=n.transformType[t.result.features[0].geometry.type],r=new(j.a.extend(Mr))({propsData:{data:t.result,layerStyle:n.layerStyle[i],layerId:e}}).$mount();n.map.getContainer().appendChild(r.$el)}n.fitBounds&&n.addToMap&&n.map.fitBounds(Ar()(t.result),{maxZoom:12}),n.notify&&n.$message({message:n.$t("openFile.openFileSuccess"),type:"success"}),n.$emit("open-file-succeeded",t.result)})}},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["sm-widget-open-file",e.mapboxglClass]},[i("label",{staticClass:"sm-widget-open-file__title",attrs:{for:"input_file"}},[i("span",[e._v(e._s(e.text))])]),e._v(" "),i("input",{staticClass:"sm-widget-open-file__input",attrs:{id:"input_file",type:"file",accept:e.accept},on:{change:function(t){e.fileSelect(t)}}})])},[],!1,null,null,null).exports,Ir=(n("vjVy"),function t(e){Xt()(this,t),this.url=e.url,this.name=e.name||Wt.t("commontypes.addressMatch")}),Or=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Xt()(this,t),this.layout={visibility:"visible"},this.paint={"circle-radius":5,"circle-color":"#000","circle-opacity":1,"circle-blur":0,"circle-translate":[0,0],"circle-translate-anchor":"map","circle-pitch-scale":"map","circle-pitch-alignment":"viewport","circle-stroke-width":0,"circle-stroke-color":"#000","circle-stroke-opacity":1},Object.assign(this.paint,e),Object.assign(this.layout,i)},Dr=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Xt()(this,t),this.layout={visibility:"visible"},this.paint={"fill-opacity":1,"fill-color":"#000","fill-translate":[0,0],"fill-antialias":!0,"fill-outline-color":"#000","fill-translate-anchor":"map"},Object.assign(this.paint,e),Object.assign(this.layout,i)},zr=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Xt()(this,t),this.layout={visibility:"visible","line-cap":"butt","line-join":"miter"},this.paint={"line-opacity":1,"line-color":"#000","line-width":1,"line-blur":1},Object.assign(this.paint,e),Object.assign(this.layout,i)},Fr=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Xt()(this,t),this.paint={"heatmap-radius":30,"heatmap-weight":1,"heatmap-intensity":1,"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],"heatmap-opacity":1},this.layout={visibility:"visible"},Object.assign(this.paint,e),Object.assign(this.layout,i)},Rr=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof t&&(t=i[t]||{}),V.$emit("change-theme",t)},Br=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.locale&&$t(e.locale);var i=e.theme||"light";for(var r in n("ueXZ")("./".concat(i,".scss")),Rr(i),t.use(B.a),t.use(F.a),t.use(D.a),t.use(I.a),t.use(A.a),t.use(M.a),t.use(T.a),t.use(C.a),t.use(w.a),t.use(b.a),t.use(v.a),t.use(y.a),t.use(d.a),t.use(p.a),t.prototype.$message=c.a,t.prototype.$loading=l.a,o)t.component(o[r].name,o[r])};"undefined"!=typeof window&&window.Vue&&Br(window.Vue,{theme:"light"});var Nr=e.default={setTheme:Rr,commontypes:r,utils:a,lang:qt,i18n:Wt,locale:$t,install:Br}},tjlA:function(t,B,e){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=e("H7XF"),o=e("kVK+"),a=e("49sm");function i(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,i){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,i);if("number"!=typeof t)return n(this,t,e,i);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}function n(t,e,i,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,r){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,i):new Uint8Array(e,i,r);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=c(t,e);return t}(t,e,i,r):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!h.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,i),n=(t=s(t,r)).write(e,i);n!==r&&(t=t.slice(0,n));return t}(t,e,i):function(t,e){if(h.isBuffer(e)){var i=0|p(e.length);return 0===(t=s(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):c(t,e);if("Buffer"===e.type&&a(e.data))return c(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(l(e),t=s(t,e<0?0:0|p(e)),!h.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function c(t,e){var i=e.length<0?0:0|p(e.length);t=s(t,i);for(var r=0;r<i;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function f(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return F(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function d(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function m(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=h.from(e,r)),h.isBuffer(e))return 0===e.length?-1:y(t,e,i,r,n);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,r,n){var o,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s/=a=2,l/=2,i/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){var c=-1;for(o=i;o<s;o++)if(u(t,o)===u(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(s<i+l&&(i=s-l),o=i;0<=o;o--){for(var h=!0,p=0;p<l;p++)if(u(t,o+p)!==u(e,p)){h=!1;break}if(h)return o}return-1}function g(t,e,i,r){i=Number(i)||0;var n=t.length-i;r?n<(r=Number(r))&&(r=n):r=n;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[i+a]=s}return a}function v(t,e,i,r){return R(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function _(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function b(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var o,a,s,l,u=t[n],c=null,h=239<u?4:223<u?3:191<u?2:1;if(n+h<=i)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[n+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=t[n+1],a=t[n+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=t[n+1],a=t[n+2],s=t[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),n+=h}return function(t){var e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);var i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=x));return i}(r)}B.Buffer=h,B.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},B.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),B.kMaxLength=i(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,i){return n(null,t,e,i)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,i){return r=null,o=e,a=i,l(n=t),n<=0?s(r,n):void 0!==o?"string"==typeof a?s(r,n).fill(o,a):s(r,n).fill(o):s(r,n);var r,n,o,a},h.allocUnsafe=function(t){return u(null,t)},h.allocUnsafeSlow=function(t){return u(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,r=e.length,n=0,o=Math.min(i,r);n<o;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var i;if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;var r=h.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var o=t[i];if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},h.byteLength=f,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?b(this,0,t):function(t,e,i){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,i);case"utf8":case"utf-8":return b(this,e,i);case"ascii":return w(this,e,i);case"latin1":case"binary":return S(this,e,i);case"base64":return _(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",e=B.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,i,r,n){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(n<=r&&i<=e)return 0;if(n<=r)return-1;if(i<=e)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(r>>>=0),a=(i>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(r,n),u=t.slice(e,i),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},h.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},h.prototype.indexOf=function(t,e,i){return m(this,t,e,i,!0)},h.prototype.lastIndexOf=function(t,e,i){return m(this,t,e,i,!1)},h.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-e;if((void 0===i||n<i)&&(i=n),0<t.length&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o,a,s,l,u,c,h,p,f,d=!1;;)switch(r){case"hex":return g(this,t,e,i);case"utf8":case"utf-8":return p=e,f=i,R(z(t,(h=this).length-p),h,p,f);case"ascii":return v(this,t,e,i);case"latin1":case"binary":return v(this,t,e,i);case"base64":return l=this,u=e,c=i,R(F(t),l,u,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=e,s=i,R(function(t,e){for(var i,r,n,o=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),r=i>>8,n=i%256,o.push(n),o.push(r);return o}(t,(o=this).length-a),o,a,s);default:if(d)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function w(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function S(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function C(t,e,i){var r=t.length;(!e||e<0)&&(e=0),(!i||i<0||r<i)&&(i=r);for(var n="",o=e;o<i;++o)n+=D(t[o]);return n}function E(t,e,i){for(var r=t.slice(e,i),n="",o=0;o<r.length;o+=2)n+=String.fromCharCode(r[o]+256*r[o+1]);return n}function T(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(i<t+e)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,i,r,n,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<e||e<o)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function M(t,e,i,r){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-i,2);n<o;++n)t[i+n]=(e&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function P(t,e,i,r){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-i,4);n<o;++n)t[i+n]=e>>>8*(r?n:3-n)&255}function A(t,e,i,r,n,o){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function L(t,e,i,r,n){return n||A(t,0,i,4),o.write(t,e,i,r,23,4),i+4}function I(t,e,i,r,n){return n||A(t,0,i,8),o.write(t,e,i,r,52,8),i+8}h.prototype.slice=function(t,e){var i,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=h.prototype;else{var n=e-t;i=new h(n,void 0);for(var o=0;o<n;++o)i[o]=this[o+t]}return i},h.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||T(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return r},h.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||T(t,e,this.length);for(var r=this[t+--e],n=1;0<e&&(n*=256);)r+=this[t+--e]*n;return r},h.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||T(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return(n*=128)<=r&&(r-=Math.pow(2,8*e)),r},h.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||T(t,e,this.length);for(var r=e,n=1,o=this[t+--r];0<r&&(n*=256);)o+=this[t+--r]*n;return(n*=128)<=o&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||T(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt16BE=function(t,e){e||T(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},h.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,i,r){(t=+t,e|=0,i|=0,r)||k(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,o=0;for(this[e]=255&t;++o<i&&(n*=256);)this[e+o]=t/n&255;return e+i},h.prototype.writeUIntBE=function(t,e,i,r){(t=+t,e|=0,i|=0,r)||k(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,o=1;for(this[e+n]=255&t;0<=--n&&(o*=256);)this[e+n]=t/o&255;return e+i},h.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e|=0,!r){var n=Math.pow(2,8*i-1);k(this,t,e,i,n-1,-n)}var o=0,a=1,s=0;for(this[e]=255&t;++o<i&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},h.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e|=0,!r){var n=Math.pow(2,8*i-1);k(this,t,e,i,n-1,-n)}var o=i-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},h.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,i){return L(this,t,e,!0,i)},h.prototype.writeFloatBE=function(t,e,i){return L(this,t,e,!1,i)},h.prototype.writeDoubleLE=function(t,e,i){return I(this,t,e,!0,i)},h.prototype.writeDoubleBE=function(t,e,i){return I(this,t,e,!1,i)},h.prototype.copy=function(t,e,i,r){if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),0<r&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);var n,o=r-i;if(this===t&&i<e&&e<r)for(n=o-1;0<=n;--n)t[n+e]=this[n+i];else if(o<1e3||!h.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},h.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var a=h.isBuffer(t)?t:z(new h(t,r).toString()),s=a.length;for(o=0;o<i-e;++o)this[o+e]=a[o%s]}return this};var O=/[^+\/0-9A-Za-z-_]/g;function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var i;e=e||1/0;for(var r=t.length,n=null,o=[],a=0;a<r;++a){if(55295<(i=t.charCodeAt(a))&&i<57344){if(!n){if(56319<i){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(e-=3)&&o.push(239,191,189);continue}n=i;continue}if(i<56320){-1<(e-=3)&&o.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&-1<(e-=3)&&o.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function F(t){return r.toByteArray(function(t){var e;if((t=(e=t,e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(O,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function R(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}}).call(this,e("yLpj"))},uODI:function(t,e,i){},ueXZ:function(t,e,i){var r={"./dark.scss":"tDEs","./light.scss":"CR+5"};function n(t){var e=o(t);return i(e)}function o(t){if(i.o(r,t))return r[t];var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return Object.keys(r)},n.resolve=o,(t.exports=n).id="ueXZ"},vdDi:function(t,e,i){},vjVy:function(t,e,i){},"vk/3":function(t,e,i){},w1NJ:function(t,e){var h="[object Symbol]",p=Object.prototype.toString;function i(t,e){return e<t}function r(t){return t}t.exports=function(t){return t&&t.length?function(t,e,i){for(var r,n,o=-1,a=t.length;++o<a;){var s=t[o],l=e(s);if(null!=l&&(void 0===u?l==l&&"symbol"!=typeof(n=l)&&(!(r=n)||"object"!=typeof r||p.call(n)!=h):i(l,u)))var u=l,c=s}return c}(t,r,i):void 0}},wJiJ:function(t,e,i){t.exports=i("1K8p")},wLtx:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=100)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},100:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"el-collapse",attrs:{role:"tablist","aria-multiselectable":"true"}},[this._t("default")],2)};r._withStripped=!0;var n={name:"ElCollapse",componentName:"ElCollapse",props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this}},watch:{value:function(t){this.activeNames=[].concat(t)}},methods:{setActiveNames:function(t){t=[].concat(t);var e=this.accordion?t[0]:t;this.activeNames=t,this.$emit("input",e),this.$emit("change",e)},handleItemClick:function(t){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==t.name?t.name:"");else{var e=this.activeNames.slice(0),i=e.indexOf(t.name);-1<i?e.splice(i,1):e.push(t.name),this.setActiveNames(e)}}},created:function(){this.$on("item-click",this.handleItemClick)}},o=i(0),a=Object(o.a)(n,r,[],!1,null,null,null);a.options.__file="packages/collapse/src/collapse.vue";var s=a.exports;s.install=function(t){t.component(s.name,s)};e.default=s}})},woQv:function(t,e,i){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=91)}({0:function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=i,u._compiled=!0),r&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=l):n&&(l=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}i.d(e,"a",function(){return r})},91:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-progress",class:["el-progress--"+t.type,t.status?"is-"+t.status:"",{"el-progress--without-text":!t.showText,"el-progress--text-inside":t.textInside}],attrs:{role:"progressbar","aria-valuenow":t.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===t.type?i("div",{staticClass:"el-progress-bar"},[i("div",{staticClass:"el-progress-bar__outer",style:{height:t.strokeWidth+"px"}},[i("div",{staticClass:"el-progress-bar__inner",style:t.barStyle},[t.showText&&t.textInside?i("div",{staticClass:"el-progress-bar__innerText"},[t._v(t._s(t.percentage)+"%")]):t._e()])])]):i("div",{staticClass:"el-progress-circle",style:{height:t.width+"px",width:t.width+"px"}},[i("svg",{attrs:{viewBox:"0 0 100 100"}},[i("path",{staticClass:"el-progress-circle__track",attrs:{d:t.trackPath,stroke:"#e5e9f2","stroke-width":t.relativeStrokeWidth,fill:"none"}}),i("path",{staticClass:"el-progress-circle__path",style:t.circlePathStyle,attrs:{d:t.trackPath,"stroke-linecap":"round",stroke:t.stroke,"stroke-width":t.relativeStrokeWidth,fill:"none"}})])]),t.showText&&!t.textInside?i("div",{staticClass:"el-progress__text",style:{fontSize:t.progressTextSize+"px"}},[t.status?["text"===t.status?t._t("default"):i("i",{class:t.iconClass})]:[t._v(t._s(t.percentage)+"%")]],2):t._e()])};r._withStripped=!0;var n={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(t){return-1<["line","circle"].indexOf(t)}},percentage:{type:Number,default:0,required:!0,validator:function(t){return 0<=t&&t<=100}},status:{type:String,validator:function(t){return-1<["text","success","exception"].indexOf(t)}},strokeWidth:{type:Number,default:6},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:String,default:""}},computed:{barStyle:function(){var t={};return t.width=this.percentage+"%",t.backgroundColor=this.color,t},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},trackPath:function(){var t=parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10);return"M 50 50 m 0 -"+t+" a "+t+" "+t+" 0 1 1 0 "+2*t+" a "+t+" "+t+" 0 1 1 0 -"+2*t},perimeter:function(){var t=50-parseFloat(this.relativeStrokeWidth)/2;return 2*Math.PI*t},circlePathStyle:function(){var t=this.perimeter;return{strokeDasharray:t+"px,"+t+"px",strokeDashoffset:(1-this.percentage/100)*t+"px",transition:"stroke-dashoffset 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var t=void 0;if(this.color)t=this.color;else switch(this.status){case"success":t="#13ce66";break;case"exception":t="#ff4949";break;default:t="#20a0ff"}return t},iconClass:function(){return"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2}}},o=i(0),a=Object(o.a)(n,r,[],!1,null,null,null);a.options.__file="packages/progress/src/progress.vue";var s=a.exports;s.install=function(t){t.component(s.name,s)};e.default=s}})},wq4j:function(t,e,i){t.exports=i("43KI").PassThrough},ws4L:function(t,e,i){"use strict";var r=i("4ycU");i.n(r).a},wsxZ:function(t,e){t.exports=function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=116)}({116:function(t,e,i){"use strict";i.r(e);var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){for(var t=this.$parent;t&&"ElRow"!==t.$options.componentName;)t=t.$parent;return t?t.gutter:0}},render:function(t){var r=this,n=[],e={};return this.gutter&&(e.paddingLeft=this.gutter/2+"px",e.paddingRight=e.paddingLeft),["span","offset","pull","push"].forEach(function(t){(r[t]||0===r[t])&&n.push("span"!==t?"el-col-"+t+"-"+r[t]:"el-col-"+r[t])}),["xs","sm","md","lg","xl"].forEach(function(e){if("number"==typeof r[e])n.push("el-col-"+e+"-"+r[e]);else if("object"===o(r[e])){var i=r[e];Object.keys(i).forEach(function(t){n.push("span"!==t?"el-col-"+e+"-"+t+"-"+i[t]:"el-col-"+e+"-"+i[t])})}}),t(this.tag,{class:["el-col",n],style:e},this.$slots.default)},install:function(t){t.component(r.name,r)}};e.default=r}})},xRo1:function(t,e,i){var r=i("hE+I"),n=i("B4q0"),o=i("zvmt"),a=i("STtz");t.exports={xml2js:r,xml2json:n,js2xml:o,json2xml:a}},xWqt:function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:300,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(!t||!e)throw new Error("instance & callback is required");var n=!1,o=function(){n||(n=!0,e&&e.apply(null,arguments))};r?t.$once("after-leave",o):t.$on("after-leave",o),setTimeout(function(){o()},i+100)}},yLpj:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},zT9C:function(t,Kt,e){(function(t,e){var r="__lodash_hash_undefined__",i=9007199254740991,w="[object Arguments]",S="[object Boolean]",C="[object Date]",E="[object Function]",T="[object GeneratorFunction]",k="[object Map]",M="[object Number]",P="[object Object]",n="[object Promise]",A="[object RegExp]",L="[object Set]",I="[object String]",O="[object Symbol]",o="[object WeakMap]",D="[object ArrayBuffer]",z="[object DataView]",F="[object Float32Array]",R="[object Float64Array]",B="[object Int8Array]",N="[object Int16Array]",j="[object Int32Array]",V="[object Uint8Array]",U="[object Uint8ClampedArray]",$="[object Uint16Array]",q="[object Uint32Array]",W=/\w*$/,a=/^\[object .+?Constructor\]$/,s=/^(?:0|[1-9]\d*)$/,G={};G[w]=G["[object Array]"]=G[D]=G[z]=G[S]=G[C]=G[F]=G[R]=G[B]=G[N]=G[j]=G[k]=G[M]=G[P]=G[A]=G[L]=G[I]=G[O]=G[V]=G[U]=G[$]=G[q]=!0,G["[object Error]"]=G[E]=G[o]=!1;var l="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),h=Kt&&!Kt.nodeType&&Kt,p=h&&"object"==typeof e&&e&&!e.nodeType&&e,f=p&&p.exports===h;function H(t,e){return t.set(e[0],e[1]),t}function Z(t,e){return t.add(e),t}function X(t,e,i,r){var n=-1,o=t?t.length:0;for(r&&o&&(i=t[++n]);++n<o;)i=e(i,t[n],n,t);return i}function K(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function Y(t){var i=-1,r=Array(t.size);return t.forEach(function(t,e){r[++i]=[e,t]}),r}function d(e,i){return function(t){return e(i(t))}}function J(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}var m,y=Array.prototype,g=Function.prototype,v=Object.prototype,_=c["__core-js_shared__"],b=(m=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",x=g.toString,Q=v.hasOwnProperty,tt=v.toString,et=RegExp("^"+x.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=f?c.Buffer:void 0,rt=c.Symbol,nt=c.Uint8Array,ot=d(Object.getPrototypeOf,Object),at=Object.create,st=v.propertyIsEnumerable,lt=y.splice,ut=Object.getOwnPropertySymbols,ct=it?it.isBuffer:void 0,ht=d(Object.keys,Object),pt=Rt(c,"DataView"),ft=Rt(c,"Map"),dt=Rt(c,"Promise"),mt=Rt(c,"Set"),yt=Rt(c,"WeakMap"),gt=Rt(Object,"create"),vt=Ut(pt),_t=Ut(ft),bt=Ut(dt),xt=Ut(mt),wt=Ut(yt),St=rt?rt.prototype:void 0,Ct=St?St.valueOf:void 0;function Et(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Tt(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function kt(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Mt(t){this.__data__=new Tt(t)}function Pt(t,e){var i,r,n,o=qt(t)||(n=r=i=t)&&"object"==typeof n&&Wt(r)&&Q.call(i,"callee")&&(!st.call(i,"callee")||tt.call(i)==w)?function(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}(t.length,String):[],a=o.length,s=!!a;for(var l in t)!e&&!Q.call(t,l)||s&&("length"==l||jt(l,a))||o.push(l);return o}function At(t,e,i){var r=t[e];Q.call(t,e)&&$t(r,i)&&(void 0!==i||e in t)||(t[e]=i)}function Lt(t,e){for(var i=t.length;i--;)if($t(t[i][0],e))return i;return-1}function It(i,r,n,o,t,e,a){var s;if(o&&(s=e?o(i,t,e,a):o(i)),void 0!==s)return s;if(!Zt(i))return i;var l,u,c,h,p,f,d=qt(i);if(d){if(s=function(t){var e=t.length,i=t.constructor(e);e&&"string"==typeof t[0]&&Q.call(t,"index")&&(i.index=t.index,i.input=t.input);return i}(i),!r)return function(t,e){var i=-1,r=t.length;e||(e=Array(r));for(;++i<r;)e[i]=t[i];return e}(i,s)}else{var m=Nt(i),y=m==E||m==T;if(Gt(i))return function(t,e){if(e)return t.slice();var i=new t.constructor(t.length);return t.copy(i),i}(i,r);if(m==P||m==w||y&&!e){if(K(i))return e?i:{};if(s="function"!=typeof(p=y?{}:i).constructor||Vt(p)?{}:Zt(f=ot(p))?at(f):{},!r)return h=l=i,u=(c=s)&&zt(h,Xt(h),c),zt(l,Bt(l),u)}else{if(!G[m])return e?i:{};s=function(t,e,i,r){var n=t.constructor;switch(e){case D:return Dt(t);case S:case C:return new n(+t);case z:return d=t,m=r?Dt(d.buffer):d.buffer,new d.constructor(m,d.byteOffset,d.byteLength);case F:case R:case B:case N:case j:case V:case U:case $:case q:return p=t,f=r?Dt(p.buffer):p.buffer,new p.constructor(f,p.byteOffset,p.length);case k:return c=t,h=i,X(r?h(Y(c),!0):Y(c),H,new c.constructor);case M:case I:return new n(t);case A:return(u=new(l=t).constructor(l.source,W.exec(l))).lastIndex=l.lastIndex,u;case L:return a=t,s=i,X(r?s(J(a),!0):J(a),Z,new a.constructor);case O:return o=t,Ct?Object(Ct.call(o)):{}}var o;var a,s;var l,u;var c,h;var p,f;var d,m}(i,m,It,r)}}a||(a=new Mt);var g,v,_,b=a.get(i);if(b)return b;if(a.set(i,s),!d)var x=n?(v=Bt,_=Xt(g=i),qt(g)?_:function(t,e){for(var i=-1,r=e.length,n=t.length;++i<r;)t[n+i]=e[i];return t}(_,v(g))):Xt(i);return function(t,e){for(var i=-1,r=t?t.length:0;++i<r&&!1!==e(t[i],i,t););}(x||i,function(t,e){x&&(t=i[e=t]),At(s,e,It(t,r,n,o,e,i,a))}),s}function Ot(t){return!(!Zt(t)||(e=t,b&&b in e))&&(Ht(t)||K(t)?et:a).test(Ut(t));var e}function Dt(t){var e=new t.constructor(t.byteLength);return new nt(e).set(new nt(t)),e}function zt(t,e,i,r){i||(i={});for(var n=-1,o=e.length;++n<o;){var a=e[n],s=r?r(i[a],t[a],a,i,t):void 0;At(i,a,void 0===s?t[a]:s)}return i}function Ft(t,e){var i,r,n=t.__data__;return("string"==(r=typeof(i=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?n["string"==typeof e?"string":"hash"]:n.map}function Rt(t,e){var i,r,n=(r=e,null==(i=t)?void 0:i[r]);return Ot(n)?n:void 0}Et.prototype.clear=function(){this.__data__=gt?gt(null):{}},Et.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Et.prototype.get=function(t){var e=this.__data__;if(gt){var i=e[t];return i===r?void 0:i}return Q.call(e,t)?e[t]:void 0},Et.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:Q.call(e,t)},Et.prototype.set=function(t,e){return this.__data__[t]=gt&&void 0===e?r:e,this},Tt.prototype.clear=function(){this.__data__=[]},Tt.prototype.delete=function(t){var e=this.__data__,i=Lt(e,t);return!(i<0||(i==e.length-1?e.pop():lt.call(e,i,1),0))},Tt.prototype.get=function(t){var e=this.__data__,i=Lt(e,t);return i<0?void 0:e[i][1]},Tt.prototype.has=function(t){return-1<Lt(this.__data__,t)},Tt.prototype.set=function(t,e){var i=this.__data__,r=Lt(i,t);return r<0?i.push([t,e]):i[r][1]=e,this},kt.prototype.clear=function(){this.__data__={hash:new Et,map:new(ft||Tt),string:new Et}},kt.prototype.delete=function(t){return Ft(this,t).delete(t)},kt.prototype.get=function(t){return Ft(this,t).get(t)},kt.prototype.has=function(t){return Ft(this,t).has(t)},kt.prototype.set=function(t,e){return Ft(this,t).set(t,e),this},Mt.prototype.clear=function(){this.__data__=new Tt},Mt.prototype.delete=function(t){return this.__data__.delete(t)},Mt.prototype.get=function(t){return this.__data__.get(t)},Mt.prototype.has=function(t){return this.__data__.has(t)},Mt.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Tt){var r=i.__data__;if(!ft||r.length<199)return r.push([t,e]),this;i=this.__data__=new kt(r)}return i.set(t,e),this};var Bt=ut?d(ut,Object):function(){return[]},Nt=function(t){return tt.call(t)};function jt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||s.test(t))&&-1<t&&t%1==0&&t<e}function Vt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||v)}function Ut(t){if(null!=t){try{return x.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $t(t,e){return t===e||t!=t&&e!=e}(pt&&Nt(new pt(new ArrayBuffer(1)))!=z||ft&&Nt(new ft)!=k||dt&&Nt(dt.resolve())!=n||mt&&Nt(new mt)!=L||yt&&Nt(new yt)!=o)&&(Nt=function(t){var e=tt.call(t),i=e==P?t.constructor:void 0,r=i?Ut(i):void 0;if(r)switch(r){case vt:return z;case _t:return k;case bt:return n;case xt:return L;case wt:return o}return e});var qt=Array.isArray;function Wt(t){return null!=t&&("number"==typeof(e=t.length)&&-1<e&&e%1==0&&e<=i)&&!Ht(t);var e}var Gt=ct||function(){return!1};function Ht(t){var e=Zt(t)?tt.call(t):"";return e==E||e==T}function Zt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Xt(t){return Wt(t)?Pt(t):function(t){if(!Vt(t))return ht(t);var e=[];for(var i in Object(t))Q.call(t,i)&&"constructor"!=i&&e.push(i);return e}(t)}e.exports=function(t){return It(t,!0,!0)}}).call(this,e("yLpj"),e("YuTi")(t))},zvmt:function(t,e,i){var l,u,o=i("lsHq"),c=i("mxIc").isArray;function h(t,e,i){return(!i&&t.spaces?"\n":"")+Array(e+1).join(t.spaces)}function p(t,e,i){if(e.ignoreAttributes)return"";"attributesFn"in e&&(t=e.attributesFn(t,u,l));var r,n,o,a,s=[];for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(a=e.noQuotesForNativeAttributes&&"string"!=typeof t[r]?"":'"',n=(n=""+t[r]).replace(/"/g,"&quot;"),o="attributeNameFn"in e?e.attributeNameFn(r,n,u,l):r,s.push(e.spaces&&e.indentAttributes?h(e,i+1,!1):" "),s.push(o+"="+a+("attributeValueFn"in e?e.attributeValueFn(n,r,u,l):n)+a));return t&&Object.keys(t).length&&e.spaces&&e.indentAttributes&&s.push(h(e,i,!1)),s.join("")}function f(t,e,i){return l=t,u="xml",e.ignoreDeclaration?"":"<?xml"+p(t[e.attributesKey],e,i)+"?>"}function d(t,e,i){if(e.ignoreInstruction)return"";var r;for(r in t)if(t.hasOwnProperty(r))break;var n="instructionNameFn"in e?e.instructionNameFn(r,t[r],u,l):r;if("object"==typeof t[r])return"<?"+(u=n)+p((l=t)[r][e.attributesKey],e,i)+"?>";var o=t[r]?t[r]:"";return"instructionFn"in e&&(o=e.instructionFn(o,r,u,l)),"<?"+n+(o?" "+o:"")+"?>"}function m(t,e){return e.ignoreComment?"":"\x3c!--"+("commentFn"in e?e.commentFn(t,u,l):t)+"--\x3e"}function y(t,e){return e.ignoreCdata?"":"<![CDATA["+("cdataFn"in e?e.cdataFn(t,u,l):t)+"]]>"}function g(t,e){return e.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in e?e.doctypeFn(t,u,l):t)+">"}function v(t,e){return e.ignoreText?"":(t=(t=(t=""+t).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in e?e.textFn(t,u,l):t)}function s(t,n,o,a){return t.reduce(function(t,e){var i=h(n,o,a&&!t);switch(e.type){case"element":return t+i+function(t,e,i){u=(l=t).name;var r=[],n="elementNameFn"in e?e.elementNameFn(t.name,t):t.name;r.push("<"+n),t[e.attributesKey]&&r.push(p(t[e.attributesKey],e,i));var o=t[e.elementsKey]&&t[e.elementsKey].length||t[e.attributesKey]&&"preserve"===t[e.attributesKey]["xml:space"];return o||(o="fullTagEmptyElementFn"in e?e.fullTagEmptyElementFn(t.name,t):e.fullTagEmptyElement),o?(r.push(">"),t[e.elementsKey]&&t[e.elementsKey].length&&(r.push(s(t[e.elementsKey],e,i+1)),u=(l=t).name),r.push(e.spaces&&function(t,e){var i;if(t.elements&&t.elements.length)for(i=0;i<t.elements.length;++i)switch(t.elements[i][e.typeKey]){case"text":if(e.indentText)return!0;break;case"cdata":if(e.indentCdata)return!0;break;case"instruction":if(e.indentInstruction)return!0;break;case"doctype":case"comment":case"element":default:return!0}return!1}(t,e)?"\n"+Array(i+1).join(e.spaces):""),r.push("</"+n+">")):r.push("/>"),r.join("")}(e,n,o);case"comment":return t+i+m(e[n.commentKey],n);case"doctype":return t+i+g(e[n.doctypeKey],n);case"cdata":return t+(n.indentCdata?i:"")+y(e[n.cdataKey],n);case"text":return t+(n.indentText?i:"")+v(e[n.textKey],n);case"instruction":var r={};return r[e[n.nameKey]]=e[n.attributesKey]?e:e[n.instructionKey],t+(n.indentInstruction?i:"")+d(r,n,o)}},"")}function _(t,e,i){var r;for(r in t)if(t.hasOwnProperty(r))switch(r){case e.parentKey:case e.attributesKey:break;case e.textKey:if(e.indentText||i)return!0;break;case e.cdataKey:if(e.indentCdata||i)return!0;break;case e.instructionKey:if(e.indentInstruction||i)return!0;break;case e.doctypeKey:case e.commentKey:default:return!0}return!1}function b(t,e,i,r,n){l=t,u=e;var o="elementNameFn"in i?i.elementNameFn(e,t):e;if(null==t)return"fullTagEmptyElementFn"in i&&i.fullTagEmptyElementFn(e,t)||i.fullTagEmptyElement?"<"+o+"></"+o+">":"<"+o+"/>";var a=[];if(e){if(a.push("<"+o),"object"!=typeof t)return a.push(">"+v(t,i)+"</"+o+">"),a.join("");t[i.attributesKey]&&a.push(p(t[i.attributesKey],i,r));var s=_(t,i,!0)||t[i.attributesKey]&&"preserve"===t[i.attributesKey]["xml:space"];if(s||(s="fullTagEmptyElementFn"in i?i.fullTagEmptyElementFn(e,t):i.fullTagEmptyElement),!s)return a.push("/>"),a.join("");a.push(">")}return a.push(x(t,i,r+1,!1)),l=t,(u=e)&&a.push((n?h(i,r,!1):"")+"</"+o+">"),a.join("")}function x(t,e,i,r){var n,o,a,s=[];for(o in t)if(t.hasOwnProperty(o))for(a=c(t[o])?t[o]:[t[o]],n=0;n<a.length;++n){switch(o){case e.declarationKey:s.push(f(a[n],e,i));break;case e.instructionKey:s.push((e.indentInstruction?h(e,i,r):"")+d(a[n],e,i));break;case e.attributesKey:case e.parentKey:break;case e.textKey:s.push((e.indentText?h(e,i,r):"")+v(a[n],e));break;case e.cdataKey:s.push((e.indentCdata?h(e,i,r):"")+y(a[n],e));break;case e.doctypeKey:s.push(h(e,i,r)+g(a[n],e));break;case e.commentKey:s.push(h(e,i,r)+m(a[n],e));break;default:s.push(h(e,i,r)+b(a[n],o,e,i,_(a[n],e)))}r=r&&!s.length}return s.join("")}t.exports=function(t,e){var i,r;i=e,r=o.copyOptions(i),o.ensureFlagExists("ignoreDeclaration",r),o.ensureFlagExists("ignoreInstruction",r),o.ensureFlagExists("ignoreAttributes",r),o.ensureFlagExists("ignoreText",r),o.ensureFlagExists("ignoreComment",r),o.ensureFlagExists("ignoreCdata",r),o.ensureFlagExists("ignoreDoctype",r),o.ensureFlagExists("compact",r),o.ensureFlagExists("indentText",r),o.ensureFlagExists("indentCdata",r),o.ensureFlagExists("indentAttributes",r),o.ensureFlagExists("indentInstruction",r),o.ensureFlagExists("fullTagEmptyElement",r),o.ensureFlagExists("noQuotesForNativeAttributes",r),o.ensureSpacesExists(r),"number"==typeof r.spaces&&(r.spaces=Array(r.spaces+1).join(" ")),o.ensureKeyExists("declaration",r),o.ensureKeyExists("instruction",r),o.ensureKeyExists("attributes",r),o.ensureKeyExists("text",r),o.ensureKeyExists("comment",r),o.ensureKeyExists("cdata",r),o.ensureKeyExists("doctype",r),o.ensureKeyExists("type",r),o.ensureKeyExists("name",r),o.ensureKeyExists("elements",r),o.checkFnExists("doctype",r),o.checkFnExists("instruction",r),o.checkFnExists("cdata",r),o.checkFnExists("comment",r),o.checkFnExists("text",r),o.checkFnExists("instructionName",r),o.checkFnExists("elementName",r),o.checkFnExists("attributeName",r),o.checkFnExists("attributeValue",r),o.checkFnExists("attributes",r),o.checkFnExists("fullTagEmptyElement",r);var n=[];return l=t,u="_root_",(e=r).compact?n.push(x(t,e,0,!0)):(t[e.declarationKey]&&n.push(f(t[e.declarationKey],e,0)),t[e.elementsKey]&&t[e.elementsKey].length&&n.push(s(t[e.elementsKey],e,0,!n.length))),n.join("")}}}).default});