<!DOCTYPE html>
<html>
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
		<title>test</title>
</head>
<script src="./jquery.js"></script>
<script>
    var isWinRT = (typeof Windows === "undefined") ? false : true;
    function init(){
        window.iSuperMap=window.iSuperMap||{};
        iSuperMap.JsApi=iSuperMap.JsApi||{};

        var json = $.getJSON("menu.json",function(data){
            var jsObject = eval(data);

            var jsFile = [];
            var jsFileName = [];

            for(var i = 0 ;i<jsObject.length;i++){
                var obj1 = jsObject[i];

                if(obj1.child){
                    for (var j = 0;j< obj1.child.length;j++){
                        var obj2 = obj1.child[j];

                        if(obj2.child){
                            for (var k = 0;k<obj2.child.length;k++){
                                var obj3 = obj2.child[k];

                                if(obj3.child){
                                    for(var l = 0;l<obj3.child.length;l++){
                                        var obj4 = obj3.child[l];

                                        if(obj4.newAddress){
                                            jsFile.push(obj4.newAddress);
                                            jsFileName.push(obj4.name);
                                        }
                                    }
                                }
                                if(obj3.newAddress){
                                    jsFile.push(obj3.newAddress);
                                    jsFileName.push(obj3.name);
                                }
                            }
                        }
                        else{
                            jsFile.push(obj2.newAddress);
                            jsFileName.push(obj2.name);
                        }
                    }
                }
                else{
                    jsFile.push(obj1.newAddress);
                    jsFileName.push(obj1.name);
                }
            }

            for(var x = 0; x < jsFile.length; x++){
                inputScript(jsFile[x]);
            }

            setTimeout(function(){
                var sss = 0;
                for(var y = 0; y < jsFileName.length; y++){
                    console.log(typeof(iSuperMap.JsApi[jsFileName[y]]) === "undefined");
                    if(typeof(iSuperMap.JsApi[jsFileName[y]]) === "undefined"){
                        sss++;
                        document.getElementById("xxx").innerHTML += jsFile[y] + "<br/>";
                    }
                }

                document.getElementById("xxx").innerHTML += "<hr/>";
                document.getElementById("xxx").innerHTML += "测试结果:<br/>";

                if(sss > 0){
                    document.getElementById("xxx").innerHTML += "fail：" + sss + "个<br/>";
                }else{
                    document.getElementById("xxx").innerHTML += "passAll" + "<br/>"
                }
            },3000)
        });
    }

   function inputScript(inc){
       var script = document.createElement("script");
       script.src = "./" + inc;
       document.getElementsByTagName("HEAD")[0].appendChild(script);
    }
</script>
<body onload="init()">
<div id="xxx">错误列表：<hr/></div>
</body>
</html>