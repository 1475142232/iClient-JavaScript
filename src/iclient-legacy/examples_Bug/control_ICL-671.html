<!DOCTYPE>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Elements Layer 扩展</title>
    <style type="text/css">
        body{
            margin: 0;
            overflow: hidden;
            background: #fff;
        }
        #map{
            position: relative;

            height: 520px;
            border:1px solid #3473b7;
        }
    </style>
    <script src='../libs/SuperMap.Include.js'></script>
    <script type="text/javascript">
        var map, layer, elementsLayer,myDom, lonlat = new SuperMap.LonLat(11733502.481499, 4614406.969325),
                host = "http://localhost:8090",
                url="http://localhost:8090/iserver/services/map-china400/rest/maps/China",
				selectLayerOne, selectLayerTwo, selectFeature;

        function init(){
            map = new SuperMap.Map("map",{controls: [
                new SuperMap.Control.LayerSwitcher(),
                new SuperMap.Control.Navigation({
                    dragPanOptions: {
                        enableKinetic: true
                    }
                })
            ]});

            layer = new SuperMap.Layer.TiledDynamicRESTLayer("World", url, {transparent: true, cacheEnabled: true}, {maxResolution:"auto"});
			
			selectLayerOne = new SuperMap.Layer.Vector("layerone", {
				rendererOptions: {zIndexing: true},
				renderers: ["SVG"]
			});			
			
			selectLayerTwo = new SuperMap.Layer.Vector("layertwo", {
				rendererOptions: {zIndexing: true},
				renderers: ["SVG"]
			});

            var dragFeature = new SuperMap.Control.DragFeature(selectLayerOne);
            map.addControl(dragFeature);
            dragFeature.activate();
			
//			selectFeature = new SuperMap.Control.SelectFeature([selectLayerOne, selectLayerTwo], {onSelect:onFeatureSelect,onUnselect:onUnFeatureSelect, repeat:true,
//			hover:false});
//            map.addControl(selectFeature);
//            selectFeature.activate();
			
            layer.events.on({"layerInitialized":addLayer});
        }

        function addLayer() {
            map.addLayers([layer, selectLayerTwo, selectLayerOne]);
            map.setCenter(lonlat, 3);

            addPicture();
			
			map.updateSize();
        }

        function onFeatureSelect() {
            alert('1234567890');
        }

        function onUnFeatureSelect() {
            //alert('release');
        }

        function addPicture() {
            var geo1 = new SuperMap.Geometry.Point(11733502.481499, 4614406.969325);

            var picStyle = {
                graphic: true,
           graphicWidth: 48,
          graphicHeight: 48,
        externalGraphic: "images/markerflag.png",
                  label: "layerone",
             labelAlign: "cm",
           labelYOffset: -25,
              fontColor: "purple",
               fontSize: '13px'
            };

            var feature1 = new SuperMap.Feature.Vector();
            feature1.style = picStyle;
            feature1.geometry = geo1;
            selectLayerOne.addFeatures(feature1);

            var geo2 = new SuperMap.Geometry.Point(13763502.481499, 4417406.969325);
            var picStyle2 = {
                graphic: true,
           graphicWidth: 48,
          graphicHeight: 48,
        externalGraphic: "images/markerflag.png",
                  label: "layertwo",
             labelAlign: "cm",
           labelYOffset: -25,
              fontColor: "purple",
               fontSize: '13px'
            };

            var feature2 = new SuperMap.Feature.Vector();
            feature2.style = picStyle2;
            feature2.geometry = geo2;
            selectLayerTwo.addFeatures(feature2);

        }
    </script>
</head>
<body onload="init()">
<div>
    <div id="yyy" style="height: 20px;width: 20px">hh</div>
    <div id="yy" style="height: 20px;width: 20px">hh</div>
    <div id="xx" style="height: 20px;width: 20px">hh</div>
    <div id="cc" style="height: 20px;width: 20px">hh</div>
</div>

<div id="map"></div>
</body>
</html>
