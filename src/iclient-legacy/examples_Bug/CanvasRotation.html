<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CanvasRotation</title>
    <style type="text/css">
        body{
            margin: 0;
            overflow: hidden;
            background: #fff;
        }
        #map{
            position: relative;
            height: 520px;
            border:1px solid #3473b7;
        }
        #toolbar{
            position: relative;
            height: 33px;
            padding-top:5;
        }
    </style>
    <script src = '../libs/SuperMap.Include.js'></script>
    <script type="text/javascript">
        var map,layer,pointVector,dataAdded=false,
                host = document.location.toString().match(/file:\/\//) ? "http://localhost:8090" : 'http://' + document.location.host;
        url = host + "/iserver/services/map-world/rest/maps/World";
        function init()
        {
            map = new SuperMap.Map("map",{controls:[
                new SuperMap.Control.Zoom() ,
                new SuperMap.Control.Navigation() ,
                new SuperMap.Control.LayerSwitcher()
            ]});
            layer= new SuperMap.Layer.TiledDynamicRESTLayer("World", url, null,{maxResolution:"auto"});
            layer.events.on({"layerInitialized":addLayer});
            vector = new SuperMap.Layer.Vector("vector",{renderers:["Canvas"]});
            map.addLayer(vector);
            addData();
        }

        function addLayer(){

            map.addLayers([layer]);
            //显示地图范围
            map.setCenter(new SuperMap.LonLat(0, 0), 0);
        }

        function addData()
        {
            if(!dataAdded)
            {
                vector.removeAllFeatures();
                //点对象
                var point= new SuperMap.Geometry.Point(0,0);
                var pointVector = new SuperMap.Feature.Vector(point);
                pointVector.style={
                    pointRadius:16,
                    graphicXOffset:-16,
                    graphicYOffset:-32,
                    externalGraphic:"./images/markerbig_select.png",
                    rotation:90
                };

                var pointVector1 = new SuperMap.Feature.Vector(new SuperMap.Geometry.Point(0,0));
                pointVector1.style={
                    fillColor:"red",
                    strokeColor:"yellow",
                    pointRadius:6
                };
                vector.addFeatures([pointVector,pointVector1]);
                dataAdded=true;
            } else{
                alert("数据已加载。");
            }
        }

        function removeData()
        {        
            dataAdded =false;
            vector.removeAllFeatures();
            vector.refresh();
        }
    </script>
</head>
<body onload="init()" >
<div id="toolbar">
    <input type="button" value ="加载数据"onclick="addData()"/>
    <input type="button" value ="移除数据"onclick="removeData()"/>
</div>
<div id="map"></div>

</body>
</html>